{"version":3,"sources":["../../../node_modules/lodash/_apply.js","../../../node_modules/lodash/identity.js","../../../node_modules/lodash/_overRest.js","../../../node_modules/lodash/constant.js","../../../node_modules/lodash/_freeGlobal.js","../../../node_modules/lodash/_root.js","../../../node_modules/lodash/_Symbol.js","../../../node_modules/lodash/_getRawTag.js","../../../node_modules/lodash/_objectToString.js","../../../node_modules/lodash/_baseGetTag.js","../../../node_modules/lodash/isObject.js","../../../node_modules/lodash/isFunction.js","../../../node_modules/lodash/_coreJsData.js","../../../node_modules/lodash/_isMasked.js","../../../node_modules/lodash/_toSource.js","../../../node_modules/lodash/_baseIsNative.js","../../../node_modules/lodash/_getValue.js","../../../node_modules/lodash/_getNative.js","../../../node_modules/lodash/_defineProperty.js","../../../node_modules/lodash/_baseSetToString.js","../../../node_modules/lodash/_shortOut.js","../../../node_modules/lodash/_setToString.js","../../../node_modules/lodash/_baseRest.js","../../../node_modules/lodash/_listCacheClear.js","../../../node_modules/lodash/eq.js","../../../node_modules/lodash/_assocIndexOf.js","../../../node_modules/lodash/_listCacheDelete.js","../../../node_modules/lodash/_listCacheGet.js","../../../node_modules/lodash/_listCacheHas.js","../../../node_modules/lodash/_listCacheSet.js","../../../node_modules/lodash/_ListCache.js","../../../node_modules/lodash/_stackClear.js","../../../node_modules/lodash/_stackDelete.js","../../../node_modules/lodash/_stackGet.js","../../../node_modules/lodash/_stackHas.js","../../../node_modules/lodash/_Map.js","../../../node_modules/lodash/_nativeCreate.js","../../../node_modules/lodash/_hashClear.js","../../../node_modules/lodash/_hashDelete.js","../../../node_modules/lodash/_hashGet.js","../../../node_modules/lodash/_hashHas.js","../../../node_modules/lodash/_hashSet.js","../../../node_modules/lodash/_Hash.js","../../../node_modules/lodash/_mapCacheClear.js","../../../node_modules/lodash/_isKeyable.js","../../../node_modules/lodash/_getMapData.js","../../../node_modules/lodash/_mapCacheDelete.js","../../../node_modules/lodash/_mapCacheGet.js","../../../node_modules/lodash/_mapCacheHas.js","../../../node_modules/lodash/_mapCacheSet.js","../../../node_modules/lodash/_MapCache.js","../../../node_modules/lodash/_stackSet.js","../../../node_modules/lodash/_Stack.js","../../../node_modules/lodash/_baseAssignValue.js","../../../node_modules/lodash/_assignMergeValue.js","../../../node_modules/lodash/_createBaseFor.js","../../../node_modules/lodash/_baseFor.js","../../../node_modules/lodash/_cloneBuffer.js","../../../node_modules/lodash/_Uint8Array.js","../../../node_modules/lodash/_cloneArrayBuffer.js","../../../node_modules/lodash/_cloneTypedArray.js","../../../node_modules/lodash/_copyArray.js","../../../node_modules/lodash/_baseCreate.js","../../../node_modules/lodash/_overArg.js","../../../node_modules/lodash/_getPrototype.js","../../../node_modules/lodash/_isPrototype.js","../../../node_modules/lodash/_initCloneObject.js","../../../node_modules/lodash/isObjectLike.js","../../../node_modules/lodash/_baseIsArguments.js","../../../node_modules/lodash/isArguments.js","../../../node_modules/lodash/isArray.js","../../../node_modules/lodash/isLength.js","../../../node_modules/lodash/isArrayLike.js","../../../node_modules/lodash/isArrayLikeObject.js","../../../node_modules/lodash/stubFalse.js","../../../node_modules/lodash/isBuffer.js","../../../node_modules/lodash/isPlainObject.js","../../../node_modules/lodash/_baseIsTypedArray.js","../../../node_modules/lodash/_baseUnary.js","../../../node_modules/lodash/_nodeUtil.js","../../../node_modules/lodash/isTypedArray.js","../../../node_modules/lodash/_safeGet.js","../../../node_modules/lodash/_assignValue.js","../../../node_modules/lodash/_copyObject.js","../../../node_modules/lodash/_baseTimes.js","../../../node_modules/lodash/_isIndex.js","../../../node_modules/lodash/_arrayLikeKeys.js","../../../node_modules/lodash/_nativeKeysIn.js","../../../node_modules/lodash/_baseKeysIn.js","../../../node_modules/lodash/keysIn.js","../../../node_modules/lodash/toPlainObject.js","../../../node_modules/lodash/_baseMergeDeep.js","../../../node_modules/lodash/_baseMerge.js","../../../node_modules/lodash/_customDefaultsMerge.js","../../../node_modules/lodash/_isIterateeCall.js","../../../node_modules/lodash/_createAssigner.js","../../../node_modules/lodash/mergeWith.js","../../../node_modules/lodash/defaultsDeep.js","../../assets/scripts/editor/config.js","../../assets/scripts/animation/shaders/noise.fs","../../assets/scripts/animation/shaders/noise.vs","../../assets/scripts/animation/animation.js","../../../node_modules/vue/dist/vue.runtime.esm.js","../../../node_modules/tslib/tslib.es6.js","../src/constants.ts","../src/assert.ts","../src/crypt.ts","../src/deepCopy.ts","../src/deferred.ts","../src/environment.ts","../src/errors.ts","../src/json.ts","../src/jwt.ts","../src/obj.ts","../src/query.ts","../src/sha1.ts","../src/subscribe.ts","../src/validation.ts","../src/utf8.ts","../index.ts","../src/logger.ts","../src/firebaseApp.ts","../src/firebaseNamespaceCore.ts","../src/firebaseNamespace.ts","../../assets/scripts/editor/firebase/firebase.js","../../../node_modules/process/browser.js","../src/core/storage/DOMStorageWrapper.ts","../src/core/storage/MemoryStorage.ts","../src/core/storage/storage.ts","../src/core/util/util.ts","../src/core/util/Path.ts","../src/realtime/Constants.ts","../src/core/RepoInfo.ts","../src/core/util/libs/parser.ts","../src/core/util/validation.ts","../src/api/onDisconnect.ts","../src/api/TransactionResult.ts","../src/core/util/NextPushId.ts","../src/core/snap/Node.ts","../src/core/snap/indexes/Index.ts","../src/core/snap/indexes/KeyIndex.ts","../src/core/snap/snap.ts","../src/core/snap/LeafNode.ts","../src/core/snap/indexes/PriorityIndex.ts","../src/core/util/SortedMap.ts","../src/core/snap/childSet.ts","../src/core/snap/IndexMap.ts","../src/core/snap/comparators.ts","../src/core/snap/ChildrenNode.ts","../src/core/snap/nodeFromJSON.ts","../src/core/snap/indexes/ValueIndex.ts","../src/core/snap/indexes/PathIndex.ts","../src/api/DataSnapshot.ts","../src/core/view/Event.ts","../src/core/view/EventRegistration.ts","../src/api/Query.ts","../src/core/util/CountedSet.ts","../src/core/SparseSnapshotTree.ts","../src/core/util/ServerValues.ts","../src/core/operation/Operation.ts","../src/core/operation/AckUserWrite.ts","../src/core/util/ImmutableTree.ts","../src/core/operation/ListenComplete.ts","../src/core/operation/Overwrite.ts","../src/core/operation/Merge.ts","../src/core/view/CacheNode.ts","../src/core/view/ViewCache.ts","../src/core/view/Change.ts","../src/core/view/filter/IndexedFilter.ts","../src/core/view/ChildChangeAccumulator.ts","../src/core/view/CompleteChildSource.ts","../src/core/view/ViewProcessor.ts","../src/core/view/EventGenerator.ts","../src/core/view/View.ts","../src/core/SyncPoint.ts","../src/core/CompoundWrite.ts","../src/core/WriteTree.ts","../src/core/SyncTree.ts","../src/core/SnapshotHolder.ts","../src/core/AuthTokenProvider.ts","../src/core/stats/StatsCollection.ts","../src/core/stats/StatsManager.ts","../src/core/stats/StatsListener.ts","../src/core/stats/StatsReporter.ts","../src/core/view/EventQueue.ts","../src/core/util/EventEmitter.ts","../src/core/util/VisibilityMonitor.ts","../src/core/util/OnlineMonitor.ts","../src/realtime/polling/PacketReceiver.ts","../src/realtime/BrowserPollConnection.ts","../src/realtime/WebSocketConnection.ts","../src/realtime/TransportManager.ts","../src/realtime/Connection.ts","../src/core/ServerActions.ts","../src/core/PersistentConnection.ts","../src/core/ReadonlyRestClient.ts","../src/core/Repo.ts","../src/core/view/filter/RangedFilter.ts","../src/core/view/filter/LimitedFilter.ts","../src/core/view/QueryParams.ts","../src/api/Reference.ts","../src/core/util/Tree.ts","../src/core/Repo_transaction.ts","../src/core/RepoManager.ts","../src/api/Database.ts","../src/api/internal.ts","../src/api/test_access.ts","../../assets/scripts/editor/firebase/database.js","../../../node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../node_modules/parcel-bundler/src/builtins/css-loader.js","../../../node_modules/vue-hot-reload-api/dist/index.js","../../assets/scripts/editor/views/slider.vue","../../../node_modules/lodash/merge.js","../../assets/scripts/editor/env.js","../../assets/scripts/editor/views/editor.vue","../../assets/scripts/editor/editor.js","../../assets/scripts/main.js"],"names":["defaultConfig","knob","name","min","max","value","ambience","scale","depth","seed","zoom","fov","config","default","use","get","key","range","Math","abs","requestAnimationFrame","render","canvas","document","getElementById","webgl","getContext","alpha","m4","twgl","isMobileDevice","window","orientation","undefined","navigator","userAgent","indexOf","aspectRatio","clientWidth","clientHeight","pixelRatio","devicePixelRatio","vertices","stretchX","stretchY","position","indices","normal","x","z","push","buffers","createBufferInfoFromArrays","numComponents","data","shader","createProgramInfo","vs","fs","textures","createTextures","noise","src","img","mag","LINEAR","resizeCanvasToDisplaySize","setBuffersAndAttributes","useProgram","program","clearColor","frontFace","CW","viewport","width","height","target","eye","up","camera","lookAt","uniforms","view","inverse","model","identity","u_direction","u_mouse","u_noise","u_resolution","dest","current","elapse","animate","duration","start","time","progress","getBoundingClientRect","bottom","renderCanvas","fieldOfView","PI","projection","perspective","u_knob","u_time","u_depth","u_lightPos","u_lightColor","u_ambientLightColor","u_ambientIntensity","u_specularIntensity","u_scale","u_seed","setUniforms","drawBufferInfo","TRIANGLE_STRIP","addEventListener","event","bounds","clientX","left","y","clientY","top","emptyObject","Object","freeze","isUndef","v","isDef","isTrue","isFalse","isPrimitive","isObject","obj","_toString","prototype","toString","toRawType","call","slice","isPlainObject","isRegExp","isValidArrayIndex","val","n","parseFloat","String","floor","isFinite","isPromise","then","catch","Array","isArray","JSON","stringify","toNumber","isNaN","makeMap","str","expectsLowerCase","map","create","list","split","i","length","toLowerCase","isBuiltInTag","isReservedAttribute","remove","arr","item","index","splice","hasOwnProperty","hasOwn","cached","fn","cache","cachedFn","hit","camelizeRE","camelize","replace","_","c","toUpperCase","capitalize","charAt","hyphenateRE","hyphenate","polyfillBind","ctx","boundFn","a","l","arguments","apply","_length","nativeBind","bind","Function","toArray","ret","extend","to","_from","toObject","res","noop","b","no","looseEqual","isObjectA","isObjectB","isArrayA","isArrayB","every","e","Date","getTime","keysA","keys","keysB","looseIndexOf","once","called","SSR_ATTR","ASSET_TYPES","LIFECYCLE_HOOKS","optionMergeStrategies","silent","productionTip","devtools","performance","errorHandler","warnHandler","ignoredElements","keyCodes","isReservedTag","isReservedAttr","isUnknownElement","getTagNamespace","parsePlatformTagName","mustUseProp","async","_lifecycleHooks","unicodeRegExp","isReserved","charCodeAt","def","enumerable","defineProperty","writable","configurable","bailRE","RegExp","source","parsePath","path","test","segments","hasProto","inBrowser","inWeex","WXEnvironment","platform","weexPlatform","UA","isIE","isIE9","isEdge","isAndroid","isIOS","isChrome","isPhantomJS","isFF","match","nativeWatch","watch","supportsPassive","opts","_isServer","isServerRendering","global","env","VUE_ENV","__VUE_DEVTOOLS_GLOBAL_HOOK__","isNative","Ctor","hasSymbol","Symbol","Reflect","ownKeys","_Set","Set","set","has","add","clear","warn","tip","generateComponentTrace","formatComponentName","hasConsole","console","classifyRE","classify","msg","vm","trace","error","includeFile","$root","options","cid","_isVue","$options","constructor","_componentTag","file","__file","repeat","$parent","tree","currentRecursiveSequence","last","join","uid","Dep","id","subs","addSub","sub","removeSub","depend","addDep","notify","sort","update","targetStack","pushTarget","popTarget","pop","VNode","tag","children","text","elm","context","componentOptions","asyncFactory","ns","fnContext","fnOptions","fnScopeId","componentInstance","parent","raw","isStatic","isRootInsert","isComment","isCloned","isOnce","asyncMeta","isAsyncPlaceholder","prototypeAccessors","child","defineProperties","createEmptyVNode","node","createTextVNode","cloneVNode","vnode","cloned","arrayProto","arrayMethods","methodsToPatch","forEach","method","original","mutator","args","len","result","ob","__ob__","inserted","observeArray","dep","arrayKeys","getOwnPropertyNames","shouldObserve","toggleObserving","Observer","vmCount","protoAugment","copyAugment","walk","defineReactive$$1","items","observe","__proto__","asRootData","isExtensible","customSetter","shallow","property","getOwnPropertyDescriptor","getter","setter","childOb","reactiveGetter","dependArray","reactiveSetter","newVal","del","strats","el","propsData","defaultStrat","mergeData","from","toVal","fromVal","mergeDataOrFn","parentVal","childVal","mergedDataFn","mergedInstanceDataFn","instanceData","defaultData","mergeHook","concat","dedupeHooks","hooks","hook","mergeAssets","assertObjectType","type","key$1","props","methods","inject","computed","provide","checkComponents","components","validateComponentName","normalizeProps","normalizeInject","normalized","normalizeDirectives","dirs","directives","def$$1","mergeOptions","_base","extends","mixins","mergeField","strat","resolveAsset","warnMissing","assets","camelizedId","PascalCaseId","validateProp","propOptions","prop","absent","booleanIndex","getTypeIndex","Boolean","stringIndex","getPropDefaultValue","prevShouldObserve","assertProp","_props","getType","required","valid","expectedTypes","assertedType","assertType","expectedType","getInvalidTypeMessage","validator","simpleCheckRE","t","isSameType","message","receivedType","expectedValue","styleValue","receivedValue","isExplicable","isBoolean","Number","explicitTypes","some","elem","handleError","err","info","cur","errorCaptured","capture","globalHandleError","invokeWithErrorHandling","handler","_handled","logError","isUsingMicroTask","callbacks","pending","flushCallbacks","copies","timerFunc","Promise","p","resolve","setTimeout","MutationObserver","counter","observer","textNode","createTextNode","characterData","setImmediate","nextTick","cb","_resolve","initProxy","allowedGlobals","warnNonPresent","warnReservedPrefix","hasProxy","Proxy","isBuiltInModifier","hasHandler","isAllowed","$data","getHandler","handlers","_withStripped","_renderProxy","seenObjects","traverse","_traverse","seen","isA","isFrozen","depId","mark","measure","perf","clearMarks","clearMeasures","startTag","endTag","normalizeEvent","passive","once$$1","createFnInvoker","fns","invoker","arguments$1","updateListeners","on","oldOn","remove$$1","createOnceHandler","old","params","mergeVNodeHook","hookKey","oldHook","wrappedHook","merged","extractPropsFromVNodeData","attrs","altKey","keyInLowerCase","checkProp","hash","preserve","simpleNormalizeChildren","normalizeChildren","normalizeArrayChildren","isTextNode","nestedIndex","lastIndex","shift","_isVList","initProvide","_provided","initInjections","resolveInject","provideKey","provideDefault","resolveSlots","slots","slot","name$1","isWhitespace","normalizeScopedSlots","normalSlots","prevSlots","hasNormalSlots","isStable","$stable","$key","_normalized","$hasNormal","normalizeScopedSlot","key$2","proxyNormalSlot","proxy","renderList","iterator","next","done","renderSlot","fallback","bindObject","scopedSlotFn","$scopedSlots","nodes","$slots","$createElement","resolveFilter","isKeyNotMatch","expect","actual","checkKeyCodes","eventKeyCode","builtInKeyCode","eventKeyName","builtInKeyName","mappedKeyCode","bindObjectProps","asProp","isSync","loop","domProps","camelizedKey","hyphenatedKey","$event","renderStatic","isInFor","_staticTrees","staticRenderFns","markStatic","markOnce","markStaticNode","bindObjectListeners","existing","ours","resolveScopedSlots","hasDynamicKeys","contentHashKey","bindDynamicKeys","baseObj","values","prependModifier","symbol","installRenderHelpers","_o","_n","_s","_l","_t","_q","_i","_m","_f","_k","_b","_v","_e","_u","_g","_d","_p","FunctionalRenderContext","this$1","contextVm","_original","isCompiled","_compiled","needNormalization","listeners","injections","scopedSlots","_scopeId","_c","d","createElement","createFunctionalComponent","mergeProps","renderContext","cloneAndMarkFunctionalResult","vnodes","clone","devtoolsMeta","componentVNodeHooks","init","hydrating","_isDestroyed","keepAlive","mountedNode","prepatch","createComponentInstanceForVnode","activeInstance","$mount","oldVnode","updateChildComponent","insert","_isMounted","callHook","queueActivatedComponent","activateChildComponent","destroy","$destroy","deactivateChildComponent","hooksToMerge","createComponent","baseCtor","resolveAsyncComponent","createAsyncPlaceholder","resolveConstructorOptions","transformModel","functional","nativeOn","abstract","installComponentHooks","_isComponent","_parentVnode","inlineTemplate","toMerge","_merged","mergeHook$1","f1","f2","callback","SIMPLE_NORMALIZE","ALWAYS_NORMALIZE","normalizationType","alwaysNormalize","_createElement","is","$vnode","pre","applyNS","registerDeepBindings","force","style","class","initRender","_vnode","parentVnode","_renderChildren","parentData","isUpdatingChildComponent","_parentListeners","currentRenderingInstance","renderMixin","Vue","$nextTick","_render","ref","renderError","ensureCtor","comp","base","__esModule","toStringTag","factory","errorComp","resolved","owner","owners","loading","loadingComp","sync","timerLoading","timerTimeout","$on","forceRender","renderCompleted","$forceUpdate","clearTimeout","reject","reason","component","delay","timeout","getFirstComponentChild","initEvents","_events","_hasHookEvent","updateComponentListeners","remove$1","$off","_target","onceHandler","oldListeners","eventsMixin","hookRE","$once","i$1","cbs","$emit","lowerCaseEvent","setActiveInstance","prevActiveInstance","initLifecycle","$children","$refs","_watcher","_inactive","_directInactive","_isBeingDestroyed","lifecycleMixin","_update","prevEl","$el","prevVnode","restoreActiveInstance","__patch__","__vue__","teardown","_watchers","_data","mountComponent","template","updateComponent","_name","_uid","Watcher","before","renderChildren","newScopedSlots","oldScopedSlots","hasDynamicScopedSlot","needsForceUpdate","$attrs","$listeners","propKeys","_propKeys","isInInactiveTree","direct","j","MAX_UPDATE_COUNT","queue","activatedChildren","circular","waiting","flushing","resetSchedulerState","currentFlushTimestamp","getNow","now","createEvent","timeStamp","flushSchedulerQueue","watcher","run","user","expression","activatedQueue","updatedQueue","callActivatedHooks","callUpdatedHooks","emit","queueWatcher","uid$2","expOrFn","isRenderWatcher","deep","lazy","active","dirty","deps","newDeps","depIds","newDepIds","cleanupDeps","tmp","oldValue","evaluate","sharedPropertyDefinition","sourceKey","proxyGetter","proxySetter","initState","initProps","initMethods","initData","initComputed","initWatch","propsOptions","isRoot","getData","computedWatcherOptions","watchers","_computedWatchers","isSSR","userDef","defineComputed","shouldCache","createComputedGetter","createGetterInvoker","computedGetter","createWatcher","$watch","stateMixin","dataDef","propsDef","$set","$delete","immediate","unwatchFn","uid$3","initMixin","_init","initInternalComponent","_self","vnodeComponentOptions","super","superOptions","cachedSuperOptions","modifiedOptions","resolveModifiedOptions","extendOptions","modified","latest","sealed","sealedOptions","initUse","plugin","installedPlugins","_installedPlugins","unshift","install","initMixin$1","mixin","initExtend","Super","SuperId","cachedCtors","_Ctor","Sub","VueComponent","initProps$1","initComputed$1","Comp","initAssetRegisters","definition","getComponentName","matches","pattern","pruneCache","keepAliveInstance","filter","cachedNode","pruneCacheEntry","cached$$1","patternTypes","KeepAlive","include","exclude","created","destroyed","mounted","ref$1","parseInt","builtInComponents","initGlobalAPI","configDef","util","defineReactive","delete","observable","ssrContext","version","acceptValue","attr","isEnumeratedAttr","isValidContentEditableValue","convertEnumeratedValue","isFalsyAttrValue","isBooleanAttr","xlinkNS","isXlink","getXlinkProp","genClassForVnode","parentNode","childNode","mergeClassData","renderClass","staticClass","dynamicClass","stringifyClass","stringifyArray","stringifyObject","stringified","namespaceMap","svg","math","isHTMLTag","isSVG","unknownElementCache","HTMLUnknownElement","HTMLElement","isTextInputType","query","selected","querySelector","createElement$1","tagName","multiple","setAttribute","createElementNS","namespace","createComment","insertBefore","newNode","referenceNode","removeChild","appendChild","nextSibling","setTextContent","textContent","setStyleScope","scopeId","nodeOps","registerRef","isRemoval","refs","refInFor","emptyNode","sameVnode","sameInputType","typeA","typeB","createKeyToOldIdx","beginIdx","endIdx","createPatchFunction","backend","modules","emptyNodeAt","createRmCb","childElm","removeNode","isUnknownElement$$1","inVPre","ignore","creatingElmInVPre","createElm","insertedVnodeQueue","parentElm","refElm","nested","ownerArray","setScope","createChildren","invokeCreateHooks","isReactivated","initComponent","reactivateComponent","pendingInsert","isPatchable","innerNode","transition","activate","ref$$1","checkDuplicateKeys","ancestor","addVnodes","startIdx","invokeDestroyHook","removeVnodes","ch","removeAndInvokeRemoveHook","rm","updateChildren","oldCh","newCh","removeOnly","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","oldKeyToIdx","idxInOld","vnodeToMove","canMove","patchVnode","findIdxInOld","seenKeys","end","hydrate","postpatch","invokeInsertHook","initial","hydrationBailed","isRenderedModule","assertNodeMatch","hasChildNodes","innerHTML","childrenMatch","firstChild","childNodes","fullInvoke","nodeType","patch","isInitialPatch","isRealElement","hasAttribute","removeAttribute","oldElm","_leaveCb","patchable","i$2","updateDirectives","unbindDirectives","isCreate","isDestroy","oldDirs","normalizeDirectives$1","newDirs","dirsWithInsert","dirsWithPostpatch","oldDir","dir","callHook$1","oldArg","arg","componentUpdated","callInsert","emptyModifiers","modifiers","getRawDirName","rawName","baseModules","updateAttrs","inheritAttrs","oldAttrs","setAttr","removeAttributeNS","baseSetAttr","setAttributeNS","__ieph","blocker","stopImmediatePropagation","removeEventListener","updateClass","oldData","cls","transitionClass","_transitionClasses","_prevClass","klass","RANGE_TOKEN","CHECKBOX_RADIO_TOKEN","normalizeEvents","change","target$1","createOnceHandler$1","remove$2","useMicrotaskFix","add$1","attachedTimestamp","_wrapper","currentTarget","ownerDocument","updateDOMListeners","events","svgContainer","updateDOMProps","oldProps","_value","strCur","shouldUpdateValue","checkVal","composing","isNotInFocusAndDirty","isDirtyWithModifiers","notInFocus","activeElement","_vModifiers","number","trim","parseStyleText","cssText","listDelimiter","propertyDelimiter","normalizeStyleData","normalizeStyleBinding","staticStyle","bindingStyle","getStyle","checkChild","styleData","cssVarRE","importantRE","setProp","setProperty","normalizedName","normalize","vendorNames","emptyStyle","capName","updateStyle","oldStaticStyle","oldStyleBinding","normalizedStyle","oldStyle","newStyle","whitespaceRE","addClass","classList","getAttribute","removeClass","tar","resolveTransition","css","autoCssTransition","enterClass","enterToClass","enterActiveClass","leaveClass","leaveToClass","leaveActiveClass","hasTransition","TRANSITION","ANIMATION","transitionProp","transitionEndEvent","animationProp","animationEndEvent","ontransitionend","onwebkittransitionend","onanimationend","onwebkitanimationend","raf","nextFrame","addTransitionClass","transitionClasses","removeTransitionClass","whenTransitionEnds","getTransitionInfo","propCount","ended","onEnd","transformRE","styles","getComputedStyle","transitionDelays","transitionDurations","transitionTimeout","getTimeout","animationDelays","animationDurations","animationTimeout","hasTransform","delays","durations","toMs","s","enter","toggleDisplay","cancelled","_enterCb","appearClass","appearToClass","appearActiveClass","beforeEnter","afterEnter","enterCancelled","beforeAppear","appear","afterAppear","appearCancelled","transitionNode","isAppear","startClass","activeClass","toClass","beforeEnterHook","enterHook","afterEnterHook","enterCancelledHook","explicitEnterDuration","checkDuration","expectsCSS","userWantsControl","getHookArgumentsLength","show","pendingNode","_pending","isValidDuration","leave","beforeLeave","afterLeave","leaveCancelled","delayLeave","explicitLeaveDuration","performLeave","invokerFns","_enter","platformModules","vmodel","trigger","directive","binding","_vOptions","setSelected","getValue","onCompositionStart","onCompositionEnd","prevOptions","curOptions","o","needReset","hasNoMatchingOption","actuallySetSelected","isMultiple","option","selectedIndex","initEvent","dispatchEvent","locateNode","transition$$1","originalDisplay","__vOriginalDisplay","display","unbind","platformDirectives","transitionProps","mode","getRealChild","compOptions","extractTransitionData","placeholder","h","rawChild","hasParentTransition","isSameChild","oldChild","isNotTextNode","isVShowDirective","Transition","_leaving","oldRawChild","delayedLeave","moveClass","TransitionGroup","beforeMount","kept","prevChildren","rawChildren","transitionData","removed","c$1","pos","updated","hasMove","callPendingCbs","recordPosition","applyTranslation","_reflow","body","offsetHeight","moved","transform","WebkitTransform","transitionDuration","_moveCb","propertyName","_hasMove","cloneNode","newPos","oldPos","dx","dy","platformComponents","extendStatics","setPrototypeOf","__extends","__","__assign","assign","__rest","getOwnPropertySymbols","__decorate","decorators","desc","r","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","__generator","label","sent","trys","ops","f","g","verb","op","TypeError","__exportStar","m","exports","__values","__read","ar","__spread","__await","__asyncGenerator","asyncIterator","q","resume","settle","fulfill","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","__importStar","mod","k","__importDefault","tslib_1.__extends","stringToByteArray","ErrorFactory","deepCopy","deepExtend","contains","Logger","isBrowser","isNode","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","process","module","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","Item","array","title","argv","versions","addListener","off","removeListener","removeAllListeners","prependListener","prependOnceListener","cwd","chdir","umask","jsonEval","Sha1","base64","assert","LogLevel","isNodeSdk","stringLength","errorPrefixFxn","validateArgCount","validateCallback","Deferred","assertionError","MAX_NODE","setMaxNode","safeGet","setPriorityMaxNode","nodeFromJSON","getCount","getAnyKey","validateContextObject","errorPrefix","isEmpty","getValues","__referenceConstructor","findValue","findKey","isMobileCordova","base64Encode","ENV_CONSTANTS","isAdmin","isValidFormat","CONSTANTS","isReactNative","querystring","database","bundleURL","getBundleURLCached","getBundleURL","stack","getBaseURL","url","bundle","require","updateLink","link","newLink","onload","href","cssTimeout","reloadCSS","links","querySelectorAll","at","localStorage","removeItem","getItem","parse","setItem","editor"],"mappings":"A0CAA,AZAA,AKAA,AeAA,AEAA,A9CAA,AoDAA,A1DAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,ACAA,ACAA,AsBAA,AvEAA,AmFAA,AxCAA,AsCAA,A3EAA,A2BAA,A5BAA,A+CAA,AzDAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AbAA,AmDAA,ARAA,AvEAA,AuDAA,A7DAA,AGAA,A4EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,A9DAA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHAA,ACAA,ACAA,A/GAA,ACAA,I4GAIqgD,ACAAM,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;AvKCA,AZAA,AKAA,AeAA,AEAA,A9CAA,AoDAA,A1DAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AvEAA,AmFAA,AxCAA,AsCAA,A3EAA,AdDA,AyCCA,A5BAA,A+CAA,AzDAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AbAA,AmDAA,ARAA,AvEAA,AuDAA,A7DAA,AGAA,A4EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AmCDA,AqFCA;AxKCA,AZAA,AKAA,AeAA,AEAA,A9CAA,AoDAA,A1DAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AvEAA,AmFAA,AxCAA,AsCAA,A3EAA,AdDA,AyCCA,A5BAA,A+CAA,AzDAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AbAA,AmDAA,ARAA,AvEAA,AuDAA,A7DAA,AGAA,A4EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHDA,ACCA,ApFDA,AqFCA,A7GFA,AmHAA,I3FCIxE,KmFAKkE,ACCAO,EpFDE,GAAGxE,KoFCd,CAAoByE,ApFDA,CAAChH,GoFCrB,EAA0B,CDD1B,CnFAc,EmFAgB,CnFAC,EAA/B,EAEA;AnFAA,AZAA,AKAA,AeAA,AEAA,A9CAA,AoDAA,A1DAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AvEAA,AmFAA,AxCAA,AsCAA,A3EAA,AdDA,AyCCA,A5BAA,A+CAA,AzDAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AbAA,AmDAA,ARAA,AvEAA,AuDAA,A7DAA,AGAA,A4EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHDE,ACCA,ApFCF,AqFDA,MFDM,ACCAiH,CDDCV,MCCM,GDDX,ACCcS,EDDE,ECCE,CAAC9J,SAAL,EAAd;AvKCF,AZAA,AKAA,AeAA,AEAA,A9CAA,AoDAA,A1DAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AvEAA,AmFAA,AxCAA,AsCAA,A3EAA,AdDA,AyCCA,A5BAA,A+CAA,AzDAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AbAA,AmDAA,ARAA,AvEAA,AuDAA,A7DAA,AGAA,A4EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHDIqJ,AnFEJ,AqFDA,A7GHA,AmHAA,IREIA,SAAS,GAAGE,YAAY,EAAxB;AtKEJ,AZAA,AKAA,AeAA,AEAA,A9CAA,AoDAA,A1DAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AvEAA,AmFAA,AxCAA,AsCAA,A3EAA,AdDA,AyCCA,A5BAA,A+CAA,AzDAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AbAA,AmDAA,ARAA,AvEAA,AuDAA,A7DAA,AGAA,A4EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHDG,ACADQ,ApFEF,AqFDA,EDDEA,OAAO,CAACC,MAAR,GAAiB,YAAY;AvKE/B,AZAA,AKAA,AeAA,AEAA,A9CAA,AoDAA,A1DAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AvEAA,AmFAA,AxCAA,AsCAA,A3EAA,A2BAA,A5BAA,A+CAA,AzDAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AbAA,AmDAA,ARAA,AvEAA,AuDAA,A7DAA,AGAA,A4EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AuHDIF,ACCJ,A7GJA,AkBFA,I0FKIA,IAAI,CAACj2C,MAAL,AEJJ;AzKMA,AZAA,AKAA,AeAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AYAA,AxCAA,AsCAA,A3EAA,A2BAA,A5BAA,AVAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AsCAA,ARAA,AvEAA,AuDAA,A7DAA,AGAA,A4EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHDE,ACAC,ApFEH,AqFDA,AhHPA,AqHAA,AFAA,ANAA,AnFAA,A0FCA,AHCA,A3GFA,E2GEA,CFEE,CpFIEyxC,AwFRArqC,EFEJ,CEFO,CFEP,CHISouC,CKNC,MFCV,EHKE,CKNEpuC,CxFQJ,EwFRU,GAAoB;A3KQ9B,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AYAA,AxCAA,AsCAA,A3EAA,A2BAA,A5BAA,AVAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AsCAA,ARAA,AvEAA,AuDAA,A7DAA,AGAA,A4EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHDC,AnFED,AqFDA,A5GRA,ADGA,AgHH8B,AFI9B,ArGJA,AUAA,E2FIA,EtFKIsqC,EwFTOlc,CFIX,EAAA,MEJ8B,OxFS9B,gEwFTuB,EAAO;A3KS9B,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AYAA,AxCAA,AsCAA,A3EAA,A2BAA,A5BAA,AVAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AsCAA,ARAA,AvEAA,AuDAA,A7DAA,AGAA,A4EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AuHFE0gB,ACEF,AKRA,AFAE1gB,ANAF,AOCA,AHGA,EFEE0gB,AINA1gB,EFIF,KFES,CAAC4gB,AEFV,CEJW,CFIX,EFEE,AINY5gB,GJMGygB,CEHjB,GFGqB,CAACG,CINC,GJMN,AINS,CJMC12C,EINzB,GJMe,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgCwD,IAAI,CAACooB,GAAL,EAA/C;AvKGF,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AYAA,AxCAA,AsCAA,A3EAA,A2BAA,A5BAA,AVAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AsCAA,ARAA,AvEAA,AuDAA,A7DAA,A+EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHDA,ACDE2qB,ApFGF,AqFDA,AGPE,AFGF,EFEEA,EEFF,EFEM,CAACpiB,EDCE6hB,AnFEA/D,AwFRA,IFGT,EAAA,EFEE,CAAgBjc,GDClB,GAAwB,CnFExB,GAA4B,EoFH1B,CAA6BwgB,OAA7B,EAAsCD,IAAI,CAAClgB,WAA3C;AvKGF,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AYAA,AxCAA,AsCAA,A3EAA,A2BAA,A5BAA,AVAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AsCAA,ARAA,AvEAA,AuDAA,A7DAA,A+EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHDE,ACDD,ApFGG,AqFDJ,AhHTA,AmHEI0gB,ACDJ,AHIA,IjHLIthD,AmHEAshD,EADK,AFIT,EtFKU,EsFLV,EtFKc7E,AsFLd,GvFLed,ECUL,A3BVO,C2BUG,AsFNpB,EjHJoB,AmHEZ36C,GADC,EACI,GzFFW46C,aAAT,CAAuB,SCU5B,CAAN;AnFAJ,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AYAA,AxCAA,AsCAA,AhDAA,A5BAA,AVAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AsCAA,ARAA,AvEAA,AuDAA,A7DAA,A+EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHDE,AnFED,AqFDD,A7GPAx6C,AHFEnB,AmHEI,AzFFJ47C,AuFKF,ArFRA,E5BGE57C,A0BAA47C,IoFQI,A9GRA,AiHKN,EjHLQ,A0BAA,EAAE,GyFEG5pC,AFGb,EAAA,CEHgB,CAACouB,IhHAI,CAACh/B,IgHAI,EhHAL,CAArB,AgHA6BL,GAAb,CAAV,kBzFHgC;AlFWtC,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AYAA,AxCAA,AsCAA,AhDAA,A5BAA,AVAA,ASAA,AqBAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,A1CAA,AGAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AsCAA,ARAA,AvEAA,AuDAA,A7DAA,A+EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHDI,ACDJ,ACEA,A7GNA,AHJUd,AmHGL,AzFFH47C,A0FAF,AHEA,EvFFEA,EqFOEoF,A5GJA5/C,AHJMpB,CmHAD,GnHAK,E8GSJ,A3GLA,AHJM,E0BCJ,CvBGCqB,C2GKCk7C,ACDA,ArFPA,C2FDC,ARAAd,EEQE,EDCP,AOTSvrB,EPSf,ACDJ,A5GJqB,AHJb,CGIc5uB,SkHJP,CAAQ,CRAC4+C,G1GIX,CAAwB,I0GJtB,MnFDuB,CvBKzB,CAAb;A3DOA,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,ANAA,AnBAA,AFDA,AGCA,ACAA,AsBAA,AYAA,AxCAA,AsCAA,AhDAA,A5BAA,AVAA,A8BAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,AvCAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AsCAA,ARAA,AvEAA,AuDAA,A7DAA,A+EAA,A5DAA,ADAA,AWAA,ACAA,ACAA,ACAA,AiBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHDG,AnFCH,AqFAA,A5GTA,ADGA,AHL6BjgD,AqHC3Bma,AFIEvH,AzFHFgpC,AuFDF,EIAEzhC,A3FCAyhC,CoFMA,AGVF,CHYI,A3GLAt6C,AHLyBtB,AqHCzB,AFIA4S,EEJExR,CrHD0B,E2BWvBm7C,AxBNA,AHLyB,AmHAzB,CnHAD,C8GUG/8B,C3GLCre,CuBHC,CoFQT,AOTU,CAACi1C,A3FCA,CoFQC,E3GLE,CAAC70C,AkHJb,CAAci/B,Q1FUpB,AwFNa,ChHAD,CAAkB,CwBME,A0FV1B,CACFp/B,KlHGQ,EAA2B,CkHH3B,CAACuqB,aAAT,CAAuB,A3FHW,K2FGlC,CADE,CADiB;A7KYvB,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,AzBAA,AFDA,AGCA,ACAA,AsBAA,AYAA,AxCAA,AsCAA,AhDAA,A5BAA,AVAA,A8BAA,ACAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AlDAA,A/BAA,AoDAA,AvCAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AsCAA,ARAA,AvEAA,AuDAA,A7DAA,A+EAA,A7DAA,AWAA,ACAA,AmBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHDI,ACFJ,ApFGI,AqFAJ,A5GRA,ADCyCnqB,AHLJvB,AqHKnCiB,AFCI,AzFHJ26C,A0FDF,AHOA,E9GJyCr6C,AkHAvCN,A3FFA26C,AuFMF,E7GLIl0C,AJJiC1H,GGKS,AHLN,C8GWhCi8B,AnFCE,A0FZa,CNSd8kB,A5GJuC,AHLN,CAAlC,AiHSR,CvFNW,CCSG1E,AsFHd,CEHa8E,AzFHA,EoFQE,A1GPA,EuBQL,CmFDQ,ACFlB,ApFGoB,AvBRFx5C,C0GOC,ECFE,GDEG4X,A1GPA,CAAC3X,A+GEA,CEDf4sC,AFCgB7hC,CLKC,AOXJ,CPWKytC,CONf,C3FNyB,CtBKpB,A+GEL,C/GFmB,C0GOd,AKLZ,C/GFY,C0GOiB/uC,A1GPnC,EAEA,G0GKkB,CAAuB,YnFC/B,CAAN,kDmFDc,CAAd;AtKEJ,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ANAA,A/CAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,AzBAA,AFDA,AGCA,ACAA,AsBAA,AYAA,AxCAA,AsCAA,AhDAA,A5BAA,AVAA,A+BAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AjFAA,AoDAA,AvCAA,ACAA,ACAA,ACAA,AcAA,AGAA,ACAA,ACAA,ACAA,AsCAA,ARAA,AvEAA,ANAA,A+EAA,A7DAA,AYAA,AmBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AuHHE,ApFGD,AqFAD,A5GNA,ADFuC,AHLMpR,AqHMzC,AFCC,AzFHH47C,AuFMF,C9GLY,CAAZ,AuBDEA,E1BJ2C57C,AiHU7C,CEVS,CJUH6gD,G/GV4C,AiHUlD,EjHVoD,AqHMzCtM,AJIX,CIJY,CAACgN,E3FFE,CqFMb,CrFNe,CqFMC,UMJN,CAAR,iB3FPkC;AlFetC,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ArDAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,ArEAA,AHAA,AiEAA,A3BDA,AICA,AsBAA,AYAA,AxCAA,AsCAA,AhDAA,A5BAA,AVAA,A+BAA,ACAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AjFAA,AoDAA,AvCAA,ACAA,AEAA,AcAA,AGAA,AGAA,AsCAA,ARAA,AvEAA,ANAA,A+EAA,A7DAA,AYAA,AmBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHFI,ACDA,ACGJ,A7GRA,AHNQ,AqHOL,AFECjkB,AzFJFue,A0FFF,AHQA,EvFNEA,C1BNkB,CGOhBt6C,AgHGA+7B,EhHHE,A8GKN,EHCQtB,C3GNCx6B,A8GIT,CEVS,GhHMI,CAACD,C2GMV,C3GNJ,C2GMiB,EpFPE,EAAE,KuFMrB,GEFYZ,GATH,EASQ,AzFVqB;AlFgBtC,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ArDAA,A2DAA,ArDAA,A8DAA,AWAA,AIAA,ADAA,AxEAA,AiEAA,A3BDA,AICA,AsBAA,AYAA,AxCAA,AsCAA,AhDAA,AtCAA,AgCAA,ACAA,ACAA,AyBAA,AmBAA,ASAA,AjFAA,AoDAA,AvCAA,ACAA,AEAA,AcAA,AGAA,AGAA,AsCAA,ARAA,AvEAA,ANAA,AkBAA,AYAA,AmBAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,AtBAA,AgBAA,AsHFM,ACDH,ApFEF,AqFCD,A5GPA,ADAA,AHPEV,AqHDqB,AFUjB,AzFJJ67C,AuFMF,CIZe,CrHCb77C,A0BKA67C,EvBEEr6C,GuBFG,EtBEEmG,AsBFA,C1BLC,EAAE,C8GYCw4C,AnFCA,AwFJAc,EFEb,C7GJA,CAAkBr5C,CAAlB,ADAkB,C8GIlB,C7GJqB,A6GIrB,C9GJqBnG,E2GKE,CAACs6B,CKHC,AFEzB,CEF0BmlB,AFE1B,C9GJ2B,CAACx/C,G2GKG,AGD/B,CHCgC,CAAD,CAAR,CAAjB,CKHO,CAAwBq+B,AFErC,CAAA,C9GJqB,I8GIrB,C9GJ4Cp+B,EgHEE,AFE9C,GEFiDjB,EFEjD,CEFa,ChHFQ,AgHEf,IhHFmDkB,G8GIzD,CAAA,K9GJkE,CAACC,SAAV,CAAoBC,OAApB,CAA4B,UAA5B,MAA4C,CAAC,CAAtG;A3DQA,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ArDAA,AMAA,A8DAA,AWAA,AIAA,ADAA,AxEAA,AiEAA,A3BDA,AICA,AsBAA,AYAA,AxCAA,AsCAA,AtFAA,AgCAA,ACAA,ACAA,A4CAA,ASAA,AjFAA,AaAA,ACAA,AEAA,AcAA,AMAA,AsCAA,ARAA,AvEAA,ANAA,AkBAA,A+BAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,ANAA,AsHFK,AnFCD,AqFCJ,A5GPE,ADAF,AHRclC,AmHUT,AzFZiC,A0FKtC,AHSA,CvFde,GvBUXmC,AHRUnC,CmHDL,CxFeD,CsFLR,CjHTkB,CIQTgI,CAAC,AJRU,KIQLjG,ADAA,GAAGX,EHRN,IIQH,ADAe,CAACgB,GCAG4F,CAAC,KAAK,EDAhB,ECAhB,CDAqC5G,MAAM,CAACiB,YAA9C;A3DQA,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AhCAA,A4BAA,AzDAA,A4BAA,ASAA,ArDAA,AMAA,A8DAA,AWAA,AIAA,ADAA,AxEAA,AiEAA,A3BDA,AICA,AsBAA,AYAA,AxCAA,AsCAA,AtFAA,AgCAA,ACAA,ACAA,A4CAA,ASAA,AjFAA,AaAA,AGAA,AcAA,AMAA,AsCAA,ARAA,AvEAA,ANAA,AkBAA,A+BAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,ANAA,AsHFG,ACDD2+C,ApFEM,AqFCR,A5GPC,ADAD,AHTgC/gD,AmHY5BY,AFEJ,EFDEmgD,E5GJE1+C,AHT4BrC,AmHY5BY,EFEJ,CjHdmC,AmHD1B,CxFgBG,C3BfyB,AiHSrC,CjHTY,E+GaA,E5GJE,C4GIC+f,ApFEIA,ExBNFhf,KgHGRd,EFET,CFDyB,ApFEb,AwFhBH,CJciB,CIDZomB,EFHd,CtFMkC,CxBNH,A8GK/B,G9GLkC,CAAH,AgHVtB,EAae,CJCc,A5GJArlB,EwBM9B,EAAsC,ExBNF,CAACU,gBAA7C;A3DQA,AZAA,AoBAA,AEAA,ApDAA,AsFAA,AJAA,AzDAA,A4BAA,ASAA,ArDAA,AMAA,A8DAA,AWAA,AIAA,ADAA,AxEAA,AsCDA,A0BCA,AYAA,AxCAA,AsCAA,AtFAA,AgCAA,ACAA,ACAA,A4CAA,ASAA,ApEAA,AGAA,AcAA,AMAA,A8BAA,AvEAA,ANAA,AkBAA,A+BAA,ArCAA,AXAA,A8FAA,AzEAA,AvBAA,AoEAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,ANAA,AuHHI,ApFEQ65C,AqFCZ,A7GPA,AHVwCl8C,AmHalC,AFEN,G5FJG,ClBDCsC,AHVoCtC,E2BgB5Bk8C,C3BhB+B,C+GcnC8E,C/GdqC,CAAjC,AmHaF/gD,EhHHE,C4GIC,AECb,E9GLe,AgHGA,CJCCkB,E5GJhB,AgHGkBggD,CFElB,CAAA,EtFC4B,EoFFJ,CAACF,ApFEMvgC,AsFD/B,GAAA,EEF8B,CAAC2gC,CFE/B,CAAA,EtFCY,GwFHM,AFElB,CEFuCphB,AFEvC,EFDgB,CAA0B,GEC1C,CAAA,EEFgD,GAAGr/B,AFEnD,CAAA,EEFkB,CAAZ,CFEN,KAAA,KFDgB,CAAZ,GECJ;AzKGA,AZAA,AoBAA,AEAA,AkCAA,AJAA,A7BAA,ASAA,ArDAA,AMAA,A8DAA,AWAA,AIAA,ADAA,AxEAA,AsCDA,A0BCA,AYAA,AxCAA,AsCAA,AtFAA,AgCAA,ACAA,ACAA,A4CAA,ASAA,ApEAA,AGAA,AoBAA,A8BAA,AvEAA,ANAA,AkBAA,A+BAA,ArCAA,AXAA,A8FAA,AzEAA,A6CAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,ANAA,AsHFE,AnFCO,AqFCT,A5GPA,ADAA,AHXgDX,AmHc1C,AFEN,I9GLIsC,AHX4CtC,C2BexC,ImFCC,A1GLA8H,AJX4C,E2BiBtC,A3BjBwC,C8GgBrD,A3GLU,CgHGC9H,C/GHb,CAAgB6H,ADAD,CCAf,EAAmB,ADAnB,AgHGkB,KAAK,IAAV,GAAiBkf,QAAjB,GAA4Bvd,IAAI,CAAC63C,KAAL,CAAWrhD,KAAX,CAAnC;A3KKN,AZAA,AoBAA,AEAA,AkCAA,AJAA,A7BAA,ASAA,ArDAA,AMAA,A8DAA,AWAA,AIAA,ADAA,AlCDA,A0BCA,AYAA,AxCAA,AsCAA,AtFAA,AgCAA,ACAA,ACAA,A4CAA,ASAA,ApEAA,AGAA,AkDAA,A7EAA,AkBAA,A+BAA,ArCAA,AXAA,A8FAA,AzEAA,A6CAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,ANAA,AsHFC,ACFG,ApFGQi8C,AqFCZ,A5GPE,ADAF,AHZY,AmHeP,AFNL,GjHXoB,CGchB15C,CgHbK,AFST,CtFUY05C,GoFHH,A3GHAp0C,CAAC,EDAE,C4GGCsC,CAAC,C3GHCvI,ADAA,AiHPf,ELUiB,CAAb,A5GHJ,E4GGoBuI,CAAC,CpFGO,EoFHJ42C,A3GHf,CuBMsB5E,GvBNHt0C,C2GGC,A3GHA,C2GGCuC,I3GHI,E2GG9B,EAAkCD,A3GHpC,C2GGqC,EAAnC,ApFGQ,EoFH+B;AvKK3C,AZAA,AoBAA,AEAA,AkCAA,AJAA,A7BAA,ASAA,ArDAA,AMAA,A8DAA,AWAA,AIAA,ADAA,AlCDA,A0BCA,AYAA,AxCAA,AsCAA,AtFAA,AgCAA,A8CAA,ASAA,ApEAA,AGAA,AkDAA,A7EAA,AkBAA,A+BAA,ArCAA,AXAA,A8FAA,AzEAA,A6CAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,ANAA,AuHJM,ApFGG,AqFCT,A5GPC,ADAD,AHZEjK,AmHgBEsS,ACXJ,AHaA,EjHlBEtS,AoHKF,EjHOIsC,AgHIAgQ,AFEJ,EGbA,CpHLO,AmHFE,AFoBT,CGbA,CpHLS,AiHkBT,CFHU8tC,E5GHE,GAAG,C4GGC,AKXhB,CLWiBF,A5GHjB,KgHISz/C,GAlBA,EJiBC,AICI,CJDcogD,KAAK,CAAC52C,CAAD,CAAL,CAASy2C,IAA3B,MAAqCN,MAAM,CAACJ,YAAP,EAAzC,EAAgE;AvKKtE,AZAA,AoBAA,AEAA,AkCAA,AJAA,A7BAA,ASAA,ArDAA,AMAA,A8DAA,AWAA,AIAA,ADAA,AlCDA,A0BCA,AYAA,AxCAA,AsCAA,AtFAA,AgCAA,A8CAA,ASAA,ApEAA,AGAA,AkDAA,A7EAA,AkBAA,A+BAA,ArCAA,AXAA,A8FAA,AzEAA,A6CAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,ANAA,AsHFA,ACFQM,ApFGH,AtBxBL,A2GyBA,A7GPA,AHbW3gD,AmHiBL,ACVN,AHYA,ArGPA,AAWA,EwGhBA,CzFMI,CAME,AxBNF4C,AHbO5C,AYuBL,EqGJN,EFHQ2gD,A/GhBO,C8GkBNJ,AGAT,CjHlBiB,AYuBL,CeJC3yC,AxBNF,CwBML,AyFZN,CDUayzC,CxFEG,AxBNF,AiHNd,EjHMA,CHbS,C+GgBS,CDElB,ACFmBH,CDECV,GAApB,CCFwB,CDEC,ACFAl2C,AICA,CJDD,AICEi3C,AFE1B,CFHkB,CAAV,KICK,CAAqBphB,SAAS,GAAGr/B,GAAjC,MAA0C,IAAjD;A3KIN,AZAA,AoBAA,AEAA,AkCAA,AJAA,ApBAA,ArDAA,AMAA,A8DAA,AWAA,AIAA,ADAA,AlCDA,A0BCA,AYAA,AFAA,AtFAA,AgCAA,AuDAA,ApEAA,AGAA,AkDAA,A7EAA,AkBAA,A+BAA,ArCAA,AXAA,A8FAA,AzEAA,A6CAA,ACAA,AEAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,ANAA,AsHFE,ACFK,ApFGCs7C,AqFCR,A5GPA,ADAA,AHd0Bn8C,AmHkBrB,ACVL,AHYA,A3GJA,IqBIQm8C,AxBNJv5C,AHdsB5C,AoHQ1B,A9GQa,AMQX,CuG1BO,EnHEoB,E8GmBpB,A1GLAiI,AJdsB,C8GmBrB,A3GLA,AHdD,AoHQT,EAAA,CjHMa,AGES,EwGGPs4C,A1GLf,ADAA,A8GMA,C7GNiBx4C,AEEQ,CFFzB,C0GKS,C1GLW,C0GKAyD,AnFCI,AsFAxB,GtFA2B6wC,GsFA3B,CHDS,AGCT,CHD4B,EGC5B,ErGKI,OeLI,wCfK2C,mBkGN1C,EAA2F,IAA3F,IAAmG,GAA1G;AtKGF,AZAA,AoBAA,AEAA,AkCAA,AJAA,ApBAA,ArDAA,AMAA,A8DAA,AWAA,AIAA,ADAA,AlCDA,A0BCA,AYAA,AFAA,AtFAA,AgCAA,AuDAA,ApEAA,AqDAA,A7EAA,AkBAA,A+BAA,A8CAA,AzEAA,A6CAA,AGAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AIAA,ASAA,A2HAA,ApHAA,ANAA,AsHFC,ACFI,ApFGA,AqFCL,A5GPE,AJfgCp8C,AmHoB9BwS,ACbJ,AHcA,GGjBA,CpHJkCxS,AmHoB9BwS,GnHpBiC,AmHF5B,AFoBT,CrGQI,CRXK1K,AJf8B,CIe7B,AJfD,KIeM,IAAb,G+GKOlH,GAtBA,EAsBKX,KAtBL,EAsBY,SvGMkB;ApEHvC,AZAA,AoBAA,AoCAA,AJAA,ApBAA,ArDAA,AMAA,A8DAA,AWAA,AIAA,ADAA,AlCDA,A0BCA,AYAA,AFAA,AtFAA,AgCAA,AuDAA,ApEAA,AqDAA,A7EAA,AkBAA,A+BAA,A8CAA,AzEAA,A6CAA,AGAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AaAA,A2HAA,ApHAA,ANAA,AwHAA,A5GPC,ADAD,AHhB0CA,AmHqBpCkhD,ACVN,AHYA,ArFXA,AAEA,ANCA,E8FJA,EpHX0ClhD,AY2BxC,AUZW,CnBCT,CgHKEkhD,ACjBN,AHmBA,G9GPQv+C,AHhBuC,AiHkB/C,C9GFS,CHhBwC,EGgBrC,AmBDU,CnBCtB,EAAeA,AmBDoB,CnBCnB,CgHKE,A7FNlB,C6FMmB2+C,ChHLAj/C,IiHLnB,AHYA,EEFM,CAAqB29B,ChHL3B,C8GEA,C9GF6Br9B,CAAC,A8GO9B,E9GPA,EAAkC,CgHKE,GAAGhC,GAAjC,EAAsC6I,AvGMjB,IuGNqB,CAACC,SAAL,CAAezJ,KAAf,CAAtC,OvGMiD;ApEHvD,AZAA,AoBAA,AoCAA,AxBAA,A/CAA,A8DAA,AWAA,AIAA,ADAA,AlCDA,A0BCA,AYAA,AxFAA,AgCAA,AuDAA,ApEAA,AqDAA,A7EAA,AkBAA,A+BAA,A8CAA,AzEAA,A6CAA,AGAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AyDAA,ASAA,AaAA,A2HAA,ApHAA,ANAA,AsHFAy5C,ACFIoH,ApFEA,AqFEJ,A7GPE,AHjBO,AmHsBH,ACVN,AHYA,GjH3BoB,C+GuBhBA,AnGQF,EeNM,CmFAD,A3GLD,C2GKEX,G3GLEt9C,AiHLV,CjHKW,CgHKE5C,AFEb,CFJc,C5GHA,CAAZ,C4GGe,C5GHA4C,AgHKX,ChHLY,A8GOlB,CHFA,AGEA,CFJI,C5GHiBP,C2GKE49C,AGEvB,GAAA,I9GPE,EAA6Br9C,A8GO/B,C9GPgC,A8GOhC,E9GPE,EAAkC,C8GOpC,CAAA,EHFA,KlGM4B,6CAA6C;ApEHzE,AZAA,AoBAA,AoCAA,AxBAA,A/CAA,A8DAA,AWAA,AIAA,ADAA,AlCDA,A0BCA,AYAA,AxFAA,AgCAA,AuDAA,ApEAA,AqDAA,A7EAA,AkBAA,A+BAA,A8CAA,AzEAA,A6CAA,AGAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AkEAA,AaAA,A2HAA,ApHAA,ANAA,AsHFA62C,ACFG,ApFEK,AqFER,A5GPA,ADAIj3C,AHjBFrC,AmHsBG,ACVL,AHYA,EjHxBEA,C+GWuB,C5GMrBqC,AGEF,AMSA,CmGRG,CKRL,CNUO,ACXkB,A/GXlB,C8GsBC49C,ACXN,ApFWU,CvBLHp4C,AJjBA,CoHYT,EjHKY,AiHLZ,CjHKanF,EwBKM0uB,ArBHN,CFFb,AgHNA,ChHMkB1pB,ADAd,AGEW,CwGGf,A1GLA,ADAmBlF,CAAC,CCAC,C0GKAy9C,C3GLEp+C,AGEH,KqBGR,ImFAZ,CnFAoC,CxBLjB,GAAkBM,MwBK7B,AfMkB,EeNsB,AxBL9B,GAAgCD,QAAQ,GAAGC,QAAX,GAAsBN,WAAtB,GAAoC,CAAlF,ISWoE;ApEHxE,AZAA,AoBAA,AoCAA,AvEAA,A8DAA,AWAA,AIAA,ADAA,AlCDA,A0BCA,AYAA,AxFAA,AmBAA,AxBAA,AkBAA,A+BAA,A3BAA,A6CAA,AGAA,ACAA,AEDA,AhECA,A4DAA,A7DAA,AkEAA,AaAA,A2HAA,ApHAA,ANAA,AuHJC,ApFEWk6C,AqFEZ,A5GPE,ADAE15C,AHlBO3C,AmHHF,ACgBT,AHIA,GEpBE,ChHqBE2C,AHlBO3C,AY6BT,CqGvBF,CtFiBYq8C,AyFVZ,EpHbe,CIkBNr0C,CAAC,AJlBO,EGkBL,CAAChF,AiHLb,EhHKe,AgHLf,EjHKI,AiHPJ,CjHOkB,AHlBT,CGkBL,CCAF,IuBK4B,GAAG0uB,YAArB,efOR,qDAAqD;ApEJzD,AZAA,AoBAA,AoCAA,AvEAA,A8DAA,AWAA,AIAA,ADAA,AlCDA,A0BCA,AYAA,AxFAA,AmBAA,AxBAA,AkBAA,A+BAA,A3BAA,A6CAA,AGAA,ACAA,AEDA,AhECA,A4DAA,AKAA,AaAA,A2HAA,ApHAA,ANAA,AmCFS,AqFET,A5GPC,ADAG/uB,AHnBuB1C,AmHwB1B,ACVD,AHaA,CEjCA,GhHyBI0C,AHnBuB1C,AiH2B3B,ArGIE,CeTM,CyFRR,CpHd8B,AiH2B9B,EjH3BgC,AiH2BhC,CjH3BS,C2BwBM,CxBLH,CAAC+C,AiHLb,EAAA,EjHKI,CAAeD,CAAC,GAAGL,MiHLvB,EjHKkB,CiHLlB,CAAA,CjHKoCF,QAAQ,AiHL5C,CAHA,EjHQ+CE,QAAX,GAAsB,CAAtD,ISaA,mDAAmD;AxBLvD,AvEAA,A8DAA,AWAA,AIAA,ADAA,AlCDA,A0BCA,AYAA,AxFAA,AmBAA,AxBAA,AkBAA,A+BAA,A3BAA,A6CAA,AGAA,ACAA,AEDA,AhECA,A4DAA,AKAA,AwIAA,ApHAA,AiHJAy5C,ApFEYE,AqFEZ,A5GNA,ADDIx5C,AHpB+B3C,AoHenC,AHaA,I9GRI2C,AHpB+B3C,E+GuB7B,ApFEMm8C,AyFVZ,AHaA,CFLOzC,A/GvB+B,CYiClC,CZjCoC,AiH2BxC,C9GPU,CAAC52C,CHpBF,E+GuBT,C5GHI,AiHLJ,CjHKgB,C4GGCi+C,A5GHb,AiHLJ,EjHKmB,CAAf,EAAkB,CAAlB,CwBK0B,EoFF9B,AEKA,CtFHiCzE,KfQL,ceRhB;AvCGZ,AvEAA,A8DAA,AeAA,ADAA,AlCDA,A0BCA,AYAA,AxFAA,AmBAA,AxBAA,AkBAA,A+BAA,A3BAA,A6CAA,AMDA,AhECA,A4DAA,AKAA,AwIAA,ApHAA,A6BFS,AqFET,A7GPG,AHrB0Cr8C,AoHW7C,AHkBA,IjH7B6CA,AMuB3C,C8GZF,ExGuBC,CAAC,CZlCgD,EAAE,GMuBxC,C6GGG4R,AFGf,C3GNc,E6GGI,CAAC,CFGnB,C3GNmB,E6GGD,GFGlB,CAAA,GAAA;A7HAA,AvEAA,A8DAA,AeAA,ADAA,AlCDA,A0BCA,AYAA,AxFAA,AmBAA,AxBAA,AkBAA,AIAA,A6CAA,AMDA,AhECA,A4DAA,AKAA,AwIAA,ApHAA,A6BFK,AqFEL,A7GPC,AHtBQ,AoHiBT,AHaA,ArGQA,AAAO,GejBH,A3BzBgB,AoHOpB,CzFwBM,AfWO,GqGXb,ItFAanE,CAAP,EAAU,GfWU,GAAG,IAAIstC,iBAAY,CAC3C,KAAK,EACL,UAAU,EACV,MAAM,CACP,CAAC;AxBZF,AvEAA,A8DAA,AeAA,ADAA,AlCDA,A0BCA,AYAA,AxFAA,ALAA,AkBAA,AIAA,A6CAA,AMDA,AhECA,AiEAA,AwIAA,ApHAA,A6BFQmB,AqFER,AhH7BE97C,AoHkBF,AHaA,EjH/BEA,AoHkBF,EzFSQ87C,E3B3BF,AiH+BN,EjH/BQ,CiH0BR,CGRA,EAAA,UzFS0B,EsFI1B,CtFJ6BG,IsFD7B,EAKA,atFJQ;AvCGR,AvEAA,A8DAA,AeAA,ADAA,ARAA,AYAA,AxFAA,AaAA,AIAA,AmDDA,AhECA,AiEAA,AwIAA,ApHAA,A6BFK,AqFEL,A7GPA,AHvBUx8C,AoHmBV,AHaA,A3GvCA,INOUA,AoHmBV,CjHIK,GHvBS,CGuBL+C,CHvBO,AoHkBhB,CjHKU,E8GSV,C9GTa,CAAb,CHvBQ,CGuBQA,EAAC,A8GSjB,CAAA,E9GToBP,C8GSpB,GAAA,I9GT4B,AiHJ5B,EHaA,C9GT+B,A8GS/B,C9GTA,EAAkCO,EAAC,A8GSnC,CAAA,C9GTA,EAAuC;AfQvC,AvEAA,A8DAA,AeAA,ADAA,ARAA,A5EAA,AoEDA,ACCA,AwIAA,ApHAA,A6BFC,AqFED,A5GRA,ADCE,AHxBsB9C,AoHoBxB,AHaA,ArFXA,CDZC,GAAD,A3BVwBA,AM2BtB,EHHI8C,CHxBqB,CGwBpB,CCDEqF,AJvBoB,CAArB,CGwBE,CAAR,CiHHF,CjHGa,CGGA,EAAE,C8GNf,EhHEA,CAAsBjI,KAAtB,CgHFA,ChHE6B,GgHD7B,KAAA,A9GKkC,O8GLlC,CAAA,KAAA,SAAA,CADA,IAEA,iBAAA,GAAA,CAAA,KAAA,OAAA,CAAA,KAAA,SAAA,EAAA,MAAA,CAHA;AhIYA,AvEAA,A8DAA,AeAA,ADAA,ARAA,A5EAA,AoEDA,ACCA,AwIAA,ApHAA,AkHAA,A5GRE,ADCEyC,AHzB4B1C,AoHyBhC,AHCA,C3GEC,GHHG0C,AHzB4B1C,GAAG,EIyB/B,AJzBiC,CAA7B,CGyBG,CAAC8C,ICAD7C,ADAP,CAAa4C,EAAC,ECAd,CDAiBP,ICAA,IDAjB,ICAA,IACA,OAAOrC,KAAP,KAAiB,QADjB,IAEA;AhBMJ,AvEAA,A8DAA,AeAA,ADAA,ARAA,A5EAA,AqEAA,AiDHA,AtBvBA,A2G0BA,A5GLI,ADFD,AH1BqCA,AoHkBxC,AHbA,GGHA,AHRA,CjHMwCA,K2B8B/Bs8C,AvBFEt8C,AJ5BkC,EAAE,GI4B3C,KuBEJ,AvBFqB,CuBEDu8C,GAApB,EAAyB,EvBLrB,IAIA,OAAOv8C,KAAP,KAAiB,SALnB;AhBUF,AvEAA,A8DAA,AeAA,ADAA,ApFAA,AqEAA,AiDHI,AtBtBJ,A2GyBA,A5GHC,AJ/BO,AoH4BR,AHSA,A1G5CA,AeiCA,E8FEA,AHSA,CjH1CoB,CKchBi3C,AiBiBQ,EKKJgF,GyF7BR,AHmCA,EAAA,C3FXA,KjBjBiB,GAAG,EsBsBI,KAAKx7B,GtBtBA+K,A+GmB7B,C/GnBoB,EAAYve,CAAZ,EAAe,CsBsB/B,EAAqC;AvCIzC,AvEAA,A8DAA,AeAA,ADAA,ApFAA,AqEAA,AiDHQ,AtBtBJgqC,A2GyBJ,A5GFA,ADLE,AH3BA52C,AoH4BF,AHSA,E5G5BI42C,ALTF52C,EiHqCF,ArFTE,E5B5BI,CG2BC,CH3BC,CoH4BR,CHQA,C9GTWsC,EAAC,CiHCZ,C/GnBiB,CFkBF,CAAb,AiHCF,C/GnBoB+E,CFkBF/E,EAAC,GElBO,AFkBJN,CElBK60C,G4G4B3B,GrFTsB,CzBDpB,C8GSF,C9GTgCv0C,CiHChC,AHSA,C9GViC,EAA/B,AiHCF,C/GnBoB,A+GmBpB,CjHDqC,EyBCK,CvBlBjC,O+GkBT,CAAA;AhIOA,AvEAA,A8DAA,AcAA,ApFAA,AqEAA,AiDHQ,AtBtBGsW,A2GyBX,A7GPIxW,AH5BM5C,AoH6BV,AHSA,I5G5BWoZ,AFkBPxW,AH5BM5C,IAAI,A4B4BQ,CwFCtB,CpH7BgB,AiHsChB,CtFNe4gB,AxBJJ,CAAC5d,CElBQ,C+GmBpB,C/GnBsB,A+GmBtB,AHSA,C9GVI,AH5BI,CG4BSD,AiHCjB,CAAA,AHSA,C9GVkB,EwBIO,CAAC25C,AxBJLl6C,E8GUrB,ArFViC,CDIR,AsFMzB,EtFN+B,ACJT,CDIG,CAAjB,CxBJS,A8GUjB,CGTA,AHSA,E9GVgCM,AiHChC,EjHDI,E8GUJ,CGTA,AHSA,ArFViC,CAAS,EwFC1C,EHSA,CAAA;A7HFA,AvEAA,A8DAA,AcAA,ApFAA,AqEAA,AiDHK,AtBvBI,A2G0BT,A7GPIF,AH7BoB3C,AoH8BxB,AHSA,A3FdA,CAAA,EKIyB,CAKrB,AxBLA2C,AH7BoB3C,GAAG,EAAE,AoH8B7B,CpH9BQ,CG6BG,A8GUX,A3FdY,CnBIA+C,EiHCZ,C/GpBsCyG,A+GoBtC,CjHDI,CAAa,AiHCjB,AHSA,C9GVkB1G,AiHClB,AHSA,C3FdA,CjBfS,AFmBU,CmBJC,EnBIE,A8GUtB,C5G7B+C,AFmB9B,E8GUjB,E9GV2BP,E8GU3B,CAAA,EGTA,C/GpByDmpB,CAAV,A+GoB/C,CjHDiB,A8GUjB,C5G7B4Dve,A4G6B5D,C5G7B+C,CFmBTtK,CEnByB,A+GoB/D,CjHDI,C8GUJ,IGTA,AHSA,KAAA,SAAA;A7HFA,AvEAA,A8DAA,AcAA,ApFAA,AqEAA,A2B3BiE6oB,A2G2BjE,A7GPG,AH9B6BzrB,AoH+BhC,AHSA,A3FdE,EAAA,C8FzBF,C/GSiEyrB,ALVjCzrB,CKUkC,CAACkZ,CLVhC,C4BuBzB,C5BvB2B,CsB0BnC,CAAA,CtB1BM,GKUyD,GAAchM,CAAd,AiBgB/D,CMHe,ANGf,GMHkB,INGlB,CAAA,GAAA,CAAA,CAAA,CMH6B,CAAC,CNG9B,OAAA;AlCYF,AvEAA,A8DAA,AcAA,ApFAA,AqEAA,A2B5BmF,A2G4BnF,AhHtC0CjN,AoHiC1C,AHGA,A3FTE,E8FMF,A9FNE,CjBlBkB,CLTsBA,C4B4BI,EvBjBtC,ELXuC,AoHiC/C,C9FNE,CtB3B+C,AoHiCjD,A9FNE,MjBhBgBwrB,CAAV,CiBgBN,CjBhBmBve,AiBgBnB,CjBhBM,EAAgB,MiBgBtB,CAAA,GAAA,CAAA,CAAA,GAAA,SAAA;AlCYF,AvEAA,A8DAA,AcAA,AfAA,AiDJI,AtBxBsB,A2G4B1B,A7GPE,AHhCM,AoHkCR,AHzCA,A3FmCE,EAAA,CtBlCkB,CoHwCpB,EzFCQ,AxBHFrK,CwBGGq5C,CxBHF,CErBwB,C+GsB/B,A9FLE,CnBIQ55C,AmBJR,EjBjBiCke,CAAT,IAActT,CAAd,AFqBR,AmBJhB,CAAA,CjBjByC,CFqBtB,CwBGI,AxBHvB,EErB6CA,AFqBvB,CErBwB,AiBiB9C,CjBjB+CpC,AiBiB/C,CKO4BsxC,EyFD9B,A9FNE,CAAA,CAAA,GAAA,MjBjB6C,AiBiB7C,CjBjB8D57B,CAAjB,CsBwBtC,AtBxBkC,EAAyBiL,CAAC,CsBwBnB,AtBxBoBjL,CsBwBnB07B,AtBxBkB,CAAD,GAAOhvC,CAAC,CAACsT,CAAD,CAAR,QsBwB5D,KAAgEE,UAApE,EAAgF;AvCKpF,ATAA,AcAA,AfAA,AiDJQw7B,AtBzB0E,A2G6BlF,A7GPIx5C,AHhCFnC,AoHkCF,A9FNE,EtB5BAA,AsB4BA,CjBpBE,CsB2BI27C,AxBHJx5C,CHhCC,EAAE,GsB4BL,CnBIS,AiHEX,A9FNE,CnBIUI,IAAR,CAAa,CAACD,AiHElB,C9FNE,CKOsB,AxBHL,AmBJjB,C8FMF,CAAA,CzFC2B6d,AxBHL,CAAL,EmBJf,C8FMF,A9FNE,CnBIyBpe,EmBJzB,CAAA,CAAA,CKOM,CyFDR,C9FNE,CnBIe,GAAqBA,EmBJpC,MnBIe,GAAgC,CAA7C;AfQJ,ATAA,AcAA,AfAA,AiDJQ,AqFIR,A5GJA,ADHG,AHjCMxC,AsB6BP,EAAA,EtB7BOA,IAAI,CIoCJqI,CJpCM,AsB6Bb,CKOauY,ALPb,MlBOF,CAAmBtY,CkBPjB,CAAA,CKOuB,AvBAzB,CuBA0Bo0C,CvBAF,EuBAC,A3BpClB,E2BoCwB,ALP7B,CKOuB,ALPvB,CKOM,ELPN,CAAA,CAAA,GAAA,OAAA;A3CYF,AcAA,AfAA,AiDJK,AtB1BD,A2G8BJ,A5GJE,ADHD,AHlC+Bz8C,AoHmChC,A9FLE,EAAA,EtB9B8BA,GAAG,EKWxBm3C,AD0BF9uC,AJrC4B,CsB8BnC,CtB9BK,AsB8BL,ClBOU,KAAK,EgHFjB,A9FLE,CAAA,ClBOO,CC1Be,A+GwBxB,C/GxByBqjB,A+GwBzB,C/GxBwB,CD0BC,CC1BGve,CAAJ,CAApB,AiBmBF,CAAA,GlBO8B9E,AgHFhC,A9FLE,CAAA,C8FKF,A9FLE,ClBOuB,EkBPvB,E8FKF,ChHEwC,KkBPtC,C8FKF,EhHEE;AzBKF,AcAA,AfAA,A2B9BC,A2G8BD,A5GJC,AJtCwCpI,AoHoCzC,A9FLC,CjBxBD,AiBiBA,EAAY,CtBxB6BA,A4BiCvC,CwFDF,EpHhC4C,EAAE,EsBwB1B,CtBxBb,uB4BiCF,ANTO,GMSV,KNTkB,GAAA,EMSd,ANTc,CAApB,EMSiB,EAAE,KAAiB;AjDUpC,AcAA,AfAA,AiDLI,AqFKJ,A5GHA,ADJA,AHpCmDC,AoHsCnD,IjHFI8C,AHpC+C9C,AoHsCnD,EzFAQ,CyFNR,CxFEI,C5BlCoD,EGoC7C,AHpC+C,C4BkClD,EzBEMwB,GyBFD,CzBEK,CAACuB,EyBFF,CwFIjB,GxFJqB,CwFFrB,CxFEuB,CwFIvB,iBjHFc,CAAgC3B,KAAhC,EAAuC;AxBQrD,AcAA,AfAA,AiDLQ,AtBzBD,A2G8BP,A7GPEoB,AHrCK,AoHuCP,A9G/BA,AAAO,EH6BLA,EG7BW,KDMG20C,CFuBN,EAAE,AyBFN,IAAI,CAAC,CvBrBJ,CAAmB3rB,A+GyB1B,C/GzBO,EAAsBve,A+GyB7B,A9G/B+B,CDMxB,A+GyBP,E/GzBgC,ACNE,G8G+BlC,AxFJsB,CAAC,MwFIvB,C9G/B6C,C8G+B7C,A9G/B8C,EsB2Bb,CAAC,CwFIlC,CAAA,ExFJsC,CwFItC,AxFJuC,EwFIvC,IAAA,CAAA,GAAA,EAAA,CxFJoD,CAAC,GAAG,CAAC,CAAC,CAAC;AjDU3D,AcAA,AfAA,AiDLQ,AtBzBJgqC,A2G8BJ,A7GRcj0C,AH5CM,CAApB,CKsBIi0C,EFsBUj0C,KyBDT,EDIUi5C,ItBzBE,CAACzwB,CAAD,AFsBU,EEtBNve,AFsBQ,CEtBZ,AFsBL,CEtBR,MsByB2B,CAACsvC,GAAD,EAAM,CAAN,CAAvB;AhDMR,AcAA,AfAA,AiDLK,AqFKL,A7GTgCt5C,AHlChC,AoHqCA,A7FjDA,GI+CI,CAGE,AxBJ0BA,AHlC5B1C,EoHqCJ,EjHHoC,EAAEiC,AHlC5B,AoHqCV,CzFCYiL,AyFDZ,CzFCM,C3BtCO9N,A4BiCF,CDKG,AyFDd,CAAA,EAAA,CAAA,OAAA,CpHrCA,CoHqCA,KAAA,MAAA;AzIOA,AcAA,AfAA,AiDLQ,AtB1BJ,A2G+BJ,A7GVY,GADyC,KwBMzC,GtB1BCy3C,CuBqBP,CvBrBF,ELXW,CKWG,AuBqBR,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE3tC,cAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AjDW1E,AcAA,AfAA,AiDLY,AtB3BQ,A2GgCpB,A5GLA,ADLE/G,AHhCAlC,AoHoCF,A7GlCA,AAEA,Ae0BA,EnBEEkC,AHhCAlC,EIqCE4H,AkBPE,InBEE,CEtBiByL,ALXV,A4BiCV,CzBAK,AiHIV,CAAA,EhHCa,GAAGnM,AgHDhB,G9FNqB,CjBpBD,ED2BE,AkBPY,CjBpBK8jB,AD2BhBnjB,CC3BH,C+G0BpB,EAAA,G9FN0C,CtB9B7B,AsB8B8B,ClBO3B,CAAiBC,EkBPjC,MlBOA;AzBMA,AcAA,AfAA,AiDLY,AtB5B+B,A2GiC3C,A7GXYtF,AH/BR,AoHoCJ,IjHLYA,CyBCT,M5BhCQrD,E2BqCQs8C,AyFDnB,IjHLyB,EAAE,CAAjB,EiHKV,EpHpCI,CoHoCJ,IzFCmC,AyFDnC,CzFCoCzzC,AyFDpC,GAAA,CzFCmB,CAAsB,IAAtB,EAA4B+zC,GAA5B,EAAiC,CAAjC,CAAP;AhDMZ,AcAA,AfAA,AiDLS,AqFKT,A5GLA,ADP8Bt5C,AH9B3B,AoHoCH,GpHvCe,CGiCeA,CwBItB,CAGE,ExBPwB,CCOzBsF,CDP2B7F,GwBOpB+K,CAAN,EAAQ,EvBAlB,CAAoBzN,KAApB,EAA2B;AzBM3B,AcAA,AfAA,AiDLY,AtB7BRwrB,A2GkCJ,A5GLE,ADRQ,AH5BR/qB,AoHmCF,A7GhCA,EFII+qB,ALPF/qB,CKOG,AFmBgD,CEnB/C4H,AEJO,CPRE,AoH2Bf,IhHcSD,CGjCU,GFIf,AEJkB,GFIJ6E,CAAC,CD6BD,CAACzE,CJpCZxI,EKOiB,CD6Bf,AGjCsB,CHiCPA,CJzCT,CKYG,CLPJ,EKOiB0H,AD6BtB,EAAsBe,CGjCkB,EAAE,CFId,CAACuB,AD6B7B,CAA4B,CAA5B,EAA+B,CAAC,AGjCyB,CFInC,AD6BtB,CC7BoCiD,AD6B3C,CC7B6B,CAAb,IAAiCmqC,EAAE,CAAC/uC,SAAH,GAAe4E,CAAC,CAAC5E,SAAjB,EAA4B,IAAI+uC,EAAJ,EAA7D,CAAd;AZmCJ,AfAA,AiDLY,AtB7BX,A2GkCD,A5GLC,ADRC30C,AH5BE,AoHoCJ,EjHREA,EiHQF,A7GjCE,IAAI,CJyBG,AIzBF,C6GkBP,CjHOW,AH5BAlC,E2BoCQ07C,I3BpCF,COGD,EPHI,AOGF,Q6GiClB,CzFAmC,CAACzzC,EyFfpC,EzFemB,AyFAnB,CzFAyC,IAAtB,EAA4B+zC,GAA5B,EAAiC,CAAjC,A3BpCcv8C,C2BoCrB,I3BpCQ,EAAoBL,aAApB,CAAhB;AP0CJ,AfAA,AiDLS,AqFKT,A5GJA,ADVaqD,AH3BV,AoHoCH,GpH3Ce,CGkCFA,IIxBT,MAAM,GJwBgB,EAAE,AiHS5B,CjHTW,KiHSX,CAAA,E7GjCwB,CAAC,E6GiCzB,K7GjCgC,CAAC,C6GiCjC,A7GjCkC,E6GiClC,IAAA,CAAA,GAAA;A3HMA,AkCLK,AtB7BE,A2GkCP,A7Gf+BC,AHzB7BvC,EAAAA,EKMS22C,AFmBoBp0C,AyBM7B,C5BxCa,AOWZ,GJuBgC,EAAER,EEnBlB,GAAG,KLNf9B,GATQ,EASH,EKMqB,QuByB5B,GAAH,UAAI,GAAW;AnCUjB,AkCHC,AtB/BG,A2GkCJ,A7GhBW,AHxBP,AoHkCJ,A9FKA,CfrCC,CAAC,EeqCI,E8FLN,EpHlCQX,A4B+BJ,EwFGJ,CAAA,CxFHU,C5B/BG,CoHkCb,CAAA,CpHlCgBO,EoHkChB,CAAA,E/G5BI82C,AuByBe,ANQI,CtBvCD,CAAC12C,C4B+BD,ANQgB,EtBvChB,AoHkCtB,CpHlCI,CoHkCJ,AxFH0B,CvBzBd,AuByBe,GvBzBZ+G,C+G4Bf,C9FKuC,IjBjClB,CAAC4vC,A+G4BtB,CxFHsC,CAAC,CNQD,EAAW,CjBjClC,GuByB+B,CvBzBd,AuByBe,ENQT,EMRa,ANQK,CMRJ,IvBzBXD,QAAT,CAAkB74B,AuByBe,CvBzBjC,AuByBkC,EvBzBb,CuByBgB,CAAC,CAAC,CAAC;AnCUxE,AYlCQ,A2GkCR,A7GpBqD,AHpBjD,AsBsCsD,CnBlB5C,CAAd,ImBkB0D,EtBtClD5d,A4B+BJ,CvBzBS,CiBgC6C,EMPlD,CvBzBS+uC,ALNJ,AsBsC6C,CjBhC7C,CiBgC6C,CjBhCtCxlC,ALNJtJ,CKMK,GAAG,ALNJ,CKMP,ALNQC,A4B+BJ,EvBzBUgI,CAAC,ALNZ,CAAS9I,A4B+BJ,EvBzBUmM,EuByBN,C5B/BK,CAACpM,A4B+BJ,G5B/BF,EKMe,CAACqK,ALNJpK,KAAK,CKMlC,ALNmCF,EKMMqK,CAAC,ALNlC,CAAZ,EKMiDrB,CAA7C,EAAgDqB,CAAC,EAAjD,EAAqD;AZmC7D,AkCJA,AtB9BYwlC,A2GkCZ,A7GfA,AHzBI,AoHkCJ,IjHTIzsC,EEnBQysC,CAAC,EsB8BJ6M,CtB9BOrwC,AFmBN,AiHSV,CpHlCWnM,C4B+BL,CzBNOwB,EiHSb,CpHlCgB,CGyBC,AHzBA1B,CGyBCqD,CEnBO,AuByBZ,CvBzBagH,ALNf,CKMc,CAAb,CLNWvJ,A4B+BN,CDKjB,AyFFA,AxFHkB,CDKO67C,G3BpCG,CoHkC5B,EzFEA,A3BpC+Bz8C,E2BoCE,AyFFjC,CAAA,CjHTa,CAAuBoB,AHzBA,CAACpB,AoHkCrC,EAAA,EjHTa,CHzBT,CGyBuC,CAACoD,eAAD,EAAKC,eAAL,CAA9B,CAAb;AVgBA,AkCJI,AqFIJ,A7GfA,AHzBG,AoHkCH,IjHTIC,EwBWI44C,CLAkD,EMLrD,ENKqD,CnBX9C,CiHSZ,A9FE0D,EnBX3C16C,CmBW2C,GnBXvC,AmBWuC,CnBXtC+B,CmBWsC,C8FF1D,EzFE0B,ALAgC,C8FF1D,IzFE+BguB,EyFF/B,CAAA,C9FE0D,CnBX3C,AmBW2C,CnBXvBnwB,CiHSnC,CAAA,GjHTe,CwBWX,CxBXsC,AiHS1C,A9FE0D,CKAb,CLAa,IAAO,C8FFjE,EAAA,CAAA,CAAA;A3HOA,AkCJQ,AtB/BI,A2GmCZ,A5GNA,ADTEoC,AHvCa,AoHgDf,A7G/BA,AegC0D,EnBVxDA,EItBW,AegC6C,GnBVnD,CmBUmD,ClBDjDkF,ADTA,AmBUiD,EjB9BzC,AiB8ByC,EML/C,CNK+C,CjB9BrC6X,AiB8BqC,CjB9B9C,AiB8B8C,EfhC/B,CegC+B,CjB9BhCovB,CAAd,AEFkB,CH+B9B,CC7B6B,AD6BLxnC,GAAxB,CC7BiCT,CD6BJ,AkBC6B,CAAA,EfhCnB,AegCmB,CAAA,CjB9BnB,CAACW,IEFc,KFErB,CAAiBwC,cAAjB,CAAgCrC,IAAhC,CAAqCmnC,CAArC,EAAwCpvB,CAAxC,CAAJ,EAAgD/B,CAAC,CAAC+B,CAAD,CAAD,GAAOovB,CAAC,CAACpvB,CAAD,CAAR;AZoC7E,AkCJQ,AtB/BC,A2GmCT,A5GNE,ADVS9c,AiHUX,IjHVWA,AIrBT,C6GSF,EjHYc,ECUL2E,ADVO1E,EwBYD6tB,ApBjCN,CqB2BH,GrB3BO,GH+BK,CAAC/oB,AwBJNq1C,CrB3BK,CACd,EoBgCuB,AvBFlB,ADVA,CwBYmBpB,AvBFJt0C,GAAf,GuBEkB,CAAnB,CCNa,CxBIY,AwBJX,SrB1BG,AqB0BM,CAAC,CAAC,MxBI/B;AXOF,AkCJK,AqFIL,A5GNC,ADXoBxE,AiHYrB,GzFHiC,CAK7B,AxBdiBA,AiHYrB,GjHZwB,CInBlB,CJmBoBvC,AyBOrB,CwFnBL,IjHY+B,CAACwC,EInBjB,CAAC,U6G+BhB,C7G/B2B,G6GO3B,EAwBA;A3HMA,AYpCQ,A2GoCR,A7GlBS,AiHaT,A7FtCA,AAUA,AD0BE,KMHC,CNGG,Ef7BA,GFAS4a,A+G+Bf,C/G/BQ,CiB6BK,GAAG,E8FEhB,CAAA,IAAA,CAAA,A9FFwB,CAAC,E8FEzB,IAAA,E9FFE,E8FEF,A9FFmC,C8FEnC,A7G/BkC,G6G+BlC,EAAA;A3HMA,AYpCK,A2GoCL,A5GNA,ADd0C,AiHe1C,A9FFI,CnBbW,CAAf,CEtBI,E+GWJ,G7GLM,CH8BG7V,MG9BI,CACV,CH6BH,AG7BI,CH6Bed,CAAnB,EAAsB;AXOtB,AkCLI,AqFKJ,A5GNE,ADXFrG,AiHaA,A7F7BA,AD0BG,Cf5BF,GJkBG,AiHaJ,A7F7BI,CpBgBCqC,CwBYG,CAACq4C,EvBDA9zC,CgH1BT,QhH0BkB,AmB3BA,CnB2BCI,EmB3ByC,EnB2BnD,AmB3BqD,CnB2BtCX,AmB3BuC,CI4BpC,AvBDlB,KuBCuBw0C,AxBZhC,AiHaA,ChHF+B,ADXAp7C,MAA/B,EAAuCkB,SCWrC,CuBCO,AxBZT,IwBYuD,CAAC+5C,kBAAhD,KAAuE3qB,YAA3E,EAAyF;AlCM7F,AkCLQ2qB,AtBhCJ,A2GqCJ,A5GNC,ADXD16C,AiHaA,IzFDQ06C,AxBZJ,CAACp4C,IEpBMuzC,E+GiCX,M/GjCmB,CAACjrC,E+GiCpB,EzFD0B,CtBhCf,A+GiCX,C/GjC0B,CsBgCGmlB,GtBhClB,AFoBX,AiHaA,CjHb6BnwB,CEpBG+K,G+GiChC,CjHbA,AiHaA,EjHboCjJ,CwBY5B,CyFCR,C/GjCW,A+GiCX,C/GjCI,EFoBJ,EAA4CJ,OAA5C;AVkBA,AkCLQ,AtBhCP,A2GqCD,A5GLA,ADZA1B,AiHaA,A5GvEA,AcmEE,CjBtCK,GuBqCL,CzBRG,CAAC2C,AmBSE,E8FIR,C9FJW,EKGIwtB,CyFCf,A9FJc,E8FId,EjHbA,AmBSkB,CnBTDruB,GmBSH,GKGa,AxBZJ,AmBSE,CKGGu5C,AxBZJz4C,AiHYxB,MzFA2B,CAAnB,AxBZR,GmBSc,EAAZ,EMDM,GAAN,UAAO,GAAW;AnCUpB,AkCLK,AqFKL,A7GjBA5C,AiHaA,KjHbK,CAAC6C,EiHaN,AxFLI,IAAI,CAAC,CwFKT,EjHbA,AiHaA,CjHbiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,AyBQoB,CAAC,CzBRK,CAA1B,MiHaA,ExFL+B,CAAC,IwFKhC,AxFLoC,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC;AnCUzD,AuHAA,A7GjBA7C,AiHUA,A9FFE,KnBRG,AyBQF,CzBRG8C,CiHUN,EAGA,C9FLU,E8FEV,GjHVA,CAAgB9C,CmBQd,InBRmB,CAAC+C,EAAtB;AVkBA,AkCNI,AqFMJ,A7GjBA/C,AiHaA,A7F5BA,KpBeK,AiHpBL,CzF+BQ,AxBXFgD,QAAN,CAAe,CAAf,EAAkB,CAAlB,EAAqBnD,MAAM,CAACoD,KAA5B,EAAmCpD,MAAM,CAACqD,MAA1C;AVkBA,AkCNQ,AtBjCD,A2GuCP,A7GhBA,AiHaA,IjHbIC,AiHaJ,A7FrBE,I6FdF,C/GDgBgzC,CFuBN,GAAG,CAAC,CEvBP,AFuBM,CEvBU5H,CAAhB,AFuBU,CAAJ,CEvBaliC,CAAnB,AFuBa,CAAP,CEvBgB,AFuB7B,IiHaA,G7FpBI,OAAwB,EACxB,MAAyB,EACR,SAA6B;A9BsBlD,AkCNQ,AtBjCJ,A2GuCJ,A5GPA,ADTA,AiHaA,IjHbIjJ,EEvBIga,CAAC,AFuBF,CoBNc,CnBeZ5V,CChCG,AFuBF,CwBUKszC,AxBVJ,AiHaX,C/GpCI,AFuBM,EAAI,GAAJ,EAAS,CAAC,AiHapB,CjHbU,CAAV,AoBN8B,C6FmB9B,E7FnBqB,CnBerB,CAA4BrzC,CgHI5B,CzFHiC,CAAC4zC,AvBDlC,EAAiC,CgHIjC,CAAA,A7FnB8B,CAAoB,CIgBjB,CAAzB,CyFGR,CACA,KAAA,OAAA,CAAA,KAAA,SAAA,CADA,EAEA,GAFA;A3HIA,AkCNK,AqFML,A5GPE,ADTF,AiHeA,GzFRI,CAGE,AxBVFh4C,CiHxBJ,ChHiCMqE,ADTA,CCSC,CmBzBG,CpBgBD,CCSCC,ADTA,CwBUG0E,AxBVJ,CwBUH,CxBVO,CwBUE,AxBVN,EAAO,CAAP,CAAT,ECSoB,CAACzE,EmBzBD,GAAG,CnByBI,CAACH,GAAD,AmBzBC,CnByBR,AmBzBS,CnByB3B;AXQF,AkCNQ,AtBlCJ,A2GwCJ,A5GPE,ADTF,AiHgBA,IjHhBInE,AiHgBJ,AxFNE,GvBlCO,CsBkCG,AyFnCZ,A7FSU,CnByBDoE,CAAC,ADTA,CExBGyX,CAAT,CFwBShf,CCSC,CAAL,ADTM,CExBGouC,AFwBFhrC,CExBZ,EAAiB,ADiCF9D,GDTN,AoBhBM,ClBRM6G,ADiCF,ADTAlD,CCSCyE,CmBzBa,CpBgBxB,AiHgBb,C7FhCuC,CpBgBX1E,AoBhBY,ClBRT,ADiCZ,CCjCa8D,ADiCFS,CAAX,GDTN,EAAuBrE,CCSCqE,CAA5B,ADTI,CExBY,AFwBzB,CExB0C+B,EDiCA3B,GwBC3B,GAAb,ExBDgD,CAACL,GCjC1B,ADiCyB,CCjCOL,ADiCvD,GwBCc,CvBlCS,CAAqCmnC,CAArC,CuBkCG,CvBlCqCpvB,CAAxC,KAA8C9S,CAAC,CAAC1L,OAAF,CAAUwe,CAAV,IAAe,CAAjE,EACb/B,CAAC,CAAC+B,CAAD,CAAD,GAAOovB,CAAC,CAACpvB,CAAD,CAAR;AZwCR,AkCNY,AqFMZ,A5GPC,ADTD,AiHgBA,IjHhBI3b,IyBUA,ALjBA,G6FuBJ,CjHhBY,AoBPJ,CAAC,EpBOM,AyBUJ,CwFMX,CAAA,C7FvBc,CKiBC,CAAC,CLjBC,C6FuBjB,CAAA,IxFNuB,ALjBA,C6FuBvB,A7FvBwB,EKiBE,ELjBG,CAAC,CKiBA,CAAC,EwFM/B,EAAA,KAAA,CAAA,QAAA,EAAA,GAAA,CAAA,KAAA,MAAA;A3HCA,AkCNY,AtBlCR,A2GwCJ,A7GhBEC,AiHgBF,A9FTI,EnBPFA,GiH3BF,AxFqCG,CvBlCK8qC,AFwBF,CExBG,CFwBDpuC,AoBPJ,CDcK,CnBPC,CExBG,AFwBFuD,CoBPH,CIiBWo3C,AJjBV,ElBjBD,EiB+BS,CnBPT,AmBOU,CjB/BG,AFwBFx3C,ImBOf,EnBPI,CExBoBgD,AFuBb,KwBWsB,CAACc,AtBlCJ,CAACgvC,GsBkChB,CAAwB,IAAxB,EAA8BiF,CJjBT,KIiBrB,CAAP,ItBlCS,KAAwC,UAAzD,EACI,KAAK,IAAItyC,CAAC,GAAG,CAAR,EAAWoW,CAAC,GAAG7Y,MAAM,CAAC8vC,qBAAP,CAA6B7H,CAA7B,CAApB,EAAqDxlC,CAAC,GAAGoW,CAAC,CAACnW,MAA3D,EAAmED,CAAC,EAApE,EAAwE,IAAIsD,CAAC,CAAC1L,OAAF,CAAUwe,CAAC,CAACpW,CAAD,CAAX,IAAkB,CAAtB,EACpEqU,CAAC,CAAC+B,CAAC,CAACpW,CAAD,CAAF,CAAD,GAAUwlC,CAAC,CAACpvB,CAAC,CAACpW,CAAD,CAAF,CAAX;AZuCZ,AkCNS,AtBhCL,A2GsCJ,A5GPA,ADTEpF,AiHiBF,A9FVM,EnBPJA,EiHiBF,AxFNE,CDJM,CAGE,ALHJ,CnBPC,EEtBIyZ,AD+BFrV,ADTA5H,CEtBL,A+GNJ,CjH4BW,CAACyD,AoBPN,CIiBWyI,ALHJ,CKGH,ALHI,EKGK,CLHb,ClBEN,AmBhBY,ADcK,ClBEG5E,AmBhBP,CpBOJ,ECST,ADXe,CmBST,ClBEmB,AkBFnB,M8FUN,C9FVM,EAAO,CAAK,MMIR,ANJY,GMIpB,ANJgB,GAAO,GCdkB,EDczB,ECd6B,CDchB,ICdqB,CAAC,GDcd,CAAC,IAAtB,GAA0B,GAA/B,EAAkC,MAAlC,CAAuC,IAAvC,CAAP;A7BUN,AkCNY,AtBhCX,A2GsCD,A5GPE,ADTA5D,AiHiBF,A9FVM,EnBPJA,MyBWE,ALlBA,CnBiBA6C,CgHOJ,E7FxBQ,CpBOK,AoBPJ,CnBiBA,CAACe,ADVK,AiHiBf,AxFNW,CzBXK,ECUP,CAAL,ADVW,AiHiBf,AxFNe,CAAC,CzBXK,AiHiBrB,A7FxBiB,CpBOK,CCWlB,CmBlBgBmyC,CpBOL,CAHA,ICcJnyC,CwBAgB,CAAC,CxBAd,CAACO,GmBlBa,CnBkBxB,AmBlB0C,EKkBV,EAAE,CxBAd,AwBAe,ELlBc,CAAC,CAAC,MnBiBnD,IAEA,OAAOP,GAAG,CAACQ,KAAX,KAAqB,UAHvB;AXQF,AkCNY,AqFMZ,A5GHC,ADbCnE,AiHiBF,EjHjBEA,GyBWC,GLlBC,CpBOK,EAAE,CAAC,AoBPJ,CpBOG,AiHiBX,A7FxBS,EpBOM,GAAJ,AiHiBX,CjHrBe,AiHqBf,E7FxBiB,G6FwBjB,A7FxBoB,C6FwBpB,KAAA,SAAA,EAAA,KAAA,CAAA,MAAA,EAAA,GAAA,CAAA,KAAA,IAAA;A3HAA,AkCNY,AtBhCL,A2GsCP,A5GFA,ADdEC,AiHiBF,A9FXI,EnBNFA,EyBWF,KvBjCgBsyC,AFsBP,AmBMA,EnBNEn0C,CoBPL,CIiBa44C,AyFOnB,IAAA,A9FXiB,CCbL,ADaM,CjB5BX,AFsBY,CEtBQxE,AFsBPl0C,AoBPN,KpBEC,AmBWX,GMKH,EvBjCM,CsBgC8B,CAACgF,AtBhCCjE,EkBenB,EIiBD,CAAwB,CtBhCpC,EAAwC5D,CsBgC5B,AJjBC,EIiB6B87C,AtBhC1C,EAA6C9E,AkBe5B,GAAA,CIiBL,AtBhCZ,CsBgCK,CtBhC8C;AZuC1D,AkCNS,AtBhCL,A2GsCJ,A7GhBEvyC,AiHiBF,A9FXM,CMIL,CzBVCA,GyBUD,CvBhCOoG,AiB4BF,CjB5BG,A+GoCT,G/GpCYW,EkBeN,C6FwBN,A9FXa,CnBNC,AmBMA,EnBNE,CAAClL,AmBMX,CAAW,CjB5BI,CAACmJ,AkBeR,EAAE,CpBOO,AmBMjB,CnBNkB/F,AmBMlB,EjB5BF,GFsBY,EAAepD,AmBMzB,EAAO,CAAK,ECbI,CpBOe,CAACqD,EmBMhB,GCbA,ADaJ,CnBNF,EmBMS,ICbI,CAAC,ADaZ,GAAa,ICbM,CAAC,GDaC,CCbG,ADaF,CCbG,GAAA,ADazB,GAA0B,GAA/B,EAAkC,MAAlC,CAAuC,IAAvC,CAAP;A7BWN,AkCNK,AtBjCD,A2GuCJ,A7GvBe,AiHwBf,A9FXM,CnBbN,KEhB8BszC,CAAC,GAAGpsC,CAAC,CkBgB7B,C6FwBN,C/GxCsC,CAAJ,E+GwClC,C/GxC0CjH,E+GwC1C,I/GxCkC,C+GwClC,E/GxCmDozC,IAAI,C+GwCvD,A7FxB0B,C6FwB1B,C7FxB4B,ElBhBgC,E+GwC5D,E/GxCmD,GAAgBA,CkBgBtC,GlBhB0C,A+GwCvE,EAAA,C/GxC0EjwC,EkBgBL,C6FwBrE,G/GxCgF,CAAC6R,wBAAP,CAAgChV,MAAhC,EAAwC5D,GAAxC,CAAvB,GAAsEg3C,IAArH;AZwCJ,AkCHC,AtBrCG,A2GwCJ,A7GfA,AiHgBA,AvF5FA,ArBiBA,IL2DItyC,AK3DE,EHkCyHmmB,CAA3H,CFyBI,GAAG,GAAX,EoBRQ,KfnDe,GAAG,MemDJ,CAAC,GfnDY,CemDR,CAAC,CfnDkB,OemDV,CAAC,CAAC;A9BwBtC,AYxCI,A2GwCJ,A7GfA,AiHgBA,A9FZI,InBJAlmB,CiHpCJ,C/GWQ,GiB6BC,EnBJE,EEzBI6M,CFyBD,CAAd,EmBIiB,CAAC,EjB7BV,EiB6BJ,GjB7BuB,QAAnB,IAA+B,OAAOA,OAAO,CAAC0lC,QAAf,KAA4B,UAA/D,EAA2ED,CAAC,GAAGzlC,OAAO,CAAC0lC,QAAR,CAAiBH,UAAjB,EAA6BnzC,MAA7B,EAAqC5D,GAArC,EAA0Cg3C,IAA1C,CAAJ,CAA3E,KACK,KAAK,IAAIxtC,CAAC,GAAGutC,UAAU,CAACttC,MAAX,GAAoB,CAAjC,EAAoCD,CAAC,IAAI,CAAzC,EAA4CA,CAAC,EAA7C,EAAiD,IAAIqhB,CAAC,GAAGksB,UAAU,CAACvtC,CAAD,CAAlB,EAAuBytC,CAAC,GAAG,CAACpsC,CAAC,GAAG,CAAJ,GAAQggB,CAAC,CAACosB,CAAD,CAAT,GAAepsC,CAAC,GAAG,CAAJ,GAAQggB,CAAC,CAACjnB,MAAD,EAAS5D,GAAT,EAAci3C,CAAd,CAAT,GAA4BpsB,CAAC,CAACjnB,MAAD,EAAS5D,GAAT,CAA7C,KAA+Di3C,CAAnE;AZwCjF,AkCJA,AtBnCI,A2GuCJ,A5GJA,ADXA,AiHiBA,A9FbM,IKOFtiB,AxBXA/vB,AiHiBJ,A5G5EE,Ec+DI,Ed/DE,CmBsEC,AtBnCEiG,ADmCFlD,CCnCG,AFwBF,CiHrCV,A5GtBW,CmBsEC,CtBnCG,AFwBF,AmBIA,CKOb,AtBnCW,AFwBX,AK3DwB,Ac+DV,Ed/DY,AemDlB,CnBmBR,AItE2B,CHmCPsvC,ADmCD/uC,AkBPb,CjB5BK,AiB4BO,ElBOlB,ECnCyBnB,ADmCD,CkBPlB,CAAA,CCZY,CAAC,ElBhBY,CAACiI,E+GyChC,A9FbM,EAAO,CAAM,MCZM,ADYF,GjB5BE,AiB4BN,CjB5B4BpL,EiB4BrB,CCZD,GlBhBA,CiB4BN,CjB5BoC5D,EiB4BvB,CjB5BP,AkBgBQ,CAAC,ClBhB0Bi3C,CAAnC,CAAd,CkBgB2B,ClBhB0BA,AkBgBzB,ClBhBnC,AiB4BoC,CAAC,CCZF,EAAE,CAAC,ADYvB,CCZwB,CAAC,CDYC,GAAhC,EAAmC,MAAnC,CAAwC,IAAxC,CAAP;A7BYN,AkCJA,AtBnCC,A2GuCD,A5GJE,AgHMF,A9FbM,IKOF8E,AnBtEF,IAAI,CJsEG7zC,AItEF,E4G4EP,CzFNY,AvBAA,AItEF,CAAC,AemDJ,CfnDK,CmBsEG,CvBAC,AgHMhB,CAAA,GzFNA,AvBAS,EgHMT,ChHLM,AgHKN,EhHNS,GAEHS,AgHIN,KhHJW,CAACC,GgHIZ,EAAA,EhHJM,CAAcV,AgHIpB,CAAA,EhHJM,EgHIN,GhHJ6BH,aAAa,CAACG,GAAD,CAAb,IAAsBA,GAAG,CAACP,QAAJ,KAAiBF,SAA9D,GACEoB,IAAI,CAACC,SAAL,CAAeZ,GAAf,EAAoB,IAApB,EAA0B,CAA1B,CADF,GAEEG,MAAM,CAACH,GAAD,CAJZ;AuBCF,AqFIA,A5GAC,ADfD,AiHiBA,IzFNI8zC,AnBtEF,C4GoBF,IjHuCSn3C,AK3DF,GemDD,CfnDK,CAAC,EmBsEZ,AxBXA,CAAkBC,AK3DH,CAAC,EAAE,CAAC,GAAG,CL2DtB,EAAuC,AK3Dd,CAAC,MAAM,CemDH,CfnDK,CAAC,AemDJ,EfnDM,EAAE,MemDR,QAAQ;AIoBvC,AtBnCO,A2GuCP,A5GCA,ADjBuC,AiHmBvC,A9FfI,IKQAm3C,AyFOJ,EjHnB4Bl3C,EiHvC5B,A5GnBI,CHmCYoyC,AiB2BP,EnBJ8B,CK1D/B,CAAC,CmBsEK,EtBnCP,AGnCK,AemDJ,CImBS,AtBnCOC,AiB2BP,CKQC,ALRA,CKQlB,AnBtEe,CAAC,Ec8DZ,I8FeJ,C/G1CO,EAA6BC,CGnCV,AemDJ,CfnDK,CAAC,CAAC,AemDJ,CfnDK,IHmCvB,EAAwC,OkBgBR,CAAC,MAAM,CACpC,UAAA,QAAQ,IAAI,KpBMc,CAAG,CoBNjB,QAAQ,KAAK,QAAQ,GAAA,CAClC,CAAC;AlBjBN,A2GuCJ,A7GhBE,AiHmBF,A9FfM,MAAA,Ed9DF,CHmCO,AFuBF,EiHmBT,C5G7EQ,CAAC,AeqDF,ADSM,CAAC,C8Fed,C5G7EY,E4G6EZ,A9FfM,CjB3BezzC,AFuBFoB,AK1DJ,Ac8DG,Ed9DD,C4G6EjB,CjHnBS,CmBIH,CjB3BK,AFuBc,AmBInB,EjB3BuBhF,GAAlB,EAAuB,AiB2B5B,EAAO,CAAM,MAAI,GAAJ,GAAO,KAAP,GAAa,QAAQ,CAAC,IAAtB,GAA0B,GAAhC,EAAmC,MAAnC,CAAwC,IAAxC,CAAP;AKSN,AtBpCoCq3C,A2GwCpC,A7GhBI,AiHmBJ,A9FfM,IjB5B8BA,IFwB5BzyC,CwBYCs3C,AJjBJ,CAAC,EfrDA,CHkCuC,CAACt4C,AFwBhC,CK1DL,CAAC,CL0DOoB,AK1DN,EAAE,CHkCgC,AGlC/B,CL0DO,CExBiChF,CGlCrC,CmBsEjB,AxBZwB+E,AK1DN,CHkC2B,AGlC1B,EmBsEQ,AtBpCgCqyC,EFwBvD,QExByC,CAAT;AsBqChC,AtBrCqE,A2GyCzE,A7GhBI,AiH1CJ,G/GiBI,EkBoBD,CIiBK,CAAC2E,CxBZD92C,CK1DH,MmBsEG,CxBZQ,GwBYK,AxBZF/E,CwBYG87C,GxBZC,CAAC78C,GAAL,CAAS,CAAT,EAAYyF,CwBY3B,EAAgC,GxBZC,GAAGE,QAArB,CAAf;AwBaI,AtBrCP,A2GyCD,AI3FA,A9F8EI,ICPF,KDOO,Id9DE,IAAI,Ac8DE,Cd9DD,Ac8DE,Gd9DC,Ec8Df,Ed9DmB,CeuDjB,CfvDmB,0DeuDW;AIiB/B,AqFIL,A7GhBI,AmBGE,MAAA,EnBHEG,IK3DF,CesDJ,ADQW,CAAC,Cd9DL,CL2DO,AK3DN,CAAC,EAAE,Ac8DP,Cd9DQ,Ac8DK,CnBHE,CAAjB,CK3Da,CL2DO,AK3DN,CAAC,Ac8Db,CAAA,Gd9DiB,CAAC,Gc8DlB,Cd9DsB,Cc8Df,CAAO,Cd9DW,CAAC,Ic8DR,GAAJ,GAAO,KAAP,GAAa,QAAQ,CAAC,IAAtB,GAA0B,GAAjC,EAAoC,MAApC,CAAyC,IAAzC,CAAP;AjB3BC,A2GyCP,A5GDA,ADfMF,AmBGA,MnBHAA,GEzBUuyC,ADwCPvuC,EDfE,CK3DL,AesDF,GpBKWjE,AK3DN,CAAC,AesDF,CnBoBR,AI1EW,AesDF,CnBoBUoD,CCxCZ,AGlCM,CHkCcqvC,AGlCb,CJ0Ed,EAAwB,ADflB,AK3DW,CAAC,CAAC,GAAG,EAAE,CHkCjB,CkBoBiB,ClBpBgBC,CGlCZ,AesDF,CAAC,EftDI,CAAC,QHkCzB,EAAgD;AsBqCnDuE,AtBpCA,A2GyCJ,A5GDE,ADfG,EwBWDA,ItBpCI,ADwCF5zC,CAAC,EI1EF,CmBsEO,AvBIFC,EmBpBN,CIgBW,AtBpCAoJ,KsBoCX,CJhBO,ClBpBH,ADwCY,CAACtJ,EmBpBN,CnBoBK,AmBpBJ,ClBpBW,ADwCzB,QCxCM,IAA+B,OAAOsJ,OAAO,CAACimC,GkBoBP,CAAC,IlBpBT,KAA4B,UAA/D,EAA2E,OAAOjmC,OAAO,CAACimC,QAAR,CAAiBF,WAAjB,EAA8BC,aAA9B,CAAP;AAC9E,A2GyCD,A5GDE,AkBbE,SlBaKxuC,AmBpBN,IfvDQ,CJ2EG,CAACb,CAAD,CAAL,AI1EH,CAAC,CAAC,CJ0EYD,EI1ET,CJ0EF,GAAiBC,CAAxB,CI1Ee,MAAM,MAAM;AmBsEzB,AqFMJ,A5GDC,ADfG,AmBEE,MKQE6zC,KxBVG/2C,CK3DL,Ac6DM,Cd7DL,AeuDL,GfvDQ,Ac6DM,Cd7DL,CmBqES,CAACwE,AxBVjB,CK3DU,Cc6DF,CACJ,Cd9DS,AeuDoB,CfvDnB,CmBqEd,CJdoC,CIcX,GnBrEL,wDc8D8C,OAA9D,GAAqE,GADjE,CAAN;AKSEkrB,AtBnCD,A2GyCP,A5GAA,ADhBG,AmBtBD,GnBaA,CwBmBMA,KAAK,AtBnCG+iB,GsBmCAsE,AnBrEV,AeuDF,CfvDG,GAAG,AeuDF,CfvDG,AeuDF,ClBrBF,CAAmBrE,KsBmCE,CAACt9B,CtBnCtB,CGlCc,CHkCcu9B,AGlCb,CAAC,EmBqEP,CAAoBjjB,AnBrEV,AeuDF,CfvDG,CAAC,AeuDF,CAAC,EIcX,AnBrEe,CmBqEvB,AtBnCD,EAAwCkjB,CAAxC,EAA2CC,AGlCb,MAAM,GHkCpC,EAAsD,CGlCZ,EAC3C;AmBqED,AtBnCD,A2GyCJ,A7GhBC,A0B1ED,AAEA,AP4EC,CAhCD,EKoCI,MAEO,AtBnCA,GkBqBP,ElBrBYD,CAAC,CkBqBT,CAAC,GlBrBaA,CAAC,GAAGl4B,OAAT,CAAN,EAAyB,UAAUE,IkBqBN,GlBrBJ,AkBqBO,ElBrBYgR,CkBqBT,CAAC,IlBrBX,EAA2B;AsBoCvDorB,AtBnCA,A2GyCR,IrFNQA,KJdL,GftDG,CHiCWlE,AGjCV,CmBoEW,EnBpER,CmBoEW,CAAC,CAAd,GtBnCA,CAAmB14C,AGjCV,IAAI,CHiCb,AGjCc,CAAC,CHiCW,EGjCR,MAAM,KAAK,EAAE,CAAC,IAAI,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC;AmBqErE,AtBpC+B,A2G0CpC,A7GhBA,AmBIA,IAAA,KnBJSgB,CE1B+B,AiB8BxC,Ed9DM,GL0DN,AK1DS,CL0DO2E,AK1DN,CAAC,EAAE,CL0Db,AK1Dc,EL0DQ,CK1DL,CAAC,CAAC,IAAI,EAAE,IAAI,GAAG,CAAC;AHgCSgzC,A2G2C1C,A7GhBE53C,AmBGF,EnBHEA,ME3BwC43C,IAAI,AG/BxC,CH+ByCF,EG/BtC,CAAC,CAAC,EAAE,CAAC,EH+B0C,CAAC7xB,AF2BlC,AK1DN,CL0DO5lB,AK1DN,CAAC,CAAC,CH+B2B,CAAehB,EF2BvC,AK1DC,CL0DtB,CK1DwB,CH+BqB,CAAD,CAAJ,CG/BZ,EAAE,IAAI,GAAG,CAAC;AmBoEpC,AtBrCoE,A2G4CxE,A1FdA,MKOQs1B,CtBrC4B,AkBgBjC,ClBhBsE,GsBqC5D,CAAClrB,AnBnER,Ac4DN,GjB9BgFqD,AG9BvE,CH8BgE,AG9B/D,CAAC,CmBmEP,AtBrC+E,CG9BtE,CmBmES,AnBnER,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,GAAG,CAAC;AmBoE/BqvC,AtBtC6EtrB,A2G6CrF,A5GFA,ADdE,IwBSMsrB,AJfN,EpBMI77C,EE7B+EuwB,CD2C5E5nB,GDdG,AK1DN,CL0DO/D,CwBSK,AtBtCyE,CAAC4H,AG7BnF,CH6BkF,AD2C3F,AIxEU,CH6B2E,AD4CnF5D,AIzES,EAAE,CJwEb,AIxEc,EJ0EZC,CI1Ee,CAAC,CAAC,CeoDb,EfpDgB,EAAE,IL0DlB,AK1DsB,GL0DShE,AK1DN,CJwE/B,AIxEgC,EJ2E9B,GDjBA,EAA2C,coBNnC;AIgBL,AtBvC4F,A2G8CjG,A5GCE,ADjBEC,A0BxEJ,I1BwEIA,ECiBEgE,GAAG,AI3EJ,GJ2EOrC,CmBxBV,GpBOc,CAAC/B,CCiBC,CAACqE,EDjBH,CAAZ,GCiBQ,CAAc,IAAd,CAAV;AuBPD,AtBxCkG,A2G+CnG,A5GCE,ADjBC,I0BzEH,EzB0FMC,IAAI,EmBxBN,CnBwBSJ,AI5EF,GJ4EK,AmBxBR,CnBwBSK,AmBxBR,KnBwBI,CAAU,GAAV,CAAX,KmBxBsB,EAAE,CAAC;AyFwB3B,A7GhBC,Q0BzES,IrBcJ,AeoDF,GfpDK,CAAC,CAAC,EqBdK,ArBcH,AeoDF,CfpDG,EqBd2B,CrBcxB,AeoDF,CMlE4B,ArBczB,AeoDF,CMlE4B,ArBczB,IAAI,AeoDF,CAAC,CfpDG,IAAI,GAAG,CAAC;AmBqEjC,AtBzCQ,A2GgDR,A5GAE,OAAK,CyBrEL,CF8DO4yC,AJhBN,EnBuBQ3yC,CAAC,AI3EN,CH2BWyuC,EDgDF,AI3EN,CJ2EP,AI3EQ,CAAC,CJ2EOzuC,CuBPlB,AvBOmB,AI3EN,CAAC,CH2BN,CsByCc,AtBzCInK,ADgDJiK,CI3EL,CAAC,CAAC,CJ2EO,AI3EN,CH2BZ,ADgDmBG,EChDM,CwBrBd,ArBNK,CAAC,EJ2EvB,AyBrEoB,EzBqEaD,AI3EN,CJ2EO,CyBrEV,ArBNK,CJ2E7B,AyBrEyB,EzBqEa,CI3EL,GAAG,CAAC;AmBqEnC,AtB1C+B,A2GiDnC,A5GAIJ,ADhBJ,ICgBIA,CyBrEH,CF8DO2yC,CvBOD,CAACzyC,CDhBClE,CEjC8B,EDiD3B,AI3EN,CJ2EOoE,CuBPT,AvBOQ,CAAL,AI3EE,CmBoES,AvBOd,AI3EM,CAAC,EJ2EQ,AI3EN,CAAC,CL2Dd,CAAsBxE,CCgBlB,AI3Ea,CAAC,CAAC,CL2DnB,EAA4B,AK3DN,EAAE,IAAI,GAAG,CAAC;AmBqExB,AtB3CiCgzC,A2GkDzC,A5GAG,ADhBD,AmBEA,IO5EA,E1B0EI3yC,EElCmC2yC,CGzBpC,Ec6DH,CjBpC2C,CAACF,IFkC7B,AmBEf,CAAmB,EnBFDl4C,EElCmC,AiBoCrD,CjBpCsD,CiBoCvB,MjBpCsB,CAAT,AwBxCzC,CxBwC4DP,EwBxC/D,E1B0EyBU,CElCmB,CAAD,CAAJ,AFkCrB,CAAW,I0B1EzB,E1B0Ec,C0B1EH,EAAE,C1B0EsBG,IAAI,A0B1ET,C1B0EUoF,EAA1B,GAA+B1F,gBAAOG,GAAP,CAAW,KAAX,CAAjD;AwBUG,AtB5CsE,A2GmD3E,A1FfqB,Kd5DlB,EHwBgC,AkByBhC,ClBzByE,AwBvCxE,CP2EiB,GO3Eb,CP2Ea,EjBpC8D+M,CAAP,AiBoCvD,CO3ER,CxBuCyE,EiBoCjE,CO3EJ,IAAI,EAAE;AxBuCiE+jB,A2GoDxF,A5GDE,ADhBA5sB,EAAAA,EK1DA,AekDA,IlB3BsF4sB,CDmD/E1nB,CDhBC,CAAC5D,AK1DF,CqBfH,ExBsCwF,AGvBlF,CHuBmFuH,AGvBlF,CHuBiF,CAAN,EwBtC3E,E1ByEX,E0BzEe,C1ByEOlM,A0BzEN,CzByFO,CDhBC,AoBRpB,CpBQqB4E,CCiBrB,EyB1FkB,CAAC,GAAG,CAAC,CAAC,EzB0Fd0C,ADjBQ,CAAe7C,ECiBjC,EAAe,ODjBG,EAA4BhE,UoBRvC,CpBQW,EAAyC,CAAzC,EAA4C,KAA5C,CAAtB;AwBUE,AtB7CgG,A2GqDpG,A5GDuB,ADfrB,CK3DD,CAAC,ImBmEM4vB,AxBRFrtB,G0B1ED,EzByFyBwF,CDflB,CwBQG,AJlBb,CnByB+B,CAAClB,ADfnB,CwBQGyzC,AxBRF/7C,ECeqB,CAAC8J,OuBPV,CAACwyC,GvBOK,EAAD,ADfVn8C,CCeA,EDfP,CAAW,MwBQC,AxBRZ,CwBQZ,AxBRW,EAAqB,CAArB,EAAwB,CAAxB,CAAb;AwBSEg8C,AtB9CkG,A2GsDtG,A5GFuD,ADdrD,EwBQEA,CvBKqB,GAEnB,ADfAl4C,GAAG,CwBQG,ExBRA,AoBVR,CIkBW,AxBRFjE,A0B3EF,GzB0FKsI,AmBzBR,CIkBJ,AJlBK,EnByBH,EAAe,QDfDnI,GAAP,AoBVW,CpBUA,CoBVE,CAAC,IpBUd,CAAD,EAAqB,GAArB,EAA0B,CAAC,CAA3B,CAAV;AwBUE,AqFOJ,A5GFuB,ADdrB,MwBSMoX,AxBTFrT,EAAE,CwBSG,EvBKmBsF,ADdnB,CwBSGurB,AxBTF,A0B3EN,ANiEF,CpBUO,CCcsB,CAACzsB,ADdnB,CAAJ,A0B3ED,CFoFS,AEpFR,CFoFSuB,AvBKa,ADdf,CCcK,ADdZ,AoBVA,CpBUT,G0B3Ee,ANiEF,CImBX,AEpFc,ANiEF,GMjEK,CAAC,GAAG,CNiED,CAAC,GMjEK,CAAC;AxBqCvB,A2GuDR,A5GHyC,ADbvC,AmBMQ,GlBKR,GDXI1F,G0B3ED,ANiEF,ADgBO,GnBNE,CEvCKi0C,EFuCFp3C,EEvCP,AFuCS,CEvCKwW,AFuCJpT,AmBMR,GAAY,GjB7Cd,AFuCO,CAAUH,CEvCK,EFuCf,EAAeD,MAAf,AmBML,EnBN4BE,EAAvB,CAAb;AwBSE,AtBhD4BsT,A2GwDhC,A5GHC,ADbCnT,EAAAA,G0B3EC,CxBmC6BmT,GsBgDtBD,CxBRA,CAACjT,CwBQP,AtBhDkC,CAACgiB,CsBgDxB,CxBRb,EExC8B,CFwCdtlB,EExC4Bif,AFwC1B,CAAC1b,MExCgC,CAACiT,AFwCpC,CAAWrT,KExC+B,CAAC1E,AFwC3C,CAAhB,IExCmD,CAArB,GAAsC,IAAIw4C,CAAJ,CAAM,UAAUh4B,OAAV,EAAmB;AsBiDvFm8B,AtBjDyFn8B,A2GyDjG,A5GFA,ADdE5b,EAAAA,EwBQM+3C,AElFN,IxBiC+Fn8B,EFyCvF,CAACzb,IEzC6F,CsBiDpF,AtBjDqFgT,AFyCvG,GwBQqBud,AxBRJ/zB,EAAE,CEzC0F,AFyCzFyD,CEzC0FhF,CsBiDxG,ItBjDgG,CAAP,CFyC9E,C0B1Ed,C1B0EH,E0B1EA,UAAI,GAAW;AFmFTs1B,AtBlDiH,A2G0DzH,A7GdE1wB,EAAAA,EwBMM0wB,GtBlD8D,AkB6BnE,CM7DC,CFkFS,AtBlD8GlsB,CF4CjH,CAAChD,CwBMK,AElFR80C,CxBgC8D,CsBkD9D,AtBlDwHxC,GF4C9H,GAAkBn4C,GE5CkD,EAAqEq4C,AwBhC3H,CAAC,IAAI,CAAC,ExBgCgD,CAAtC,EF4CLl4C,C0B5EC,E1B4ER,A0B5EU,C1B4EC,E0B5EE,CAAC,EAAE,C1B4EhB,CAAlB;AE5CqJ,A2G2DvJ,A7GdEkE,AK5DF,EL4DEA,EK5DI,Ae8CJ,MpBcQ,CAACyB,C0B5EL,K1B4EJ,E0B5EW,C1B4EO,CAAlB,AK5DqB,CL+CK,CAaL,A0B5EN,CAAC,ArBgBQ,MqBhBF,CAAC,GAAG,ArBgBO,CqBhBN,CAAC,AN8DtB,Gf9C0C,Ae8ChD;AIoBM,AqFSR,A1FDU,QC5BR,CM7DG,APyFK,EKRK,EAAEu2C,OLQP,GKRK,ALQqB,ECDjC,CIP2B9kC,GAAtB,EAA2B,SLQzB;AKPE,AtBnDJ6gC,A2G4DR,A7GfE/zC,EAAAA,EE7CM+zC,AGdN,IHcU,AwB9BR,ArBgBI,Ae6CJ,ClB/BS,CsBmDGgE,AtBnDFlE,AF6CJ,CAACnyC,AK3DA,GAAa,CqBhBb,AN6DA,Cf7Ce,CAAC,CL2DzB,CE7CqB,AwB9BR,AN6DA,CM7DC,C1B2EK/F,CwBMT,AtBnDck4C,EsBmDI,EJpBR,CAAC,IlB/BY,CAACrsC,KAAV,AF6CE1L,AoBdL,ClB/BmB43C,EF6CrB,CAAW,GoBdF,ClB/BJ,EAAyBC,CF6C9B,CAAnB,CAd0B,CAcc,ME7CmB,IAAI,EAAvC,CAAb,EAAyD3xB,IAAzD,EAAD,CAAJ;AsBoDQ+1B,AtBnDX,A2G4DL,A5GJA,GC7DW,CAAP,AD6DAryC,AItEF,CqBhBC,GFiFaqyC,AnBjEV,GAAG,Ce6CH,Ef7CM,CAAC,CJsEG,CIrEZ,Ae4CM,Cf5CL,Ae4CM,CnByBQ/yC,CuBLS,CAACgzC,AnBhErB,CAAC,CAAC,GJqEgB,CAAC,IuBLC,CAAZ,CAAyBzmB,AJpBf,EAAE,CIoBZ,AJpBa,OnByBH,EAAmB,IAAnB,CAA1B;AuBJa,AtBnDZ,A2G4DD,A5GHA,ADbEvxB,EAAAA,E0BzEA,ArBgBA,MLyDQ,CAAC2B,AKzDF,Ce4CH,Ef5CM,GAAG,Ee4CF,EpBaX,AoBba,Cf5CK,Ae4CJ,Cf5CK,CLyDG,CAAC,CAAD,EAAI,CKzDD,ELyDH,AKzDK,ELyDI,CAAT,A0BzEhB,C1ByEN,CAf0B,CAeS,A0BzEnC,UAAO,GAAW;AFiFX,AqFST,QnFzFI,ArBgBA,Ce4CC,CAAC,Ef5CI,EAAE,CqBhBD,ErBgBI,EqBhBA,CAAC,ErBgBI,CAAC,GqBhBC,ArBgBE,CqBhBD,CrBgBG,CAAC,CqBhBD,ArBgBE,CqBhBD,CAAC;AxB8BrB,A2G4DP,A7GjBE3B,AmBTE,EnBSFA,EmBTE,CO/DD,GrBgBC,CHaYi0C,CF2CN,CAACryC,CKxDH,Ce4CD,ADGM,Cd/CH,Ac+CI,Gd/CD,Ae4CF,CAAC,ADGR,CAAe,CjBlCZ,AGbS,CHaY8xC,CGbV,CLwDhB,AmBTE,GnBSsB,CAAC,CE3CpB,AF2CmB,EE3CWpC,AF2CP,CAAJ,EAAO,CE3C1B,AF2CmB,CAAxB,CE3CyC,AF2Bf,CAgBS;AwBQ7B0G,AtBlDJ,A2G4DJ,A1F1BG,IKgBKA,AE7ER,ExB2BQrxC,CAAC,GAAG,EGbN,Ae4CE,EImBU,CnB/DT,CAAC,CmB+DW,AnB/DV,Ae4CC,CImBU,AJnBT,CImBL,AnB/DK,CAAC,GAAG,CqBdhB,GN0DqB,CAAC,Cf5CA,CAAC,Me4CO,CAAC,Kf5CI,CAAC,EAAE,CAAC,Ae4CC,Cf5CA,Ae4CC,KAAI,CAAC,KAAK,CAAC,CAAC;AIoB9CuM,AtBnDMghC,A2G6Dd,A5GJA,ADdEl0C,C0BtED,C1BsECA,EwBQMkT,AtBnDMghC,ADyDVvuC,CyBpFH,EF8EU,EtBnDQ,AGZd,CmB+DS+qB,AxBRJ,CE3CW,AF2CV7uB,CE3CC,AkBgCJ,GImBW,CAAC2D,AJnBN,MImBN,CvBMe,CmBzBD,EnByBIR,CmBzBkB,EAAE,CpBW5C,AoBX6C,GnByBd,ADdA,CCcC,ADdA,CAAD,EAAI,CAAJ,EAAO,CAAP,CAA/B,EAA0C,kBCcX,CAAjC;AuBLK,AtBpDmBmvC,A2G8DxB,A5GHA,ADfEn0C,AmBJA,EnBIAA,AmBJA,EjBxCsBm0C,IAAI,AiBwC1B,CAAA,CjBxC4B,AF4CpB,CAACryC,CoBVH,Cf9CG,IAAI,Ae8CkB,Ef9ChB,GHYwB,AGZrB,CcoDlB,CAAI,CdpDiB,Ee8CqC,EpBU1D,AKxDyB,Ae8CM,CDM3B,CdpDuB,AcoDvB,CnBI0BnG,EKxDA,Ae8CC,Gf9CE,EAAE,Ce8CE,ADMrC,CCNsC,CDMlC,GCNsC,CAAC,EpBUNG,GAAP,AoBViB,CpBUN,AoBVO,ADMhD,EAAY,OCN6C,CpBU3B,AoBV4B,CpBS1D,CAjB0B,AoBQK,CpBUuB,aoBVI,EAA3B,IAA2B,EAAE;AlBlCnB,A2G+D3C,AlF1IA,SRmHE,CjBxC6C8d,CAAC,CAAC,AGX3C,CHW0C,CAAD,EGXnC,Ae6CC,ClBlCyC,CAAX,AGX7B,EHW2C,AkBkCtC,Cf7CF,AcmDf,KjBxC6DA,AGXzC,CHW0C,AGXzC,CHW0C,CAAD,CAAP,AGX/B,Ae6CG,Ef7CD,CAAC,CAAC,Ke6CD;AImBzBm+B,AtBrDiE,A2GgErE,A7GnBE/3C,AmBJE,EKYA+3C,AxBRF/3C,QAAQ,CAAC+B,CKvDL,CHUsE6X,AiByCjE,CKYK,AtBrD6D,CAAC,AGVrE,CHUoE,AGVnE,Ae6CA,CIkBS,AtBrDkD,AGV1D,CcmDK,CdnDH,CAAC,CmB+DV,AJlBgC,Ef7CnB,IcmDb,EdnDmB,CLuDrB,AKvDsB,Ce6CmD,EpBU1C,AoBVG,GpBUlC,CAnB0B,CAmBU,AoBVF,If7CA,CAAC,CAAC,Ae6CI,Cf7CH,Ae6CI,Ef7CF,Ee6CM,Cf7CH,Ae6CI,Ef7CF,Ge6CM,CAAC,Cf7CF,CAAC,KAAK,EAAE,Ae6CG,CAAC,Ef7CD,EAAE,CAAC,CAAC,CAAC,Ge6CM,CAAC,CAAC,EAAvC,cAAuC,EAAvC,IAAuC,EAAE;AImBzEk+B,AtBtD+E,A2GiEnF,A1FvBG,EKYCA,GtBtDQ,AiBwCE,IdjDT,CmB+DO,GAAG,KAAX,EJnBW,IAAM,WAAW,SAAA;AIoB5BF,AtBvDiFxD,A2GkErF,A5GJA,ADhBEp0C,EwBSE43C,AxBTF53C,EE9CmFo0C,IAAI,CD8DhFxuC,AkBnBP,CjB3CyF,AF8CjF,CAAC5D,CE9CC,CGTD,EJuEX,CAAiB6D,CuBPE,AnBhEJ,CmBgEKmnB,AxBTlB,CCgBF,AIvEiB,AcoDF,CCPH,CnB0BUlnB,ADhBDnK,CKvDD,AcoDlB,EAA0B,CKYT,AvBOnB,AIvEuB,CmBgEnB,CvBOwB,CmB1BR,Cf7CO,Ae6CN,Ef7CQ,Ee6CJ,Cf7CO,Ae6CN,GpBUEG,AKvDO,EAAE,Ae6CP,CpBUT,AoBVU,CpBUC,OAAX,CAAnB,AoBVsC,CpBVZ,AoBUa,CpBUC,SoBVS,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;AIoBlE,AtBxD8Fu4C,A2GmE/F,A5GJE,AkBnBE,IjB5C2FA,ED+DzFxuC,CC/D4F,EAAE,AD+D3F,CAACL,AkBnBF,EAAE,GAAG,ClBmBX,CmB1BS,CnB0BO,CkBnBD,QAAT,CAAJ,EAAwB;AjB5ChB,A2GoEZ,A5GJI,ADjBFxF,AmBFI,EnBEJA,CE/CE,KDgEI+F,EDjBE,CAAC9D,CKtDL,CJuEO,AmB1BJ,CDOG,ElBmBI4D,AIvEJ,CLsDV,CKtDY,AcoDE,ClBmBG,CAAC1I,ADjBAxB,CKtDH,KAAK,CJuEN,AIvEO,AcoDX,ClBmBgBmK,AkBnBF,EdpDA,EJuEV,AIvEY,CJuExB,AIvEyB,CAAC,ELsDHhK,GAAP,CAAW,MAAX,CAAlB,mBmBFU,CAAN;AKaNq7C,AtB1DI,A2GqEJ,A7GrBEn3C,AmBFG,EnBEHA,IEhDwGs0C,CsB0DnG,AtB1DH,CsB0DIj4B,ExBVE,CAAChc,CKtDL,Ae8CE,IIkBR,AnBhEY,EAAE,CmBgEK,AJlBJ,Ef9CE,CLsDf,CAAqB,CAArB,EKtDoB,Ae8CA,Cf9CC,Ae8CA,EIkBMs3C,AxBVA33C,CKtDH,Ae8CA,CAChB,CIiBS,AnBhES,CAAC,CmBgEK,AnBhEJ,GLsDO,CAACM,CoBPpB,MpBOW,CAAiB,CAAjB,IAAoB,KAA/C;AwBWE,AtB3DA,A2GsEJ,A5GLI,ADhBFN,EAAAA,IwBUMiT,AtB3DqGvQ,CAAzG,CDiEIqD,EuBNI,AxBVF,CAAC1F,CKtDL,CmBgES,AvBMF,GAAG,AItEJ,CmBgEOqE,AvBMF,AmBvBJ,CnBuBT,AItEU,EJsEM,CItEH,CmBgEF,AxBVb,CwBUuB6C,AxBVF,AoBPJ,CpBOjB,AoBPkB,Ef/CE,CAAC,ELsDMvH,CKtDH,EmBgEQ,AnBhEN,CmBgEOwF,AnBhEN,CAAC,Ae+CV,GpBOiB,CAAClF,CwBUb,EJjBE,CIiBiB,CAA7B,CAAX,CxBVyB,AoBPE,CpBOe,CAAjB,IAAoB,CoBPlB,IpBO7B,MoBPuC,IAAI,OAAO,GAAA,CAAC;AlB1CjD,A2GuEJ,A5GLM,ADfJ1D,AmBJE,EnBIFA,IEnD8Ggd,AFmD1G,CEnDF,AFmDG1X,ImBJE,CdnDH,CJsEO2D,GAAG,AItEJ,CJsEKG,AItEJ,Ae+CA,CpBQX,CAAiB1H,CKtDX,Ae8CQ,ADIZ,CdlDK,Ae8CQ,Cf9CP,CJqEG,AIrEF,AckDU,ClBmBGyH,CDftB,AKtDW,CckDT,CnBIuB/F,CKtDX,CJqEH,AIrEI,EJqEc,AmBvBd,CnBuBJ,CAAP,CIrEgB,CLsDpB,CKtDsB,Ee8CA,Gf9CK,CAAC,Ae8CF,Ef9CI,GAAG,EAAE,Ae8CT,Kf9Cc,EAAE,Ae8CT,Cf9CU,Ae8CT,If9Ca,CAAC,EAAE,Ce8CP,CAAC,Cf9CS,EAAE,Ge8CL,Ef9CU,Ae8CR,Cf9CS,CAAC,Ce8CV,CAAC,CAC9C,Cf/C2D,Ae+C1D,Ef/C4D,GAAG,EAAE,CAAC;AmB+DxE,AtB5DA,A2GwEJ,A5GLK,ADfHpD,AmBJC,EnBIDA,GmBZY,CKoBN2K,AtB5D2GgtC,AFoD7G,CEpDF,AFoDGpyC,EoBPA,CAAC,KIeS,CAACqD,AnB9DV,KLsDN,CwBQM,AxBRchJ,CKtDP,CAAC,CmB8DW,CAAvB,CxBRF,CwBQ4B,CxBRDA,KAAK,CAAC4F,cAAjC,EAAiDlE,OAAjD;AwBSM,AtB5DJ,A2GwEJ,A5GLG,ADfF,SwBQY,AtB5DFq2C,CAAC,EGFN,CmB8DWhvC,AtB5DF,AkB6CR,CIeW,CnB9DT,CAAC,CmB8DW,AnB9DV,Ae+CA,CIeH,AJdA,CfhDK,CmB8DWA,AnB9DV,AcyCA,CKqBW,EnB9DR,CmB8DWgC,KnB9DL,CAAC,GmB8Da,CAAC/B,MAA9B,EAAsCD,AnB9DV,CmB8DW,AnB9DV,EmB8D7B,EAA2C,EnB9DR,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;AmB+D7C0N,AtB7DK+O,A2GyEjB,A5GLC,ICpEgBA,EsB6DL/O,EtB7DS,EsB6DL,AtB7DOuhC,CsB6DNjvC,CAAC,AnB9DZ,AegDI,ElB/CiB,CsB6DN,AtB7DO,AGDnB,CmB8DO,AtB7DW,AGDjB,CmB8DE,AtB7DG,AGDJ,AegDG,CAAC,CfhDF,CmB8DagC,AnB9DZ,GAAG,KegDQ,CIcU,AnB9DZ,CmB8DahC,AnB9DZ,CmB8DW,AJdP,CIchB,GJdoB,CAAC,MfhDG,CAAC,MAAM,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AmB+DjD,AtB9DuB,A2G0EhC,A5GJA,ADhBAzI,AmBfc,GAAZ,GnBeI,CAACuF,EKtDF,GegDK,ClBhD+BmyC,IAAI,AkBgD/B,ClBhDgC,AkBgD/B,ClBhD8B,CAA9B,GFsDf,CAAwB,GoBNA,GAAG,EAAE,CAAC,EpBM9B,EAAqC,UAAUlyC,KAAV,EAAiB;AwBSjD,AtB/D6C,A2G2ElD,A7GpBE,AmBFA,EAAA,InBEIC,EmBFJ,CCJO,ADIP,CCHK,CAAC,CpBKI,CKvDD,CHAiDiyC,CFuD7Cn4C,GEvDiD,CAAC,CAAD,CFuD3C,CAAC4E,CmBFpB,CAAI,MAAA,CAAA,SAAJ,EAAI,CnBES,EAAb,SmBFA,EAAc;AjBrDD,A2G4Ef,A7GpBE,GExDS,EAA4D,AkBmDpE,CpBKGlD,CAAC,EmBHL,CnBGQ,CAACuE,CExDmEgL,AGCxE,ILuDU,AKvDJ,CLuDK9K,CExDsD,AGCzD,GAAG,AcoDf,EjBrDuF,CFwD9E,EKvDW,CLuDKD,AKvDJ,GAAG,EAAE,CHD2C,AFwDtC,AKvDJ,CLuDKE,AKvDJ,IHD0E8xC,AFwD9F,CExD+F,CAACjnC,EFwDhEjR,IExDsE,CAAC0lB,CFwDjE,CAACtiB,KAAvC,CExD+F,CAAD,CFwD/CpD,EExDoE,IFwD9D,CAACgB,OExDwE,IFwD9H,GAAoEhB,MAAM,CAACoD,KAA3E,GAAmF,CAAnF,GAAuF,CAA/F;AwBQEixB,AtBhEsI,A2G6E1I,A7GpBE,AmBHE,EKUAA,IxBPEhuB,CwBOG,AxBPF,CwBOGzE,ExBPA,CEzDuI,AFyDtIqE,CwBOP,AnB9DE,CmB8DS,ALVJ,EjBtD+H,CFyD1H,AKvDJ,CmB8DO61C,AxBPFx1C,CKvDH,AcoDE,GKUD,AnB9DE,CmB8DOg1C,ExBPb,CwBOI,CnB9DO,CmB8DO1kC,AxBPF1Q,AKvDJ,EcoDnB,CdpDsB,CmB8DX,CAAX,AnB9DwB,CLuDK,AKvDJ,CLuDKK,AKvDJ,GLuDpB,IAA+BvG,MAAM,CAACqD,MAAtC,GAA+CrD,MAAM,CAACiB,YAAtD,GAAqEjB,MAAM,CAACqD,MAA5E,GAAqF,CAArF,GAAyF,CAAjG,CAHoD,CAIpD;AE1DsJ,A2G8ExJ,AlFzIA,AAKA,AR6GG,GjBvDoE,CAA5D,CiBqDK,CjBrD2I60C,CAAvJ,KGGE,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,YAAY,CAC5B,CAAC,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,CAAC,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,CACjD,CAAC;AmB4DJ,AqFcJ,A5GNA,ADdEv0C,EAAAA,ECcEiG,EuBRIyqB,GnB3DH,AckDH,CnBGQ,CwBMG,AxBNFpwB,CwBMGkF,MAAN,AvBQU,ADdhB,CmBHe,ElBiBI1C,ADdA,CAAC/E,AmBHpB,CKSuB,AxBNJ,CwBMb,ALTwB,CnBGP2E,CAAJ,CCcM,ADdzB,CwBM4B,AvBQFe,CuBRGq0C,QAA3B,AvBQiB,CAAiB7xC,CuBRG,avBQzC;AuBPQyxC,AtBjEJ,A2G+EJ,A7GpBC,AmBHG,CnBHJ,GwBYQA,CnB3DL,KckDK,CjBxDKlD,GsBiEK,CAAC0D,AtBjEf,CAAch0C,CAAd,AiBwDW,EjBxDM,CiBwDb,KKSU,ALTK,CKSf,SLTJ,EAA+B;AKU9B,AtBlEkB,A2GgFvB,A5GPA,AkBhBM,IdlDJ,KJkEOgC,ECzEqB,AGOrB,GAAG,AckDA,ClBgBZ,AIlEa,CJkEI3C,EkBhBD,ClBgBhB,AIlEiB,CAAC,CHPsBN,ADyElBlH,CCzEQ,AGOV,CAAC,CHPsB,ADyE3C,AIlEsB,EJkEK,CkBhBf,CAAc,mDAAd,CAAN;AKUL,AtBnE4C,A2GiF7C,A5GPE,AkBhBG,CKFL,AnBhDC,CAAC,CmB6DF,MvBKSkK,IC1E2C8tC,IAAI,CAAC,CAAC7vC,CAAD,EAAIjB,CAAJ,AD0ElC,CC1EiC,AD0EhCW,CC1EqB,GD0EpC,CAAoBL,GAApB,EAAyBxH,GAAzB,CAAP;AC1EiE,A2GkFnE,A5GPC,KC3EsB;AAA+C,A2GmFtE,A5GNA,AIlEA,AcgDI,IdhDS,MAAM,CcgDV,EdhDa,ScgDlB,GAAmB,GAAnB;AKWJ,AqFcA,A1FxBG,KARa,IKkBPo8C,IAAT,CAAcR,GAAd,EAAmBS,KAAnB,EAA0B;AACtB,AtBtEA,A2GoFJ,OrFdST,GAAL,CtBtES5D,EsBsEE4D,EtBtEX,CsBsEA,AtBtEclD,EAAd,EAAkB,AiBmDN;AKoBZ,AtBtEI,A2GoFR,AlFpIA,IAAM,GHsHG2D,CtBtEG9D,CAAJ,EAAO,CsBsEX,GAAa8D,EtBtEI,GsBsEjB,AGtHkB,CzBgDG1D,EyBhDA,OzBgDJ,CAAc,EyB/CjC,cAAsB,iBzB+CH,CAAN;AsBuEd,AqFcD,A1FnCgB,GAAd,CQ/FA,IAAI;AzB8CE,A2GqFR,A5GRA,SAASvuC,EC7EMQ,CAAP,EAAU,CD6ElB,CAAiBP,EC7EK,AD6EtB,EAAqB;AuBNrB+xC,AtBtEY,A2GqFZ,A5GRE,IuBPE,AnBzDF,CmByDG10C,CvBOC4C,IC7EUiuC,CAAC,AD6EN,GuBPX,AtBtEoB,AD6ENxxC,CuBPCyuB,AtBtEC,EAAO7uB,CsBsEvB,AtBtEwB,AGaR,EJgEI,AIhEF,CmByDG,AvBOA0C,EC7EQwU,CAAC,AGaR,GHbW66B,AD6EnB,CAAc,CC7EO,CAAC,CAAD,CAAF,AD6EnB,CuBPmB,AvBO/B,EC7EuC,CAAR,GAAY/xC,CAAC,CAAC,QAAD,CAAb,GAA0B+xC,EAAE,CAAC,CAAD,CAAF,GAAQ/xC,CAAC,CAAC,OAAD,CAAD,KAAe,CAACkX,CAAC,GAAGlX,CAAC,CAAC,QAAD,CAAN,KAAqBkX,CAAC,CAAChW,IAAF,CAAOlB,CAAP,CAArB,EAAgC,CAA/C,CAAR,GAA4DA,CAAC,CAACsf,IAAjG,CAAD,IAA2G,CAAC,CAACpI,CAAC,GAAGA,CAAC,CAAChW,IAAF,CAAOlB,CAAP,EAAU+xC,EAAE,CAAC,CAAD,CAAZ,CAAL,EAAuBxyB,IAA9I,EAAoJ,OAAOrI,CAAP;AsBuE5J,AtBtEQ,A2GqFZ,A5GRE,ImBhBA,GISO+9B,CGnHL,C1B0HM,CuBPN,AtBtEYj1C,CsBsEH8E,AtBtEI,CyB5CX,EzB4Cc,CAAJ,CsBsEZ,CAAe,AtBtEIoS,CAAX,AD6EOtT,C0BzHN,CzB4CamuC,CsBsEtB,CtBtEwB,CsBsEH,EtBtEM,AyB5CZ,CzB4CaA,AD6EtB,CAAmBxvC,CuBPCmzC,AtBtEI,CAAC,CAAD,AD6ExB,A0BzHc,CzB4CQ,CD6EE,CuBP9B,CtBtEoC,CAAT,EAAYx+B,CAAC,CAACxe,EyB5CV,APyGtB,GlB7DkB,AkB6D7B,ClB7DwB,SkB8DtB,IAAY,EACZ,kBAA+C;AIQlD,AqFeD,A5GRI,CuBTJ,OvBSQmL,AmBfJ,GnBeO,C0BzHL,E1ByHQF,KAAK,A0BzHN,C1ByHOpB,GAAD,CAAf,C0BzHe,CAAC,cAAc,CAAC,EP0G/B,EAAA,CO1GoC,WAAW,EAC7C,yBPyG6C;AlB9DvC,A2GsFZ,A5GRI,AkBlBF,EAAA,MCIE,ADJF,CAAA,ElBkBSsB,CmBdH,CAAC,ClBhEWkuC,AD8EN,EC9EQ,CAAC,CAAD,AiB4DpB,CjB5DU,AD8EOpuC,AkBlBjB,KlBkBsB,AkBlBtB,ClBkBuBpB,EkBlBvB,ClBkBsB,AmBdA,CnBcL,CmBdO,CAAC,CnBcKmB,EAAE,CAACnB,GAAD,CAApB,AkBlBZ,ClBkBE;AuBPJkyC,AtBtEgB,A2GsFhB,A5GRG,AkBnBK,GlBgBN,IuBLK,CAACkB,AJLJ,ADNI,IQrGF,AP2GE,ADNA,CKWR,AtBtEqB,AkBiEZ,ClBjEO,CiB2DR,CKWQ,AGhHJ,CP2GC,ADNL,CCMM,OIKd,CGhHsB,CP2GC,CAAC,CO3GC,GP2GG,CAAC,EO3GE,AP2GA,CO3GC,cAAc,CAAC,CAAC;AHkHhDlB,AtBxEwB,A2GuFxB,A5GRC,OuBPM,CAACnqC,GAAR,CGjHM,AP2GA,ClBlEuB,CsBwEf,AtBxEU,EsBwExB,AJNU,CAAC,KO3GK,CAAC,GP2GG,CAAC,GO3GG,CAAC,AP2GA,CAAC,GAAG,EAAE,CAAC,YO3GY,EAAE,OAAO,CAAC,CAAC;AHkHvDmqC,AtBzEgCv9B,A2GwFhC,A5GPA,IIhEE,GmBwDK,CAAC0+B,CJNH,ADRG,CjB3DwB1+B,CAAC,CsByEjC,AGjHM,CRmGE,CjB3D4B66B,CsByErB,ALdP,CjB3DwB,CsByEhC,CnBxDgB,Ac0CR,Ed1CU,Cc0CV,CQnGQ,CAAC,ARmGT,Cd1Cc,Ec0Cd,OQnGmB,CAAC,CRmGpB,CAAA,QAAA,EAAA,IAAkB,GQnGqB,CAAC,CAAC;AHkHjD0C,AtB1EwC,A2GyFxC,A1F9BQ,MAAA,CKeD,CAACte,AJLJ,EDVI,CAAA,CQlGF,AP4GE,CAAC,ADVD,CAAA,CKeR,EJLa,ADVL,CKeU,AJLJ,CO5GD,CHiHb,EAAsB,CGjHL,GRkGT,CCUe,ADVf,CCUgB,CDVhB,CAAA,ECUoB,CAAC,CAAC,MO5GI,CAAC,UAAU,CAAC,AP4GE,CO5GD,AP4GE,EAAE;AyFqBnD,SlFhIK;AHiHLse,AtB1EgB,A2G0FhB,KlFhIG,EHgHI,CAACoB,KtB1Ea,CAAL,EsB0EhB,GAAmB,EAAnB;AtB1EwB5xC,A2G2FxB,A1FhCI,IQjGA,KRiGK,CjB3DeA,CAAC,AyBtCd,CzBsCeutC,AyBtCd,EAAE,GzBsCU,AyBtCR,GRiGZ,CAAgB,KAAhB,CAAA,IAAA,EAAI,CAAa,IAAb,EAAmB,QAAQ,CAAC,KAA5B,EAAiC,MAAjC,CAAsC,IAAtC,CAAJ;AKiBJ,AtB5EmC,A2G4FnC,A5GTA,AkBvBG,GAFD,ClByBE1tC,KuBPK4B,IAAT,CvBOc,EuBPE,CAAE,AtB5EwB,ADmFzB,QAAjB;ACnF4ChN,A2G6F5C,A5GTA,IAAIqL,AI7DF,QHvB0CrL,ADoFhC,AmBXN,GnBWS+K,CmBXH,ClBzEqC,EAAEsuC,EAAE,ADoFhC,CCpFiC,ADoFhC,CCpF+B,CAAX,CGuBnB,EAAE,IAAI,CJ6DGxvC,CmBXH,EnBWP,CmBVd,CnBU6B,iBmBVX,KAAK,kBAAkB;AIIjDkyC,AtB9E0Dl1B,A2G8F1D,A5GTE,AkBxBA,EAAA,EQ/FA,GHgHK,CAACrD,ALjBN,ClBwBO3Z,AkBxBP,CKiBF,CGhHS,CzBkCiDgd,ADqF9C,CuBPC7Z,AvBOA1B,E0BvHA,CzBkCiD,CsB8E9D,CtB9EgE,AkB2EpD,ADdV,CAAA,ClBwBO,CAAYF,CkBxBnB,GAAA,GQ/FwB,EAAE,C1BuHnB,A0BvHoB,E1BuHI,GmBVH,CDd5B,MlBwByCG,CAAV,EAAaC,CAAb,EAAgB;AuBNjDuwC,AtB/E0C,A2G+F1C,A5GVmD,AkBxB7C,CQ9FL,CAAC,KHgHK,CAACqB,ALlBF,GjB7D6B,ADqFuB5xC,CAAC,AkBxBrD,GlBwBwDA,AkBxBxD,ClBwByD,CAACC,AkBxB1D,CCeM,CIGZ,GAAsBuB,IAAtB,CJHqB,CnBSyC,AmBTxC,EnBSqC,GAAqB,EAA7B;AuBLnD+uC,AqFgBA,A5GXqF,GAA5E,CAAP,GuBLK,CAAC/tC,IAAR,AJHM,GIGShB,CJHH,GIGZ,IJHmB,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,CACrD,IAAI,EACJ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,EACzB,iBAAiB,CAClB,CAAC;AIAR+uC,AtBhFgB,A2GgGhB,A5GXC,A0BpHD,AAAO,C1BkHc,CAArB,E0BlHa,GH+GN,CAACsB,CLpBF,EKoBN,CJCM,ClBjFe,AiB4Df,CKoBQrwC,AtBhFE,CiB4DV,CCqBI,CAAC,CIDX,ALpBM,GQ3FwB,AR2FxB,EAAA,CQ3F2B,EPgHb,ADrBd,CCqBe,IAAI,CAAC,CAAC,EDrBrB,CAAA,IQ3F2C,CAAC,GR2F5C,EAAA,IAAkB,CCqBqB,CAAC,GOhHkB,APgHf,COhHgB,CAAC,KPgHV,CAAC;AIAzD+uC,AtBjFwBxwC,A2GiGxB,A5GVA,AkB3BM,MAAA,CKqBC,CAAC+xC,CJCH,ClBlFmB/xC,AiB4DlB,CjB5DmB,AiB4DnB,CjB5DoButC,CiB4DpB,CAAA,GjB5DkB,AiB4DlB,KKqBN,GAAyB9rC,CLrBnB,CAAA,EKqBN,ALrBM,CAAA;AKsBN+uC,AtBlFmCz0C,A2GkGnC,AlF9HA,AAAO,IAAM,AtByDX,GmBqDK,CAACi2C,AJEJ,ElBpF+Bj2C,CAAC,GAAG+xC,CkBoF5B,ClBpF8B,CAAC,CAAD,AyB5Bd,CzB4BQ,AkBoFpB,CAAC,COhHc,ItByDP,CmBqDvB,CnBrDyB,EmBqDIrsC,AJEJ,CAAC,CfvDG,EmBqD7B,CJE8B,CAAC,CAAC,COhHc,CAAC,gBAAgB,APgHb,COhHc,APgHb,COhHc,APgHb;AIDpD+uC,AtBnF8C1C,A2GmG9C,KzFdG,EIFI,CAAC3iB,EtBnFsC2iB,EsBmF9C,AtBnFgD,GsBmFjCrsC,AtBnFoC,CAAC,CAAD,CAAL,CsBmF9C;AACA+uC,AtBpFwD,A2GoGxD,AjF1LA,ATmJI,OKuBG,CAACyB,CLvBC,WAAL,CAAgB,EKuBpB,GAA0BxwC,ALvBtB,CAAA,GKuBJ,CLvBI,EAAI,CAAa,IAAb,EAAmB,QAAQ,CAAC,OAA5B,EAAmC,MAAnC,CAAwC,IAAxC,CAAJ;AKwBJ+uC,AqFgBA,A5GXA,AkB5BG,GAFD,ClB8BErwC,GuBLG,CAAC+xC,MvBKM,GAAG1yC,MAAM,CAAC,GuBLxB,GAA8BiC,IAA9B,AvBKkCnD,GAAV,EAAe;ACzFvB,A2GqGhB,A5GXE,SAAOA,GAAG,CC1FS,AD0FR8B,CC1FG,KD0FP,CAAW,CAAX,EAAcF,WAAd,KAA8B5B,GAAG,CAACpB,KAAJ,CAAU,CAAV,CAArC;AuBJFszC,AtBtFwB1C,A2GsGxB,A5GXC,AkB7BC,ClB2BqB,CAAvB,AkB3BE,KKwBK,CAACluB,ALxBN,CAAA,CjB9DsBkuB,EAAE,GAAG9tC,CAAC,CsBsF9B,AtBtF+B0tC,CiB8D7B,CAAA,CKwBkB,AtBtFS,CAAM3jC,EiB8DjC,CjB9D2B,EAAL,AiB8DtB,IKwB4BzV,IAAV,EAAgB,ELxBlC;AKwBoC,AqFiBtC,A5GVA,AkB/BO,Id3BL,Ic2BK,CKwBsC,EAAP,CLxB/B,GAAA,EAAA,Id3BY,EACf,4BAA4B,GAAG,4BAA4B,GAAG,YAAY;AmBkD7B,AtBtFP0L,A2GwG1C,CrFlBA,GJKU,MlB3FgCA,CAAC,CAACytC,IAAF,CAAO1jC,GAAP,mBkB2FvB,GAAjB,UAAkB,KAA8B;AyFclD,QzFdE,CD7BK,IAAA,EAAA,GAAA,GAAA,EAAA,ECgDJ,CDhDI,SAAA,CAAA,QAAA,EAAA,IAAkB;AK0BzBymC,AtBxFwD,A2G0GxD,A1F5CO,MAAA,CK0BA,CAACtJ,EL1BD,CAAA,EAAA,CAAA,CK0BP,EL1BO,CK0BW,QL1BX,CAAA,CK0BqB5yC,CL1BrB,CAAA,EK0BW,EAAgB;AAC9B,AqFkBJ,A5GXA,IAAI+L,IuBPM,AJINqvC,IIJUmB,GvBOC,EuBPL,CAAU,AvBOF,KmBHJ,CAAC,IAAI,EnBGnB,AmBHqB,KAAK,CAAC,CAAC,eIJlB,CAAN;AACH,AtBzFe,A2G2GhB,A5GXA,CuBTA,GvBSIvwC,AIvDF,IAAI,KJuDO,GAAGd,IIvDE,EJuDI,CAAC,UAAUlB,GAAV,EAAe;AC/FlB,A2G2GpB,A5GXE,AkBnCE,QdpBA,CJuDKA,AkBnCA,GlBmCG,CAACyB,CChGW,CGyCb,CHzCekT,CAAC,EGyCZ,CHzCejT,ADgGrB,AIvDO,AcoBZ,CjB7D2B,ADgGVK,AkBnCD,CjB7DYotC,IAAN,AiB6DtB,CAAA,CjB7DkCx6B,CAAC,EiB6DnC,CjB7DsCA,ADgGjC,CChGkC,AiB6DnC,CjB7DoCpU,ADgGV,AkBnCb,GdpBY,CcoBzB,ClBmCC,CChGiC,AGyCN,AcoBT,ClBmCcC,EChGY,CAAX,CGyCD,CAAC,EHzCgBmU,AiB6DvB,CjB7DwB,AiB6DvB,CjB7DwBA,CAAC,CAACpU,ADgGrD,CkBnCD,ClBmCN,CkBnCsC,GjB7DoB,GAAW,AiB6D/D,CjB7DmD,AiB6Dd,CjB7DrB,GiB6DhB,CAAJ,EjB7D2EivC,EAAE,CAAC,CAAD,CAAF,KAAU,CAAV,IAAeA,EAAE,CAAC,CAAD,CAAF,KAAU,CAAhF,CAAJ,EAAwF;AsB0F5G0C,AtB1F8GxwC,A2G4G9G,A5GXC,AkBnCE,ClBiCmB,CAAtB,CkBnCE,EdlBC,EmBgDI,CAACmyC,GAAR,CtB1F8GnyC,CAAC,CsB0FjG,EtB1FoG,CAAJ,SsB0FpF;AAAE,AtB1FyF,A2G6GrH,A5GVA,SuBTmC,GAAP;AAAY,AtB1FwF,A2G8GhI,A1F/CE,CK2BF,CL3BE,MAAA,CAAA,SAAA,CAAA,IAAA,GAAA,YAAA;A0FgDF,A1FhDO,QAAA,IAAA,GAAA,EAAA;AK4BPwwC,AtB1FoB,A2G+GpB,OrFrBO,CAAC4B,KAAR,CtB1FwBtE,EsB0FR,AtB1FU,CAAC,CAAD,CAAF,KAAU,CAAV,CsB0FEjS,GAAV,CtB1FwB,CsB0FT,AtB1FU5oB,CAAD,IAAO66B,EAAE,CAAC,CAAD,CAAF,GAAQ76B,CAAC,CAAC,CAAD,CAAT,IAAgB66B,EAAE,CAAC,CAAD,CAAF,GAAQ76B,CAAC,CAAC,CAAD,CAAhD,CAAJ,EAA2D;AsB2F3E,AtB3F6EjT,A2GgHjF,AjFpLA,AAUA,IAAM,AvByGJ,ImB4CQ,AnB5CJ,CceC,GK6BO6wC,AtB3FmE7wC,CAAC,A0B1DnE,ATwHR,CjB9D4EutC,CiB8D5E,CSxHW,CJqJR,CAAU,AL7Bb,CjB9D0E,C0B1D3DqC,CTwHf,CjB9DoF9B,CiB8DpF,CjB9DsF,CAAC,CAAD,AiB8DtF,CjB9D0E,CG+CvD,OuBzGE,ATwHrB,CSxHsB,ATwHtB,QAAA,EAAA,IK6BG,AL7Be,CK6BrB,KIrJ6C,CAAC,CAAC;AJsJlD,AtB5FiG,A2GiHlG,A1FnDO,CK4BP,KL5BO,EddH,EccG,CAAA,EAAA,CAAA,CddI,EccJ,EddQ,CAAC,MccT,CAAA,EAAA,CAAA,Odd0B,GAAG,KAAK,CAAC;AHhDgE,A2GkH1G,KxGjEG,GeoDC,IAAI,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC,QAAQ,CAAC,oBAAoB,EAAE;AIR/D0C,AqFsBA,OrFtBO,CAAC6B,IJSF,CITN,GAAgB,UJSI,CAAC,CITM,MJSC,CAAC,UAAA,QAAQ;AITR,AtB5FT,A2GmHpB,A5GVA,AkB3CI,SK8BgC,AL9B3B,CK8BoB,ItB5FLvE,EAAE,AkBsGlB,ClBtGmB,CAAD,CAAF,CiB8DpB,CCwCQ,ADxCQ,CCwCP,ElBtGqB,CAAV,CiB8DpB,CAAA,EjB9DmC9tC,CAAC,AkBsGnB,ClBtGoButC,AkBsGnB,ADxClB,EAAI,CAAa,EjB9DkB,EiB8D/B,CjB9DyCt6B,CAAC,AiB8DvB,CjB9DwB,CAAD,CAA9B,EAAmC,GiB8DpB,CAAC,ECwCM,CAAC,CDxCnC,EAAgC,KCwCW,CAAC,ADxC5C,CCwC6C,ADxCR,IAArC,CAAJ;AK8BoC,AtB5FiBjT,A2GoHzD,AjFzKA,AAAO,AToHJ,CK6BH,EL/BE,CSlHW,Q1BqD4CA,CAAC,AkBuGnD,ClBvGoDutC,AkBuGnD,CAAC,EQ5JiB,E1BqD+B,C0BrDd,CAAC,C1BqDuBt6B,CAAC,CAAC,CAAD,CAAX;AAAgBA,A2GqHzE,A5GXA,I2B9JE,IAAI,C3B8JG1S,C2B9JD,E1BoDiE0S,AkBwGnE,ClBxGoE,A0BpD/D,CAAC,CAAC,C1BoDgE66B,EAAJ,GD0GzE,CAAuBruC,EAAvB,EAA2Be,AmBFP,GnBEpB,AmBFuB,EnBES,AmBFP,CAAC;AlBxGuD,A2GsHjF,A5GXE,AkB3CA,EAAA,ESnHA,ITmHA,CCyCG,ADzCH,ElB2CSC,A2B9JF,O3B8JP,AkB3CA,ClB2CkBC,AkB3ClB,ClB2CA,EAAqB,EkB3CrB,GAAA,YAAA;AjBhEuF,A2GuHzF,A5GXI,AkB5CI,KC0CL,GnBEKC,A2B9JJ,ATkHI,ClB4CC,GAAGC,AkB5CJ,GSlHG,ATkHH,ESlHK,ATkHL,ESlHO,CAAC,C3B8JK,CAAC/B,MAAlB;A4GYJ,A5GXI,K2B9JD,CAAC,K3B8JO8B,CAAC,GACJA,CAAC,GAAG,CAAJ,GACElB,EAAE,CAACoB,KAAH,CAASL,GAAT,EAAcI,SAAd,CADF,GAEEnB,EAAE,CAACxC,IAAH,CAAQuD,GAAR,EAAaE,CAAb,CAHE,GAIJjB,EAAE,CAACxC,IAAH,CAAQuD,GAAR,CAJJ;AC5GgB,A2GwHpB,A5GPG,C2BlKF,GAAG,CAAC,ITgHG,IAAA,CjB/DgByS,CAAC,AiB+DjB,GAAA,CjB/DqBjT,CAAC,CAACutC,AiB+DvB,EAAA,GjB/DqB,AiB+DrB,GjB/D+Bt6B,CAAC,CAAC,CAAD,CAApB,EAAyB,AiB+DrC,CAAA,QAAA,EAAA,IAAkB;AjB/DqBjT,A2GyH/C,A1F1DQ,IdNN,EcMM,IAAA,CAAA,CjB/DuCA,CAAC,AiB+DxC,CjB/DyCutC,AiB+DzC,GAAA,EjB/DuC,GAAUt6B,AGyDrC,CHzDsC,CAAC,AGyDrC,CHzDoC,CAAX,AiB+DvC,CAAA,EAAA,CAAA,CdNqB,IAAI,KAAK,UAAU;AwGiEhD,A5GPExS,EAAAA,OAAO,CAACK,OAAR,GAAkBrB,EAAE,CAACZ,MAArB;ACnH6DmB,A2G2H/D,A5GPE,ImBLQ,KnBKDS,GCpHsDT,CAAC,CAAC0tC,EDoH/D,CCpH6D,CAAMp2C,IAAN,CAAWw2C,EAAX,oBkB+GtC,GAAvB;AyFaF,A5GPC,AkBrDG,QCgDA,CDhDK,GCgDD,IAAI,CAAC,GDhDT,CAAgB,KAAhB,CCgDmB,ADhDnB,ECgDqB,EDhDrB,EAAI,CAAa,IAAb,EAAmB,QAAQ,CAAC,KAA5B,EAAiC,MAAjC,CAAsC,IAAtC,CAAJ;AjBhE2E,A2G6H/E,A1F5DG,GAFD,SCkDI,MAAM,aAAa,CAAC,MAAM,kCAAuB,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AlBjHU,A2G8HvF,A5GPA,A2BjKA,AAAO,IAAM,IAAI,C3BiKR/sC,AmBLJ,EQ5Je,Q3BiKpB,CAAqBtB,C2BjKQ,C3BiK7B,EAAyBe,A2BjKe,G3BiKxC,EAA8B;A4GQ9B,A5GPE,AkBtDF,IS3GE,CR4JC,GQ5JK,C3BiKCf,AkBtDT,ElBsDW,CAACuB,GkBtDZ,ClBsDS,CAAQR,A2BjKA,G3BiKR,A2BjKW+uC,C3BiKlB,qB2BjKmC,CAAC,GAAG,CAAC,CAAC;A1B0CvB,A2G+HpB,A5GPC,AkBvDA,CA7DD,EAAA,CS7CE,AR4JF,IQ5JQ,IAAI,E1ByCYt8B,CAAC,A0BzCV,C1ByCW,CAAD,CAAL,C0BzCDs/B,C1ByCWvyC,CAAC,CAAC0tC,GAAF,CAAM3jC,AkBmHnC,EQ5JsB,C1ByCO,C0BzCL,CAAC;AiFyK1B,A3F7NA,CEgNC,GQ3JC,CR2JD,GQ3JK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;A1ByCL/J,A2GgIpB,A5GPA,AmBLA,InBKIgB,A2BjKF,I3BiKM,A2BjKA,E1BwCYhB,CAAC,ADyHViB,CCzHWwsC,IAAF,CAAO1jC,A0BxCV,E3BiKE,CCzHC,ADyHAjN,A2BjKA,IAAI,CAAC,I3BiKd,CAAmBkE,C2BjKC,EAAE,C3BiKtB,A2BjKuB,G3BkK9BD,UADO,GAEPR,YAFJ;A4GQA,A5GJA,I2BpKE,AvByGA,OuBzGOiyC,QvByGQ,EAAf,CuBzGa,CAAC,QvByGE,KAA4B,EuBzGf,AvByGiB,CuBzGhB,MvByGiC,GuBzGxB,CAAC,CAAC;A1BuCT,A2GkIlC,AzFZA,CQ5JC,AR4JA,CQ5JC,MvByGE,IAAI,CAAC,GemDO,CAAC,CfnDH,CAAC,OAAO,AemDI,CfnDH,AemDI,IAAI,CfnDH,CAAC,EAAE,AemDI,eAAe,CAAC,SAAS,CAAC,OAAO;AlBjIxD,A2G8IZ,IzFZE,QfnDI,MAAM,CemDK,CAAC,GfnDD,CAAC,KemDS,CAAC,MAAM,mCfnD+B,CAAC,CAAC;AwGgEnE,IzFZE,KfnDG,EemDI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AlBtHR1E,A2GmIZ,A5GLA,MC9HYA,EAAE,AGqEV,CJyDK5sC,EC9HQypC,CGqET,CAAC,EHrEY,CAAC1tC,AD8HtB,CAAkByB,CIzDJ,EHrEG,AGqED,CHrEWquC,AD8H3B,AIzDiB,EJyDO5yC,KC9HP,AD8HjB,EC9HoC6F,AD8HL,CC9Hd,CAAL;AACH,A2GmIT,A5GLE7F,EAAAA,GC/IgB,CAiBR,CD8HH,CIxDH,EJwDMA,EIxDA,CHtEO+H,CAAP,CD8HK,CC9HK,GD8HD,CAAjB,KIxDqB,GAAa,OAAO;AHtErB4rC,A2GoItB,A5GLE,MC/HoBA,AD+HhBlvC,CAAC,CC/HiB,ED+HdF,CC/HiB,CAAC,CAAD,CD+Hb,AIxDN,CHvEuBwD,AD+HhBrD,CC/HY,CAAL,CGuEV,CAAC,EJwDH,GAAc1E,KAAtB,WIxDgC;AHvEC4B,A2GqInC,A5GLE,A2BlKF,AP/DA,IO+DM,E1BkC6BA,ADgI7BoF,CChI8B,EDgI3B,CChI8B,CAAJ,CDgIvB,EIxDJ,EJwDQpD,EIxDJ,CAAC,CuB1GS,C3BkKV,CAAUa,CAAV,A2BlKa,C3BkKvB,SIxDyB,CAAC;AHxEe,A2GsI3C,IjFxKkC,C1BiBhB,GG2Fd,IAAM,EH1E0C,IG0EpC,GAAa,CuB5GuB,CvB4GrB,CAAC;AH1EsB+uC,A2GuItD,A5GNE,MCjIoDA,CAAC,CG4EnD,CJqDK/uC,A2BnKyB,C1BkCwBqU,ADiIhD,CCjIiD,CDiIzD,CIrDO,CH5EqD,ADiIhD,CCjIwC,EG4EzC,CAAC,CuB9GsC,EAAlB,AvB8GjB,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EuB9GgB,AvB8Gd,CAAC,CuB9GL,GvB8GS,CuB9GS,AvB8GR,EAAE;AH5EoB,A2GwIlE,A5GNI9R,IAAAA,GAAG,CAACvC,A2BpK0B,C3BoK3B,CAAH,EIrDE,CJqDOF,GIrDD,CJqDK,CAACE,CAAC,EIrDF,CJqDKzE,EIrDF,GJqDH,CAAb,CIrDqB,CAAC,CAAC,CAAC,CAAC,IuB/GuB;AiF2KpD,A5GNG,YIrDG,IAAM,SAAS,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC;AH7ErC,A2GyIR,IjF3KE,I1BkCU2zC,A0BlCN,E1BkCQ,CAAC,CAAD,AG8ER,CH9EM,E0BlCC,C1BkCO,AG8ER,CH9EJ,C0BlCQ,C1BkCO,C0BlCL,CAAC,AvBgHF,GAAG,CH9ESA,EAAE,CAAC,CAAD,CAAR,GG8EM,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AH9Eb,A2G0IpC,A5GPE,I2BpKA,K3BoKO3sC,A2BpKF,E1BiCoC,CDmIzC,AIpDI,CuBhHK,CAAC,EvBgHA,CuBhHG,CAAC,EAAE,CAAC,GAAG,CvBgHD,GAAG,CAAC,GuBhHK,AvBgHF,CuBhHG,AvBgHF,GAAG,GuBhHK,EAAE,AvBgHF,CuBhHG,AvBgHF,EuBhHI,EAAE,EvBgHA,CAAC;AH/EA1M,A2G2I7C,A5GPC,MCpI4CA,E0BhCzC,G1BgC8C,C0B/B5C,AvB+GA,CHhF8Cq5C,EAAE,CAAC,AGgF3C,CHhF0C,A0B/B3C,C1B+ByC,A0B/BxC,G1B+BgDA,AGgF3C,EHhF6C,CAAC,AGgF3C,CHhF0C,A0B/B3C,C1B+BiC,A0B/BhC,G1B+BgD,IGgFvC,CHhF4C,A0B/B7C,C1B+Be,A0B/Bd,CAAC,AvB+GE,CuB/GD,CAAC,GvB+GK,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AHhF2BxyB,A2G4I5E,A5GNA,MCtI4EA,IAAI,EAAE,AGkF5E,CuBhHC,GvBgHK,KuBhHG,CAAC,CAAC,CAAC,AvBgHE,GAAG,KAAK,IAAI,CAAC,CAAC;AHlFS,A2G6I3C,K3G7IoC,OGmF9B,IuBhHE,AvBgHI,OuBhHG,CvBgHK,GAAG,CAAC,CAAC,EuBhHF,CAAC,CAAC,CAAC,AvBgHI,GAAG,EuBhHF,EvBgHM,KAAK,CuBhHH,AvBgHI,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC;AHlFvD,A2G6IL,YxG1DM,IuBhHE,AvBgHE,OuBhHK,CvBgHG,GAAG,CAAC,CAAC,EuBhHA,CAAC,CAAC,CAAC,AvBgHE,CuBhHD,EvBgHI,IuBhHE,AvBgHE,KuBhHG,AvBgHE,CAAC,KAAK,EuBhHA,CAAC,EACzC,AvB+G6C,IAAI,CAAC,CAAC,CAAC;AHlFzD,A2G6ID,A3FhOA,SAEgB,GUqDV,AvB+GA,IAAI,GuB/GG,CVvDb,CAE4B,EUqDX,CvB+GC,EatKlB,CbsKqB,CapKsB,IboKjB,GAAG,IuB/GI,AvB+GA,CuB/GC,AvB+GA,KuB/GK,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AiF0K3D,A3F9NE,EAAA,OUqDG,EVrDM,CAAC,AbqKN,IAAI,CAAC,EarKT,CAAkB,MbqKA,EAAE,EarKF,IAAA,EAAI;AhBkFjB,A2G6IP,A5GRA,AiBtNI,IAAA,IAAI,ChBiFQ0yB,ADqIP5sC,AiBtNA,IUoDE,E3BkKX,CAAiBC,AIjDT,CarKJ,AUoDW,C3BkKf,EAAqBC,AiBtND,ChBiFb,CAAsB2sC,CAAtB,C0B7Be,AvBiHN,CHpFgBC,ADqIhC,AiBtNI,EjBsNwB,AIjDT,EAAE,CAAC,EHpFf,A0B7BuB,CAAC,C1B6BU,A0B7BT,CAAC,KAAK,QAAQ,EAAE;A1B8B5C,A2G6IJ,A5GRE,AiBtNC,GAFD,IhBmFO,ADqIF,ICrIMl5B,ADqIF5f,CCrIP,A0B7BE,E3BkKJ,ECrIgB64C,AGqFV,CHrFJ,CDqIc3sC,CCrIG,A0B7BR,CvBkHD,CAAC,EHrFY,ADqIvB,A2BlKepD,C1B6BSgwC,CDqID,KIhDH,CHrFW,CAAC5uC,AGqFV,KuBlHE,CAAC,Q1B6BD,A0B7BS,C1B6Bc0V,A0B7Bb,C1B6BV,A0B7BW,C1B6BhB,A0B7BiB,CAAC,C1B6Bck5B,A0B7Bb,O1B6BoB,CAACl5B,CAAD,CAAP,GAAai5B,CAAC,CAACj5B,CAAD,CAAd;AACpD,A2G6ID,A5GRI3T,AiBtNH,IjBsNGA,EAAE,CAACjM,E2BlKF,C3BkKC,CAAF,GAAUkM,KAAK,CAAClM,AIhDV,GJgDS,CAAf,IIhDc,GAAG,EAAE,CAAC;AwGyDxB,A5GRG,AoB/MH,AAOA,aOqCW,IvBmHF;AHpFF,A2G6IP,S3G7IgB+4C,G0B9BV,CvBmHC,IHrFA,CAAkBzG,CAAlB,A0B9BM,E1B8Be,E0B9BX,QAAQ,CAAC,CAAC,CAAC,CAAC;A1B+BzB,A2G6IJ,A5GTE,MCpIMuG,CAAC,EDoIA5sC,A2BlKJ,C1B8BO,CDoIV,CI9CI,KHtFasF,CGsFP,CAAC,IHtFD,AGsFK,CACT,IHvFsB,SGuFT,CHvFT,AGuFU,IHvFsB+gC,CAAC,CAAC/gC,EGuFhB,CAAC,EACvB,CHxF4C,CAACyU,QAAR,CAAzC,EGwFiB,CAAC,QAAQ,CAAC,EACvB,aAAa,CAAC,QAAQ,CAAC,EACvB,aAAa,CAAC,QAAQ,CAAC,CACxB,CAAC;AH3FJ,A2G8IJ,A5GTC,MCrI+Dxc,CAAC,C0B7B7D,CvByHC,CH5F+D,CAAhE,I0B7BO,IAAI,GAAG,CAAC;A1B8Bf,A2G8IJ,A5GRA,K2BnKG,C1B6BKqvC,CAAJ,CG6FA,CH7FO,MG6FA,CH7FOA,CAAC,CAAChxC,GG6FH,CH7FC,AG6FA,CH7FOyqC,CAAP,CAAP,CG6FW,CAAC,EAAE,CAAC,CAAC;AH5FvB,A2G8IJ,IjF1KE,CvByHC,IH7FQ,E0B5BF,OAAO,CAAC;A1B6BTrsB,A2G8IR,CjF1KC,CAAC,E1B4BMA,IAAI,EAAE,YAAY;AACd,A2G8IZ,AxFhNA,SAAgB,CnBkEAqsB,CAAC,IAAI9oC,CAAC,IAAI8oC,CAAC,CAAC7oC,MAAhB,EAAwB6oC,CAAC,GAAG,EmBlEG,CACzC,EnBiE2C,CAAT,YmBjEkC;AnBkE1D,A2G8IZ,IxF9ME,IAAM,IAAI,CnBgEO,EmBhE6B,EAAE,CAAC;AnBgE9BjzC,A2G+IrB,A5GVA,IoBpME,InB+DmBA,AmB/Db,CpBoMC8M,ICrIiB,EAAEmmC,CAAC,CDqI7B,AoBpMiB,CpBoMExoC,ECrIcwoC,AmB/DkC,CnB+DjC,ADqIlC,CCrImC9oC,AmB/DkC,CnB+DjC,ADqIZ,AoBpM8C,EnB+DpC,CAAf;AAAsB0c,A2GgJzC,A5GVE,IoBpMA,EpBoMI9Z,ECtImC8Z,AmB9DjC,CpBoMC,GCtIoC,ADsIjC,ECtImC,ADsI7C,CCtI8CosB,CmB9DhC,GAAmC,EAAE,CAAC;AnB8DnC,A2GiJnB,AjFzKA,AAAO,IAAI,G1BwBC,G0BxBK,GAAiC,IAAI,CAAC;A1ByB9C,A2GiJT,A5GXE,IoBlMA,GpBkMK,CoBlMC,GpBkMG9oC,CAAC,GAAG,CAAb,CoBlMe,CpBkMCA,CAAC,CoBlMoB,EpBkMjBM,GAAG,CAACL,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AC1I5B,A2GsJX,A5GXI,GC3IA,KD2IIM,GAAG,CAACN,CAAD,CAAP,EAAY;ACrIf,A2GiJD,A5GXMwC,IIrCJ,EJqCIA,MAAM,CAACI,GAAD,AIrCE,EJqCItC,AIrChB,GJqCmB,CAACN,CAAD,CAAT,CAAN,GIrCS,KAAa,EAAE,OAAiB;AwGiD/C,A5GXK;ACrIE,A2GiJP,A5GXG,QoBlMC,CnB4DYwvC,MAAT,CAAgB1G,CAAhB,CmB5DO,CnB4DYnqC,CAAnB,AmB5DS,EnB4Da,EmB5DT;AnB6DhB,A2GiJJ,AjFxKA,IAAI,E1BuBI0wC,CAAC,CGiGL,AgB7JA,EnB4DQ,EGiGJ,CuBxHK,GAAG,AvBwHJ,CHjGOtnC,AGiGN,GuBxHO,CAAC,APrCJ,EnB4DL,KAAkB,OGiGC,CgB7Jd,EnB4DL,CGiGuB,CAAC,EHjGQ+gC,CAAC,CAAC/gC,GGiGH,EAAE,CHjGO,CAACyU,QAAR,CAAzC;AACA,A2GiJJ,A5GZE,MCrIM,CAAC6yB,CAAL,CDqIKzsC,CCrIG,EDqIV,AIpCI,KHjGakmC,CAAP,CGiGC,IAAI,CAAC,KAAK,CAAC,CAAC;AHhGrB,A2GiJJ,A5GZC,MCrIO9oC,CAAC,CmB5DL,ChB6JC,CHjGOqvC,CAAC,AmB5DN,CnB4DOhxC,IAAF,AmB5DL,CnB4DYyqC,CAAP,CAAR;AAAA,A2GkJJ,A5GXA,MCvIuB2E,CAAnB,CGkGA,OAAO,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;AHlG/D,A2GmJJ,KxGhDG,CHnGuBgC,EAAE,AmB1DxB,GnB0D2B,CmB1DvB,CnB0DJ,CmB1DM,IAAI;AnB0DV,A2GoJJ,A5GXA,MCzImCnsC,CAA/B,CmBzDA,WAAW,EAAE,OAAO;AwF8MxB,AjFvKA,IAAa,IPtCT,QAAQ,COsCc,CPtCZ,EOsCe,UAC3B,OAAgD,EAChD,UAAoB;A1BiBlB,A2GqJJ,IjFpKEuwC,E1BeM,MmBxDF,GOyCE,CACJ,CAAC,UAAU,AP1CM,KO0CD,OAAO,KAAK,AP1CX,IO0Ce,IAAI,OAAO,KAAK,KAAK,CAAC,EACtD,4CAA4C,CAC7C,CAAC;A1BaI,A2GqJR,IjFjKE,IAAI,G1BYS,CAACl1C,AmBxDV,CnBwDW,E0BZJ,G1BYS,E0BZJ,CP5CH,EnBwDY,CAAX,A0BZM,EAAE,E1BYQA,CAAC,GmBxDlB,EnBwDuB,C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C,EAA+CE,SAA/C,EAA0D;AAC7D,K0BdD,C1BcK,CAACvmC,CmBjDL,KnBiDW,CAAC8nC,MmBjDA,CAAC,GAAG,EAAE,CnBiDlB,EAA2B,KmBjDD,CnBiDO,AmBjDN,CAAC,GnBiDSV,SAAJ,CAAc,sCAAd,CAAN;AAC3B,I0BbF,AvBwHA,EH3GMH,CAAC,C0BbH,APpCF,EnBiDQV,I0BbA,CPpCD,COoCG,G1BaO,AmBjDN,CnBiDOrsC,AmBjDN,IAAI,CnBiDR,AmBjDS,CnBiDOksC,AmBjDN,ChB4JG,EAAvB,IH3GU,EAAyBC,IG2GX,KAAa,CH3GQ,CG2GN,GH3GU,EAAvC,CAAR,CG2GqD;AH3GrD,ADsIJ,KoBtLG,CnBgDqDpuC,CAApD,C0BZA,AvBwHA,CJ0BKgD,G2BlJC,AvBwHF,CAAC,KAAK,CJ0Bd,A2BlJiB,C3BkJIlB,AI1BL,CJ0BhB,AI1BiB,CuBxHG,C3BkJIgB,CAAxB,EAA2B,Y2BlJS,CAAC,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;A1BYvD,ADuIF,MCvIyDgtC,ADuIrDhuC,CCvIsD,ADuIrD,C2BlJH,AvByHA,EH9G2D,EAA3D,ADuIQgB,AIzBF,CJyBR,C2BlJQ,C3BkJK,A2BlJJ,OAAO,CAAC,CAAC,CvByHG,GAAG,OAAO;AH7G7B,ADsIa,K2BjJd,I1BWQ9C,CAAC,CDsIY,ECtIT,CG8GP,CH9GG,ADsIM,ECtIEivC,CG8GP,CAAC,EH9GU,CAAC,MAAD,CAAZ,EAAsBA,IAAI,CAAC,IG8GJ,GH9GG,CAA1B,EAAqCA,IAAI,CAAC,QAAD,CAAzC,EAAqDjvC,CAAC,CAAC+H,MAAM,CAAC8nC,aAAR,CAAD,GAA0B,YAAY;AAAE,ADsI1E,C2BhJ7B,CAAC,S1BU6G,GG+GvG,CH/GgG,GG+G5F,CAAC,cAAc,CAAC;AH/G0F,GAA3G,CmB5CT,CnB4CsH7vC,CAApH,EGiHA,IAAM,CgB7JC,GAAG,CAAC,ChB6JC,GAAa,AgB7JD,EhB6JG,CAAC;AJsB9B,MAAIiD,EIpBF,AgB9JA,IAAI,ChB8JC,EJoBM,AoBlLJ,EhB8JE,CJoBKlF,AIpBJ,CgB9JC,EhB8JE,CAAC,CgB9JC,ChB8JC,CAAC,CJoBK,CAAC+D,CAAD,AIpBF,CJoBtB,IIpB2B,CAAC,MAAM,CgB9JC,CAAC,ChB8JE;AHlHpC,ADuIF,MAAIoB,EoBlLF,GnB2CS+rC,CGmHP,AgB9JE,CAAC8B,EnB2CL,ADuIW,CCvIGpyC,AGmHN,CHnHR,CDuIcZ,CCvIG,EGmHJ,GAAG,EJoBM,AoBlLT,CpBkLU+E,AoBlLT,CpBkLQ,CAAxB,EoBlLoB,EAAE,IhB8JS,AgB9JL,ChB8JM,AgB9JL,EAAE,GhB8JQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AHnH9B,QAAIksC,CAAC,CAACrwC,CAAD,CAAL,AGqHjB,AgB/JA,EnB0C2BqB,CAAC,CAACrB,AGqHvB,CHrHsB,CAAD,AmB1CrB,GnB0C4B,IGqHnB,GAAG,CAAC,EHrHyBjB,AmB1CzB,CnB0Ce,AGqHZ,AgB/JF,EnB0C2B,GGqHpB,CAAC,AgB/JF,MhB+JQ,CAAC,iBgB/JS,EAAE,IAAI,MAAA,EAAE,CAAC,CAAC;AnB0CL,ADwIrD,A2B7IF,AAAO,IAAM,E3B6IPuF,GoBjLD,GhB+JC,CHtHwD,C0BLvC,C3B6IR,CIlBH,CHtHsDkT,A0BLxC,E3B6IPjT,EIlBF,GHtH6C,AGsH1C,CHtHsD,E0BJxE,C3B4IA,EAA4B,G2B5Id,AvB0Ha,EHtHuDpB,CAAV,AGsH1C,EHtHuDgB,CAAb,EAAgB,QGsH7C,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AHtHyBgtC,ADyIxF,I2B3IF,I1BE0FA,ADyIpF,AoBjLJ,CnBwCyF,CAACp3C,C0BFrF,CvByHH,EHvHsF,AGuHpF,CHvH2F,AGuH1F,AgB/JE,CnBwCyFiG,AGuH1F,CHvHyF,EAAIjB,AmBxCxF,CnBwCoF,AmBxCnF,EnBwC0FoE,CAAP,CmBxC/E,CnBwCyFgB,AmBxCxF,CnBwC8E,AmBxC7E,CnBwCsE,IAAuB,CAAvB,IAA4BitC,MAAM,CAACpxC,CAAD,EAAIjB,CAAJ,CAAlC;AAA2C,AD0IjI,KoBjLH,EnBuC2D,CAAP,A0BFrC,E3B4IRyF,EIjBJ,IAAM,EJiBM,GAAGhE,IIjBA,CJiBK,A2B5IU,C3B4ITC,CIjBH,CAAC,GAAG,EJiBP,CAAc0C,CAAd,CAAf,AIjB2B,CAAC,MAAM,CAAC;AHzHkG,AD2IrI,KC3I2B,KD2IvBsB,EIjBJ,CuB5HY,GvB4HN,EJiBM,GAAGjE,AIjBJ,EuB5HmB,CvB4HhB,CuB5HF,C3B6IQ,CAACC,MIjBE,CJiBR,CAAc0D,CAAd,AIjBW,CJiB1B,S2B7I8B,EAAlB,CvB4H2B,CAAC,EuB5HV,GvB4He,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AH1H0E,ImBpC5I,GAAG,CAAC,IOkCY,AvB6HZ,CgB/JK,ChB+JH,AgB/JI,ChB+JH,CAAC,CgB/JK,eAAe,CAAC,QOkCK;A3B8I9B,IoBvKJ,MpBuKQK,EIfJ,CgBxJK,GhBwJC,EJeM,IAAIC,GIfD,CgBxJG,CACpB,ChBuJoB,CAAC,CJenB,EAA0B,AIfJ,EgBvJA,EACxB,ChBsJ6B,CAAC,MAAM,CAAC,AgBtJvB;AnB0Bd,AD4II,Q2B9IJ,APxBA,GnB0BS2sC,A0BFN,CvB+HD,GJeSjuC,CAAC,AIfJ,CH7HR,AD4Ia7B,CC5IGtB,CAAhB,EAAmBjB,AG6HN,CH7Hb,CD4IW,CC5IW,AG6HN,GuB/HZ,C3B8IoBoF,CAAC,CAAC7C,G2B9IhB,AvB+He,CgBvJzB,EpBsKW,AIfiB,AgBvJ5B,IpBsKoC6B,CAAC,CAACuB,A2B9IvB,K3B8IqB,CAAQ,CIfH,CuB/HlB,AvB+HmB,AgBvJ5B,GOwBW,EvB+HsB,CAAC,EJeMC,CAAV,EAAatD,CAAb,AIfU,CAAC,CJeK,AIfJ,CAAC,CAAC,GAAG,EAAE,CAAC;AH7HxC,AD6IlB,K2B9IP,CAAC,E1BC4B,AmBxB5B,IhBsJE,AgBtJE,EhBsJA,CAAC,CAAC,CJeOgD,EoBrKF,QpBqKY,CAACM,AoBrKJ,CpBqKG,EAAIR,CAAC,CAAC9C,AoBrKJ,CpBqKG,CAAL,CAAjB,KoBrK2B,IAAI,SAAS,KAAK,IAAI,EAAE;AnBwB3BwuC,AD8IzB,C2B9IR,CAAC,I1BAgCA,GD4IM,CC5IF,AD4I9B,CC5I+BQ,CAAC,AGgIlC,AgBvJA,CnBuBmCrwC,CAAD,CAAD,CAAKjB,AGgIlC,AgBvJE,CnBuB2B,CAAD,CAAJ,EGgInB,CgBvJC,GhBuJG,AgBvJA,IhBuJI,IAAI,CgBvJC,CAAC,GhBuJG,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,EAAE;AHhI1B,AD+I3C,KC/IqB,CAAuB,CD2I7C,KoBjKA,CnBsBoD4F,AD+I7C,CC/IsC,EAAU,AGiIrD,CJcSxB,CAAC,GoBrKH,ChBuJD,EgBvJI,EAAE,ChBuJD,EAAE,CJcSyB,AIdR,AgBvJE,IpBqKP,IAAqBT,AoBrKd,CpBqKe,CoBrKb,CAAC,UpBqKwBS,IAAtC,EAA4C;AC/IMysC,ADgJvD,MChJuDA,GmBrB1D,GnBqBgE,CAACF,AGkI/D,CHlIgE,CAAC,ADgJzDhuC,CChJwD,ADgJvD,CChJsD,ADgJrD0B,CChJ0D,CAAL,CAAD,EAAUF,CAAV,CAAN,ADgJhD,OAAgBR,CAAC,CAACU,OAAF,EAAvB;AChJ4E,ADiJ7E,OAFM,CoBlKT,IhBuJE,AgBvJI,CpBoKG,GIbD,CJaK,CAACL,AoBpKF,GAAG,GhBuJC,EJaH,CIbM,CAAC,EJaM,AoBpKmB,CpBoKlBC,AoBpKmB,EhBuJrB,IAAI,CAAC,CJarB,EAA4B,EIbF,KAAK,IAAI,CAAC,CAAC,CAAC;AHpImC,ADkJ9E,A2B7IR,AAAO,IAAM,IPtBT,COsBc,G3B6INK,A2B7IS,AvBgIf,AgBtJE,KpBmKS,CIbL,AgBtJE,ChBsJD,AgBtJE,CpBmKKlG,GIbH,AgBtJE,ChBsJD,EJaQ,CAACmG,CoBnKH,GpBmKJ,CAAY5B,AIbN,CJaN,AIbO,CJanB,AIboB,GgBtJK,EAAE;ApBoK3B,I2B9IsB,Q3B8IlB6B,AIZN,AgBvJA,IhBuJI,CJYO,CoBnKL,CAAC,CpBmKOpG,CIZL,CuBlIoC,CPrBlC,GpBmKS,AIZN,AgBvJA,CpBmKOmG,CIZL,EAAE,CJYJ,CAAYZ,CAAZ,CAAZ,UoBnK8B,CAAC;AnBiBnC,ADmJI,S2B/IsB,APpBzB,EnBgBQ0rC,IAAT,ADmJW/qC,CCnJGgqC,AGuIV,CHvIJ,EAAiB,A0BI8B,C3B+I/B,AIZN,CJYOxtC,A2B/IS,M3B+If,CIZO,GAAG,CJYO0D,AIZN,CAAC,IJYU,CAAC1D,AIZN,IuBnImB,AvBmIf,CAAC,CJYtB,A2B/Ie,GvBmIW,CJYOwD,A2B/IG,GvBmIN,EJYQ,CAACJ,EIZJ,GJYF,CAAY,CIZL,IAAI,CAAC,CAAC,CAAC,EJYQ7M,GAAV,EAAe;ACnJpDi3C,ADoJb,ICpJaA,CAAC,CAAC53C,E0BIK,APlBlB,GnBcW,CmBdX,IhBsJJ,CJYSmN,KIZH,CHxI4B2sC,AGwI3B,IJYY,AIZR,CJYS7tC,AIZR,CJYS,CCpJN,ADoJOtL,AoBlKd,CAAY,EnBcwB2f,ADoJvB,CAAF,EAASrT,AIZR,CJYS,A2BhJc,AvBoItB,CJYStM,AIZR,EHxI6B,CAAC6f,ADoJvB,CAAV,CAAjB,KCpJ0C,CAAgBo3B,CAAC,CAAC53C,KAAF,CAAQ6H,CAAxB,EAA2BuB,IAA3B,CAAgCgxC,OAAhC,EAAyC5oB,MAAzC,CAA7B,GAAgF2oB,MAAM,CAACF,CAAC,CAAC,CAAD,CAAD,CAAK,CAAL,CAAD,EAAUrC,CAAV,CAAtF;AAAqG,ADqJnH,QoBjKL,CpB+J4C,CAAxC,EoB/JA,IhBsJA,GgBtJO,ChBsJH,GgBtJO,EhBsJF,GgBtJO,EhBsJF,EAAE,EAAE,EgBtJM,IAAI,CAAC,IAAI,EAAE;ApBkKpC,I2BjJL,G3B2IW,C2B3IL,IPhBF,CpBiKO,E2BjJE,GAAG,APhBN,EhBsJF,IAAM,OgBtJS,ChBsJD,AgBtJE,GhBsJC,CAAC,CAAC,CgBtJG,IhBsJE,GuBtIW,CvBsIP,CAAC,CuBtIS,GvBsIL,IAAI,IAAI,KuBtIa,AvBsIR,CAAC,SgBtJD,EAAE,GOgBU,CPhBN,EAAE,KOgBY,CAAC,APhBP,COgBQ,APhBP,IAAI,CAAC,EAAE,CAAC,CAAC;AnBY5E,ADsJI,I2BjJN,KPhBG,EnBWQwC,E0BKF,CAAC,I1BLR,CAAiBp6C,A0BKJ,CAAC,AvBsIR,IH3IN,EAAwB,AG2IZ,CuBtIS,AvBsIR,CuBtIS,CAAC,EvBsIN,CAAC,QAAQ,CAAC,CAAC;AH3IFk6C,ADuJtB,C2BjJP,CAAC,E1BN4BA,ImBT1B,EnBSgC,CAAC,CmBT7BgB,GpBgKO,ECvJqB,AG4I3B,EH5IoCl7C,CDuJrC,ICvJ4B,CAAN,AmBTd,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE;AnBSwB,ADwJ/C,YoBhKD,ChBqJC,KgBrJK,aAAa,CAAC,MAAM,sCAAyB,EAAE,IAAI,MAAA,EAAE,CAAC,CAAC;ApBiK9D,KAnBD,CAmBE,GIXD,AgBrJA,IpBgKQyN,CAAP,EAAU;ACxJZ,ADyJE,QIVF,AgBrJA,GnBMS+jB,CmBNH,GhBqJC,AgBrJE,EnBMT,CAAgBxxB,AmBNJ,GhBqJC,CAAC,AgBrJE,CnBMhB,EAAuB,YmBNQ,CAC7B,OAAO,EACP,MAAM,EACN,SAA+B,CAChC,CAAC;AnBEuBk6C,AD0JvB,A2BhJN,AAAO,I1BVsBA,A0BUhB,CvBsIV,GgBhJC,COUc,C1BViB,CAAC,C0BUf,APVb,CpB0JK,AoB1JJ,IAAI,CnBAsB,AD0J7B,AoB1JQ,EnBA+Bl6C,CmBA5B,GAAG,CnBAe,AmBAd,CnBAQ;AAAyB,AD2JjD,I2BjJyB,IPT1B,YAAY,CAAC,COSkC,EPT/B,EAAE,QAAQ,CAAC,CAAC;ApB2J7B,GAxBD,KoBjIE,CpByJK,A2BlJqB,I3BkJjB,CAACoN,CoBzJH,GAAG,COOqC,APPpC,EOOe,E3BkJjB,IAAc,CAACC,SAAnB,EAA8B,G2BlJY,EAArB,IAAqB;A1BT/C,AD4JA,KoBzJD,GOM2B,G1BTjB8sC,AD4JFnxC,MC5JP,AD4Ja,CC5JGkwC,AD4JFjtC,CC5Jd,AD4Ja,CAAN,CC5JYpE,CAAnB,EAAsB,CD4JDmB,MAAM,CAACiE,CAAD,CAA3B,G2BnJ+C;A1BTvB,AD6JzB,GAFM,KC3JuBisC,CAAC,AD6JxB,CC7JyBrxC,CAAD,CAAD,EAAMoyC,CAAC,CAACj1B,KAAF,EAAN,EAAiBi1B,CAAC,CAAC7vC,MAAvB,EAA+B8vC,MAAM,CAACD,CAAC,CAAC,CAAD,CAAD,CAAK,CAAL,CAAD,EAAUA,CAAC,CAAC,CAAD,CAAD,CAAK,CAAL,CAAV,CAAN;AAA2B,AD8JlF,I2BpJF,IAAM,G3BoJG,I2BpJI,C3BoJX,E2BpJc,2BAAyB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2E;AAAlB,IGoLvF,GHpLsF,CAAP,GGoLxE,CAAC,AgBxIN,EhBwIQ,KgBxID,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC;AnB5CwF,AD4MlH,A2BpJF,AAAO,IAAM,C1BxDgC,EAAyEgG,CGqLlH,CgBxIC,InB7CwC,EGqLlC,CAAC,KAAK,CAAC,CuB7Hc,GAAG,UAAS,EAAc,OvB6HjB,EAAE,CAAC,CAAC,CAAC;AHrLkF,AD6M9HnjB,EAAAA,E2BpJA,CvB6HC,GuB7HG6vC,cAAS,C3BoJQ,C2BpJN,C3BoJQx2C,G2BpJJ,G3BoJU,CAACsC,I2BpJH,CAAC,C3BoJL,CAAc,IAAd,CALX,G2B/I0B,KAAK,UAAU,EAAE;A1BxDxD,IGsLC,IuB7HE,APVA,EOUE,CvB6HG,CuB7HD,APVA,COUC,EvB6HI,CAAC,agBvIW,KAAK,SAAS,EAAE;ApB+JvC,CIvBD,IuB7HE,OPVGixC,eAAU,CAAC,gBAAgB,EAAE,iBAAiB,CAAC,CAAC;AnB9C/C,SAASV,A0BwDP,APTJ,oBnB/CE,CAA8BC,MAA9B,EAAsCnkC,GAAtC,EAA2C;AAC9C,AI3KJ,MJ2KQ3O,MAAM,CAACiI,cAAX,EAA2B;AAAEjI,AD8M/B4G,EAAAA,EC9M+B5G,ID8MzB,EC9M+B,AD8M7B,CC9M8BiI,IDoM1B,UCpMmB,CAAsB6qC,MAAtB,EAA8B,KAA9B,EAAqC;AAAEx6C,MAAAA,E0B2DpE,APTA,GnBlDyE,C0B2DrE,C1B3DuEqW,ImBkDlE,CAAC,EOSA,EPTI,COSD,APTE,GAAG,EOSA,CAAC,aPTe,CAAC;AnBlD+B,ADgNpE,KChN+B,G0B4D7B,IAAI,WAAS,GAAG;A1B5DoE,GAApF,MAA0F,G0B6DxF,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;A1B7DsEmkC,IAAAA,ImBsD5F,EnBtDkG,CAACnkC,GAAP,E0B8DxF,C1B9DqGA,GAAb,GmBsD7E,CAAC,EOQF,CAAC,MPRU,CAAC,IOQF,APRM,CAAC,COQL,EPRQ,EOQJ,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC;A1B9DqE,ADmNjH9H,EAAAA,UoB7J6C,GpB6JhC,C2BpJP,C3BoJS,M2BpJF,GPTuC,SpB6JZ,YAf5B;a2BpIP,IPVwC,UAAO,EAAP,qBAAO,EAAP,IAAO;AnBrDlD,ADoNF,SCpNSisC,G0BiEL,G1BjEF,C0BiEM,APZqC,COYpC,QAAM,EAAE,cPZmC;AnBpDrD,gB0BiEO,QAAM,GAAG,IAAI,CAAC;YPZhB,IOaE,APbI,EOaF,EAAE,CAAC,KPbS,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AnBrD1D,ADsNChsC,EAAAA,QAAQ,EAAE,AoBhKN,COaC,MPbM,UAAU,CpBgKc,AoBhKb,KAAK,CAAC,IAAI,EpB4IpB,AoB5IsB,sBAAsB,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC;SOcnE,APbA,COaC,APbA;AnBrDC,ADsNL,Q2BlJE,APbA,CnBvDYisC,G0BoER,GPbG,KOaK,C1BpET,A0BoEU,C1BpEYC,GAAtB,EAA2B,ImBuDP,CAAC,KOaK,EAAE;A1BnE/B,KmBuDD,CnBvDKA,GAAG,G0BoEL,C1BpESA,GAAG,CAACnqB,G0BoEL,CAAC,M1BpEX,EAA2B,OAAOmqB,C0BoEP,CAAC,C1BpED,iB0BoEmB,EAAE,WAAS,EAAE,KAAK,CAAC,CAAC;A1BnElE,ImBwDF,EnBxDM3iC,MAAM,CmBwDH,EnBxDM,EAAb,QmBwDmB,CAAC,GAAgB,EAAE,SAAiB;AnBvDvD,ADsNFtJ,EAAAA,ICtNMisC,EmBwDJ,CnBxDO,G0BoEL,C1BpES,ADsNF,AoB9JiB,EpB8Jf,ECtNX,C0BoEQ,C1BpES,A0BoER,C3ByHC,GoBrIsC,CnBxD1B,CmBwDI,GnBxDAC,CAAT,CmBwDS,GnBxDKD,E0BoEN,C1BpER,A0BoES,APZM,CAAC,CnBxDG,GmBwDC,CnBxDGhzC,A0BoER,APZM,EOYJ,I1BpEY,CAACmD,EmBwDA,CAAC,EAAtB,COYiB,EAAE,KAAK,C1BpEV,A0BoEW,C1BpEWrC,A0BoEV,I1BpEZ,AmBwDQ,CnBxDmBkyC,CmBwDzC,EnBxDc,EAAgCC,AmBwDxB,CnBxDR,CAAJ,AmBwDc,EnBxD0B5iC,MAAM,CAAC4iC,CAAD,CAAN,GAAYD,GAAG,CAACC,CAAD,CAAf;AAC5E5iC,EAAAA,MAAM,CAACvX,A0BoEN,GPbI,InBvDL,AmBuDW,GnBvDMk6C,GAAjB,KmBuDsB,SAAA;AnBtDtB,ADsNF,SCtNS3iC,I0BmEA,E1BnEP,E0BmEY,QAAgB,CAAC,WAAW,EAAE;A1BlE7C,AIjKD,SAAgB,GewNV,IAAM,CfxNY,CAAI,KAAQ,IewNb,GAAG,YAAY,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;IfvNvD,OAAO,CsBoOF,APZD,IAAI,IOYa,CAAC,AtBpOL,CAAC,KewNC,IfxNQ,CsBoOM,APZT,COYU,AtBpOL,GewND,EfxNM,AewNJ,CfxNU,CAAC,asBoOa,EAAE;A1BlEnD,ADsNLrJ,CKvXD,CLuXCA,OCtNcksC,KDsNF,EAAE,A2BnJR,APZA,IpBiIM,A2BrHF,GPZG,CnBvDR,CAAyBF,GAAzB,A0BmEa,CAAC,C1BnEgB,S0BmEN,KAAK,UAAU;A1BlE1C,SAAQA,GAAG,CmBuDR,GnBvDYA,GAAG,CAACnqB,A0BkEyB,U1BlErC,C0BkE8C,E1BlEpBmqB,A0BkEsB,CAAC,E1BlEjD,GAAgC;AAAEl6C,ADuN3C,ICvN2CA,OAAO,CmByD9C,CnBzDgDk6C,A0BmE/C,CAAC,CAAC,CPVC,QAAQ,CAAC,WAAW,CAAC,EAAE;AnBzDU,GAAvC,amB0DI,QAAQ,CAAC,WAAW,CAAC,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;AnBzD7C,Y0BoEM,CPVA,KOUc,CAAC,WAAW,CAAC,QAAQ,EAAE,WAAS,CAAC,CAAC;A3BqJrD/rC,EAAAA,OoB9JG,IpB8JQ,EAAE,IAnCD;KoB1HX;ApB+JD;S2BlJG;IPTH,COUC,QPVQ,YAAY,CAAC,GAAgB,EAAE,IAAY;ApB8JpDC,C2BnJD,C3BmJCA,A2BnJA,MPVE,IAAI,IAAI,CpB6JK,EAAE,EAxCL,AoBrHG,YAAY,EAAE;YACzB,OAAO,IAAI,CAAC;ApB8JhB,SoB7JG;AfxNL,Qe0NI,Cf1NY,Ge0NN,Of1NgB,CAAC,Ee0NP,GAAG,Cf1NmB,EAAE,Ce0NjB,CAAC,If1N+B;IACzD,IAAI,Ae2NF,Ef3NI,Ke2NG,Cf3NG,Se2NO,CAAC,Ef3N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M1VE,IqBmSE,OAAO,CAAC,CAAC;A3BqJb,K2BpJG,GrBpSD,iBAKC;QAJC,CqBmSK,GrBnSD,CqBmSK,ArBnSJ,CqBmSK,GAAG,CAAC,EAAE,ArBnSJ,GAAG,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;ANyb/C,Q2BrJI,IrBnSE,GqBmSK,CAAC,CAAC,ArBnSH,CqBmSI,ArBnSH,OAAO,GAAG,OAAO,CAAC;KqBoS1B,OrBnSG,KAAI,CAAC,MAAM,GAAG,MAAM,CAAC;SqBmSlB,ArBlSJ,CAAC,CAAC;KACJ,GqBkSC,OAAO,CAAC,CAAC;KACV;CACF,CAAC;A3BsJF,IAAIkB,aAAa,GAAG,6JAApB;AAEA;;IMrbE,+BAAY,GAAZ,UACE,QAAqD;QADvD,iBAuBC;ANiaH,AiBvcA,AAIA,AU+SA,AAAO,IV/SD,AU+SO,IrBjST,CNqbKC,CiBncG,GAAG,CU+SQ,CrBjSZ,EWdQ4rC,AU+SO,E3BoJ1B,CAAqBtxC,GAArB,EAA0B,AMrbd,EqBkSV,GAAW,ArBlSI,EWdQ,AUiTvB,ArBnSiB,CWdO,EUiTC,ErBnSF,WWdgB,CAAC,CAAC;AjBoczC,I2BjJA,E3BiJI2B,CAAC,C2BjJD,E3BiJI,CAAC3B,A2BjJF,CrBpSH,ENqbQ,C2BjJD,CrBpSH,CNqbO,C2BjJD,C3BiJN,EAAW2F,AMrbN,CqBoSK,CrBpSH,EqBoSM,EAAE,I3BiJf,CAAsB,CAAtB,CAAR;AACA,Q2BjJE,C3BiJKhE,CAAC,KAAK,A2BjJJ,CrBpSH,EqBoSM,C3BiJL,A2BjJM,ErBpSH,CqBoSM,ArBpSL,CNqbUA,A2BjJJ,C3BiJK,A2BjJJ,IrBpSD,CNqbU,AMrbT,INqblB,CMrbuB,CAAC,CAAC;ANsb1B,AiBlcD,IAAI4vC,CUiTD,QrBpSI,KWbM,EAAE,IAAK,IAAY,CAAC,QAAQ,KAAK,SAAS,EAAE;AjBoczD,IiBncE,KUgTO,CVhTD,CAAC,IAAI,CAAC,CXYD,gIWTV,CAAC,CAAC;QU8SD,MAAM,ErBpSF,EqBoSM,GrBpSF,CAAC,CqBoSM,CACb,KrBrSc,CAAC,KAAK,CAAC,CAAC,WqBqSE,GAAG,GAAG,GAAG,eAAe,GAAG3xC,cAAS,CAAC,GAAG,CAAC,CAClE,CAAC;IV7SJ,CU8SC,GV9SK,KXQD,KWRW,GAAK,IAAY,CAAC,QAA8B,CAAC,WAAW,CAAC;CU+S9E,CAAC,EV9SA,IAAI,IXQA,IAAI,EWRM,IAAI,CXQH,QAAQ,CWRK,CAAC,GXQD,IWRQ,CAAC,KXQC,CWRK,CAAC,AXQJ,IWRQ,CAAC,EAAE;QACjD,MAAM,CAAC,IAAI,CAAC,oNAGX,CAAC,CAAC;AjB2bP,KiB1bG,IjB0bMgG,GAAT,CAActH,GAAd,EAAmBxH,GAAnB,EAAwBkI,GAAxB,EAA6B6G,UAA7B,EAAyC;AACvChI,CiB1bD,CjB0bCA,MAAM,CAACiI,OMrbD,KAAI,CAAC,CNqbX,CAAsBxH,GAAtB,EAA2BxH,AMrbT,CAAC,ENqbnB,EAAgC,CMrbR,CAAC,eAAQ,CAAC,CAAC;ANsbjCX,AiBzbJ,IjBybIA,AiBzbE,KjBybG,EAAE6I,GADuB,OiBxbX,GAAG,uBAAuB,EAAE,CAAC;AjB0bhD6G,AiBzbJ,AU2SA,AAAO,I3B8IHA,AiBzbE,AU2SO,U3B8IC,EAAE,CAAC,AiBzbE,CjBybDA,EiBzbI,CU2SQ,GAAG,I3B4IC,M2B5IQ,GV3SH,AU2SW,CV3SV,aAAa,CAAC;AjB0blDE,AiBxbJ,IjBwbIA,A2B9IF,IAAI,I3B8IM,EAAE,C2B9ID,CrBtSL,CWJS,CjBqbiB,AiBrbhB,AU0SF,ErBtSJ,GqBsSS,KrBtSD,CAAC,EWJU,AU0SF,GV1SK,CU0SD,ArBtSN,GqBsSS,ErBtSJ,CAAC,EqBsSQ,ArBtSN,IqBsSU;A3B+IzCC,IAAAA,I2B/I2C,OAAOpG,C3B+ItC,EAAE,EMpbR,QAAQ,CqBqS6C,ArBrS5C,CqBqS6C,GAAG,CAAC,ArBrS5C,CqBqS6C,ArBrS5C,CAAC;ANgbQ,GAAhC,C2BzIA,IAAM,IAAI,GAAG,EAAE,ArBtSR,CqBsSS;A3B+IjB,I2B9IC,KAAK,IAAI,CAAC,IAAI,GAAG,ArBvSJ,EqBuSM;A3BgJrB,IiBzbE,IAAI4xC,AU0SF,IAAI,CAAC,IAAI,CAAC,CV1SF,AU0SG,CAAC,ArBvSN,CWHI,AU0SG,EV1SD,KXGE,CAA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AAI,CAAC,IAAI,C3BkGwB,A2BlGvB,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;A3BmGnB,I2BlGF,IAAI,CAAC,I3BkGMC,GAAT,A2BlGU,EAAE,C3BkGI,A2BlGH;A3BmGX,AQtjBN,AA6CA,ImBuaE,AnBvaI,GmBuaD,GAAG,C3BkGGC,GAAL,A2BlGM,AnBvaI,CmBuaH,E3BkGI7K,AQzgBE,EmBuaF,CAAC,EAAE,C3BkGG,A2BlGF,C3BkGGsC,A2BlGF,M3BkGL,CAAc,CQzgBG,CAAC,ERygBlB,CAAX;AACD;I2BhGH,IAAI,aAAa,GAAG,EAAE,CAAC;A3BiGrBsI,AQjfJ,IRifIA,A2BhGF,G3BgGK,CAACjK,C2BhGD,CAAC,GAAG,CAAC,EAAE,C3BgGV,A2BhGW,C3BgGGmK,E2BhGA,C3BgGd,C2BhGgB,E3BgGI,A2BhGF,CAAC,IAAI,CAAC,EAAE,C3BgGGA,GAAT,CAAc7R,GAAd,EAAmB;AACrC,IQlf6Bk6C,ImBkZ/B,IAAI,C3BgGK,KAAKtoC,C2BhGH,E3BgGF,CAAS5R,A2BhGJ,G3BgGL,K2BhGa,C3BgGK,A2BhGJ,GAAG,C3BgGxB,A2BhGyB,MAAM,CAAC,CAAC,EAAE,AnBlZD,CmBkZE,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;A3BiGxD,IQhfH,CR8eE,G2B9FA,IAAI,OAAO,CAAC,MAAM,CnBhZC,ImBgZI,AnBhZQ,CmBgZP,CnBhZS,OAAe;QAAlD,ImBgZ4B,OAAO,CnB/YjC,EmB+YoC,GAAG,GAAG,OAAO,CAAC,EnB/Y5C,OAAO,CAAC,SAWf;ARqeC2R,IAAAA,GAAG,CAACjK,A2BhGJ,AnBjZmB,SRifnB,CAAcoK,AQjfS,GRifvB,A2BhGa,AnBjZM,GRifC,A2BhGJ,CnBjZO,CAAQ,ORifFA,GAAT,CAAc9R,A2BhGL,G3BgGT,A2BhGY,E3BgGO,K2BhGA,CAAC;A3BiGtC,K2BhGH,GnBpZQ,GRofA4R,GAAL,CAAS5R,GAAT,AQpfS,GAAG,CRofI,IAAhB,KQpfsB,CAAC;ARqfxB,I2BhGH,C3B8FE,M2B9FK,aAAa,CAAC,WAAW,EAAE,CAAC;CA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ePN,QQre8B,ERqepB,AQreH,IRqeQ,CAACxS,AQreT,MRqee,AQreT,CRqeU+N,AQreT,IAAI,CAAC,CRqevB,EAAoC,OQreH,CAAC,EAAvB,cAAuB,EAAvB,IAAuB,EAAE;ARsezC0E,MAAAA,G2BvFG,GnB/YA,CRseI,A2BvFA,C3BuFCM,EQteC,CmB+YE,E3BuFX,AQteY,CRseG,C2BvFA,OnB/YH,SRseoBH,GAAjB,A2BvFmB,EAAE,C3BuFEE,KAAtC;AACD,Q2BvFD,InB/YE,EmB+YI,EnB/YA,CmB+YG,EnB/YA,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,sCmB+YwC,CAAC;A3BwFvE,GARD,E2B/EC,WnB/YK,IAAI,GAAG,IAAI,KAAK,EAAE;SmB+YjB,IAAI,IAAI,GnB9YP,CmB8YW,MnB9YJ,CAAC,IAAI,CACV,CmB6YsB,EAAE,yCnB7YiB,GAAG,sCAAkC,CAC/E,CAAC;ARqeVT,EAAAA,GAAG,GAAG,A2BxFJ,MAAM,GAAG,AnB5YJ,CRoeSO,GAAV,EAAeC,EAAf,EAAmB,kB2BxFc,CAAC;A3ByFtC,K2BxFD,G3BwFKL,QQpeA,ERoeU,GQpeL,CRoeU,AQpeT,CRoeUxS,EQpeP,CAAC,GRoeY,AQpeT,CRoeU+N,MAA3B,EAAoC,CQpeT,CAAC,GAAG,CAAC,CAAC;ARqe/B0E,I2BvFJ,E3BuFIA,E2BvFE,K3BuFK,A2BvFA,AnB7YN,CRoeOL,E2BvFE,E3BuFV,CAAa,C2BvFC,KAAK,CACrB,IAAI,GAAG,E3BsFwBQ,GAAhB,C2BtFF,G3BuFTC,A2BvFY,E3BuFV,GAAGP,A2BvFY,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,G3BuFT,CAACO,A2BvFY,E3BuFb,CAAzB,A2BvFyC,G3BuFT,EADvB,CAAb,A2BtFmD,CACtD,CAAC;A3BwFC,I2BvFF,KAAa,AnB/YX,CmB+YY,IAAI,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;A3BwFxC,GAND,C2BjFA,InB9YE,GmB8YK,InB9YE,CmB8YG,CAAC,GnB9YC,CAAC;CmB+YhB,CAAC,GnB9YC;ARseDN,EAAAA,EQreF,iBRqeqB,EQre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,AWtwBF,IiByEE,AjBzEW,EXswBPuB,IAAI,EWtwBW,CXswBR,EWtwBW,EXswBP1B,KAAJ,EAAX,CWtwBkC,EiByE1B,CjBzE4C,EiByEpD,AjBzEsD,GAAW;AXuwBjE0B,EAAAA,EWtwBA,EXswBI,CAACvB,C4B7rBH,G5B6rBF,AWtwBO,CiByED,E5B6rBMA,GWtwBC,CXswBb,AWtwBc,IiByEE,GAAG,EAAE,AjBzEE,CiByED,AjBzEE,cAAc,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AXuwBtDuB,CWtwBD,CXswBCA,AWtwBA,IXswBI,CAACT,C4B7rBH,KAAK,G5B6rBP,C4B7rBW,CAAC,C5B6rBK,E4B7rBF,E5B6rBf,E4B7rBmB,CAAC,SAAS,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;A5B8rB7D,AWrwBF,IAAa,KXqwBJS,EWrwBW,CiBwEd,C5B6rBJ,CWrwBqB,EiBwEb,IAAI,CAAC,GjBvEb,GAAkB,CiBuEE,CAAC,AjBtErB,CiBsEsB,CAAC,CjBtEZ,IiBsEiB,EAAE;A5B8rB/B,CAPD,GW3vBE,IAAI,MAAM,CAAC,CiBoEqB,QjBpEZ,CAAC,CiBoEqB,IAAI,GAAG,GAAG,GjBpEjB,CiBoEqB,AjBpEpB,CiBoEqB,GjBpEjB,CAAC,GiBoEuB,AjBpEpB,CiBoEqB,CAAC,AjBpEpB,CiBoEqB,CAAC,CjBpEnB,CAAC;QAAE,CiBqEjD,MjBrEwD,GAAG,CAAC,GAAG,CAAC,CAAC;AXowBtE,Q4B7rBI,C5B6rBKC,M4B7rBE,S5B6rBX,CAA0BrO,A4B7rBL,G5B6rBrB,C4B7rByB,C5B6rBM,E4B7rBH,CAAC;A5B8rB3B,CWnwBD,CAAC,GiBsEC,I5B6rBM,IAAI0M,KAAJ,CAAU3T,SAAV,EAAqBA,SAArB,EAAgCA,SAAhC,EAA2CoH,MAAM,CAACH,GAAD,CAAjD,CAAP;AACD,EAED,E4B9rBE,iCAAkB,GAAlB;A5B+rBF,Q4B9rBI,IAAI,UAAU,GAAG,EAAE,CAAC;A5B+rBxB,Q4B9rBI,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,E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AS,CAAE2L,GAAF,CAAvB;QWvwBhB,IiBoEE,GjBpEK,CiBoEC,IjBpEI,CAAC,MiBoEM,GAAG,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;A5BqsB9C,KWxwBD,GXwwBKC,I4BpsBF,E5BosBQ,GAAGJ,A4BpsBN,IAAI,CAAC,G5BosBS,A4BpsBN,C5BosBOvL,A4BpsBN,EAAE,CAAC,E5BosBN,CAAe,A4BpsBN,I5BosBT,EAAqByL,IAArB,CAAb,A4BpsBiC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;A5BqsB/C,IWxwBF,IXwwBMG,EAAE,CWxwBD,EXwwBI,EWxwBA,CiBoEL,AjBpEM,EXwwBIC,E4BpsBN,I5BosBR,O4BpsBmB,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC;A5BqsBjC,CWxwBH,CAAC,MXwwBMC,QAAJ,I4BrsBmC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;AjBjEnE,IAAa,QAAQ,CiBkEd,EjBlEiB,UAAY,GAAkB;AXuwBlD,IWtwBF,IAAI,CiBkED,CjBlEG,EXswBIR,CWtwBD,CAAC,CAAC,GXswBT;AACE,IWtwBJ,IiBmEE,CjBnEG,EXswBI,EWtwBA,EiBmEA,CjBnEG,CXswBR,E4BnsBS,CjBnEG,GiBmEC,AjBnEE,CiBmED,CjBnEG,KiBmEG,EAAE,CAAC,CAAC,CAAC;A5BosBzB,K4BnsBH,GjBnEC,EAAE,CXswBK,CWtwBH,CAAC,OXswBH;AACEQ,KWtwBL,GXswBKA,QAAQ,GAAGL,IAAX;AACA,IWtwBN,OAAO,EAAE,CAAC;CACX,CAAC;AXswBI,AWpwBN,IiBmEE,AjBnEW,GAAG,GAAG,CXowBR,QAAL,CWnwBJ,GAAkB,EAClB,CiBiEO,CjBjE4D,EiBiEnE,AjBhEA,OAAiB;AXkwBXK,IWhwBN,IXgwBMA,A4BjsBJ,AjB/DE,GAAG,GAAkB,CiB+DhB,C5BisBK,AWhwBa,CAAC,EXgwBXL,A4BjsBJ,CAAC,G5BisBO,CAACpP,KAAL,A4BjsBM,C5BisBK,CAAX,CAAX,C4BjsBqB,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;A5BksBzC,IWhw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nGF,AjBmGG,CiBnGM;A9BqhCvB,Q8BphCQ,KjBmGJ,SiBnGa,GAAT,SAAS,CAAQ;QACjB,CjBmGN,iBiBnGmB,GAAb,aAAa,CAAS;A9BohC/B,MAAI,CAACmP,C8BnhCI,C9BmhCT,EAAS,gB8BnhCc,GAAd,cAAc,CAAa;A9BohClCzT,IAAAA,I8BlhCA,AjBmGA,Eb+6BM,CAAC5D,C8BlhCH,CAAC,AjBmGA,Cb+6BC,CAAN,E8BlhCS,AjBmGA,Cb+6BKkI,Aa/6BJ,EiBnGE,C9BkhCZ,Aa/6Ba,EAAE,CiBnGC,CAAC,AjBmGA,CAAC,GAAG,EAAE,EAAE,CAAC,EiBnGE,AjBmGA,EiBnGE,AjBmGA,CiBnGC;A9BmhC/B,Q8BlhCA,G9BkhCOA,C8BlhCH,AjBmGF,CiBnGG,C9BkhCL,Ea/6BQ,CAAC,EiBnGE,CjBmGC,CAAC,CiBnGC,AjBmGA,CAAC,GiBnGG,AjBmGA,CiBnGC,AjBmGA,CAAC,GiBnGG,AjBmGA,CiBnGC,AjBmGA,CAAC,CAAC,GAAG,CiBnGC,AjBmGA,CiBnGC,AjBmGA,GAAG,CiBnGC,AjBmGA,CiBnGC,AjBmGA,CAAC,GiBnGG,AjBmGA,CiBnGC,CjBmGC,CAAC,GAAG,CAAC,CiBnGC,AjBmGA,CiBnGC,AjBmGA,GiBnGG,AjBmGA,CiBnGC,CjBmGC,CAAC,CiBnGC,AjBmGA,CiBnGC,CAAC,CAAC;A9BmhC5D,Q8BlhCC,IAAI,AjBmGF,CiBnGG,AjBmGF,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GiBnGK,CjBmGD,CAAC,CiBnGG,IjBmGE,CAAC,KAAK,EAAE,CAAC,IiBnGM,AjBmGF,CiBnGG,GAAG,CAAC,KjBmGG,CAAC,CiBnGG,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC;KACxE,IjBmGE;Ab+6BHiQ,EAAAA,E8BhhCA,IjBmGE,IAAI,CAAC,GAAG,Gb66BO,CAACd,Aa76BJ,CAAC,Cb66BK,CAAChY,Ia76BA,Cb66BJ,Aa76BK,CAAC,Cb66BKW,Aa76BJ,CAAC,Eb66BR,EAAgBkI,GAAhB,A8BhhCF,C9BghCf,E8BhhCA;A9BihCAmP,EAAAA,EAAE,CAACI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B2NG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE1B,CkB5NC,GlB4NG,CAAC,GAAG,CAAC,CAAC;Ab85Bd,Q+BznCI,AlB4NA,Cb65BK4N,G+BznCC,ClB4ND,CkB5NG,GAAG,AlB4NF,CAAC,GAAG,Cb65BjB,Aa75BkB,Cb85BhBC,C+B1nCoB,AlB4NF,CkB5NG,AlB4NF,GAAG,CAAC,CkB5NG,CAAC,AlB4NF,Cb65B3B,Aa75B4B,Eb+5B1BC,A+B3nC8B,AlB4NF,CkB5NG,CAAC,AlB4NF,Mb65BhC,EAGEtH,EAHF,EAIE;AACA,MAAI,CAACA,C+B7nCH,C/B6nCF,EAAS,C+B7nCH,AlB4NF,EkB5NI,CAAC,ElB4NA,IkB5NM,AlB4NF,CAAC,GAAG,CkB5NG,CAAC,AlB4NF,EkB5NI,AlB4NF,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE;Abk6BnC,Y+B7nCE,IlB4NE,GkB5NK,CAAC,ElB4NA,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IkB5NM,CAAC,ClB4ND,CkB5NG,AlB4NF,CkB5NG,AlB4NF,CkB5NG,AlB4NF,CkB5NG,CAAC,CAAC,ClB4ND,CAAC,CkB5NG,GlB4NC,GAAG,CAAC,WkB5Na,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;A/B8nCjE,QAAI,CAACsH,A+B7nCJ,OlB4NG,Cbi6BJ,Caj6BM,Cbi6BS,Aaj6BR,CAAC;Abk6BN,aAAOD,A+B9nCF,AlB6NJ,Sbi6BD;AACD,Saj6BA,GkB7NC,IAAI,CAAC,4BAA0B,OAAO,oBAAe,WAAW,MAAG,CAAC,CAAC;QlB8NvE,CkB7NC,MlB6NM,MAAM,CAAC;Abi6Bd,K+B7nCD,AlB6NA,Gbg6BK,CAACA,SAAL,EAAgB;AACd,I+B7nCJ,AlB6NF,OkB7NS,E/B6nCIC,Eah6BZ,GkB7Ne,CAAC,E/B6nCX;AACD,C+B7nCJ,AlB4NA,Ib05BU,CAQP;AACA;AACA,AczoCJ;Ad0oCI;AACA;;A+B3nCJ,AAAO,IAAM,aAAa,GAAG,UAC3B,OAAe;A/B2nCb,I+BznCF,IAAM,G/BynCG,M+BznCM,G/BynCGC,A+BznCA,QAAQ,CAAC,G/B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CT,KgChwCiB,EAAE,CAClB,CAAC;KACH;AhC+vCC,IgC9vCF,IAAI,GhC8vCKD,CAAC,EAAR,EAAY,WgC9vCS,CAAC,IAAI,CAAC,EAAE;AhC+vC3BtB,MAAAA,EgC9vCF,ChC8vCK,GAAG2S,EgC9vCF,GhC8vCO,CAACrR,AgC9vCJ,ChC8vCG,CAAX,GgC9vCa,CACb,WAAW,GAAG,WAAW,GAAG,IAAI,CAAC,QAAQ,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,aAAa,EAAE,CACzE,CAAC;AlB6HN,KkB5HG,IlB4HM,oBAAoB,CAC3B,GAA+B,EAC/B,OAAiB;Ad8nCb,Ic5nCJ,IAAI,Ed4nCI,Kc5nCG,Ed4nCItB,Cc5nCD,Ed4nCN,Gc5nCW,Ed4nCI,Mc5nCI,Ed4nCvB,EAA6B,Ac5nCF,GAAG,KAAK,IAAI,EAAE;Ad6nCvChJ,IgC1vCN,IhC0vCMA,AgCzvCJ,AlB6HA,Id4nCQ,GAAGwL,AgCzvCJ,AlB6HA,IkB7HI,ClB6HC,CAAC,Ed4nCM,CAACxC,AgCzvCJ,GhCyvCG,CAAf,IgCzvCoB;AhC0vCpBkE,Kc5nCL,Gd4nCKA,AgCzvCJ,GhCyvCO,CAAClN,AgCzvCJ,CAAC,GhCyvCE,CAAH,EgCzvCO,ChCyvCK,EgCzvCF,cAAc,GAAG,CAAC;AhCyvCdyb,Ic1nCpB,IkB9HE6iC,ClB8HmB,Cd0nCD7iC,IAAI,EAAE,Gc1nCE,EAAP,IkB9HP,CAAC,IAAI,CAAC,GAAG,MlB8HK,EAAP,MkB9HgB,EACnC,alB6H0B,EAAP,IAAO,EAAE;Ad0nCZ,QgCtvChB,AlB4HG,Cd0nCC,Gc1nCK,EkB5HH,IAAI,AlB4HK,KkB5HA,CACb,UlB2Ha,CkB3HF;AhCsvCV,OAHD,CcvnCF,IkB3HI,AlB2HA,Cd0nCK,IAAI,Cc1nCH,IAAI,GAAG,IAAI,Md0nCiB,Cc1nCV,GAAG,CAAC,KkB3HK,ClB2HC,Cd0nC7B,Ac1nC8B,Ed0nCa,Gc1nCR,UAAU,EAAE;Ad2nCpD3I,QAAAA,IAAI,AgCrvCJ,AlB2HF,Cd0nCO,Mc1nCA,IAAI,CAAC,EkB3HI,mChCqvCV,CAAJ;AACD,Sc1nCF,GkB3HG,cAAc;AhCsvCjB,Kc1nCF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","file":"main.46fe0dba.js","sourceRoot":"../resources/views/pages","sourcesContent":["/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignMergeValue;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nmodule.exports = safeGet;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n","var assignMergeValue = require('./_assignMergeValue'),\n    cloneBuffer = require('./_cloneBuffer'),\n    cloneTypedArray = require('./_cloneTypedArray'),\n    copyArray = require('./_copyArray'),\n    initCloneObject = require('./_initCloneObject'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isPlainObject = require('./isPlainObject'),\n    isTypedArray = require('./isTypedArray'),\n    safeGet = require('./_safeGet'),\n    toPlainObject = require('./toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nmodule.exports = baseMergeDeep;\n","var Stack = require('./_Stack'),\n    assignMergeValue = require('./_assignMergeValue'),\n    baseFor = require('./_baseFor'),\n    baseMergeDeep = require('./_baseMergeDeep'),\n    isObject = require('./isObject'),\n    keysIn = require('./keysIn'),\n    safeGet = require('./_safeGet');\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    if (isObject(srcValue)) {\n      stack || (stack = new Stack);\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nmodule.exports = baseMerge;\n","var baseMerge = require('./_baseMerge'),\n    isObject = require('./isObject');\n\n/**\n * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n * objects into destination objects that are passed thru.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to merge.\n * @param {Object} object The parent object of `objValue`.\n * @param {Object} source The parent object of `srcValue`.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n  if (isObject(objValue) && isObject(srcValue)) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, objValue);\n    baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n    stack['delete'](srcValue);\n  }\n  return objValue;\n}\n\nmodule.exports = customDefaultsMerge;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nmodule.exports = mergeWith;\n","var apply = require('./_apply'),\n    baseRest = require('./_baseRest'),\n    customDefaultsMerge = require('./_customDefaultsMerge'),\n    mergeWith = require('./mergeWith');\n\n/**\n * This method is like `_.defaults` except that it recursively assigns\n * default properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaults\n * @example\n *\n * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n * // => { 'a': { 'b': 2, 'c': 3 } }\n */\nvar defaultsDeep = baseRest(function(args) {\n  args.push(undefined, customDefaultsMerge);\n  return apply(mergeWith, undefined, args);\n});\n\nmodule.exports = defaultsDeep;\n","import defaultsDeep from 'lodash/defaultsDeep'\n\nvar defaultConfig = {\n  knob: { name: 'Test Knob', min: 0, max: 1, value: 0.5 },\n  ambience: { name: 'Ambience', min: 0, max: 1, value: 0.4 },\n  scale: { name: 'Scale', min: 0, max: 4, value: 0.25 },\n  depth: { name: 'Height', min: 1, max: 400, value: 0.175 },\n  seed: { name: 'Seed', min: 0, max: 1, value: 0.175 },\n  zoom: { name: 'Zoom', min: 0, max: 120, value: 0.25 },\n  fov: { name: 'Field of view', min: 50, max: 250, value: 0.4 }\n}\n\nvar config = defaultConfig\n\nexport default {\n  default () {\n    return defaultConfig\n  },\n\n  use (value) {\n    return config = defaultsDeep(value, defaultConfig)\n  },\n\n  get (key) {\n    var value = config[key];\n    var range = Math.abs(value.max - value.min);\n    return value.min + range * value.value;\n  }\n}\n","module.exports = atob('Ly8gQXV0aG9yOiBUb2JpYXMgVG9mdAovLyBUaXRsZTogTW91bnRhaW4gcmlkZ2VzIGZvciBRdWFydGVyIFN0dWRpbywgdi4gMC4wLjIKcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7CnVuaWZvcm0gbWF0NCB2aWV3Owp1bmlmb3JtIHZlYzMgdV9saWdodFBvczsKdW5pZm9ybSBmbG9hdCB1X2FtYmllbnRJbnRlbnNpdHk7CnVuaWZvcm0gZmxvYXQgdV9zcGVjdWxhckludGVuc2l0eTsKdW5pZm9ybSB2ZWMzIHVfYW1iaWVudExpZ2h0Q29sb3I7CnVuaWZvcm0gdmVjMyB1X2xpZ2h0Q29sb3I7CnVuaWZvcm0gdmVjMiB1X3Jlc29sdXRpb247CnVuaWZvcm0gc2FtcGxlcjJEIHVfbm9pc2U7CnVuaWZvcm0gZmxvYXQgdV9kZXB0aDsKdW5pZm9ybSB2ZWMyIHVfbW91c2U7CnZhcnlpbmcgdmVjMyB2X25vcm1hbDsKdmFyeWluZyB2ZWMzIHZfZnJhZ1BvczsKdmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7CgpmbG9hdCB3aGl0ZU5vaXNlKGluIHZlYzIgcCl7CiAgdmVjMiB0diA9IHAgKiB1X3Jlc29sdXRpb24gLyAyNTYuOwogIHJldHVybiB0ZXh0dXJlMkQodV9ub2lzZSwgdHYpLnI7Cn0KCnZlYzQgSyA9IHZlYzQoMS4wLCAyLjAgLyAzLjAsIDEuMCAvIDMuMCwgMy4wKTsKdmVjMyBoc3YycmdiKHZlYzMgYyl7CiAgdmVjMyBwID0gYWJzKGZyYWN0KGMueHh4ICsgSy54eXopICogNi4wIC0gSy53d3cpOwogIHJldHVybiBjLnogKiBtaXgoSy54eHgsIGNsYW1wKHAgLSBLLnh4eCwgMC4wLCAxLjApLCBjLnkpOwp9CgpmbG9hdCBnZXREZXB0aChmbG9hdCBuLCBmbG9hdCBjdXRvZmYsIGZsb2F0IHN0ZXBzKXsKICBmbG9hdCBkID0gKG4tY3V0b2ZmKS8oMS4tY3V0b2ZmKTsKICBkID0gZmxvb3IoZCpzdGVwcykvc3RlcHM7CiAgcmV0dXJuIGQ7Cn0KCmZsb2F0IG1hcFJhbmdlKGZsb2F0IHZhbCwgZmxvYXQgbG93MSwgZmxvYXQgaGlnaDEsIGZsb2F0IGxvdzIsIGZsb2F0IGhpZ2gyKXsKICByZXR1cm4gbG93MiArICh2YWwgLSBsb3cxKSAqIChoaWdoMiAtIGxvdzIpIC8gKGhpZ2gxIC0gbG93MSk7Cn0KCnZvaWQgbWFpbigpewogIHZlYzIgdXYgPSBnbF9GcmFnQ29vcmQueHkgLyB1X3Jlc29sdXRpb247CiAgZmxvYXQgeVBvcyA9IHZfZnJhZ1Bvcy55IC8gdV9kZXB0aDsgLy95IHBvc2l0aW9uIGluIDAuLjEgcmFuZ2UKICB2ZWMzIGxpZ2h0Q29sb3IgPSB1X2xpZ2h0Q29sb3I7CiAgdmVjMyBhbWJpZW50TGlnaHRDb2xvciA9IHVfYW1iaWVudExpZ2h0Q29sb3I7CgogIC8vIFNsaWNlIGhpbGxzIGludG8gbGF5ZXJzCiAgY29uc3QgaW50IHN0ZXBzID0gMzsgLy9udW1iZXIgb2YgbGF5ZXJzCiAgY29uc3QgaW50IG9mZnNldCA9IDA7IC8vc3RhcnQgY291bnRpbmcgbiBsYXllcnMgd2l0aCBhbiBvZmZzZXQKCiAgLy8gU2V0IHBpeGVsIGNvbG9yCiAgZmxvYXQgaCA9IDAuMDsKICBmbG9hdCBzID0gMC4wOwogIGZsb2F0IHYgPSAwLjA7CgogIGZsb2F0IGQgPSBnZXREZXB0aCh5UG9zLCAwLjAsIGZsb2F0KHN0ZXBzKSk7CiAgZmxvYXQgdGhpY2tuZXNzID0gMC4wODsgLy9mb3IgbWFraW5nIHNpbXBsZSBncmFkaWVudHMKCiAgZm9yIChpbnQgaSA9IG9mZnNldDsgaTxzdGVwczsgaSsrKXsKICAgIGZsb2F0IHZhbHVlID0gZmxvYXQoaSkgLyBmbG9hdChzdGVwcyk7CgogICAgaWYgKHlQb3MgPD0gdmFsdWUgJiYgeVBvcyA+IHZhbHVlIC0gdGhpY2tuZXNzKXsKICAgICAgdiArPSBtYXBSYW5nZSh5UG9zLCB2YWx1ZSAtIHRoaWNrbmVzcywgdmFsdWUsIDAuMCwgMC43KTsKCiAgICB9CgogICAgaWYgKHlQb3MgPD0gdmFsdWUgJiYgeVBvcyA+IHZhbHVlIC0gMC4wMDMpIHsKICAgICAgdiA9IDEuOwogICAgfQogIH0KCiAgdiAqPSBmbG9vcigod2hpdGVOb2lzZSh1dikgKiB2KSArIC44NSk7CiAgdiArPSBmbG9vciggKHdoaXRlTm9pc2UodXYgKiAzLikgKyAuNCkgKiBmbG9vcih2ICsgLjkpICk7CiAgdiA9IGNsYW1wKHYsIDAuLCAxLik7CgogIC8vIEFkZCBsaWdodGluZwogIHZlYzMgYW1iaWVuY2UgPSB1X2FtYmllbnRJbnRlbnNpdHkgKiBhbWJpZW50TGlnaHRDb2xvcjsKICB2ZWMzIGxpZ2h0UG9zID0gdV9saWdodFBvczsKICB2ZWMzIG5vcm1hbGl6ZWQgPSBub3JtYWxpemUodl9ub3JtYWwpOwogIHZlYzMgbGlnaHREaXJlY3Rpb24gPSBub3JtYWxpemUobGlnaHRQb3MgLSB2X2ZyYWdQb3MpOwogIHZlYzMgZGlmZnVzZSA9IG1heChkb3Qobm9ybWFsaXplZCwgbGlnaHREaXJlY3Rpb24pLCAwLikgKiBsaWdodENvbG9yOwoKICB2ZWMzIHBvc2l0aW9uID0gdmVjMygtdV9tb3VzZS54ICogdV9yZXNvbHV0aW9uLngvNS4sIC01MDAuMCwgdV9tb3VzZS55ICogdV9yZXNvbHV0aW9uLnkvNS4pOyAvL3NldCBsaWdodCBvcmlnaW4KICB2ZWMzIHZpZXdEaXJlY3Rpb24gPSBub3JtYWxpemUocG9zaXRpb24gLSB2X2ZyYWdQb3MpOwogIHZlYzMgcmVmbGVjdGlvbkRpcmVjdGlvbiA9IHJlZmxlY3QoLWxpZ2h0RGlyZWN0aW9uLCBub3JtYWxpemVkKTsKCiAgZmxvYXQgc3BlYyA9IHBvdyhtYXgoZG90KHZpZXdEaXJlY3Rpb24sIHJlZmxlY3Rpb25EaXJlY3Rpb24pLCAwLjApLCA0Lik7CiAgdmVjMyBzcGVjdWxhciA9IHVfc3BlY3VsYXJJbnRlbnNpdHkgKiBzcGVjICogbGlnaHRDb2xvcjsKCiAgdmVjMyBsaWdodGluZyA9IGRpZmZ1c2UgKyBhbWJpZW5jZSArIHNwZWN1bGFyOwoKICAvLyBTZXQgZGlmZnVzZSBjb2xvcgogIHZlYzMgZGlmZnVzZUNvbG9yID0gaHN2MnJnYih2ZWMzKGgsIHMsIHYpKTsKICB2ZWMzIGNvbCA9IGRpZmZ1c2VDb2xvciAqIGxpZ2h0aW5nOyAvL2FkZCBsaWdodGluZwoKICAvLyBQb3N0LWxpZ2h0aW5nIG5vaXNlCiAgLy8gQWRkIG5vaXNlIGFuZCBjbGFtcCB2YWx1ZXMKICAvL2NvbCA9IGZsb29yKCh3aGl0ZU5vaXNlKHV2KSAqIHYpICsgY29sICsgMC40KTsgLy9tb25vIG5vaXNlCiAgLy9jb2wgKj0gZmxvb3IoKHdoaXRlTm9pc2UodXYpICogdikgKyAwLjg1KTsgLy9ncmV5IG5vaXNlCiAgLy9jb2wgKz0gICh3aGl0ZU5vaXNlKHV2ICogMy4pICsgMC40KSAqIGZsb29yKGNvbCArIDAuOCkgKiAwLjI7IC8vc2Vjb25kIGxheWVyCiAgLy9jb2wgPSBjbGFtcChjb2wsIDAuMCwgMS4wKTsKCiAgLy8gQWRkIHZlcnRpY2FsIGdyYWRpZW50CiAgY29sICo9IDAuMzUgKyB1di55ICogMC42NTsKCiAgdmVjNCBmaW5hbENvbG9yID0gdmVjNChjb2wsIDEuMCk7CiAgLy9maW5hbENvbG9yICs9IHZlYzQoMS4wLCAoMS4teVBvcyksICgxLi15UG9zKSAqIDAuNCwgMS4wKTsgLy9kZWJ1ZyBvdmVycmlkZQogIGdsX0ZyYWdDb2xvciA9IGZpbmFsQ29sb3I7Cn0=');","module.exports = atob('cHJlY2lzaW9uIGhpZ2hwIGZsb2F0OwphdHRyaWJ1dGUgbWVkaXVtcCB2ZWMyIHRleGNvb3JkOwphdHRyaWJ1dGUgbWVkaXVtcCB2ZWMzIHBvc2l0aW9uOwphdHRyaWJ1dGUgbWVkaXVtcCB2ZWMzIG5vcm1hbHM7CnVuaWZvcm0gbWVkaXVtcCBmbG9hdCB1X2tub2I7CnVuaWZvcm0gbWVkaXVtcCBmbG9hdCB1X3NjYWxlOwp1bmlmb3JtIG1lZGl1bXAgZmxvYXQgdV9kZXB0aDsKdW5pZm9ybSBtZWRpdW1wIGZsb2F0IHVfdGltZTsKdW5pZm9ybSBtZWRpdW1wIGZsb2F0IHVfc2VlZDsKdW5pZm9ybSBtZWRpdW1wIG1hdDQgcHJvamVjdGlvbjsKdW5pZm9ybSBtZWRpdW1wIG1hdDQgbW9kZWw7CnVuaWZvcm0gbWVkaXVtcCBtYXQ0IHZpZXc7CnVuaWZvcm0gbWVkaXVtcCB2ZWMyIHVfcmVzb2x1dGlvbjsKdW5pZm9ybSBtZWRpdW1wIHZlYzIgdV9kaXJlY3Rpb247CnZhcnlpbmcgbWVkaXVtcCB2ZWMyIHZfdGV4Q29vcmQ7CnZhcnlpbmcgbWVkaXVtcCB2ZWMzIHZfZnJhZ1BvczsKdmFyeWluZyBtZWRpdW1wIHZlYzMgdl9ub3JtYWw7Cgpjb25zdCB2ZWM0IEMgPSB2ZWM0KAogIDAuMjExMzI0ODY1NDA1MTg3LAogIDAuMzY2MDI1NDAzNzg0NDM5LAogIC0wLjU3NzM1MDI2OTE4OTYyNiwKICAwLjAyNDM5MDI0MzkwMjQzOQopOwoKdmVjMyBtb2QyODkgKHZlYzMgeCkgewogIHJldHVybiB4IC0gZmxvb3IoeCAqICgxLiAvIDI4OS4pKSAqIDI4OS47Cn0KCnZlYzMgcGVybXV0ZSAodmVjMyB4KSB7CiAgcmV0dXJuIG1vZDI4OSgoKHgqMzQuKSsxLikqeCk7Cn0KCmZsb2F0IHNub2lzZSAodmVjMiB2KSB7CiAgLy8gRmlyc3QgY29ybmVyCiAgdmVjMiBpICA9IGZsb29yKHYgKyBkb3QodiwgQy55eSkpOwogIHZlYzIgeDAgPSB2IC0gaSArIGRvdChpLCBDLnh4KTsKCiAgLy8gT3RoZXIgY29ybmVycwogIHZlYzIgaTEgPSB4MC54ID4geDAueSA/IHZlYzIoMS4sIDAuKSA6IHZlYzIoMC4sIDEuKTsKICB2ZWM0IHgxMiA9IHgwLnh5eHkgKyBDLnh4eno7CiAgeDEyLnh5IC09IGkxOwoKICAvLyBQZXJtdXRhdGlvbnMKICBpID0gaSAtIGZsb29yKGkgKiAoMS4gLyAyODkuKSkgKiAyODkuOyAvLyBBdm9pZCB0cnVuY2F0aW9uIGVmZmVjdHMgaW4gcGVybXV0YXRpb24KICB2ZWMzIHAgPSBwZXJtdXRlKCBwZXJtdXRlKCBpLnkgKyB2ZWMzKDAuMCwgaTEueSwgMS4wICkpICsgaS54ICsgdmVjMygwLjAsIGkxLngsIDEuMCApKTsKCiAgdmVjMyBtID0gbWF4KDAuNSAtIHZlYzMoZG90KHgwLHgwKSwgZG90KHgxMi54eSx4MTIueHkpLCBkb3QoeDEyLnp3LHgxMi56dykpLCAwLjApOwogIG0gPSBtKm07CiAgbSA9IG0qbTsKCiAgLy8gR3JhZGllbnRzOiA0MSBwb2ludHMgdW5pZm9ybWx5IG92ZXIgYSBsaW5lLCBtYXBwZWQgb250byBhIGRpYW1vbmQuCiAgLy8gVGhlIHJpbmcgc2l6ZSAxNyoxNyA9IDI4OSBpcyBjbG9zZSB0byBhIG11bHRpcGxlIG9mIDQxICg0MSo3ID0gMjg3KQogIHZlYzMgeCA9IDIuMCAqIGZyYWN0KHAgKiBDLnd3dykgLSAxLjA7CiAgdmVjMyBoID0gYWJzKHgpIC0gMC41OwogIHZlYzMgb3ggPSBmbG9vcih4ICsgMC41KTsKICB2ZWMzIGEwID0geCAtIG94OwoKICAvLyBOb3JtYWxpc2UgZ3JhZGllbnRzIGltcGxpY2l0bHkgYnkgc2NhbGluZyBtCiAgLy8gQXBwcm94aW1hdGlvbiBvZjogbSAqPSBpbnZlcnNlc3FydCggYTAqYTAgKyBoKmggKTsKICBtICo9IDEuNzkyODQyOTE0MDAxNTkgLSAwLjg1MzczNDcyMDk1MzE0ICogKCBhMCphMCArIGgqaCApOwoKICAvLyBDb21wdXRlIGZpbmFsIG5vaXNlIHZhbHVlIGF0IFAKICB2ZWMzIGc7CiAgZy54ICA9IGEwLnggICogeDAueCAgKyBoLnggICogeDAueTsKICBnLnl6ID0gYTAueXogKiB4MTIueHogKyBoLnl6ICogeDEyLnl3OwogIHJldHVybiAxMzAuMCAqIGRvdChtLCBnKTsKfQoKLy8tLS0gRW5kIG9mIEFzaGltYSBTaW1wbGV4IG5vaXNlCgp2b2lkIG1haW4gKCkgewogIGZsb2F0IGFzcGVjdCA9IHVfcmVzb2x1dGlvbi54IC8gdV9yZXNvbHV0aW9uLnk7CgogIHZlYzIgdXYgPSBwb3NpdGlvbi54eiAvIHVfcmVzb2x1dGlvbjsKCiAgdmVjMiBzY2FsZSA9IHZlYzIoNS4gKiBhc3BlY3QgKiAxLiAvIHVfc2NhbGUsIDUuICogMS4gLyB1X3NjYWxlKTsKCiAgdmVjMiBkaXJlY3Rpb24gPSB1X2RpcmVjdGlvbiAqIHVfdGltZTsKICAvLyB2ZWMyIGRpcmVjdGlvbiA9IHZlYzIodV9kaXJlY3Rpb24ueCAqIHVfdGltZSwgdV9kaXJlY3Rpb24ueSAqIHVfdGltZSk7CgogIHZlYzQgbW92ZW1lbnQgPSB2ZWM0KHBvc2l0aW9uLCAxLik7CiAgCiAgZmxvYXQgbm9pc2UxID0gc25vaXNlKCB1X3NlZWQgKyB2ZWMyKHV2LnggKiBzY2FsZS54ICsgZGlyZWN0aW9uLngsIHV2LnkgKiBzY2FsZS55ICsgZGlyZWN0aW9uLnkgKSk7CiAgZmxvYXQgbm9pc2UyID0gc25vaXNlKCB1X3NlZWQgKyB2ZWMyKHV2LnggKiBzY2FsZS54ICsgZGlyZWN0aW9uLngsIHV2LnkgKiBzY2FsZS55ICsgZGlyZWN0aW9uLnkgLyAzLiApICogMy4pOyAvL3dvYmJsZXMKCiAgbW92ZW1lbnQueSA9IG1peChub2lzZTEsIG5vaXNlMiwgMC4yKSAqIHVfZGVwdGg7CgogIHZfbm9ybWFsID0gbm9ybWFsczsKICB2X2ZyYWdQb3MgPSB2ZWMzKG1vZGVsICogbW92ZW1lbnQpOwogIHZfdGV4Q29vcmQgPSB0ZXhjb29yZDsKICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb24gKiB2aWV3ICogbW9kZWwgKiBtb3ZlbWVudDsKfQ==');","import config from '../editor/config.js';\nimport img from '../../images/noise.png';\nimport fs from './shaders/noise.fs';\nimport vs from './shaders/noise.vs';\n\nrequestAnimationFrame(render);\n\nvar canvas = document.getElementById('animation');\nvar webgl = canvas.getContext('webgl', { alpha: false });\nvar m4 = twgl.m4;\n\nvar isMobileDevice = window.orientation !== undefined || navigator.userAgent.indexOf('IEMobile') !== -1;\nvar aspectRatio = canvas.clientWidth / canvas.clientHeight;\nvar pixelRatio = isMobileDevice ? 1 : window.devicePixelRatio;\nvar vertices = 256;\nvar stretchX = 2.2;\nvar stretchY = 2.6;\nlet position = [];\nlet indices = [];\nlet normal = [];\n\nfor(let x = 0; x < vertices; x++) {\n  for(let z = 0; z < vertices; z++) {\n    position.push((x * aspectRatio * stretchX) - (vertices * stretchX * aspectRatio / 2));\n    position.push(0);\n    position.push((z * stretchY) - (vertices * stretchY / 2));\n    normal.push(0, 0, 1);\n  }\n}\n\nfor (let z = 0; z < vertices - 1; z++) {\n  if (z > 0) {\n    indices.push(z * vertices);\n  }\n\n  for (let x = 0; x < vertices; x++) {\n    indices.push(z * vertices + x);\n    indices.push((z + 1) * vertices + x);\n  }\n\n  if (z < vertices - 2) {\n    indices.push((z + 1) * vertices + vertices - 1);\n  }\n}\n\nvar buffers = twgl.createBufferInfoFromArrays(webgl, {\n  position: { numComponents: 3, data: position },\n  normal: { numComponents: 3, data: normal },\n  indices: { numComponents: 1, data: indices }\n});\n\nvar shader = twgl.createProgramInfo(webgl, [vs, fs]);\nvar textures = twgl.createTextures(webgl, {\n  noise: { src: img, mag: webgl.LINEAR }\n});\n\ntwgl.resizeCanvasToDisplaySize(canvas, pixelRatio);\ntwgl.setBuffersAndAttributes(webgl, shader, buffers);\nwebgl.useProgram(shader.program);\nwebgl.clearColor(0, 0, 0, 1);\nwebgl.frontFace(webgl.CW);\nwebgl.viewport(0, 0, canvas.width, canvas.height);\n\nvar target = [0, 0, 0];\nvar eye = [0, 500, -1];\nvar up = [0, 1, 0];\nvar camera = m4.lookAt(eye, target, up);\nvar uniforms = {\n  view: m4.inverse(camera),\n  model: m4.identity(),\n  u_direction: [0.0, -1.0],\n  u_mouse: [0, 0.5],\n  u_noise: textures.noise,\n  u_resolution: [canvas.width, canvas.height],\n};\n\nvar dest = 100\nvar current = 0\nvar elapse = 0\n\nfunction animate (duration, start = 0) {\n  return function (time) {\n    var elapse = time - start;\n    var progress = Math.min(1, elapse / duration);\n\n    if (progress === 1) {\n      start += duration\n    }\n\n    return progress\n  }\n}\n\nfunction render(time) {\n  requestAnimationFrame(render);\n\n  if (canvas.getBoundingClientRect().bottom) {\n    renderCanvas(time)\n  }\n}\n\nfunction renderCanvas(time) {\n  var fieldOfView = config.get('zoom') * Math.PI / config.get('fov');\n  uniforms.projection = m4.perspective(fieldOfView, aspectRatio, 1, 10000);\n\n  var target = [config.get('knob'), 0, 0];\n  var eye = [config.get('knob'), 500, -1];\n  var up = [0, 1, 0];\n  var camera = m4.lookAt(eye, target, up);\n  uniforms.view = m4.inverse(camera);\n  uniforms.model = m4.identity();\n  \n\n  uniforms.u_knob = config.get('knob');\n  uniforms.u_time = 0; //Math.sin(time / 30000); // use to slow time up or down\n  uniforms.u_depth = config.get('depth'); // Math.sin(time/200) * 100; // 70 // wobbly mountains\n  uniforms.u_lightPos = [0, 200, 0]; //origin of spotlight\n  uniforms.u_lightColor = [1, 1, 1]; // color of spotlight in RGB\n  uniforms.u_ambientLightColor = [1, 1, 1], // ambient light color in RGB\n  uniforms.u_ambientIntensity = config.get('ambience'); // ambient light intensity [0...1]\n  uniforms.u_specularIntensity = 0.5; // specular intensity of spotlight [0...1]\n  uniforms.u_scale = config.get('scale'); // scale of the simplex noise\n  uniforms.u_seed = config.get('seed');\n  uniforms.u_direction[0] += uniforms.u_mouse[0]*0.001;\n  uniforms.u_direction[1] += uniforms.u_mouse[1]*0.001;\n\n  twgl.setUniforms(shader, uniforms);\n  twgl.drawBufferInfo(webgl, webgl.TRIANGLE_STRIP, buffers);\n}\n\nwindow.addEventListener('mousemove', function (event) {\n  var bounds = canvas.getBoundingClientRect();\n  var x = (event.clientX - bounds.left) * canvas.width / canvas.clientWidth / canvas.width * 2 - 1;\n  var y = (event.clientY - bounds.top) * canvas.height / canvas.clientHeight / canvas.height * 2 - 1;\n  // uniforms.u_direction = [x, y];\n  uniforms.u_mouse = [x, y];\n});","/*!\n * Vue.js v2.6.10\n * (c) 2014-2019 Evan You\n * Released under the MIT License.\n */\n/*  */\n\nvar emptyObject = Object.freeze({});\n\n// These helpers produce better VM code in JS engines due to their\n// explicitness and function inlining.\nfunction isUndef (v) {\n  return v === undefined || v === null\n}\n\nfunction isDef (v) {\n  return v !== undefined && v !== null\n}\n\nfunction isTrue (v) {\n  return v === true\n}\n\nfunction isFalse (v) {\n  return v === false\n}\n\n/**\n * Check if value is primitive.\n */\nfunction isPrimitive (value) {\n  return (\n    typeof value === 'string' ||\n    typeof value === 'number' ||\n    // $flow-disable-line\n    typeof value === 'symbol' ||\n    typeof value === 'boolean'\n  )\n}\n\n/**\n * Quick object check - this is primarily used to tell\n * Objects from primitive values when we know the value\n * is a JSON-compliant type.\n */\nfunction isObject (obj) {\n  return obj !== null && typeof obj === 'object'\n}\n\n/**\n * Get the raw type string of a value, e.g., [object Object].\n */\nvar _toString = Object.prototype.toString;\n\nfunction toRawType (value) {\n  return _toString.call(value).slice(8, -1)\n}\n\n/**\n * Strict object type check. Only returns true\n * for plain JavaScript objects.\n */\nfunction isPlainObject (obj) {\n  return _toString.call(obj) === '[object Object]'\n}\n\nfunction isRegExp (v) {\n  return _toString.call(v) === '[object RegExp]'\n}\n\n/**\n * Check if val is a valid array index.\n */\nfunction isValidArrayIndex (val) {\n  var n = parseFloat(String(val));\n  return n >= 0 && Math.floor(n) === n && isFinite(val)\n}\n\nfunction isPromise (val) {\n  return (\n    isDef(val) &&\n    typeof val.then === 'function' &&\n    typeof val.catch === 'function'\n  )\n}\n\n/**\n * Convert a value to a string that is actually rendered.\n */\nfunction toString (val) {\n  return val == null\n    ? ''\n    : Array.isArray(val) || (isPlainObject(val) && val.toString === _toString)\n      ? JSON.stringify(val, null, 2)\n      : String(val)\n}\n\n/**\n * Convert an input value to a number for persistence.\n * If the conversion fails, return original string.\n */\nfunction toNumber (val) {\n  var n = parseFloat(val);\n  return isNaN(n) ? val : n\n}\n\n/**\n * Make a map and return a function for checking if a key\n * is in that map.\n */\nfunction makeMap (\n  str,\n  expectsLowerCase\n) {\n  var map = Object.create(null);\n  var list = str.split(',');\n  for (var i = 0; i < list.length; i++) {\n    map[list[i]] = true;\n  }\n  return expectsLowerCase\n    ? function (val) { return map[val.toLowerCase()]; }\n    : function (val) { return map[val]; }\n}\n\n/**\n * Check if a tag is a built-in tag.\n */\nvar isBuiltInTag = makeMap('slot,component', true);\n\n/**\n * Check if an attribute is a reserved attribute.\n */\nvar isReservedAttribute = makeMap('key,ref,slot,slot-scope,is');\n\n/**\n * Remove an item from an array.\n */\nfunction remove (arr, item) {\n  if (arr.length) {\n    var index = arr.indexOf(item);\n    if (index > -1) {\n      return arr.splice(index, 1)\n    }\n  }\n}\n\n/**\n * Check whether an object has the property.\n */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn (obj, key) {\n  return hasOwnProperty.call(obj, key)\n}\n\n/**\n * Create a cached version of a pure function.\n */\nfunction cached (fn) {\n  var cache = Object.create(null);\n  return (function cachedFn (str) {\n    var hit = cache[str];\n    return hit || (cache[str] = fn(str))\n  })\n}\n\n/**\n * Camelize a hyphen-delimited string.\n */\nvar camelizeRE = /-(\\w)/g;\nvar camelize = cached(function (str) {\n  return str.replace(camelizeRE, function (_, c) { return c ? c.toUpperCase() : ''; })\n});\n\n/**\n * Capitalize a string.\n */\nvar capitalize = cached(function (str) {\n  return str.charAt(0).toUpperCase() + str.slice(1)\n});\n\n/**\n * Hyphenate a camelCase string.\n */\nvar hyphenateRE = /\\B([A-Z])/g;\nvar hyphenate = cached(function (str) {\n  return str.replace(hyphenateRE, '-$1').toLowerCase()\n});\n\n/**\n * Simple bind polyfill for environments that do not support it,\n * e.g., PhantomJS 1.x. Technically, we don't need this anymore\n * since native bind is now performant enough in most browsers.\n * But removing it would mean breaking code that was able to run in\n * PhantomJS 1.x, so this must be kept for backward compatibility.\n */\n\n/* istanbul ignore next */\nfunction polyfillBind (fn, ctx) {\n  function boundFn (a) {\n    var l = arguments.length;\n    return l\n      ? l > 1\n        ? fn.apply(ctx, arguments)\n        : fn.call(ctx, a)\n      : fn.call(ctx)\n  }\n\n  boundFn._length = fn.length;\n  return boundFn\n}\n\nfunction nativeBind (fn, ctx) {\n  return fn.bind(ctx)\n}\n\nvar bind = Function.prototype.bind\n  ? nativeBind\n  : polyfillBind;\n\n/**\n * Convert an Array-like object to a real Array.\n */\nfunction toArray (list, start) {\n  start = start || 0;\n  var i = list.length - start;\n  var ret = new Array(i);\n  while (i--) {\n    ret[i] = list[i + start];\n  }\n  return ret\n}\n\n/**\n * Mix properties into target object.\n */\nfunction extend (to, _from) {\n  for (var key in _from) {\n    to[key] = _from[key];\n  }\n  return to\n}\n\n/**\n * Merge an Array of Objects into a single Object.\n */\nfunction toObject (arr) {\n  var res = {};\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i]) {\n      extend(res, arr[i]);\n    }\n  }\n  return res\n}\n\n/* eslint-disable no-unused-vars */\n\n/**\n * Perform no operation.\n * Stubbing args to make Flow happy without leaving useless transpiled code\n * with ...rest (https://flow.org/blog/2017/05/07/Strict-Function-Call-Arity/).\n */\nfunction noop (a, b, c) {}\n\n/**\n * Always return false.\n */\nvar no = function (a, b, c) { return false; };\n\n/* eslint-enable no-unused-vars */\n\n/**\n * Return the same value.\n */\nvar identity = function (_) { return _; };\n\n/**\n * Check if two values are loosely equal - that is,\n * if they are plain objects, do they have the same shape?\n */\nfunction looseEqual (a, b) {\n  if (a === b) { return true }\n  var isObjectA = isObject(a);\n  var isObjectB = isObject(b);\n  if (isObjectA && isObjectB) {\n    try {\n      var isArrayA = Array.isArray(a);\n      var isArrayB = Array.isArray(b);\n      if (isArrayA && isArrayB) {\n        return a.length === b.length && a.every(function (e, i) {\n          return looseEqual(e, b[i])\n        })\n      } else if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime()\n      } else if (!isArrayA && !isArrayB) {\n        var keysA = Object.keys(a);\n        var keysB = Object.keys(b);\n        return keysA.length === keysB.length && keysA.every(function (key) {\n          return looseEqual(a[key], b[key])\n        })\n      } else {\n        /* istanbul ignore next */\n        return false\n      }\n    } catch (e) {\n      /* istanbul ignore next */\n      return false\n    }\n  } else if (!isObjectA && !isObjectB) {\n    return String(a) === String(b)\n  } else {\n    return false\n  }\n}\n\n/**\n * Return the first index at which a loosely equal value can be\n * found in the array (if value is a plain object, the array must\n * contain an object of the same shape), or -1 if it is not present.\n */\nfunction looseIndexOf (arr, val) {\n  for (var i = 0; i < arr.length; i++) {\n    if (looseEqual(arr[i], val)) { return i }\n  }\n  return -1\n}\n\n/**\n * Ensure a function is called only once.\n */\nfunction once (fn) {\n  var called = false;\n  return function () {\n    if (!called) {\n      called = true;\n      fn.apply(this, arguments);\n    }\n  }\n}\n\nvar SSR_ATTR = 'data-server-rendered';\n\nvar ASSET_TYPES = [\n  'component',\n  'directive',\n  'filter'\n];\n\nvar LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n  'activated',\n  'deactivated',\n  'errorCaptured',\n  'serverPrefetch'\n];\n\n/*  */\n\n\n\nvar config = ({\n  /**\n   * Option merge strategies (used in core/util/options)\n   */\n  // $flow-disable-line\n  optionMergeStrategies: Object.create(null),\n\n  /**\n   * Whether to suppress warnings.\n   */\n  silent: false,\n\n  /**\n   * Show production mode tip message on boot?\n   */\n  productionTip: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to enable devtools\n   */\n  devtools: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to record perf\n   */\n  performance: false,\n\n  /**\n   * Error handler for watcher errors\n   */\n  errorHandler: null,\n\n  /**\n   * Warn handler for watcher warns\n   */\n  warnHandler: null,\n\n  /**\n   * Ignore certain custom elements\n   */\n  ignoredElements: [],\n\n  /**\n   * Custom user key aliases for v-on\n   */\n  // $flow-disable-line\n  keyCodes: Object.create(null),\n\n  /**\n   * Check if a tag is reserved so that it cannot be registered as a\n   * component. This is platform-dependent and may be overwritten.\n   */\n  isReservedTag: no,\n\n  /**\n   * Check if an attribute is reserved so that it cannot be used as a component\n   * prop. This is platform-dependent and may be overwritten.\n   */\n  isReservedAttr: no,\n\n  /**\n   * Check if a tag is an unknown element.\n   * Platform-dependent.\n   */\n  isUnknownElement: no,\n\n  /**\n   * Get the namespace of an element\n   */\n  getTagNamespace: noop,\n\n  /**\n   * Parse the real tag name for the specific platform.\n   */\n  parsePlatformTagName: identity,\n\n  /**\n   * Check if an attribute must be bound using property, e.g. value\n   * Platform-dependent.\n   */\n  mustUseProp: no,\n\n  /**\n   * Perform updates asynchronously. Intended to be used by Vue Test Utils\n   * This will significantly reduce performance if set to false.\n   */\n  async: true,\n\n  /**\n   * Exposed for legacy reasons\n   */\n  _lifecycleHooks: LIFECYCLE_HOOKS\n});\n\n/*  */\n\n/**\n * unicode letters used for parsing html tags, component names and property paths.\n * using https://www.w3.org/TR/html53/semantics-scripting.html#potentialcustomelementname\n * skipping \\u10000-\\uEFFFF due to it freezing up PhantomJS\n */\nvar unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\n\n/**\n * Check if a string starts with $ or _\n */\nfunction isReserved (str) {\n  var c = (str + '').charCodeAt(0);\n  return c === 0x24 || c === 0x5F\n}\n\n/**\n * Define a property.\n */\nfunction def (obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true\n  });\n}\n\n/**\n * Parse simple path.\n */\nvar bailRE = new RegExp((\"[^\" + (unicodeRegExp.source) + \".$_\\\\d]\"));\nfunction parsePath (path) {\n  if (bailRE.test(path)) {\n    return\n  }\n  var segments = path.split('.');\n  return function (obj) {\n    for (var i = 0; i < segments.length; i++) {\n      if (!obj) { return }\n      obj = obj[segments[i]];\n    }\n    return obj\n  }\n}\n\n/*  */\n\n// can we use __proto__?\nvar hasProto = '__proto__' in {};\n\n// Browser environment sniffing\nvar inBrowser = typeof window !== 'undefined';\nvar inWeex = typeof WXEnvironment !== 'undefined' && !!WXEnvironment.platform;\nvar weexPlatform = inWeex && WXEnvironment.platform.toLowerCase();\nvar UA = inBrowser && window.navigator.userAgent.toLowerCase();\nvar isIE = UA && /msie|trident/.test(UA);\nvar isIE9 = UA && UA.indexOf('msie 9.0') > 0;\nvar isEdge = UA && UA.indexOf('edge/') > 0;\nvar isAndroid = (UA && UA.indexOf('android') > 0) || (weexPlatform === 'android');\nvar isIOS = (UA && /iphone|ipad|ipod|ios/.test(UA)) || (weexPlatform === 'ios');\nvar isChrome = UA && /chrome\\/\\d+/.test(UA) && !isEdge;\nvar isPhantomJS = UA && /phantomjs/.test(UA);\nvar isFF = UA && UA.match(/firefox\\/(\\d+)/);\n\n// Firefox has a \"watch\" function on Object.prototype...\nvar nativeWatch = ({}).watch;\n\nvar supportsPassive = false;\nif (inBrowser) {\n  try {\n    var opts = {};\n    Object.defineProperty(opts, 'passive', ({\n      get: function get () {\n        /* istanbul ignore next */\n        supportsPassive = true;\n      }\n    })); // https://github.com/facebook/flow/issues/285\n    window.addEventListener('test-passive', null, opts);\n  } catch (e) {}\n}\n\n// this needs to be lazy-evaled because vue may be required before\n// vue-server-renderer can set VUE_ENV\nvar _isServer;\nvar isServerRendering = function () {\n  if (_isServer === undefined) {\n    /* istanbul ignore if */\n    if (!inBrowser && !inWeex && typeof global !== 'undefined') {\n      // detect presence of vue-server-renderer and avoid\n      // Webpack shimming the process\n      _isServer = global['process'] && global['process'].env.VUE_ENV === 'server';\n    } else {\n      _isServer = false;\n    }\n  }\n  return _isServer\n};\n\n// detect devtools\nvar devtools = inBrowser && window.__VUE_DEVTOOLS_GLOBAL_HOOK__;\n\n/* istanbul ignore next */\nfunction isNative (Ctor) {\n  return typeof Ctor === 'function' && /native code/.test(Ctor.toString())\n}\n\nvar hasSymbol =\n  typeof Symbol !== 'undefined' && isNative(Symbol) &&\n  typeof Reflect !== 'undefined' && isNative(Reflect.ownKeys);\n\nvar _Set;\n/* istanbul ignore if */ // $flow-disable-line\nif (typeof Set !== 'undefined' && isNative(Set)) {\n  // use native Set when available.\n  _Set = Set;\n} else {\n  // a non-standard Set polyfill that only works with primitive keys.\n  _Set = /*@__PURE__*/(function () {\n    function Set () {\n      this.set = Object.create(null);\n    }\n    Set.prototype.has = function has (key) {\n      return this.set[key] === true\n    };\n    Set.prototype.add = function add (key) {\n      this.set[key] = true;\n    };\n    Set.prototype.clear = function clear () {\n      this.set = Object.create(null);\n    };\n\n    return Set;\n  }());\n}\n\n/*  */\n\nvar warn = noop;\nvar tip = noop;\nvar generateComponentTrace = (noop); // work around flow check\nvar formatComponentName = (noop);\n\nif (process.env.NODE_ENV !== 'production') {\n  var hasConsole = typeof console !== 'undefined';\n  var classifyRE = /(?:^|[-_])(\\w)/g;\n  var classify = function (str) { return str\n    .replace(classifyRE, function (c) { return c.toUpperCase(); })\n    .replace(/[-_]/g, ''); };\n\n  warn = function (msg, vm) {\n    var trace = vm ? generateComponentTrace(vm) : '';\n\n    if (config.warnHandler) {\n      config.warnHandler.call(null, msg, vm, trace);\n    } else if (hasConsole && (!config.silent)) {\n      console.error((\"[Vue warn]: \" + msg + trace));\n    }\n  };\n\n  tip = function (msg, vm) {\n    if (hasConsole && (!config.silent)) {\n      console.warn(\"[Vue tip]: \" + msg + (\n        vm ? generateComponentTrace(vm) : ''\n      ));\n    }\n  };\n\n  formatComponentName = function (vm, includeFile) {\n    if (vm.$root === vm) {\n      return '<Root>'\n    }\n    var options = typeof vm === 'function' && vm.cid != null\n      ? vm.options\n      : vm._isVue\n        ? vm.$options || vm.constructor.options\n        : vm;\n    var name = options.name || options._componentTag;\n    var file = options.__file;\n    if (!name && file) {\n      var match = file.match(/([^/\\\\]+)\\.vue$/);\n      name = match && match[1];\n    }\n\n    return (\n      (name ? (\"<\" + (classify(name)) + \">\") : \"<Anonymous>\") +\n      (file && includeFile !== false ? (\" at \" + file) : '')\n    )\n  };\n\n  var repeat = function (str, n) {\n    var res = '';\n    while (n) {\n      if (n % 2 === 1) { res += str; }\n      if (n > 1) { str += str; }\n      n >>= 1;\n    }\n    return res\n  };\n\n  generateComponentTrace = function (vm) {\n    if (vm._isVue && vm.$parent) {\n      var tree = [];\n      var currentRecursiveSequence = 0;\n      while (vm) {\n        if (tree.length > 0) {\n          var last = tree[tree.length - 1];\n          if (last.constructor === vm.constructor) {\n            currentRecursiveSequence++;\n            vm = vm.$parent;\n            continue\n          } else if (currentRecursiveSequence > 0) {\n            tree[tree.length - 1] = [last, currentRecursiveSequence];\n            currentRecursiveSequence = 0;\n          }\n        }\n        tree.push(vm);\n        vm = vm.$parent;\n      }\n      return '\\n\\nfound in\\n\\n' + tree\n        .map(function (vm, i) { return (\"\" + (i === 0 ? '---> ' : repeat(' ', 5 + i * 2)) + (Array.isArray(vm)\n            ? ((formatComponentName(vm[0])) + \"... (\" + (vm[1]) + \" recursive calls)\")\n            : formatComponentName(vm))); })\n        .join('\\n')\n    } else {\n      return (\"\\n\\n(found in \" + (formatComponentName(vm)) + \")\")\n    }\n  };\n}\n\n/*  */\n\nvar uid = 0;\n\n/**\n * A dep is an observable that can have multiple\n * directives subscribing to it.\n */\nvar Dep = function Dep () {\n  this.id = uid++;\n  this.subs = [];\n};\n\nDep.prototype.addSub = function addSub (sub) {\n  this.subs.push(sub);\n};\n\nDep.prototype.removeSub = function removeSub (sub) {\n  remove(this.subs, sub);\n};\n\nDep.prototype.depend = function depend () {\n  if (Dep.target) {\n    Dep.target.addDep(this);\n  }\n};\n\nDep.prototype.notify = function notify () {\n  // stabilize the subscriber list first\n  var subs = this.subs.slice();\n  if (process.env.NODE_ENV !== 'production' && !config.async) {\n    // subs aren't sorted in scheduler if not running async\n    // we need to sort them now to make sure they fire in correct\n    // order\n    subs.sort(function (a, b) { return a.id - b.id; });\n  }\n  for (var i = 0, l = subs.length; i < l; i++) {\n    subs[i].update();\n  }\n};\n\n// The current target watcher being evaluated.\n// This is globally unique because only one watcher\n// can be evaluated at a time.\nDep.target = null;\nvar targetStack = [];\n\nfunction pushTarget (target) {\n  targetStack.push(target);\n  Dep.target = target;\n}\n\nfunction popTarget () {\n  targetStack.pop();\n  Dep.target = targetStack[targetStack.length - 1];\n}\n\n/*  */\n\nvar VNode = function VNode (\n  tag,\n  data,\n  children,\n  text,\n  elm,\n  context,\n  componentOptions,\n  asyncFactory\n) {\n  this.tag = tag;\n  this.data = data;\n  this.children = children;\n  this.text = text;\n  this.elm = elm;\n  this.ns = undefined;\n  this.context = context;\n  this.fnContext = undefined;\n  this.fnOptions = undefined;\n  this.fnScopeId = undefined;\n  this.key = data && data.key;\n  this.componentOptions = componentOptions;\n  this.componentInstance = undefined;\n  this.parent = undefined;\n  this.raw = false;\n  this.isStatic = false;\n  this.isRootInsert = true;\n  this.isComment = false;\n  this.isCloned = false;\n  this.isOnce = false;\n  this.asyncFactory = asyncFactory;\n  this.asyncMeta = undefined;\n  this.isAsyncPlaceholder = false;\n};\n\nvar prototypeAccessors = { child: { configurable: true } };\n\n// DEPRECATED: alias for componentInstance for backwards compat.\n/* istanbul ignore next */\nprototypeAccessors.child.get = function () {\n  return this.componentInstance\n};\n\nObject.defineProperties( VNode.prototype, prototypeAccessors );\n\nvar createEmptyVNode = function (text) {\n  if ( text === void 0 ) text = '';\n\n  var node = new VNode();\n  node.text = text;\n  node.isComment = true;\n  return node\n};\n\nfunction createTextVNode (val) {\n  return new VNode(undefined, undefined, undefined, String(val))\n}\n\n// optimized shallow clone\n// used for static nodes and slot nodes because they may be reused across\n// multiple renders, cloning them avoids errors when DOM manipulations rely\n// on their elm reference.\nfunction cloneVNode (vnode) {\n  var cloned = new VNode(\n    vnode.tag,\n    vnode.data,\n    // #7975\n    // clone children array to avoid mutating original in case of cloning\n    // a child.\n    vnode.children && vnode.children.slice(),\n    vnode.text,\n    vnode.elm,\n    vnode.context,\n    vnode.componentOptions,\n    vnode.asyncFactory\n  );\n  cloned.ns = vnode.ns;\n  cloned.isStatic = vnode.isStatic;\n  cloned.key = vnode.key;\n  cloned.isComment = vnode.isComment;\n  cloned.fnContext = vnode.fnContext;\n  cloned.fnOptions = vnode.fnOptions;\n  cloned.fnScopeId = vnode.fnScopeId;\n  cloned.asyncMeta = vnode.asyncMeta;\n  cloned.isCloned = true;\n  return cloned\n}\n\n/*\n * not type checking this file because flow doesn't play well with\n * dynamically accessing methods on Array prototype\n */\n\nvar arrayProto = Array.prototype;\nvar arrayMethods = Object.create(arrayProto);\n\nvar methodsToPatch = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n];\n\n/**\n * Intercept mutating methods and emit events\n */\nmethodsToPatch.forEach(function (method) {\n  // cache original method\n  var original = arrayProto[method];\n  def(arrayMethods, method, function mutator () {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    var result = original.apply(this, args);\n    var ob = this.__ob__;\n    var inserted;\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break\n      case 'splice':\n        inserted = args.slice(2);\n        break\n    }\n    if (inserted) { ob.observeArray(inserted); }\n    // notify change\n    ob.dep.notify();\n    return result\n  });\n});\n\n/*  */\n\nvar arrayKeys = Object.getOwnPropertyNames(arrayMethods);\n\n/**\n * In some cases we may want to disable observation inside a component's\n * update computation.\n */\nvar shouldObserve = true;\n\nfunction toggleObserving (value) {\n  shouldObserve = value;\n}\n\n/**\n * Observer class that is attached to each observed\n * object. Once attached, the observer converts the target\n * object's property keys into getter/setters that\n * collect dependencies and dispatch updates.\n */\nvar Observer = function Observer (value) {\n  this.value = value;\n  this.dep = new Dep();\n  this.vmCount = 0;\n  def(value, '__ob__', this);\n  if (Array.isArray(value)) {\n    if (hasProto) {\n      protoAugment(value, arrayMethods);\n    } else {\n      copyAugment(value, arrayMethods, arrayKeys);\n    }\n    this.observeArray(value);\n  } else {\n    this.walk(value);\n  }\n};\n\n/**\n * Walk through all properties and convert them into\n * getter/setters. This method should only be called when\n * value type is Object.\n */\nObserver.prototype.walk = function walk (obj) {\n  var keys = Object.keys(obj);\n  for (var i = 0; i < keys.length; i++) {\n    defineReactive$$1(obj, keys[i]);\n  }\n};\n\n/**\n * Observe a list of Array items.\n */\nObserver.prototype.observeArray = function observeArray (items) {\n  for (var i = 0, l = items.length; i < l; i++) {\n    observe(items[i]);\n  }\n};\n\n// helpers\n\n/**\n * Augment a target Object or Array by intercepting\n * the prototype chain using __proto__\n */\nfunction protoAugment (target, src) {\n  /* eslint-disable no-proto */\n  target.__proto__ = src;\n  /* eslint-enable no-proto */\n}\n\n/**\n * Augment a target Object or Array by defining\n * hidden properties.\n */\n/* istanbul ignore next */\nfunction copyAugment (target, src, keys) {\n  for (var i = 0, l = keys.length; i < l; i++) {\n    var key = keys[i];\n    def(target, key, src[key]);\n  }\n}\n\n/**\n * Attempt to create an observer instance for a value,\n * returns the new observer if successfully observed,\n * or the existing observer if the value already has one.\n */\nfunction observe (value, asRootData) {\n  if (!isObject(value) || value instanceof VNode) {\n    return\n  }\n  var ob;\n  if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {\n    ob = value.__ob__;\n  } else if (\n    shouldObserve &&\n    !isServerRendering() &&\n    (Array.isArray(value) || isPlainObject(value)) &&\n    Object.isExtensible(value) &&\n    !value._isVue\n  ) {\n    ob = new Observer(value);\n  }\n  if (asRootData && ob) {\n    ob.vmCount++;\n  }\n  return ob\n}\n\n/**\n * Define a reactive property on an Object.\n */\nfunction defineReactive$$1 (\n  obj,\n  key,\n  val,\n  customSetter,\n  shallow\n) {\n  var dep = new Dep();\n\n  var property = Object.getOwnPropertyDescriptor(obj, key);\n  if (property && property.configurable === false) {\n    return\n  }\n\n  // cater for pre-defined getter/setters\n  var getter = property && property.get;\n  var setter = property && property.set;\n  if ((!getter || setter) && arguments.length === 2) {\n    val = obj[key];\n  }\n\n  var childOb = !shallow && observe(val);\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get: function reactiveGetter () {\n      var value = getter ? getter.call(obj) : val;\n      if (Dep.target) {\n        dep.depend();\n        if (childOb) {\n          childOb.dep.depend();\n          if (Array.isArray(value)) {\n            dependArray(value);\n          }\n        }\n      }\n      return value\n    },\n    set: function reactiveSetter (newVal) {\n      var value = getter ? getter.call(obj) : val;\n      /* eslint-disable no-self-compare */\n      if (newVal === value || (newVal !== newVal && value !== value)) {\n        return\n      }\n      /* eslint-enable no-self-compare */\n      if (process.env.NODE_ENV !== 'production' && customSetter) {\n        customSetter();\n      }\n      // #7981: for accessor properties without setter\n      if (getter && !setter) { return }\n      if (setter) {\n        setter.call(obj, newVal);\n      } else {\n        val = newVal;\n      }\n      childOb = !shallow && observe(newVal);\n      dep.notify();\n    }\n  });\n}\n\n/**\n * Set a property on an object. Adds the new property and\n * triggers change notification if the property doesn't\n * already exist.\n */\nfunction set (target, key, val) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot set reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.length = Math.max(target.length, key);\n    target.splice(key, 1, val);\n    return val\n  }\n  if (key in target && !(key in Object.prototype)) {\n    target[key] = val;\n    return val\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid adding reactive properties to a Vue instance or its root $data ' +\n      'at runtime - declare it upfront in the data option.'\n    );\n    return val\n  }\n  if (!ob) {\n    target[key] = val;\n    return val\n  }\n  defineReactive$$1(ob.value, key, val);\n  ob.dep.notify();\n  return val\n}\n\n/**\n * Delete a property and trigger change if necessary.\n */\nfunction del (target, key) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot delete reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.splice(key, 1);\n    return\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid deleting properties on a Vue instance or its root $data ' +\n      '- just set it to null.'\n    );\n    return\n  }\n  if (!hasOwn(target, key)) {\n    return\n  }\n  delete target[key];\n  if (!ob) {\n    return\n  }\n  ob.dep.notify();\n}\n\n/**\n * Collect dependencies on array elements when the array is touched, since\n * we cannot intercept array element access like property getters.\n */\nfunction dependArray (value) {\n  for (var e = (void 0), i = 0, l = value.length; i < l; i++) {\n    e = value[i];\n    e && e.__ob__ && e.__ob__.dep.depend();\n    if (Array.isArray(e)) {\n      dependArray(e);\n    }\n  }\n}\n\n/*  */\n\n/**\n * Option overwriting strategies are functions that handle\n * how to merge a parent option value and a child option\n * value into the final value.\n */\nvar strats = config.optionMergeStrategies;\n\n/**\n * Options with restrictions\n */\nif (process.env.NODE_ENV !== 'production') {\n  strats.el = strats.propsData = function (parent, child, vm, key) {\n    if (!vm) {\n      warn(\n        \"option \\\"\" + key + \"\\\" can only be used during instance \" +\n        'creation with the `new` keyword.'\n      );\n    }\n    return defaultStrat(parent, child)\n  };\n}\n\n/**\n * Helper that recursively merges two data objects together.\n */\nfunction mergeData (to, from) {\n  if (!from) { return to }\n  var key, toVal, fromVal;\n\n  var keys = hasSymbol\n    ? Reflect.ownKeys(from)\n    : Object.keys(from);\n\n  for (var i = 0; i < keys.length; i++) {\n    key = keys[i];\n    // in case the object is already observed...\n    if (key === '__ob__') { continue }\n    toVal = to[key];\n    fromVal = from[key];\n    if (!hasOwn(to, key)) {\n      set(to, key, fromVal);\n    } else if (\n      toVal !== fromVal &&\n      isPlainObject(toVal) &&\n      isPlainObject(fromVal)\n    ) {\n      mergeData(toVal, fromVal);\n    }\n  }\n  return to\n}\n\n/**\n * Data\n */\nfunction mergeDataOrFn (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    // in a Vue.extend merge, both should be functions\n    if (!childVal) {\n      return parentVal\n    }\n    if (!parentVal) {\n      return childVal\n    }\n    // when parentVal & childVal are both present,\n    // we need to return a function that returns the\n    // merged result of both functions... no need to\n    // check if parentVal is a function here because\n    // it has to be a function to pass previous merges.\n    return function mergedDataFn () {\n      return mergeData(\n        typeof childVal === 'function' ? childVal.call(this, this) : childVal,\n        typeof parentVal === 'function' ? parentVal.call(this, this) : parentVal\n      )\n    }\n  } else {\n    return function mergedInstanceDataFn () {\n      // instance merge\n      var instanceData = typeof childVal === 'function'\n        ? childVal.call(vm, vm)\n        : childVal;\n      var defaultData = typeof parentVal === 'function'\n        ? parentVal.call(vm, vm)\n        : parentVal;\n      if (instanceData) {\n        return mergeData(instanceData, defaultData)\n      } else {\n        return defaultData\n      }\n    }\n  }\n}\n\nstrats.data = function (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    if (childVal && typeof childVal !== 'function') {\n      process.env.NODE_ENV !== 'production' && warn(\n        'The \"data\" option should be a function ' +\n        'that returns a per-instance value in component ' +\n        'definitions.',\n        vm\n      );\n\n      return parentVal\n    }\n    return mergeDataOrFn(parentVal, childVal)\n  }\n\n  return mergeDataOrFn(parentVal, childVal, vm)\n};\n\n/**\n * Hooks and props are merged as arrays.\n */\nfunction mergeHook (\n  parentVal,\n  childVal\n) {\n  var res = childVal\n    ? parentVal\n      ? parentVal.concat(childVal)\n      : Array.isArray(childVal)\n        ? childVal\n        : [childVal]\n    : parentVal;\n  return res\n    ? dedupeHooks(res)\n    : res\n}\n\nfunction dedupeHooks (hooks) {\n  var res = [];\n  for (var i = 0; i < hooks.length; i++) {\n    if (res.indexOf(hooks[i]) === -1) {\n      res.push(hooks[i]);\n    }\n  }\n  return res\n}\n\nLIFECYCLE_HOOKS.forEach(function (hook) {\n  strats[hook] = mergeHook;\n});\n\n/**\n * Assets\n *\n * When a vm is present (instance creation), we need to do\n * a three-way merge between constructor options, instance\n * options and parent options.\n */\nfunction mergeAssets (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  var res = Object.create(parentVal || null);\n  if (childVal) {\n    process.env.NODE_ENV !== 'production' && assertObjectType(key, childVal, vm);\n    return extend(res, childVal)\n  } else {\n    return res\n  }\n}\n\nASSET_TYPES.forEach(function (type) {\n  strats[type + 's'] = mergeAssets;\n});\n\n/**\n * Watchers.\n *\n * Watchers hashes should not overwrite one\n * another, so we merge them as arrays.\n */\nstrats.watch = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  // work around Firefox's Object.prototype.watch...\n  if (parentVal === nativeWatch) { parentVal = undefined; }\n  if (childVal === nativeWatch) { childVal = undefined; }\n  /* istanbul ignore if */\n  if (!childVal) { return Object.create(parentVal || null) }\n  if (process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = {};\n  extend(ret, parentVal);\n  for (var key$1 in childVal) {\n    var parent = ret[key$1];\n    var child = childVal[key$1];\n    if (parent && !Array.isArray(parent)) {\n      parent = [parent];\n    }\n    ret[key$1] = parent\n      ? parent.concat(child)\n      : Array.isArray(child) ? child : [child];\n  }\n  return ret\n};\n\n/**\n * Other object hashes.\n */\nstrats.props =\nstrats.methods =\nstrats.inject =\nstrats.computed = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  if (childVal && process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = Object.create(null);\n  extend(ret, parentVal);\n  if (childVal) { extend(ret, childVal); }\n  return ret\n};\nstrats.provide = mergeDataOrFn;\n\n/**\n * Default strategy.\n */\nvar defaultStrat = function (parentVal, childVal) {\n  return childVal === undefined\n    ? parentVal\n    : childVal\n};\n\n/**\n * Validate component names\n */\nfunction checkComponents (options) {\n  for (var key in options.components) {\n    validateComponentName(key);\n  }\n}\n\nfunction validateComponentName (name) {\n  if (!new RegExp((\"^[a-zA-Z][\\\\-\\\\.0-9_\" + (unicodeRegExp.source) + \"]*$\")).test(name)) {\n    warn(\n      'Invalid component name: \"' + name + '\". Component names ' +\n      'should conform to valid custom element name in html5 specification.'\n    );\n  }\n  if (isBuiltInTag(name) || config.isReservedTag(name)) {\n    warn(\n      'Do not use built-in or reserved HTML elements as component ' +\n      'id: ' + name\n    );\n  }\n}\n\n/**\n * Ensure all props option syntax are normalized into the\n * Object-based format.\n */\nfunction normalizeProps (options, vm) {\n  var props = options.props;\n  if (!props) { return }\n  var res = {};\n  var i, val, name;\n  if (Array.isArray(props)) {\n    i = props.length;\n    while (i--) {\n      val = props[i];\n      if (typeof val === 'string') {\n        name = camelize(val);\n        res[name] = { type: null };\n      } else if (process.env.NODE_ENV !== 'production') {\n        warn('props must be strings when using array syntax.');\n      }\n    }\n  } else if (isPlainObject(props)) {\n    for (var key in props) {\n      val = props[key];\n      name = camelize(key);\n      res[name] = isPlainObject(val)\n        ? val\n        : { type: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"props\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(props)) + \".\",\n      vm\n    );\n  }\n  options.props = res;\n}\n\n/**\n * Normalize all injections into Object-based format\n */\nfunction normalizeInject (options, vm) {\n  var inject = options.inject;\n  if (!inject) { return }\n  var normalized = options.inject = {};\n  if (Array.isArray(inject)) {\n    for (var i = 0; i < inject.length; i++) {\n      normalized[inject[i]] = { from: inject[i] };\n    }\n  } else if (isPlainObject(inject)) {\n    for (var key in inject) {\n      var val = inject[key];\n      normalized[key] = isPlainObject(val)\n        ? extend({ from: key }, val)\n        : { from: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"inject\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(inject)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Normalize raw function directives into object format.\n */\nfunction normalizeDirectives (options) {\n  var dirs = options.directives;\n  if (dirs) {\n    for (var key in dirs) {\n      var def$$1 = dirs[key];\n      if (typeof def$$1 === 'function') {\n        dirs[key] = { bind: def$$1, update: def$$1 };\n      }\n    }\n  }\n}\n\nfunction assertObjectType (name, value, vm) {\n  if (!isPlainObject(value)) {\n    warn(\n      \"Invalid value for option \\\"\" + name + \"\\\": expected an Object, \" +\n      \"but got \" + (toRawType(value)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Merge two option objects into a new one.\n * Core utility used in both instantiation and inheritance.\n */\nfunction mergeOptions (\n  parent,\n  child,\n  vm\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    checkComponents(child);\n  }\n\n  if (typeof child === 'function') {\n    child = child.options;\n  }\n\n  normalizeProps(child, vm);\n  normalizeInject(child, vm);\n  normalizeDirectives(child);\n\n  // Apply extends and mixins on the child options,\n  // but only if it is a raw options object that isn't\n  // the result of another mergeOptions call.\n  // Only merged options has the _base property.\n  if (!child._base) {\n    if (child.extends) {\n      parent = mergeOptions(parent, child.extends, vm);\n    }\n    if (child.mixins) {\n      for (var i = 0, l = child.mixins.length; i < l; i++) {\n        parent = mergeOptions(parent, child.mixins[i], vm);\n      }\n    }\n  }\n\n  var options = {};\n  var key;\n  for (key in parent) {\n    mergeField(key);\n  }\n  for (key in child) {\n    if (!hasOwn(parent, key)) {\n      mergeField(key);\n    }\n  }\n  function mergeField (key) {\n    var strat = strats[key] || defaultStrat;\n    options[key] = strat(parent[key], child[key], vm, key);\n  }\n  return options\n}\n\n/**\n * Resolve an asset.\n * This function is used because child instances need access\n * to assets defined in its ancestor chain.\n */\nfunction resolveAsset (\n  options,\n  type,\n  id,\n  warnMissing\n) {\n  /* istanbul ignore if */\n  if (typeof id !== 'string') {\n    return\n  }\n  var assets = options[type];\n  // check local registration variations first\n  if (hasOwn(assets, id)) { return assets[id] }\n  var camelizedId = camelize(id);\n  if (hasOwn(assets, camelizedId)) { return assets[camelizedId] }\n  var PascalCaseId = capitalize(camelizedId);\n  if (hasOwn(assets, PascalCaseId)) { return assets[PascalCaseId] }\n  // fallback to prototype chain\n  var res = assets[id] || assets[camelizedId] || assets[PascalCaseId];\n  if (process.env.NODE_ENV !== 'production' && warnMissing && !res) {\n    warn(\n      'Failed to resolve ' + type.slice(0, -1) + ': ' + id,\n      options\n    );\n  }\n  return res\n}\n\n/*  */\n\n\n\nfunction validateProp (\n  key,\n  propOptions,\n  propsData,\n  vm\n) {\n  var prop = propOptions[key];\n  var absent = !hasOwn(propsData, key);\n  var value = propsData[key];\n  // boolean casting\n  var booleanIndex = getTypeIndex(Boolean, prop.type);\n  if (booleanIndex > -1) {\n    if (absent && !hasOwn(prop, 'default')) {\n      value = false;\n    } else if (value === '' || value === hyphenate(key)) {\n      // only cast empty string / same name to boolean if\n      // boolean has higher priority\n      var stringIndex = getTypeIndex(String, prop.type);\n      if (stringIndex < 0 || booleanIndex < stringIndex) {\n        value = true;\n      }\n    }\n  }\n  // check default value\n  if (value === undefined) {\n    value = getPropDefaultValue(vm, prop, key);\n    // since the default value is a fresh copy,\n    // make sure to observe it.\n    var prevShouldObserve = shouldObserve;\n    toggleObserving(true);\n    observe(value);\n    toggleObserving(prevShouldObserve);\n  }\n  if (\n    process.env.NODE_ENV !== 'production' &&\n    // skip validation for weex recycle-list child component props\n    !(false)\n  ) {\n    assertProp(prop, key, value, vm, absent);\n  }\n  return value\n}\n\n/**\n * Get the default value of a prop.\n */\nfunction getPropDefaultValue (vm, prop, key) {\n  // no default, return undefined\n  if (!hasOwn(prop, 'default')) {\n    return undefined\n  }\n  var def = prop.default;\n  // warn against non-factory defaults for Object & Array\n  if (process.env.NODE_ENV !== 'production' && isObject(def)) {\n    warn(\n      'Invalid default value for prop \"' + key + '\": ' +\n      'Props with type Object/Array must use a factory function ' +\n      'to return the default value.',\n      vm\n    );\n  }\n  // the raw prop value was also undefined from previous render,\n  // return previous default value to avoid unnecessary watcher trigger\n  if (vm && vm.$options.propsData &&\n    vm.$options.propsData[key] === undefined &&\n    vm._props[key] !== undefined\n  ) {\n    return vm._props[key]\n  }\n  // call factory function for non-Function types\n  // a value is Function if its prototype is function even across different execution context\n  return typeof def === 'function' && getType(prop.type) !== 'Function'\n    ? def.call(vm)\n    : def\n}\n\n/**\n * Assert whether a prop is valid.\n */\nfunction assertProp (\n  prop,\n  name,\n  value,\n  vm,\n  absent\n) {\n  if (prop.required && absent) {\n    warn(\n      'Missing required prop: \"' + name + '\"',\n      vm\n    );\n    return\n  }\n  if (value == null && !prop.required) {\n    return\n  }\n  var type = prop.type;\n  var valid = !type || type === true;\n  var expectedTypes = [];\n  if (type) {\n    if (!Array.isArray(type)) {\n      type = [type];\n    }\n    for (var i = 0; i < type.length && !valid; i++) {\n      var assertedType = assertType(value, type[i]);\n      expectedTypes.push(assertedType.expectedType || '');\n      valid = assertedType.valid;\n    }\n  }\n\n  if (!valid) {\n    warn(\n      getInvalidTypeMessage(name, value, expectedTypes),\n      vm\n    );\n    return\n  }\n  var validator = prop.validator;\n  if (validator) {\n    if (!validator(value)) {\n      warn(\n        'Invalid prop: custom validator check failed for prop \"' + name + '\".',\n        vm\n      );\n    }\n  }\n}\n\nvar simpleCheckRE = /^(String|Number|Boolean|Function|Symbol)$/;\n\nfunction assertType (value, type) {\n  var valid;\n  var expectedType = getType(type);\n  if (simpleCheckRE.test(expectedType)) {\n    var t = typeof value;\n    valid = t === expectedType.toLowerCase();\n    // for primitive wrapper objects\n    if (!valid && t === 'object') {\n      valid = value instanceof type;\n    }\n  } else if (expectedType === 'Object') {\n    valid = isPlainObject(value);\n  } else if (expectedType === 'Array') {\n    valid = Array.isArray(value);\n  } else {\n    valid = value instanceof type;\n  }\n  return {\n    valid: valid,\n    expectedType: expectedType\n  }\n}\n\n/**\n * Use function string name to check built-in types,\n * because a simple equality check will fail when running\n * across different vms / iframes.\n */\nfunction getType (fn) {\n  var match = fn && fn.toString().match(/^\\s*function (\\w+)/);\n  return match ? match[1] : ''\n}\n\nfunction isSameType (a, b) {\n  return getType(a) === getType(b)\n}\n\nfunction getTypeIndex (type, expectedTypes) {\n  if (!Array.isArray(expectedTypes)) {\n    return isSameType(expectedTypes, type) ? 0 : -1\n  }\n  for (var i = 0, len = expectedTypes.length; i < len; i++) {\n    if (isSameType(expectedTypes[i], type)) {\n      return i\n    }\n  }\n  return -1\n}\n\nfunction getInvalidTypeMessage (name, value, expectedTypes) {\n  var message = \"Invalid prop: type check failed for prop \\\"\" + name + \"\\\".\" +\n    \" Expected \" + (expectedTypes.map(capitalize).join(', '));\n  var expectedType = expectedTypes[0];\n  var receivedType = toRawType(value);\n  var expectedValue = styleValue(value, expectedType);\n  var receivedValue = styleValue(value, receivedType);\n  // check if we need to specify expected value\n  if (expectedTypes.length === 1 &&\n      isExplicable(expectedType) &&\n      !isBoolean(expectedType, receivedType)) {\n    message += \" with value \" + expectedValue;\n  }\n  message += \", got \" + receivedType + \" \";\n  // check if we need to specify received value\n  if (isExplicable(receivedType)) {\n    message += \"with value \" + receivedValue + \".\";\n  }\n  return message\n}\n\nfunction styleValue (value, type) {\n  if (type === 'String') {\n    return (\"\\\"\" + value + \"\\\"\")\n  } else if (type === 'Number') {\n    return (\"\" + (Number(value)))\n  } else {\n    return (\"\" + value)\n  }\n}\n\nfunction isExplicable (value) {\n  var explicitTypes = ['string', 'number', 'boolean'];\n  return explicitTypes.some(function (elem) { return value.toLowerCase() === elem; })\n}\n\nfunction isBoolean () {\n  var args = [], len = arguments.length;\n  while ( len-- ) args[ len ] = arguments[ len ];\n\n  return args.some(function (elem) { return elem.toLowerCase() === 'boolean'; })\n}\n\n/*  */\n\nfunction handleError (err, vm, info) {\n  // Deactivate deps tracking while processing error handler to avoid possible infinite rendering.\n  // See: https://github.com/vuejs/vuex/issues/1505\n  pushTarget();\n  try {\n    if (vm) {\n      var cur = vm;\n      while ((cur = cur.$parent)) {\n        var hooks = cur.$options.errorCaptured;\n        if (hooks) {\n          for (var i = 0; i < hooks.length; i++) {\n            try {\n              var capture = hooks[i].call(cur, err, vm, info) === false;\n              if (capture) { return }\n            } catch (e) {\n              globalHandleError(e, cur, 'errorCaptured hook');\n            }\n          }\n        }\n      }\n    }\n    globalHandleError(err, vm, info);\n  } finally {\n    popTarget();\n  }\n}\n\nfunction invokeWithErrorHandling (\n  handler,\n  context,\n  args,\n  vm,\n  info\n) {\n  var res;\n  try {\n    res = args ? handler.apply(context, args) : handler.call(context);\n    if (res && !res._isVue && isPromise(res) && !res._handled) {\n      res.catch(function (e) { return handleError(e, vm, info + \" (Promise/async)\"); });\n      // issue #9511\n      // avoid catch triggering multiple times when nested calls\n      res._handled = true;\n    }\n  } catch (e) {\n    handleError(e, vm, info);\n  }\n  return res\n}\n\nfunction globalHandleError (err, vm, info) {\n  if (config.errorHandler) {\n    try {\n      return config.errorHandler.call(null, err, vm, info)\n    } catch (e) {\n      // if the user intentionally throws the original error in the handler,\n      // do not log it twice\n      if (e !== err) {\n        logError(e, null, 'config.errorHandler');\n      }\n    }\n  }\n  logError(err, vm, info);\n}\n\nfunction logError (err, vm, info) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn((\"Error in \" + info + \": \\\"\" + (err.toString()) + \"\\\"\"), vm);\n  }\n  /* istanbul ignore else */\n  if ((inBrowser || inWeex) && typeof console !== 'undefined') {\n    console.error(err);\n  } else {\n    throw err\n  }\n}\n\n/*  */\n\nvar isUsingMicroTask = false;\n\nvar callbacks = [];\nvar pending = false;\n\nfunction flushCallbacks () {\n  pending = false;\n  var copies = callbacks.slice(0);\n  callbacks.length = 0;\n  for (var i = 0; i < copies.length; i++) {\n    copies[i]();\n  }\n}\n\n// Here we have async deferring wrappers using microtasks.\n// In 2.5 we used (macro) tasks (in combination with microtasks).\n// However, it has subtle problems when state is changed right before repaint\n// (e.g. #6813, out-in transitions).\n// Also, using (macro) tasks in event handler would cause some weird behaviors\n// that cannot be circumvented (e.g. #7109, #7153, #7546, #7834, #8109).\n// So we now use microtasks everywhere, again.\n// A major drawback of this tradeoff is that there are some scenarios\n// where microtasks have too high a priority and fire in between supposedly\n// sequential events (e.g. #4521, #6690, which have workarounds)\n// or even between bubbling of the same event (#6566).\nvar timerFunc;\n\n// The nextTick behavior leverages the microtask queue, which can be accessed\n// via either native Promise.then or MutationObserver.\n// MutationObserver has wider support, however it is seriously bugged in\n// UIWebView in iOS >= 9.3.3 when triggered in touch event handlers. It\n// completely stops working after triggering a few times... so, if native\n// Promise is available, we will use it:\n/* istanbul ignore next, $flow-disable-line */\nif (typeof Promise !== 'undefined' && isNative(Promise)) {\n  var p = Promise.resolve();\n  timerFunc = function () {\n    p.then(flushCallbacks);\n    // In problematic UIWebViews, Promise.then doesn't completely break, but\n    // it can get stuck in a weird state where callbacks are pushed into the\n    // microtask queue but the queue isn't being flushed, until the browser\n    // needs to do some other work, e.g. handle a timer. Therefore we can\n    // \"force\" the microtask queue to be flushed by adding an empty timer.\n    if (isIOS) { setTimeout(noop); }\n  };\n  isUsingMicroTask = true;\n} else if (!isIE && typeof MutationObserver !== 'undefined' && (\n  isNative(MutationObserver) ||\n  // PhantomJS and iOS 7.x\n  MutationObserver.toString() === '[object MutationObserverConstructor]'\n)) {\n  // Use MutationObserver where native Promise is not available,\n  // e.g. PhantomJS, iOS7, Android 4.4\n  // (#6466 MutationObserver is unreliable in IE11)\n  var counter = 1;\n  var observer = new MutationObserver(flushCallbacks);\n  var textNode = document.createTextNode(String(counter));\n  observer.observe(textNode, {\n    characterData: true\n  });\n  timerFunc = function () {\n    counter = (counter + 1) % 2;\n    textNode.data = String(counter);\n  };\n  isUsingMicroTask = true;\n} else if (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {\n  // Fallback to setImmediate.\n  // Techinically it leverages the (macro) task queue,\n  // but it is still a better choice than setTimeout.\n  timerFunc = function () {\n    setImmediate(flushCallbacks);\n  };\n} else {\n  // Fallback to setTimeout.\n  timerFunc = function () {\n    setTimeout(flushCallbacks, 0);\n  };\n}\n\nfunction nextTick (cb, ctx) {\n  var _resolve;\n  callbacks.push(function () {\n    if (cb) {\n      try {\n        cb.call(ctx);\n      } catch (e) {\n        handleError(e, ctx, 'nextTick');\n      }\n    } else if (_resolve) {\n      _resolve(ctx);\n    }\n  });\n  if (!pending) {\n    pending = true;\n    timerFunc();\n  }\n  // $flow-disable-line\n  if (!cb && typeof Promise !== 'undefined') {\n    return new Promise(function (resolve) {\n      _resolve = resolve;\n    })\n  }\n}\n\n/*  */\n\n/* not type checking this file because flow doesn't play well with Proxy */\n\nvar initProxy;\n\nif (process.env.NODE_ENV !== 'production') {\n  var allowedGlobals = makeMap(\n    'Infinity,undefined,NaN,isFinite,isNaN,' +\n    'parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,' +\n    'Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,' +\n    'require' // for Webpack/Browserify\n  );\n\n  var warnNonPresent = function (target, key) {\n    warn(\n      \"Property or method \\\"\" + key + \"\\\" is not defined on the instance but \" +\n      'referenced during render. Make sure that this property is reactive, ' +\n      'either in the data option, or for class-based components, by ' +\n      'initializing the property. ' +\n      'See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',\n      target\n    );\n  };\n\n  var warnReservedPrefix = function (target, key) {\n    warn(\n      \"Property \\\"\" + key + \"\\\" must be accessed with \\\"$data.\" + key + \"\\\" because \" +\n      'properties starting with \"$\" or \"_\" are not proxied in the Vue instance to ' +\n      'prevent conflicts with Vue internals' +\n      'See: https://vuejs.org/v2/api/#data',\n      target\n    );\n  };\n\n  var hasProxy =\n    typeof Proxy !== 'undefined' && isNative(Proxy);\n\n  if (hasProxy) {\n    var isBuiltInModifier = makeMap('stop,prevent,self,ctrl,shift,alt,meta,exact');\n    config.keyCodes = new Proxy(config.keyCodes, {\n      set: function set (target, key, value) {\n        if (isBuiltInModifier(key)) {\n          warn((\"Avoid overwriting built-in modifier in config.keyCodes: .\" + key));\n          return false\n        } else {\n          target[key] = value;\n          return true\n        }\n      }\n    });\n  }\n\n  var hasHandler = {\n    has: function has (target, key) {\n      var has = key in target;\n      var isAllowed = allowedGlobals(key) ||\n        (typeof key === 'string' && key.charAt(0) === '_' && !(key in target.$data));\n      if (!has && !isAllowed) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return has || !isAllowed\n    }\n  };\n\n  var getHandler = {\n    get: function get (target, key) {\n      if (typeof key === 'string' && !(key in target)) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return target[key]\n    }\n  };\n\n  initProxy = function initProxy (vm) {\n    if (hasProxy) {\n      // determine which proxy handler to use\n      var options = vm.$options;\n      var handlers = options.render && options.render._withStripped\n        ? getHandler\n        : hasHandler;\n      vm._renderProxy = new Proxy(vm, handlers);\n    } else {\n      vm._renderProxy = vm;\n    }\n  };\n}\n\n/*  */\n\nvar seenObjects = new _Set();\n\n/**\n * Recursively traverse an object to evoke all converted\n * getters, so that every nested property inside the object\n * is collected as a \"deep\" dependency.\n */\nfunction traverse (val) {\n  _traverse(val, seenObjects);\n  seenObjects.clear();\n}\n\nfunction _traverse (val, seen) {\n  var i, keys;\n  var isA = Array.isArray(val);\n  if ((!isA && !isObject(val)) || Object.isFrozen(val) || val instanceof VNode) {\n    return\n  }\n  if (val.__ob__) {\n    var depId = val.__ob__.dep.id;\n    if (seen.has(depId)) {\n      return\n    }\n    seen.add(depId);\n  }\n  if (isA) {\n    i = val.length;\n    while (i--) { _traverse(val[i], seen); }\n  } else {\n    keys = Object.keys(val);\n    i = keys.length;\n    while (i--) { _traverse(val[keys[i]], seen); }\n  }\n}\n\nvar mark;\nvar measure;\n\nif (process.env.NODE_ENV !== 'production') {\n  var perf = inBrowser && window.performance;\n  /* istanbul ignore if */\n  if (\n    perf &&\n    perf.mark &&\n    perf.measure &&\n    perf.clearMarks &&\n    perf.clearMeasures\n  ) {\n    mark = function (tag) { return perf.mark(tag); };\n    measure = function (name, startTag, endTag) {\n      perf.measure(name, startTag, endTag);\n      perf.clearMarks(startTag);\n      perf.clearMarks(endTag);\n      // perf.clearMeasures(name)\n    };\n  }\n}\n\n/*  */\n\nvar normalizeEvent = cached(function (name) {\n  var passive = name.charAt(0) === '&';\n  name = passive ? name.slice(1) : name;\n  var once$$1 = name.charAt(0) === '~'; // Prefixed last, checked first\n  name = once$$1 ? name.slice(1) : name;\n  var capture = name.charAt(0) === '!';\n  name = capture ? name.slice(1) : name;\n  return {\n    name: name,\n    once: once$$1,\n    capture: capture,\n    passive: passive\n  }\n});\n\nfunction createFnInvoker (fns, vm) {\n  function invoker () {\n    var arguments$1 = arguments;\n\n    var fns = invoker.fns;\n    if (Array.isArray(fns)) {\n      var cloned = fns.slice();\n      for (var i = 0; i < cloned.length; i++) {\n        invokeWithErrorHandling(cloned[i], null, arguments$1, vm, \"v-on handler\");\n      }\n    } else {\n      // return handler return value for single handlers\n      return invokeWithErrorHandling(fns, null, arguments, vm, \"v-on handler\")\n    }\n  }\n  invoker.fns = fns;\n  return invoker\n}\n\nfunction updateListeners (\n  on,\n  oldOn,\n  add,\n  remove$$1,\n  createOnceHandler,\n  vm\n) {\n  var name, def$$1, cur, old, event;\n  for (name in on) {\n    def$$1 = cur = on[name];\n    old = oldOn[name];\n    event = normalizeEvent(name);\n    if (isUndef(cur)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Invalid handler for event \\\"\" + (event.name) + \"\\\": got \" + String(cur),\n        vm\n      );\n    } else if (isUndef(old)) {\n      if (isUndef(cur.fns)) {\n        cur = on[name] = createFnInvoker(cur, vm);\n      }\n      if (isTrue(event.once)) {\n        cur = on[name] = createOnceHandler(event.name, cur, event.capture);\n      }\n      add(event.name, cur, event.capture, event.passive, event.params);\n    } else if (cur !== old) {\n      old.fns = cur;\n      on[name] = old;\n    }\n  }\n  for (name in oldOn) {\n    if (isUndef(on[name])) {\n      event = normalizeEvent(name);\n      remove$$1(event.name, oldOn[name], event.capture);\n    }\n  }\n}\n\n/*  */\n\nfunction mergeVNodeHook (def, hookKey, hook) {\n  if (def instanceof VNode) {\n    def = def.data.hook || (def.data.hook = {});\n  }\n  var invoker;\n  var oldHook = def[hookKey];\n\n  function wrappedHook () {\n    hook.apply(this, arguments);\n    // important: remove merged hook to ensure it's called only once\n    // and prevent memory leak\n    remove(invoker.fns, wrappedHook);\n  }\n\n  if (isUndef(oldHook)) {\n    // no existing hook\n    invoker = createFnInvoker([wrappedHook]);\n  } else {\n    /* istanbul ignore if */\n    if (isDef(oldHook.fns) && isTrue(oldHook.merged)) {\n      // already a merged invoker\n      invoker = oldHook;\n      invoker.fns.push(wrappedHook);\n    } else {\n      // existing plain hook\n      invoker = createFnInvoker([oldHook, wrappedHook]);\n    }\n  }\n\n  invoker.merged = true;\n  def[hookKey] = invoker;\n}\n\n/*  */\n\nfunction extractPropsFromVNodeData (\n  data,\n  Ctor,\n  tag\n) {\n  // we are only extracting raw values here.\n  // validation and default values are handled in the child\n  // component itself.\n  var propOptions = Ctor.options.props;\n  if (isUndef(propOptions)) {\n    return\n  }\n  var res = {};\n  var attrs = data.attrs;\n  var props = data.props;\n  if (isDef(attrs) || isDef(props)) {\n    for (var key in propOptions) {\n      var altKey = hyphenate(key);\n      if (process.env.NODE_ENV !== 'production') {\n        var keyInLowerCase = key.toLowerCase();\n        if (\n          key !== keyInLowerCase &&\n          attrs && hasOwn(attrs, keyInLowerCase)\n        ) {\n          tip(\n            \"Prop \\\"\" + keyInLowerCase + \"\\\" is passed to component \" +\n            (formatComponentName(tag || Ctor)) + \", but the declared prop name is\" +\n            \" \\\"\" + key + \"\\\". \" +\n            \"Note that HTML attributes are case-insensitive and camelCased \" +\n            \"props need to use their kebab-case equivalents when using in-DOM \" +\n            \"templates. You should probably use \\\"\" + altKey + \"\\\" instead of \\\"\" + key + \"\\\".\"\n          );\n        }\n      }\n      checkProp(res, props, key, altKey, true) ||\n      checkProp(res, attrs, key, altKey, false);\n    }\n  }\n  return res\n}\n\nfunction checkProp (\n  res,\n  hash,\n  key,\n  altKey,\n  preserve\n) {\n  if (isDef(hash)) {\n    if (hasOwn(hash, key)) {\n      res[key] = hash[key];\n      if (!preserve) {\n        delete hash[key];\n      }\n      return true\n    } else if (hasOwn(hash, altKey)) {\n      res[key] = hash[altKey];\n      if (!preserve) {\n        delete hash[altKey];\n      }\n      return true\n    }\n  }\n  return false\n}\n\n/*  */\n\n// The template compiler attempts to minimize the need for normalization by\n// statically analyzing the template at compile time.\n//\n// For plain HTML markup, normalization can be completely skipped because the\n// generated render function is guaranteed to return Array<VNode>. There are\n// two cases where extra normalization is needed:\n\n// 1. When the children contains components - because a functional component\n// may return an Array instead of a single root. In this case, just a simple\n// normalization is needed - if any child is an Array, we flatten the whole\n// thing with Array.prototype.concat. It is guaranteed to be only 1-level deep\n// because functional components already normalize their own children.\nfunction simpleNormalizeChildren (children) {\n  for (var i = 0; i < children.length; i++) {\n    if (Array.isArray(children[i])) {\n      return Array.prototype.concat.apply([], children)\n    }\n  }\n  return children\n}\n\n// 2. When the children contains constructs that always generated nested Arrays,\n// e.g. <template>, <slot>, v-for, or when the children is provided by user\n// with hand-written render functions / JSX. In such cases a full normalization\n// is needed to cater to all possible types of children values.\nfunction normalizeChildren (children) {\n  return isPrimitive(children)\n    ? [createTextVNode(children)]\n    : Array.isArray(children)\n      ? normalizeArrayChildren(children)\n      : undefined\n}\n\nfunction isTextNode (node) {\n  return isDef(node) && isDef(node.text) && isFalse(node.isComment)\n}\n\nfunction normalizeArrayChildren (children, nestedIndex) {\n  var res = [];\n  var i, c, lastIndex, last;\n  for (i = 0; i < children.length; i++) {\n    c = children[i];\n    if (isUndef(c) || typeof c === 'boolean') { continue }\n    lastIndex = res.length - 1;\n    last = res[lastIndex];\n    //  nested\n    if (Array.isArray(c)) {\n      if (c.length > 0) {\n        c = normalizeArrayChildren(c, ((nestedIndex || '') + \"_\" + i));\n        // merge adjacent text nodes\n        if (isTextNode(c[0]) && isTextNode(last)) {\n          res[lastIndex] = createTextVNode(last.text + (c[0]).text);\n          c.shift();\n        }\n        res.push.apply(res, c);\n      }\n    } else if (isPrimitive(c)) {\n      if (isTextNode(last)) {\n        // merge adjacent text nodes\n        // this is necessary for SSR hydration because text nodes are\n        // essentially merged when rendered to HTML strings\n        res[lastIndex] = createTextVNode(last.text + c);\n      } else if (c !== '') {\n        // convert primitive to vnode\n        res.push(createTextVNode(c));\n      }\n    } else {\n      if (isTextNode(c) && isTextNode(last)) {\n        // merge adjacent text nodes\n        res[lastIndex] = createTextVNode(last.text + c.text);\n      } else {\n        // default key for nested array children (likely generated by v-for)\n        if (isTrue(children._isVList) &&\n          isDef(c.tag) &&\n          isUndef(c.key) &&\n          isDef(nestedIndex)) {\n          c.key = \"__vlist\" + nestedIndex + \"_\" + i + \"__\";\n        }\n        res.push(c);\n      }\n    }\n  }\n  return res\n}\n\n/*  */\n\nfunction initProvide (vm) {\n  var provide = vm.$options.provide;\n  if (provide) {\n    vm._provided = typeof provide === 'function'\n      ? provide.call(vm)\n      : provide;\n  }\n}\n\nfunction initInjections (vm) {\n  var result = resolveInject(vm.$options.inject, vm);\n  if (result) {\n    toggleObserving(false);\n    Object.keys(result).forEach(function (key) {\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production') {\n        defineReactive$$1(vm, key, result[key], function () {\n          warn(\n            \"Avoid mutating an injected value directly since the changes will be \" +\n            \"overwritten whenever the provided component re-renders. \" +\n            \"injection being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        });\n      } else {\n        defineReactive$$1(vm, key, result[key]);\n      }\n    });\n    toggleObserving(true);\n  }\n}\n\nfunction resolveInject (inject, vm) {\n  if (inject) {\n    // inject is :any because flow is not smart enough to figure out cached\n    var result = Object.create(null);\n    var keys = hasSymbol\n      ? Reflect.ownKeys(inject)\n      : Object.keys(inject);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      // #6574 in case the inject object is observed...\n      if (key === '__ob__') { continue }\n      var provideKey = inject[key].from;\n      var source = vm;\n      while (source) {\n        if (source._provided && hasOwn(source._provided, provideKey)) {\n          result[key] = source._provided[provideKey];\n          break\n        }\n        source = source.$parent;\n      }\n      if (!source) {\n        if ('default' in inject[key]) {\n          var provideDefault = inject[key].default;\n          result[key] = typeof provideDefault === 'function'\n            ? provideDefault.call(vm)\n            : provideDefault;\n        } else if (process.env.NODE_ENV !== 'production') {\n          warn((\"Injection \\\"\" + key + \"\\\" not found\"), vm);\n        }\n      }\n    }\n    return result\n  }\n}\n\n/*  */\n\n\n\n/**\n * Runtime helper for resolving raw children VNodes into a slot object.\n */\nfunction resolveSlots (\n  children,\n  context\n) {\n  if (!children || !children.length) {\n    return {}\n  }\n  var slots = {};\n  for (var i = 0, l = children.length; i < l; i++) {\n    var child = children[i];\n    var data = child.data;\n    // remove slot attribute if the node is resolved as a Vue slot node\n    if (data && data.attrs && data.attrs.slot) {\n      delete data.attrs.slot;\n    }\n    // named slots should only be respected if the vnode was rendered in the\n    // same context.\n    if ((child.context === context || child.fnContext === context) &&\n      data && data.slot != null\n    ) {\n      var name = data.slot;\n      var slot = (slots[name] || (slots[name] = []));\n      if (child.tag === 'template') {\n        slot.push.apply(slot, child.children || []);\n      } else {\n        slot.push(child);\n      }\n    } else {\n      (slots.default || (slots.default = [])).push(child);\n    }\n  }\n  // ignore slots that contains only whitespace\n  for (var name$1 in slots) {\n    if (slots[name$1].every(isWhitespace)) {\n      delete slots[name$1];\n    }\n  }\n  return slots\n}\n\nfunction isWhitespace (node) {\n  return (node.isComment && !node.asyncFactory) || node.text === ' '\n}\n\n/*  */\n\nfunction normalizeScopedSlots (\n  slots,\n  normalSlots,\n  prevSlots\n) {\n  var res;\n  var hasNormalSlots = Object.keys(normalSlots).length > 0;\n  var isStable = slots ? !!slots.$stable : !hasNormalSlots;\n  var key = slots && slots.$key;\n  if (!slots) {\n    res = {};\n  } else if (slots._normalized) {\n    // fast path 1: child component re-render only, parent did not change\n    return slots._normalized\n  } else if (\n    isStable &&\n    prevSlots &&\n    prevSlots !== emptyObject &&\n    key === prevSlots.$key &&\n    !hasNormalSlots &&\n    !prevSlots.$hasNormal\n  ) {\n    // fast path 2: stable scoped slots w/ no normal slots to proxy,\n    // only need to normalize once\n    return prevSlots\n  } else {\n    res = {};\n    for (var key$1 in slots) {\n      if (slots[key$1] && key$1[0] !== '$') {\n        res[key$1] = normalizeScopedSlot(normalSlots, key$1, slots[key$1]);\n      }\n    }\n  }\n  // expose normal slots on scopedSlots\n  for (var key$2 in normalSlots) {\n    if (!(key$2 in res)) {\n      res[key$2] = proxyNormalSlot(normalSlots, key$2);\n    }\n  }\n  // avoriaz seems to mock a non-extensible $scopedSlots object\n  // and when that is passed down this would cause an error\n  if (slots && Object.isExtensible(slots)) {\n    (slots)._normalized = res;\n  }\n  def(res, '$stable', isStable);\n  def(res, '$key', key);\n  def(res, '$hasNormal', hasNormalSlots);\n  return res\n}\n\nfunction normalizeScopedSlot(normalSlots, key, fn) {\n  var normalized = function () {\n    var res = arguments.length ? fn.apply(null, arguments) : fn({});\n    res = res && typeof res === 'object' && !Array.isArray(res)\n      ? [res] // single vnode\n      : normalizeChildren(res);\n    return res && (\n      res.length === 0 ||\n      (res.length === 1 && res[0].isComment) // #9658\n    ) ? undefined\n      : res\n  };\n  // this is a slot using the new v-slot syntax without scope. although it is\n  // compiled as a scoped slot, render fn users would expect it to be present\n  // on this.$slots because the usage is semantically a normal slot.\n  if (fn.proxy) {\n    Object.defineProperty(normalSlots, key, {\n      get: normalized,\n      enumerable: true,\n      configurable: true\n    });\n  }\n  return normalized\n}\n\nfunction proxyNormalSlot(slots, key) {\n  return function () { return slots[key]; }\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering v-for lists.\n */\nfunction renderList (\n  val,\n  render\n) {\n  var ret, i, l, keys, key;\n  if (Array.isArray(val) || typeof val === 'string') {\n    ret = new Array(val.length);\n    for (i = 0, l = val.length; i < l; i++) {\n      ret[i] = render(val[i], i);\n    }\n  } else if (typeof val === 'number') {\n    ret = new Array(val);\n    for (i = 0; i < val; i++) {\n      ret[i] = render(i + 1, i);\n    }\n  } else if (isObject(val)) {\n    if (hasSymbol && val[Symbol.iterator]) {\n      ret = [];\n      var iterator = val[Symbol.iterator]();\n      var result = iterator.next();\n      while (!result.done) {\n        ret.push(render(result.value, ret.length));\n        result = iterator.next();\n      }\n    } else {\n      keys = Object.keys(val);\n      ret = new Array(keys.length);\n      for (i = 0, l = keys.length; i < l; i++) {\n        key = keys[i];\n        ret[i] = render(val[key], key, i);\n      }\n    }\n  }\n  if (!isDef(ret)) {\n    ret = [];\n  }\n  (ret)._isVList = true;\n  return ret\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering <slot>\n */\nfunction renderSlot (\n  name,\n  fallback,\n  props,\n  bindObject\n) {\n  var scopedSlotFn = this.$scopedSlots[name];\n  var nodes;\n  if (scopedSlotFn) { // scoped slot\n    props = props || {};\n    if (bindObject) {\n      if (process.env.NODE_ENV !== 'production' && !isObject(bindObject)) {\n        warn(\n          'slot v-bind without argument expects an Object',\n          this\n        );\n      }\n      props = extend(extend({}, bindObject), props);\n    }\n    nodes = scopedSlotFn(props) || fallback;\n  } else {\n    nodes = this.$slots[name] || fallback;\n  }\n\n  var target = props && props.slot;\n  if (target) {\n    return this.$createElement('template', { slot: target }, nodes)\n  } else {\n    return nodes\n  }\n}\n\n/*  */\n\n/**\n * Runtime helper for resolving filters\n */\nfunction resolveFilter (id) {\n  return resolveAsset(this.$options, 'filters', id, true) || identity\n}\n\n/*  */\n\nfunction isKeyNotMatch (expect, actual) {\n  if (Array.isArray(expect)) {\n    return expect.indexOf(actual) === -1\n  } else {\n    return expect !== actual\n  }\n}\n\n/**\n * Runtime helper for checking keyCodes from config.\n * exposed as Vue.prototype._k\n * passing in eventKeyName as last argument separately for backwards compat\n */\nfunction checkKeyCodes (\n  eventKeyCode,\n  key,\n  builtInKeyCode,\n  eventKeyName,\n  builtInKeyName\n) {\n  var mappedKeyCode = config.keyCodes[key] || builtInKeyCode;\n  if (builtInKeyName && eventKeyName && !config.keyCodes[key]) {\n    return isKeyNotMatch(builtInKeyName, eventKeyName)\n  } else if (mappedKeyCode) {\n    return isKeyNotMatch(mappedKeyCode, eventKeyCode)\n  } else if (eventKeyName) {\n    return hyphenate(eventKeyName) !== key\n  }\n}\n\n/*  */\n\n/**\n * Runtime helper for merging v-bind=\"object\" into a VNode's data.\n */\nfunction bindObjectProps (\n  data,\n  tag,\n  value,\n  asProp,\n  isSync\n) {\n  if (value) {\n    if (!isObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-bind without argument expects an Object or Array value',\n        this\n      );\n    } else {\n      if (Array.isArray(value)) {\n        value = toObject(value);\n      }\n      var hash;\n      var loop = function ( key ) {\n        if (\n          key === 'class' ||\n          key === 'style' ||\n          isReservedAttribute(key)\n        ) {\n          hash = data;\n        } else {\n          var type = data.attrs && data.attrs.type;\n          hash = asProp || config.mustUseProp(tag, type, key)\n            ? data.domProps || (data.domProps = {})\n            : data.attrs || (data.attrs = {});\n        }\n        var camelizedKey = camelize(key);\n        var hyphenatedKey = hyphenate(key);\n        if (!(camelizedKey in hash) && !(hyphenatedKey in hash)) {\n          hash[key] = value[key];\n\n          if (isSync) {\n            var on = data.on || (data.on = {});\n            on[(\"update:\" + key)] = function ($event) {\n              value[key] = $event;\n            };\n          }\n        }\n      };\n\n      for (var key in value) loop( key );\n    }\n  }\n  return data\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering static trees.\n */\nfunction renderStatic (\n  index,\n  isInFor\n) {\n  var cached = this._staticTrees || (this._staticTrees = []);\n  var tree = cached[index];\n  // if has already-rendered static tree and not inside v-for,\n  // we can reuse the same tree.\n  if (tree && !isInFor) {\n    return tree\n  }\n  // otherwise, render a fresh tree.\n  tree = cached[index] = this.$options.staticRenderFns[index].call(\n    this._renderProxy,\n    null,\n    this // for render fns generated for functional component templates\n  );\n  markStatic(tree, (\"__static__\" + index), false);\n  return tree\n}\n\n/**\n * Runtime helper for v-once.\n * Effectively it means marking the node as static with a unique key.\n */\nfunction markOnce (\n  tree,\n  index,\n  key\n) {\n  markStatic(tree, (\"__once__\" + index + (key ? (\"_\" + key) : \"\")), true);\n  return tree\n}\n\nfunction markStatic (\n  tree,\n  key,\n  isOnce\n) {\n  if (Array.isArray(tree)) {\n    for (var i = 0; i < tree.length; i++) {\n      if (tree[i] && typeof tree[i] !== 'string') {\n        markStaticNode(tree[i], (key + \"_\" + i), isOnce);\n      }\n    }\n  } else {\n    markStaticNode(tree, key, isOnce);\n  }\n}\n\nfunction markStaticNode (node, key, isOnce) {\n  node.isStatic = true;\n  node.key = key;\n  node.isOnce = isOnce;\n}\n\n/*  */\n\nfunction bindObjectListeners (data, value) {\n  if (value) {\n    if (!isPlainObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-on without argument expects an Object value',\n        this\n      );\n    } else {\n      var on = data.on = data.on ? extend({}, data.on) : {};\n      for (var key in value) {\n        var existing = on[key];\n        var ours = value[key];\n        on[key] = existing ? [].concat(existing, ours) : ours;\n      }\n    }\n  }\n  return data\n}\n\n/*  */\n\nfunction resolveScopedSlots (\n  fns, // see flow/vnode\n  res,\n  // the following are added in 2.6\n  hasDynamicKeys,\n  contentHashKey\n) {\n  res = res || { $stable: !hasDynamicKeys };\n  for (var i = 0; i < fns.length; i++) {\n    var slot = fns[i];\n    if (Array.isArray(slot)) {\n      resolveScopedSlots(slot, res, hasDynamicKeys);\n    } else if (slot) {\n      // marker for reverse proxying v-slot without scope on this.$slots\n      if (slot.proxy) {\n        slot.fn.proxy = true;\n      }\n      res[slot.key] = slot.fn;\n    }\n  }\n  if (contentHashKey) {\n    (res).$key = contentHashKey;\n  }\n  return res\n}\n\n/*  */\n\nfunction bindDynamicKeys (baseObj, values) {\n  for (var i = 0; i < values.length; i += 2) {\n    var key = values[i];\n    if (typeof key === 'string' && key) {\n      baseObj[values[i]] = values[i + 1];\n    } else if (process.env.NODE_ENV !== 'production' && key !== '' && key !== null) {\n      // null is a speical value for explicitly removing a binding\n      warn(\n        (\"Invalid value for dynamic directive argument (expected string or null): \" + key),\n        this\n      );\n    }\n  }\n  return baseObj\n}\n\n// helper to dynamically append modifier runtime markers to event names.\n// ensure only append when value is already string, otherwise it will be cast\n// to string and cause the type check to miss.\nfunction prependModifier (value, symbol) {\n  return typeof value === 'string' ? symbol + value : value\n}\n\n/*  */\n\nfunction installRenderHelpers (target) {\n  target._o = markOnce;\n  target._n = toNumber;\n  target._s = toString;\n  target._l = renderList;\n  target._t = renderSlot;\n  target._q = looseEqual;\n  target._i = looseIndexOf;\n  target._m = renderStatic;\n  target._f = resolveFilter;\n  target._k = checkKeyCodes;\n  target._b = bindObjectProps;\n  target._v = createTextVNode;\n  target._e = createEmptyVNode;\n  target._u = resolveScopedSlots;\n  target._g = bindObjectListeners;\n  target._d = bindDynamicKeys;\n  target._p = prependModifier;\n}\n\n/*  */\n\nfunction FunctionalRenderContext (\n  data,\n  props,\n  children,\n  parent,\n  Ctor\n) {\n  var this$1 = this;\n\n  var options = Ctor.options;\n  // ensure the createElement function in functional components\n  // gets a unique context - this is necessary for correct named slot check\n  var contextVm;\n  if (hasOwn(parent, '_uid')) {\n    contextVm = Object.create(parent);\n    // $flow-disable-line\n    contextVm._original = parent;\n  } else {\n    // the context vm passed in is a functional context as well.\n    // in this case we want to make sure we are able to get a hold to the\n    // real context instance.\n    contextVm = parent;\n    // $flow-disable-line\n    parent = parent._original;\n  }\n  var isCompiled = isTrue(options._compiled);\n  var needNormalization = !isCompiled;\n\n  this.data = data;\n  this.props = props;\n  this.children = children;\n  this.parent = parent;\n  this.listeners = data.on || emptyObject;\n  this.injections = resolveInject(options.inject, parent);\n  this.slots = function () {\n    if (!this$1.$slots) {\n      normalizeScopedSlots(\n        data.scopedSlots,\n        this$1.$slots = resolveSlots(children, parent)\n      );\n    }\n    return this$1.$slots\n  };\n\n  Object.defineProperty(this, 'scopedSlots', ({\n    enumerable: true,\n    get: function get () {\n      return normalizeScopedSlots(data.scopedSlots, this.slots())\n    }\n  }));\n\n  // support for compiled functional template\n  if (isCompiled) {\n    // exposing $options for renderStatic()\n    this.$options = options;\n    // pre-resolve slots for renderSlot()\n    this.$slots = this.slots();\n    this.$scopedSlots = normalizeScopedSlots(data.scopedSlots, this.$slots);\n  }\n\n  if (options._scopeId) {\n    this._c = function (a, b, c, d) {\n      var vnode = createElement(contextVm, a, b, c, d, needNormalization);\n      if (vnode && !Array.isArray(vnode)) {\n        vnode.fnScopeId = options._scopeId;\n        vnode.fnContext = parent;\n      }\n      return vnode\n    };\n  } else {\n    this._c = function (a, b, c, d) { return createElement(contextVm, a, b, c, d, needNormalization); };\n  }\n}\n\ninstallRenderHelpers(FunctionalRenderContext.prototype);\n\nfunction createFunctionalComponent (\n  Ctor,\n  propsData,\n  data,\n  contextVm,\n  children\n) {\n  var options = Ctor.options;\n  var props = {};\n  var propOptions = options.props;\n  if (isDef(propOptions)) {\n    for (var key in propOptions) {\n      props[key] = validateProp(key, propOptions, propsData || emptyObject);\n    }\n  } else {\n    if (isDef(data.attrs)) { mergeProps(props, data.attrs); }\n    if (isDef(data.props)) { mergeProps(props, data.props); }\n  }\n\n  var renderContext = new FunctionalRenderContext(\n    data,\n    props,\n    children,\n    contextVm,\n    Ctor\n  );\n\n  var vnode = options.render.call(null, renderContext._c, renderContext);\n\n  if (vnode instanceof VNode) {\n    return cloneAndMarkFunctionalResult(vnode, data, renderContext.parent, options, renderContext)\n  } else if (Array.isArray(vnode)) {\n    var vnodes = normalizeChildren(vnode) || [];\n    var res = new Array(vnodes.length);\n    for (var i = 0; i < vnodes.length; i++) {\n      res[i] = cloneAndMarkFunctionalResult(vnodes[i], data, renderContext.parent, options, renderContext);\n    }\n    return res\n  }\n}\n\nfunction cloneAndMarkFunctionalResult (vnode, data, contextVm, options, renderContext) {\n  // #7817 clone node before setting fnContext, otherwise if the node is reused\n  // (e.g. it was from a cached normal slot) the fnContext causes named slots\n  // that should not be matched to match.\n  var clone = cloneVNode(vnode);\n  clone.fnContext = contextVm;\n  clone.fnOptions = options;\n  if (process.env.NODE_ENV !== 'production') {\n    (clone.devtoolsMeta = clone.devtoolsMeta || {}).renderContext = renderContext;\n  }\n  if (data.slot) {\n    (clone.data || (clone.data = {})).slot = data.slot;\n  }\n  return clone\n}\n\nfunction mergeProps (to, from) {\n  for (var key in from) {\n    to[camelize(key)] = from[key];\n  }\n}\n\n/*  */\n\n/*  */\n\n/*  */\n\n/*  */\n\n// inline hooks to be invoked on component VNodes during patch\nvar componentVNodeHooks = {\n  init: function init (vnode, hydrating) {\n    if (\n      vnode.componentInstance &&\n      !vnode.componentInstance._isDestroyed &&\n      vnode.data.keepAlive\n    ) {\n      // kept-alive components, treat as a patch\n      var mountedNode = vnode; // work around flow\n      componentVNodeHooks.prepatch(mountedNode, mountedNode);\n    } else {\n      var child = vnode.componentInstance = createComponentInstanceForVnode(\n        vnode,\n        activeInstance\n      );\n      child.$mount(hydrating ? vnode.elm : undefined, hydrating);\n    }\n  },\n\n  prepatch: function prepatch (oldVnode, vnode) {\n    var options = vnode.componentOptions;\n    var child = vnode.componentInstance = oldVnode.componentInstance;\n    updateChildComponent(\n      child,\n      options.propsData, // updated props\n      options.listeners, // updated listeners\n      vnode, // new parent vnode\n      options.children // new children\n    );\n  },\n\n  insert: function insert (vnode) {\n    var context = vnode.context;\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isMounted) {\n      componentInstance._isMounted = true;\n      callHook(componentInstance, 'mounted');\n    }\n    if (vnode.data.keepAlive) {\n      if (context._isMounted) {\n        // vue-router#1212\n        // During updates, a kept-alive component's child components may\n        // change, so directly walking the tree here may call activated hooks\n        // on incorrect children. Instead we push them into a queue which will\n        // be processed after the whole patch process ended.\n        queueActivatedComponent(componentInstance);\n      } else {\n        activateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  },\n\n  destroy: function destroy (vnode) {\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isDestroyed) {\n      if (!vnode.data.keepAlive) {\n        componentInstance.$destroy();\n      } else {\n        deactivateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  }\n};\n\nvar hooksToMerge = Object.keys(componentVNodeHooks);\n\nfunction createComponent (\n  Ctor,\n  data,\n  context,\n  children,\n  tag\n) {\n  if (isUndef(Ctor)) {\n    return\n  }\n\n  var baseCtor = context.$options._base;\n\n  // plain options object: turn it into a constructor\n  if (isObject(Ctor)) {\n    Ctor = baseCtor.extend(Ctor);\n  }\n\n  // if at this stage it's not a constructor or an async component factory,\n  // reject.\n  if (typeof Ctor !== 'function') {\n    if (process.env.NODE_ENV !== 'production') {\n      warn((\"Invalid Component definition: \" + (String(Ctor))), context);\n    }\n    return\n  }\n\n  // async component\n  var asyncFactory;\n  if (isUndef(Ctor.cid)) {\n    asyncFactory = Ctor;\n    Ctor = resolveAsyncComponent(asyncFactory, baseCtor);\n    if (Ctor === undefined) {\n      // return a placeholder node for async component, which is rendered\n      // as a comment node but preserves all the raw information for the node.\n      // the information will be used for async server-rendering and hydration.\n      return createAsyncPlaceholder(\n        asyncFactory,\n        data,\n        context,\n        children,\n        tag\n      )\n    }\n  }\n\n  data = data || {};\n\n  // resolve constructor options in case global mixins are applied after\n  // component constructor creation\n  resolveConstructorOptions(Ctor);\n\n  // transform component v-model data into props & events\n  if (isDef(data.model)) {\n    transformModel(Ctor.options, data);\n  }\n\n  // extract props\n  var propsData = extractPropsFromVNodeData(data, Ctor, tag);\n\n  // functional component\n  if (isTrue(Ctor.options.functional)) {\n    return createFunctionalComponent(Ctor, propsData, data, context, children)\n  }\n\n  // extract listeners, since these needs to be treated as\n  // child component listeners instead of DOM listeners\n  var listeners = data.on;\n  // replace with listeners with .native modifier\n  // so it gets processed during parent component patch.\n  data.on = data.nativeOn;\n\n  if (isTrue(Ctor.options.abstract)) {\n    // abstract components do not keep anything\n    // other than props & listeners & slot\n\n    // work around flow\n    var slot = data.slot;\n    data = {};\n    if (slot) {\n      data.slot = slot;\n    }\n  }\n\n  // install component management hooks onto the placeholder node\n  installComponentHooks(data);\n\n  // return a placeholder vnode\n  var name = Ctor.options.name || tag;\n  var vnode = new VNode(\n    (\"vue-component-\" + (Ctor.cid) + (name ? (\"-\" + name) : '')),\n    data, undefined, undefined, undefined, context,\n    { Ctor: Ctor, propsData: propsData, listeners: listeners, tag: tag, children: children },\n    asyncFactory\n  );\n\n  return vnode\n}\n\nfunction createComponentInstanceForVnode (\n  vnode, // we know it's MountedComponentVNode but flow doesn't\n  parent // activeInstance in lifecycle state\n) {\n  var options = {\n    _isComponent: true,\n    _parentVnode: vnode,\n    parent: parent\n  };\n  // check inline-template render functions\n  var inlineTemplate = vnode.data.inlineTemplate;\n  if (isDef(inlineTemplate)) {\n    options.render = inlineTemplate.render;\n    options.staticRenderFns = inlineTemplate.staticRenderFns;\n  }\n  return new vnode.componentOptions.Ctor(options)\n}\n\nfunction installComponentHooks (data) {\n  var hooks = data.hook || (data.hook = {});\n  for (var i = 0; i < hooksToMerge.length; i++) {\n    var key = hooksToMerge[i];\n    var existing = hooks[key];\n    var toMerge = componentVNodeHooks[key];\n    if (existing !== toMerge && !(existing && existing._merged)) {\n      hooks[key] = existing ? mergeHook$1(toMerge, existing) : toMerge;\n    }\n  }\n}\n\nfunction mergeHook$1 (f1, f2) {\n  var merged = function (a, b) {\n    // flow complains about extra args which is why we use any\n    f1(a, b);\n    f2(a, b);\n  };\n  merged._merged = true;\n  return merged\n}\n\n// transform component v-model info (value and callback) into\n// prop and event handler respectively.\nfunction transformModel (options, data) {\n  var prop = (options.model && options.model.prop) || 'value';\n  var event = (options.model && options.model.event) || 'input'\n  ;(data.attrs || (data.attrs = {}))[prop] = data.model.value;\n  var on = data.on || (data.on = {});\n  var existing = on[event];\n  var callback = data.model.callback;\n  if (isDef(existing)) {\n    if (\n      Array.isArray(existing)\n        ? existing.indexOf(callback) === -1\n        : existing !== callback\n    ) {\n      on[event] = [callback].concat(existing);\n    }\n  } else {\n    on[event] = callback;\n  }\n}\n\n/*  */\n\nvar SIMPLE_NORMALIZE = 1;\nvar ALWAYS_NORMALIZE = 2;\n\n// wrapper function for providing a more flexible interface\n// without getting yelled at by flow\nfunction createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType,\n  alwaysNormalize\n) {\n  if (Array.isArray(data) || isPrimitive(data)) {\n    normalizationType = children;\n    children = data;\n    data = undefined;\n  }\n  if (isTrue(alwaysNormalize)) {\n    normalizationType = ALWAYS_NORMALIZE;\n  }\n  return _createElement(context, tag, data, children, normalizationType)\n}\n\nfunction _createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType\n) {\n  if (isDef(data) && isDef((data).__ob__)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"Avoid using observed data object as vnode data: \" + (JSON.stringify(data)) + \"\\n\" +\n      'Always create fresh vnode data objects in each render!',\n      context\n    );\n    return createEmptyVNode()\n  }\n  // object syntax in v-bind\n  if (isDef(data) && isDef(data.is)) {\n    tag = data.is;\n  }\n  if (!tag) {\n    // in case of component :is set to falsy value\n    return createEmptyVNode()\n  }\n  // warn against non-primitive key\n  if (process.env.NODE_ENV !== 'production' &&\n    isDef(data) && isDef(data.key) && !isPrimitive(data.key)\n  ) {\n    {\n      warn(\n        'Avoid using non-primitive value as key, ' +\n        'use string/number value instead.',\n        context\n      );\n    }\n  }\n  // support single function children as default scoped slot\n  if (Array.isArray(children) &&\n    typeof children[0] === 'function'\n  ) {\n    data = data || {};\n    data.scopedSlots = { default: children[0] };\n    children.length = 0;\n  }\n  if (normalizationType === ALWAYS_NORMALIZE) {\n    children = normalizeChildren(children);\n  } else if (normalizationType === SIMPLE_NORMALIZE) {\n    children = simpleNormalizeChildren(children);\n  }\n  var vnode, ns;\n  if (typeof tag === 'string') {\n    var Ctor;\n    ns = (context.$vnode && context.$vnode.ns) || config.getTagNamespace(tag);\n    if (config.isReservedTag(tag)) {\n      // platform built-in elements\n      vnode = new VNode(\n        config.parsePlatformTagName(tag), data, children,\n        undefined, undefined, context\n      );\n    } else if ((!data || !data.pre) && isDef(Ctor = resolveAsset(context.$options, 'components', tag))) {\n      // component\n      vnode = createComponent(Ctor, data, context, children, tag);\n    } else {\n      // unknown or unlisted namespaced elements\n      // check at runtime because it may get assigned a namespace when its\n      // parent normalizes children\n      vnode = new VNode(\n        tag, data, children,\n        undefined, undefined, context\n      );\n    }\n  } else {\n    // direct component options / constructor\n    vnode = createComponent(tag, data, context, children);\n  }\n  if (Array.isArray(vnode)) {\n    return vnode\n  } else if (isDef(vnode)) {\n    if (isDef(ns)) { applyNS(vnode, ns); }\n    if (isDef(data)) { registerDeepBindings(data); }\n    return vnode\n  } else {\n    return createEmptyVNode()\n  }\n}\n\nfunction applyNS (vnode, ns, force) {\n  vnode.ns = ns;\n  if (vnode.tag === 'foreignObject') {\n    // use default namespace inside foreignObject\n    ns = undefined;\n    force = true;\n  }\n  if (isDef(vnode.children)) {\n    for (var i = 0, l = vnode.children.length; i < l; i++) {\n      var child = vnode.children[i];\n      if (isDef(child.tag) && (\n        isUndef(child.ns) || (isTrue(force) && child.tag !== 'svg'))) {\n        applyNS(child, ns, force);\n      }\n    }\n  }\n}\n\n// ref #5318\n// necessary to ensure parent re-render when deep bindings like :style and\n// :class are used on slot nodes\nfunction registerDeepBindings (data) {\n  if (isObject(data.style)) {\n    traverse(data.style);\n  }\n  if (isObject(data.class)) {\n    traverse(data.class);\n  }\n}\n\n/*  */\n\nfunction initRender (vm) {\n  vm._vnode = null; // the root of the child tree\n  vm._staticTrees = null; // v-once cached trees\n  var options = vm.$options;\n  var parentVnode = vm.$vnode = options._parentVnode; // the placeholder node in parent tree\n  var renderContext = parentVnode && parentVnode.context;\n  vm.$slots = resolveSlots(options._renderChildren, renderContext);\n  vm.$scopedSlots = emptyObject;\n  // bind the createElement fn to this instance\n  // so that we get proper render context inside it.\n  // args order: tag, data, children, normalizationType, alwaysNormalize\n  // internal version is used by render functions compiled from templates\n  vm._c = function (a, b, c, d) { return createElement(vm, a, b, c, d, false); };\n  // normalization is always applied for the public version, used in\n  // user-written render functions.\n  vm.$createElement = function (a, b, c, d) { return createElement(vm, a, b, c, d, true); };\n\n  // $attrs & $listeners are exposed for easier HOC creation.\n  // they need to be reactive so that HOCs using them are always updated\n  var parentData = parentVnode && parentVnode.data;\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$attrs is readonly.\", vm);\n    }, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$listeners is readonly.\", vm);\n    }, true);\n  } else {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, null, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, null, true);\n  }\n}\n\nvar currentRenderingInstance = null;\n\nfunction renderMixin (Vue) {\n  // install runtime convenience helpers\n  installRenderHelpers(Vue.prototype);\n\n  Vue.prototype.$nextTick = function (fn) {\n    return nextTick(fn, this)\n  };\n\n  Vue.prototype._render = function () {\n    var vm = this;\n    var ref = vm.$options;\n    var render = ref.render;\n    var _parentVnode = ref._parentVnode;\n\n    if (_parentVnode) {\n      vm.$scopedSlots = normalizeScopedSlots(\n        _parentVnode.data.scopedSlots,\n        vm.$slots,\n        vm.$scopedSlots\n      );\n    }\n\n    // set parent vnode. this allows render functions to have access\n    // to the data on the placeholder node.\n    vm.$vnode = _parentVnode;\n    // render self\n    var vnode;\n    try {\n      // There's no need to maintain a stack becaues all render fns are called\n      // separately from one another. Nested component's render fns are called\n      // when parent component is patched.\n      currentRenderingInstance = vm;\n      vnode = render.call(vm._renderProxy, vm.$createElement);\n    } catch (e) {\n      handleError(e, vm, \"render\");\n      // return error render result,\n      // or previous vnode to prevent render error causing blank component\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production' && vm.$options.renderError) {\n        try {\n          vnode = vm.$options.renderError.call(vm._renderProxy, vm.$createElement, e);\n        } catch (e) {\n          handleError(e, vm, \"renderError\");\n          vnode = vm._vnode;\n        }\n      } else {\n        vnode = vm._vnode;\n      }\n    } finally {\n      currentRenderingInstance = null;\n    }\n    // if the returned array contains only a single node, allow it\n    if (Array.isArray(vnode) && vnode.length === 1) {\n      vnode = vnode[0];\n    }\n    // return empty vnode in case the render function errored out\n    if (!(vnode instanceof VNode)) {\n      if (process.env.NODE_ENV !== 'production' && Array.isArray(vnode)) {\n        warn(\n          'Multiple root nodes returned from render function. Render function ' +\n          'should return a single root node.',\n          vm\n        );\n      }\n      vnode = createEmptyVNode();\n    }\n    // set parent\n    vnode.parent = _parentVnode;\n    return vnode\n  };\n}\n\n/*  */\n\nfunction ensureCtor (comp, base) {\n  if (\n    comp.__esModule ||\n    (hasSymbol && comp[Symbol.toStringTag] === 'Module')\n  ) {\n    comp = comp.default;\n  }\n  return isObject(comp)\n    ? base.extend(comp)\n    : comp\n}\n\nfunction createAsyncPlaceholder (\n  factory,\n  data,\n  context,\n  children,\n  tag\n) {\n  var node = createEmptyVNode();\n  node.asyncFactory = factory;\n  node.asyncMeta = { data: data, context: context, children: children, tag: tag };\n  return node\n}\n\nfunction resolveAsyncComponent (\n  factory,\n  baseCtor\n) {\n  if (isTrue(factory.error) && isDef(factory.errorComp)) {\n    return factory.errorComp\n  }\n\n  if (isDef(factory.resolved)) {\n    return factory.resolved\n  }\n\n  var owner = currentRenderingInstance;\n  if (owner && isDef(factory.owners) && factory.owners.indexOf(owner) === -1) {\n    // already pending\n    factory.owners.push(owner);\n  }\n\n  if (isTrue(factory.loading) && isDef(factory.loadingComp)) {\n    return factory.loadingComp\n  }\n\n  if (owner && !isDef(factory.owners)) {\n    var owners = factory.owners = [owner];\n    var sync = true;\n    var timerLoading = null;\n    var timerTimeout = null\n\n    ;(owner).$on('hook:destroyed', function () { return remove(owners, owner); });\n\n    var forceRender = function (renderCompleted) {\n      for (var i = 0, l = owners.length; i < l; i++) {\n        (owners[i]).$forceUpdate();\n      }\n\n      if (renderCompleted) {\n        owners.length = 0;\n        if (timerLoading !== null) {\n          clearTimeout(timerLoading);\n          timerLoading = null;\n        }\n        if (timerTimeout !== null) {\n          clearTimeout(timerTimeout);\n          timerTimeout = null;\n        }\n      }\n    };\n\n    var resolve = once(function (res) {\n      // cache resolved\n      factory.resolved = ensureCtor(res, baseCtor);\n      // invoke callbacks only if this is not a synchronous resolve\n      // (async resolves are shimmed as synchronous during SSR)\n      if (!sync) {\n        forceRender(true);\n      } else {\n        owners.length = 0;\n      }\n    });\n\n    var reject = once(function (reason) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed to resolve async component: \" + (String(factory)) +\n        (reason ? (\"\\nReason: \" + reason) : '')\n      );\n      if (isDef(factory.errorComp)) {\n        factory.error = true;\n        forceRender(true);\n      }\n    });\n\n    var res = factory(resolve, reject);\n\n    if (isObject(res)) {\n      if (isPromise(res)) {\n        // () => Promise\n        if (isUndef(factory.resolved)) {\n          res.then(resolve, reject);\n        }\n      } else if (isPromise(res.component)) {\n        res.component.then(resolve, reject);\n\n        if (isDef(res.error)) {\n          factory.errorComp = ensureCtor(res.error, baseCtor);\n        }\n\n        if (isDef(res.loading)) {\n          factory.loadingComp = ensureCtor(res.loading, baseCtor);\n          if (res.delay === 0) {\n            factory.loading = true;\n          } else {\n            timerLoading = setTimeout(function () {\n              timerLoading = null;\n              if (isUndef(factory.resolved) && isUndef(factory.error)) {\n                factory.loading = true;\n                forceRender(false);\n              }\n            }, res.delay || 200);\n          }\n        }\n\n        if (isDef(res.timeout)) {\n          timerTimeout = setTimeout(function () {\n            timerTimeout = null;\n            if (isUndef(factory.resolved)) {\n              reject(\n                process.env.NODE_ENV !== 'production'\n                  ? (\"timeout (\" + (res.timeout) + \"ms)\")\n                  : null\n              );\n            }\n          }, res.timeout);\n        }\n      }\n    }\n\n    sync = false;\n    // return in case resolved synchronously\n    return factory.loading\n      ? factory.loadingComp\n      : factory.resolved\n  }\n}\n\n/*  */\n\nfunction isAsyncPlaceholder (node) {\n  return node.isComment && node.asyncFactory\n}\n\n/*  */\n\nfunction getFirstComponentChild (children) {\n  if (Array.isArray(children)) {\n    for (var i = 0; i < children.length; i++) {\n      var c = children[i];\n      if (isDef(c) && (isDef(c.componentOptions) || isAsyncPlaceholder(c))) {\n        return c\n      }\n    }\n  }\n}\n\n/*  */\n\n/*  */\n\nfunction initEvents (vm) {\n  vm._events = Object.create(null);\n  vm._hasHookEvent = false;\n  // init parent attached events\n  var listeners = vm.$options._parentListeners;\n  if (listeners) {\n    updateComponentListeners(vm, listeners);\n  }\n}\n\nvar target;\n\nfunction add (event, fn) {\n  target.$on(event, fn);\n}\n\nfunction remove$1 (event, fn) {\n  target.$off(event, fn);\n}\n\nfunction createOnceHandler (event, fn) {\n  var _target = target;\n  return function onceHandler () {\n    var res = fn.apply(null, arguments);\n    if (res !== null) {\n      _target.$off(event, onceHandler);\n    }\n  }\n}\n\nfunction updateComponentListeners (\n  vm,\n  listeners,\n  oldListeners\n) {\n  target = vm;\n  updateListeners(listeners, oldListeners || {}, add, remove$1, createOnceHandler, vm);\n  target = undefined;\n}\n\nfunction eventsMixin (Vue) {\n  var hookRE = /^hook:/;\n  Vue.prototype.$on = function (event, fn) {\n    var vm = this;\n    if (Array.isArray(event)) {\n      for (var i = 0, l = event.length; i < l; i++) {\n        vm.$on(event[i], fn);\n      }\n    } else {\n      (vm._events[event] || (vm._events[event] = [])).push(fn);\n      // optimize hook:event cost by using a boolean flag marked at registration\n      // instead of a hash lookup\n      if (hookRE.test(event)) {\n        vm._hasHookEvent = true;\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$once = function (event, fn) {\n    var vm = this;\n    function on () {\n      vm.$off(event, on);\n      fn.apply(vm, arguments);\n    }\n    on.fn = fn;\n    vm.$on(event, on);\n    return vm\n  };\n\n  Vue.prototype.$off = function (event, fn) {\n    var vm = this;\n    // all\n    if (!arguments.length) {\n      vm._events = Object.create(null);\n      return vm\n    }\n    // array of events\n    if (Array.isArray(event)) {\n      for (var i$1 = 0, l = event.length; i$1 < l; i$1++) {\n        vm.$off(event[i$1], fn);\n      }\n      return vm\n    }\n    // specific event\n    var cbs = vm._events[event];\n    if (!cbs) {\n      return vm\n    }\n    if (!fn) {\n      vm._events[event] = null;\n      return vm\n    }\n    // specific handler\n    var cb;\n    var i = cbs.length;\n    while (i--) {\n      cb = cbs[i];\n      if (cb === fn || cb.fn === fn) {\n        cbs.splice(i, 1);\n        break\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$emit = function (event) {\n    var vm = this;\n    if (process.env.NODE_ENV !== 'production') {\n      var lowerCaseEvent = event.toLowerCase();\n      if (lowerCaseEvent !== event && vm._events[lowerCaseEvent]) {\n        tip(\n          \"Event \\\"\" + lowerCaseEvent + \"\\\" is emitted in component \" +\n          (formatComponentName(vm)) + \" but the handler is registered for \\\"\" + event + \"\\\". \" +\n          \"Note that HTML attributes are case-insensitive and you cannot use \" +\n          \"v-on to listen to camelCase events when using in-DOM templates. \" +\n          \"You should probably use \\\"\" + (hyphenate(event)) + \"\\\" instead of \\\"\" + event + \"\\\".\"\n        );\n      }\n    }\n    var cbs = vm._events[event];\n    if (cbs) {\n      cbs = cbs.length > 1 ? toArray(cbs) : cbs;\n      var args = toArray(arguments, 1);\n      var info = \"event handler for \\\"\" + event + \"\\\"\";\n      for (var i = 0, l = cbs.length; i < l; i++) {\n        invokeWithErrorHandling(cbs[i], vm, args, vm, info);\n      }\n    }\n    return vm\n  };\n}\n\n/*  */\n\nvar activeInstance = null;\nvar isUpdatingChildComponent = false;\n\nfunction setActiveInstance(vm) {\n  var prevActiveInstance = activeInstance;\n  activeInstance = vm;\n  return function () {\n    activeInstance = prevActiveInstance;\n  }\n}\n\nfunction initLifecycle (vm) {\n  var options = vm.$options;\n\n  // locate first non-abstract parent\n  var parent = options.parent;\n  if (parent && !options.abstract) {\n    while (parent.$options.abstract && parent.$parent) {\n      parent = parent.$parent;\n    }\n    parent.$children.push(vm);\n  }\n\n  vm.$parent = parent;\n  vm.$root = parent ? parent.$root : vm;\n\n  vm.$children = [];\n  vm.$refs = {};\n\n  vm._watcher = null;\n  vm._inactive = null;\n  vm._directInactive = false;\n  vm._isMounted = false;\n  vm._isDestroyed = false;\n  vm._isBeingDestroyed = false;\n}\n\nfunction lifecycleMixin (Vue) {\n  Vue.prototype._update = function (vnode, hydrating) {\n    var vm = this;\n    var prevEl = vm.$el;\n    var prevVnode = vm._vnode;\n    var restoreActiveInstance = setActiveInstance(vm);\n    vm._vnode = vnode;\n    // Vue.prototype.__patch__ is injected in entry points\n    // based on the rendering backend used.\n    if (!prevVnode) {\n      // initial render\n      vm.$el = vm.__patch__(vm.$el, vnode, hydrating, false /* removeOnly */);\n    } else {\n      // updates\n      vm.$el = vm.__patch__(prevVnode, vnode);\n    }\n    restoreActiveInstance();\n    // update __vue__ reference\n    if (prevEl) {\n      prevEl.__vue__ = null;\n    }\n    if (vm.$el) {\n      vm.$el.__vue__ = vm;\n    }\n    // if parent is an HOC, update its $el as well\n    if (vm.$vnode && vm.$parent && vm.$vnode === vm.$parent._vnode) {\n      vm.$parent.$el = vm.$el;\n    }\n    // updated hook is called by the scheduler to ensure that children are\n    // updated in a parent's updated hook.\n  };\n\n  Vue.prototype.$forceUpdate = function () {\n    var vm = this;\n    if (vm._watcher) {\n      vm._watcher.update();\n    }\n  };\n\n  Vue.prototype.$destroy = function () {\n    var vm = this;\n    if (vm._isBeingDestroyed) {\n      return\n    }\n    callHook(vm, 'beforeDestroy');\n    vm._isBeingDestroyed = true;\n    // remove self from parent\n    var parent = vm.$parent;\n    if (parent && !parent._isBeingDestroyed && !vm.$options.abstract) {\n      remove(parent.$children, vm);\n    }\n    // teardown watchers\n    if (vm._watcher) {\n      vm._watcher.teardown();\n    }\n    var i = vm._watchers.length;\n    while (i--) {\n      vm._watchers[i].teardown();\n    }\n    // remove reference from data ob\n    // frozen object may not have observer.\n    if (vm._data.__ob__) {\n      vm._data.__ob__.vmCount--;\n    }\n    // call the last hook...\n    vm._isDestroyed = true;\n    // invoke destroy hooks on current rendered tree\n    vm.__patch__(vm._vnode, null);\n    // fire destroyed hook\n    callHook(vm, 'destroyed');\n    // turn off all instance listeners.\n    vm.$off();\n    // remove __vue__ reference\n    if (vm.$el) {\n      vm.$el.__vue__ = null;\n    }\n    // release circular reference (#6759)\n    if (vm.$vnode) {\n      vm.$vnode.parent = null;\n    }\n  };\n}\n\nfunction mountComponent (\n  vm,\n  el,\n  hydrating\n) {\n  vm.$el = el;\n  if (!vm.$options.render) {\n    vm.$options.render = createEmptyVNode;\n    if (process.env.NODE_ENV !== 'production') {\n      /* istanbul ignore if */\n      if ((vm.$options.template && vm.$options.template.charAt(0) !== '#') ||\n        vm.$options.el || el) {\n        warn(\n          'You are using the runtime-only build of Vue where the template ' +\n          'compiler is not available. Either pre-compile the templates into ' +\n          'render functions, or use the compiler-included build.',\n          vm\n        );\n      } else {\n        warn(\n          'Failed to mount component: template or render function not defined.',\n          vm\n        );\n      }\n    }\n  }\n  callHook(vm, 'beforeMount');\n\n  var updateComponent;\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n    updateComponent = function () {\n      var name = vm._name;\n      var id = vm._uid;\n      var startTag = \"vue-perf-start:\" + id;\n      var endTag = \"vue-perf-end:\" + id;\n\n      mark(startTag);\n      var vnode = vm._render();\n      mark(endTag);\n      measure((\"vue \" + name + \" render\"), startTag, endTag);\n\n      mark(startTag);\n      vm._update(vnode, hydrating);\n      mark(endTag);\n      measure((\"vue \" + name + \" patch\"), startTag, endTag);\n    };\n  } else {\n    updateComponent = function () {\n      vm._update(vm._render(), hydrating);\n    };\n  }\n\n  // we set this to vm._watcher inside the watcher's constructor\n  // since the watcher's initial patch may call $forceUpdate (e.g. inside child\n  // component's mounted hook), which relies on vm._watcher being already defined\n  new Watcher(vm, updateComponent, noop, {\n    before: function before () {\n      if (vm._isMounted && !vm._isDestroyed) {\n        callHook(vm, 'beforeUpdate');\n      }\n    }\n  }, true /* isRenderWatcher */);\n  hydrating = false;\n\n  // manually mounted instance, call mounted on self\n  // mounted is called for render-created child components in its inserted hook\n  if (vm.$vnode == null) {\n    vm._isMounted = true;\n    callHook(vm, 'mounted');\n  }\n  return vm\n}\n\nfunction updateChildComponent (\n  vm,\n  propsData,\n  listeners,\n  parentVnode,\n  renderChildren\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = true;\n  }\n\n  // determine whether component has slot children\n  // we need to do this before overwriting $options._renderChildren.\n\n  // check if there are dynamic scopedSlots (hand-written or compiled but with\n  // dynamic slot names). Static scoped slots compiled from template has the\n  // \"$stable\" marker.\n  var newScopedSlots = parentVnode.data.scopedSlots;\n  var oldScopedSlots = vm.$scopedSlots;\n  var hasDynamicScopedSlot = !!(\n    (newScopedSlots && !newScopedSlots.$stable) ||\n    (oldScopedSlots !== emptyObject && !oldScopedSlots.$stable) ||\n    (newScopedSlots && vm.$scopedSlots.$key !== newScopedSlots.$key)\n  );\n\n  // Any static slot children from the parent may have changed during parent's\n  // update. Dynamic scoped slots may also have changed. In such cases, a forced\n  // update is necessary to ensure correctness.\n  var needsForceUpdate = !!(\n    renderChildren ||               // has new static slots\n    vm.$options._renderChildren ||  // has old static slots\n    hasDynamicScopedSlot\n  );\n\n  vm.$options._parentVnode = parentVnode;\n  vm.$vnode = parentVnode; // update vm's placeholder node without re-render\n\n  if (vm._vnode) { // update child tree's parent\n    vm._vnode.parent = parentVnode;\n  }\n  vm.$options._renderChildren = renderChildren;\n\n  // update $attrs and $listeners hash\n  // these are also reactive so they may trigger child update if the child\n  // used them during render\n  vm.$attrs = parentVnode.data.attrs || emptyObject;\n  vm.$listeners = listeners || emptyObject;\n\n  // update props\n  if (propsData && vm.$options.props) {\n    toggleObserving(false);\n    var props = vm._props;\n    var propKeys = vm.$options._propKeys || [];\n    for (var i = 0; i < propKeys.length; i++) {\n      var key = propKeys[i];\n      var propOptions = vm.$options.props; // wtf flow?\n      props[key] = validateProp(key, propOptions, propsData, vm);\n    }\n    toggleObserving(true);\n    // keep a copy of raw propsData\n    vm.$options.propsData = propsData;\n  }\n\n  // update listeners\n  listeners = listeners || emptyObject;\n  var oldListeners = vm.$options._parentListeners;\n  vm.$options._parentListeners = listeners;\n  updateComponentListeners(vm, listeners, oldListeners);\n\n  // resolve slots + force update if has children\n  if (needsForceUpdate) {\n    vm.$slots = resolveSlots(renderChildren, parentVnode.context);\n    vm.$forceUpdate();\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = false;\n  }\n}\n\nfunction isInInactiveTree (vm) {\n  while (vm && (vm = vm.$parent)) {\n    if (vm._inactive) { return true }\n  }\n  return false\n}\n\nfunction activateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = false;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  } else if (vm._directInactive) {\n    return\n  }\n  if (vm._inactive || vm._inactive === null) {\n    vm._inactive = false;\n    for (var i = 0; i < vm.$children.length; i++) {\n      activateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'activated');\n  }\n}\n\nfunction deactivateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = true;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  }\n  if (!vm._inactive) {\n    vm._inactive = true;\n    for (var i = 0; i < vm.$children.length; i++) {\n      deactivateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'deactivated');\n  }\n}\n\nfunction callHook (vm, hook) {\n  // #7573 disable dep collection when invoking lifecycle hooks\n  pushTarget();\n  var handlers = vm.$options[hook];\n  var info = hook + \" hook\";\n  if (handlers) {\n    for (var i = 0, j = handlers.length; i < j; i++) {\n      invokeWithErrorHandling(handlers[i], vm, null, vm, info);\n    }\n  }\n  if (vm._hasHookEvent) {\n    vm.$emit('hook:' + hook);\n  }\n  popTarget();\n}\n\n/*  */\n\nvar MAX_UPDATE_COUNT = 100;\n\nvar queue = [];\nvar activatedChildren = [];\nvar has = {};\nvar circular = {};\nvar waiting = false;\nvar flushing = false;\nvar index = 0;\n\n/**\n * Reset the scheduler's state.\n */\nfunction resetSchedulerState () {\n  index = queue.length = activatedChildren.length = 0;\n  has = {};\n  if (process.env.NODE_ENV !== 'production') {\n    circular = {};\n  }\n  waiting = flushing = false;\n}\n\n// Async edge case #6566 requires saving the timestamp when event listeners are\n// attached. However, calling performance.now() has a perf overhead especially\n// if the page has thousands of event listeners. Instead, we take a timestamp\n// every time the scheduler flushes and use that for all event listeners\n// attached during that flush.\nvar currentFlushTimestamp = 0;\n\n// Async edge case fix requires storing an event listener's attach timestamp.\nvar getNow = Date.now;\n\n// Determine what event timestamp the browser is using. Annoyingly, the\n// timestamp can either be hi-res (relative to page load) or low-res\n// (relative to UNIX epoch), so in order to compare time we have to use the\n// same timestamp type when saving the flush timestamp.\n// All IE versions use low-res event timestamps, and have problematic clock\n// implementations (#9632)\nif (inBrowser && !isIE) {\n  var performance = window.performance;\n  if (\n    performance &&\n    typeof performance.now === 'function' &&\n    getNow() > document.createEvent('Event').timeStamp\n  ) {\n    // if the event timestamp, although evaluated AFTER the Date.now(), is\n    // smaller than it, it means the event is using a hi-res timestamp,\n    // and we need to use the hi-res version for event listener timestamps as\n    // well.\n    getNow = function () { return performance.now(); };\n  }\n}\n\n/**\n * Flush both queues and run the watchers.\n */\nfunction flushSchedulerQueue () {\n  currentFlushTimestamp = getNow();\n  flushing = true;\n  var watcher, id;\n\n  // Sort queue before flush.\n  // This ensures that:\n  // 1. Components are updated from parent to child. (because parent is always\n  //    created before the child)\n  // 2. A component's user watchers are run before its render watcher (because\n  //    user watchers are created before the render watcher)\n  // 3. If a component is destroyed during a parent component's watcher run,\n  //    its watchers can be skipped.\n  queue.sort(function (a, b) { return a.id - b.id; });\n\n  // do not cache length because more watchers might be pushed\n  // as we run existing watchers\n  for (index = 0; index < queue.length; index++) {\n    watcher = queue[index];\n    if (watcher.before) {\n      watcher.before();\n    }\n    id = watcher.id;\n    has[id] = null;\n    watcher.run();\n    // in dev build, check and stop circular updates.\n    if (process.env.NODE_ENV !== 'production' && has[id] != null) {\n      circular[id] = (circular[id] || 0) + 1;\n      if (circular[id] > MAX_UPDATE_COUNT) {\n        warn(\n          'You may have an infinite update loop ' + (\n            watcher.user\n              ? (\"in watcher with expression \\\"\" + (watcher.expression) + \"\\\"\")\n              : \"in a component render function.\"\n          ),\n          watcher.vm\n        );\n        break\n      }\n    }\n  }\n\n  // keep copies of post queues before resetting state\n  var activatedQueue = activatedChildren.slice();\n  var updatedQueue = queue.slice();\n\n  resetSchedulerState();\n\n  // call component updated and activated hooks\n  callActivatedHooks(activatedQueue);\n  callUpdatedHooks(updatedQueue);\n\n  // devtool hook\n  /* istanbul ignore if */\n  if (devtools && config.devtools) {\n    devtools.emit('flush');\n  }\n}\n\nfunction callUpdatedHooks (queue) {\n  var i = queue.length;\n  while (i--) {\n    var watcher = queue[i];\n    var vm = watcher.vm;\n    if (vm._watcher === watcher && vm._isMounted && !vm._isDestroyed) {\n      callHook(vm, 'updated');\n    }\n  }\n}\n\n/**\n * Queue a kept-alive component that was activated during patch.\n * The queue will be processed after the entire tree has been patched.\n */\nfunction queueActivatedComponent (vm) {\n  // setting _inactive to false here so that a render function can\n  // rely on checking whether it's in an inactive tree (e.g. router-view)\n  vm._inactive = false;\n  activatedChildren.push(vm);\n}\n\nfunction callActivatedHooks (queue) {\n  for (var i = 0; i < queue.length; i++) {\n    queue[i]._inactive = true;\n    activateChildComponent(queue[i], true /* true */);\n  }\n}\n\n/**\n * Push a watcher into the watcher queue.\n * Jobs with duplicate IDs will be skipped unless it's\n * pushed when the queue is being flushed.\n */\nfunction queueWatcher (watcher) {\n  var id = watcher.id;\n  if (has[id] == null) {\n    has[id] = true;\n    if (!flushing) {\n      queue.push(watcher);\n    } else {\n      // if already flushing, splice the watcher based on its id\n      // if already past its id, it will be run next immediately.\n      var i = queue.length - 1;\n      while (i > index && queue[i].id > watcher.id) {\n        i--;\n      }\n      queue.splice(i + 1, 0, watcher);\n    }\n    // queue the flush\n    if (!waiting) {\n      waiting = true;\n\n      if (process.env.NODE_ENV !== 'production' && !config.async) {\n        flushSchedulerQueue();\n        return\n      }\n      nextTick(flushSchedulerQueue);\n    }\n  }\n}\n\n/*  */\n\n\n\nvar uid$2 = 0;\n\n/**\n * A watcher parses an expression, collects dependencies,\n * and fires callback when the expression value changes.\n * This is used for both the $watch() api and directives.\n */\nvar Watcher = function Watcher (\n  vm,\n  expOrFn,\n  cb,\n  options,\n  isRenderWatcher\n) {\n  this.vm = vm;\n  if (isRenderWatcher) {\n    vm._watcher = this;\n  }\n  vm._watchers.push(this);\n  // options\n  if (options) {\n    this.deep = !!options.deep;\n    this.user = !!options.user;\n    this.lazy = !!options.lazy;\n    this.sync = !!options.sync;\n    this.before = options.before;\n  } else {\n    this.deep = this.user = this.lazy = this.sync = false;\n  }\n  this.cb = cb;\n  this.id = ++uid$2; // uid for batching\n  this.active = true;\n  this.dirty = this.lazy; // for lazy watchers\n  this.deps = [];\n  this.newDeps = [];\n  this.depIds = new _Set();\n  this.newDepIds = new _Set();\n  this.expression = process.env.NODE_ENV !== 'production'\n    ? expOrFn.toString()\n    : '';\n  // parse expression for getter\n  if (typeof expOrFn === 'function') {\n    this.getter = expOrFn;\n  } else {\n    this.getter = parsePath(expOrFn);\n    if (!this.getter) {\n      this.getter = noop;\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed watching path: \\\"\" + expOrFn + \"\\\" \" +\n        'Watcher only accepts simple dot-delimited paths. ' +\n        'For full control, use a function instead.',\n        vm\n      );\n    }\n  }\n  this.value = this.lazy\n    ? undefined\n    : this.get();\n};\n\n/**\n * Evaluate the getter, and re-collect dependencies.\n */\nWatcher.prototype.get = function get () {\n  pushTarget(this);\n  var value;\n  var vm = this.vm;\n  try {\n    value = this.getter.call(vm, vm);\n  } catch (e) {\n    if (this.user) {\n      handleError(e, vm, (\"getter for watcher \\\"\" + (this.expression) + \"\\\"\"));\n    } else {\n      throw e\n    }\n  } finally {\n    // \"touch\" every property so they are all tracked as\n    // dependencies for deep watching\n    if (this.deep) {\n      traverse(value);\n    }\n    popTarget();\n    this.cleanupDeps();\n  }\n  return value\n};\n\n/**\n * Add a dependency to this directive.\n */\nWatcher.prototype.addDep = function addDep (dep) {\n  var id = dep.id;\n  if (!this.newDepIds.has(id)) {\n    this.newDepIds.add(id);\n    this.newDeps.push(dep);\n    if (!this.depIds.has(id)) {\n      dep.addSub(this);\n    }\n  }\n};\n\n/**\n * Clean up for dependency collection.\n */\nWatcher.prototype.cleanupDeps = function cleanupDeps () {\n  var i = this.deps.length;\n  while (i--) {\n    var dep = this.deps[i];\n    if (!this.newDepIds.has(dep.id)) {\n      dep.removeSub(this);\n    }\n  }\n  var tmp = this.depIds;\n  this.depIds = this.newDepIds;\n  this.newDepIds = tmp;\n  this.newDepIds.clear();\n  tmp = this.deps;\n  this.deps = this.newDeps;\n  this.newDeps = tmp;\n  this.newDeps.length = 0;\n};\n\n/**\n * Subscriber interface.\n * Will be called when a dependency changes.\n */\nWatcher.prototype.update = function update () {\n  /* istanbul ignore else */\n  if (this.lazy) {\n    this.dirty = true;\n  } else if (this.sync) {\n    this.run();\n  } else {\n    queueWatcher(this);\n  }\n};\n\n/**\n * Scheduler job interface.\n * Will be called by the scheduler.\n */\nWatcher.prototype.run = function run () {\n  if (this.active) {\n    var value = this.get();\n    if (\n      value !== this.value ||\n      // Deep watchers and watchers on Object/Arrays should fire even\n      // when the value is the same, because the value may\n      // have mutated.\n      isObject(value) ||\n      this.deep\n    ) {\n      // set new value\n      var oldValue = this.value;\n      this.value = value;\n      if (this.user) {\n        try {\n          this.cb.call(this.vm, value, oldValue);\n        } catch (e) {\n          handleError(e, this.vm, (\"callback for watcher \\\"\" + (this.expression) + \"\\\"\"));\n        }\n      } else {\n        this.cb.call(this.vm, value, oldValue);\n      }\n    }\n  }\n};\n\n/**\n * Evaluate the value of the watcher.\n * This only gets called for lazy watchers.\n */\nWatcher.prototype.evaluate = function evaluate () {\n  this.value = this.get();\n  this.dirty = false;\n};\n\n/**\n * Depend on all deps collected by this watcher.\n */\nWatcher.prototype.depend = function depend () {\n  var i = this.deps.length;\n  while (i--) {\n    this.deps[i].depend();\n  }\n};\n\n/**\n * Remove self from all dependencies' subscriber list.\n */\nWatcher.prototype.teardown = function teardown () {\n  if (this.active) {\n    // remove self from vm's watcher list\n    // this is a somewhat expensive operation so we skip it\n    // if the vm is being destroyed.\n    if (!this.vm._isBeingDestroyed) {\n      remove(this.vm._watchers, this);\n    }\n    var i = this.deps.length;\n    while (i--) {\n      this.deps[i].removeSub(this);\n    }\n    this.active = false;\n  }\n};\n\n/*  */\n\nvar sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: noop,\n  set: noop\n};\n\nfunction proxy (target, sourceKey, key) {\n  sharedPropertyDefinition.get = function proxyGetter () {\n    return this[sourceKey][key]\n  };\n  sharedPropertyDefinition.set = function proxySetter (val) {\n    this[sourceKey][key] = val;\n  };\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction initState (vm) {\n  vm._watchers = [];\n  var opts = vm.$options;\n  if (opts.props) { initProps(vm, opts.props); }\n  if (opts.methods) { initMethods(vm, opts.methods); }\n  if (opts.data) {\n    initData(vm);\n  } else {\n    observe(vm._data = {}, true /* asRootData */);\n  }\n  if (opts.computed) { initComputed(vm, opts.computed); }\n  if (opts.watch && opts.watch !== nativeWatch) {\n    initWatch(vm, opts.watch);\n  }\n}\n\nfunction initProps (vm, propsOptions) {\n  var propsData = vm.$options.propsData || {};\n  var props = vm._props = {};\n  // cache prop keys so that future props updates can iterate using Array\n  // instead of dynamic object key enumeration.\n  var keys = vm.$options._propKeys = [];\n  var isRoot = !vm.$parent;\n  // root instance props should be converted\n  if (!isRoot) {\n    toggleObserving(false);\n  }\n  var loop = function ( key ) {\n    keys.push(key);\n    var value = validateProp(key, propsOptions, propsData, vm);\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      var hyphenatedKey = hyphenate(key);\n      if (isReservedAttribute(hyphenatedKey) ||\n          config.isReservedAttr(hyphenatedKey)) {\n        warn(\n          (\"\\\"\" + hyphenatedKey + \"\\\" is a reserved attribute and cannot be used as component prop.\"),\n          vm\n        );\n      }\n      defineReactive$$1(props, key, value, function () {\n        if (!isRoot && !isUpdatingChildComponent) {\n          warn(\n            \"Avoid mutating a prop directly since the value will be \" +\n            \"overwritten whenever the parent component re-renders. \" +\n            \"Instead, use a data or computed property based on the prop's \" +\n            \"value. Prop being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        }\n      });\n    } else {\n      defineReactive$$1(props, key, value);\n    }\n    // static props are already proxied on the component's prototype\n    // during Vue.extend(). We only need to proxy props defined at\n    // instantiation here.\n    if (!(key in vm)) {\n      proxy(vm, \"_props\", key);\n    }\n  };\n\n  for (var key in propsOptions) loop( key );\n  toggleObserving(true);\n}\n\nfunction initData (vm) {\n  var data = vm.$options.data;\n  data = vm._data = typeof data === 'function'\n    ? getData(data, vm)\n    : data || {};\n  if (!isPlainObject(data)) {\n    data = {};\n    process.env.NODE_ENV !== 'production' && warn(\n      'data functions should return an object:\\n' +\n      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\n      vm\n    );\n  }\n  // proxy data on instance\n  var keys = Object.keys(data);\n  var props = vm.$options.props;\n  var methods = vm.$options.methods;\n  var i = keys.length;\n  while (i--) {\n    var key = keys[i];\n    if (process.env.NODE_ENV !== 'production') {\n      if (methods && hasOwn(methods, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a data property.\"),\n          vm\n        );\n      }\n    }\n    if (props && hasOwn(props, key)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"The data property \\\"\" + key + \"\\\" is already declared as a prop. \" +\n        \"Use prop default value instead.\",\n        vm\n      );\n    } else if (!isReserved(key)) {\n      proxy(vm, \"_data\", key);\n    }\n  }\n  // observe data\n  observe(data, true /* asRootData */);\n}\n\nfunction getData (data, vm) {\n  // #7573 disable dep collection when invoking data getters\n  pushTarget();\n  try {\n    return data.call(vm, vm)\n  } catch (e) {\n    handleError(e, vm, \"data()\");\n    return {}\n  } finally {\n    popTarget();\n  }\n}\n\nvar computedWatcherOptions = { lazy: true };\n\nfunction initComputed (vm, computed) {\n  // $flow-disable-line\n  var watchers = vm._computedWatchers = Object.create(null);\n  // computed properties are just getters during SSR\n  var isSSR = isServerRendering();\n\n  for (var key in computed) {\n    var userDef = computed[key];\n    var getter = typeof userDef === 'function' ? userDef : userDef.get;\n    if (process.env.NODE_ENV !== 'production' && getter == null) {\n      warn(\n        (\"Getter is missing for computed property \\\"\" + key + \"\\\".\"),\n        vm\n      );\n    }\n\n    if (!isSSR) {\n      // create internal watcher for the computed property.\n      watchers[key] = new Watcher(\n        vm,\n        getter || noop,\n        noop,\n        computedWatcherOptions\n      );\n    }\n\n    // component-defined computed properties are already defined on the\n    // component prototype. We only need to define computed properties defined\n    // at instantiation here.\n    if (!(key in vm)) {\n      defineComputed(vm, key, userDef);\n    } else if (process.env.NODE_ENV !== 'production') {\n      if (key in vm.$data) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined in data.\"), vm);\n      } else if (vm.$options.props && key in vm.$options.props) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a prop.\"), vm);\n      }\n    }\n  }\n}\n\nfunction defineComputed (\n  target,\n  key,\n  userDef\n) {\n  var shouldCache = !isServerRendering();\n  if (typeof userDef === 'function') {\n    sharedPropertyDefinition.get = shouldCache\n      ? createComputedGetter(key)\n      : createGetterInvoker(userDef);\n    sharedPropertyDefinition.set = noop;\n  } else {\n    sharedPropertyDefinition.get = userDef.get\n      ? shouldCache && userDef.cache !== false\n        ? createComputedGetter(key)\n        : createGetterInvoker(userDef.get)\n      : noop;\n    sharedPropertyDefinition.set = userDef.set || noop;\n  }\n  if (process.env.NODE_ENV !== 'production' &&\n      sharedPropertyDefinition.set === noop) {\n    sharedPropertyDefinition.set = function () {\n      warn(\n        (\"Computed property \\\"\" + key + \"\\\" was assigned to but it has no setter.\"),\n        this\n      );\n    };\n  }\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction createComputedGetter (key) {\n  return function computedGetter () {\n    var watcher = this._computedWatchers && this._computedWatchers[key];\n    if (watcher) {\n      if (watcher.dirty) {\n        watcher.evaluate();\n      }\n      if (Dep.target) {\n        watcher.depend();\n      }\n      return watcher.value\n    }\n  }\n}\n\nfunction createGetterInvoker(fn) {\n  return function computedGetter () {\n    return fn.call(this, this)\n  }\n}\n\nfunction initMethods (vm, methods) {\n  var props = vm.$options.props;\n  for (var key in methods) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof methods[key] !== 'function') {\n        warn(\n          \"Method \\\"\" + key + \"\\\" has type \\\"\" + (typeof methods[key]) + \"\\\" in the component definition. \" +\n          \"Did you reference the function correctly?\",\n          vm\n        );\n      }\n      if (props && hasOwn(props, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a prop.\"),\n          vm\n        );\n      }\n      if ((key in vm) && isReserved(key)) {\n        warn(\n          \"Method \\\"\" + key + \"\\\" conflicts with an existing Vue instance method. \" +\n          \"Avoid defining component methods that start with _ or $.\"\n        );\n      }\n    }\n    vm[key] = typeof methods[key] !== 'function' ? noop : bind(methods[key], vm);\n  }\n}\n\nfunction initWatch (vm, watch) {\n  for (var key in watch) {\n    var handler = watch[key];\n    if (Array.isArray(handler)) {\n      for (var i = 0; i < handler.length; i++) {\n        createWatcher(vm, key, handler[i]);\n      }\n    } else {\n      createWatcher(vm, key, handler);\n    }\n  }\n}\n\nfunction createWatcher (\n  vm,\n  expOrFn,\n  handler,\n  options\n) {\n  if (isPlainObject(handler)) {\n    options = handler;\n    handler = handler.handler;\n  }\n  if (typeof handler === 'string') {\n    handler = vm[handler];\n  }\n  return vm.$watch(expOrFn, handler, options)\n}\n\nfunction stateMixin (Vue) {\n  // flow somehow has problems with directly declared definition object\n  // when using Object.defineProperty, so we have to procedurally build up\n  // the object here.\n  var dataDef = {};\n  dataDef.get = function () { return this._data };\n  var propsDef = {};\n  propsDef.get = function () { return this._props };\n  if (process.env.NODE_ENV !== 'production') {\n    dataDef.set = function () {\n      warn(\n        'Avoid replacing instance root $data. ' +\n        'Use nested data properties instead.',\n        this\n      );\n    };\n    propsDef.set = function () {\n      warn(\"$props is readonly.\", this);\n    };\n  }\n  Object.defineProperty(Vue.prototype, '$data', dataDef);\n  Object.defineProperty(Vue.prototype, '$props', propsDef);\n\n  Vue.prototype.$set = set;\n  Vue.prototype.$delete = del;\n\n  Vue.prototype.$watch = function (\n    expOrFn,\n    cb,\n    options\n  ) {\n    var vm = this;\n    if (isPlainObject(cb)) {\n      return createWatcher(vm, expOrFn, cb, options)\n    }\n    options = options || {};\n    options.user = true;\n    var watcher = new Watcher(vm, expOrFn, cb, options);\n    if (options.immediate) {\n      try {\n        cb.call(vm, watcher.value);\n      } catch (error) {\n        handleError(error, vm, (\"callback for immediate watcher \\\"\" + (watcher.expression) + \"\\\"\"));\n      }\n    }\n    return function unwatchFn () {\n      watcher.teardown();\n    }\n  };\n}\n\n/*  */\n\nvar uid$3 = 0;\n\nfunction initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    var vm = this;\n    // a uid\n    vm._uid = uid$3++;\n\n    var startTag, endTag;\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      startTag = \"vue-perf-start:\" + (vm._uid);\n      endTag = \"vue-perf-end:\" + (vm._uid);\n      mark(startTag);\n    }\n\n    // a flag to avoid this being observed\n    vm._isVue = true;\n    // merge options\n    if (options && options._isComponent) {\n      // optimize internal component instantiation\n      // since dynamic options merging is pretty slow, and none of the\n      // internal component options needs special treatment.\n      initInternalComponent(vm, options);\n    } else {\n      vm.$options = mergeOptions(\n        resolveConstructorOptions(vm.constructor),\n        options || {},\n        vm\n      );\n    }\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      initProxy(vm);\n    } else {\n      vm._renderProxy = vm;\n    }\n    // expose real self\n    vm._self = vm;\n    initLifecycle(vm);\n    initEvents(vm);\n    initRender(vm);\n    callHook(vm, 'beforeCreate');\n    initInjections(vm); // resolve injections before data/props\n    initState(vm);\n    initProvide(vm); // resolve provide after data/props\n    callHook(vm, 'created');\n\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      vm._name = formatComponentName(vm, false);\n      mark(endTag);\n      measure((\"vue \" + (vm._name) + \" init\"), startTag, endTag);\n    }\n\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n}\n\nfunction initInternalComponent (vm, options) {\n  var opts = vm.$options = Object.create(vm.constructor.options);\n  // doing this because it's faster than dynamic enumeration.\n  var parentVnode = options._parentVnode;\n  opts.parent = options.parent;\n  opts._parentVnode = parentVnode;\n\n  var vnodeComponentOptions = parentVnode.componentOptions;\n  opts.propsData = vnodeComponentOptions.propsData;\n  opts._parentListeners = vnodeComponentOptions.listeners;\n  opts._renderChildren = vnodeComponentOptions.children;\n  opts._componentTag = vnodeComponentOptions.tag;\n\n  if (options.render) {\n    opts.render = options.render;\n    opts.staticRenderFns = options.staticRenderFns;\n  }\n}\n\nfunction resolveConstructorOptions (Ctor) {\n  var options = Ctor.options;\n  if (Ctor.super) {\n    var superOptions = resolveConstructorOptions(Ctor.super);\n    var cachedSuperOptions = Ctor.superOptions;\n    if (superOptions !== cachedSuperOptions) {\n      // super option changed,\n      // need to resolve new options.\n      Ctor.superOptions = superOptions;\n      // check if there are any late-modified/attached options (#4976)\n      var modifiedOptions = resolveModifiedOptions(Ctor);\n      // update base extend options\n      if (modifiedOptions) {\n        extend(Ctor.extendOptions, modifiedOptions);\n      }\n      options = Ctor.options = mergeOptions(superOptions, Ctor.extendOptions);\n      if (options.name) {\n        options.components[options.name] = Ctor;\n      }\n    }\n  }\n  return options\n}\n\nfunction resolveModifiedOptions (Ctor) {\n  var modified;\n  var latest = Ctor.options;\n  var sealed = Ctor.sealedOptions;\n  for (var key in latest) {\n    if (latest[key] !== sealed[key]) {\n      if (!modified) { modified = {}; }\n      modified[key] = latest[key];\n    }\n  }\n  return modified\n}\n\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)\n  ) {\n    warn('Vue is a constructor and should be called with the `new` keyword');\n  }\n  this._init(options);\n}\n\ninitMixin(Vue);\nstateMixin(Vue);\neventsMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\n\n/*  */\n\nfunction initUse (Vue) {\n  Vue.use = function (plugin) {\n    var installedPlugins = (this._installedPlugins || (this._installedPlugins = []));\n    if (installedPlugins.indexOf(plugin) > -1) {\n      return this\n    }\n\n    // additional parameters\n    var args = toArray(arguments, 1);\n    args.unshift(this);\n    if (typeof plugin.install === 'function') {\n      plugin.install.apply(plugin, args);\n    } else if (typeof plugin === 'function') {\n      plugin.apply(null, args);\n    }\n    installedPlugins.push(plugin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initMixin$1 (Vue) {\n  Vue.mixin = function (mixin) {\n    this.options = mergeOptions(this.options, mixin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initExtend (Vue) {\n  /**\n   * Each instance constructor, including Vue, has a unique\n   * cid. This enables us to create wrapped \"child\n   * constructors\" for prototypal inheritance and cache them.\n   */\n  Vue.cid = 0;\n  var cid = 1;\n\n  /**\n   * Class inheritance\n   */\n  Vue.extend = function (extendOptions) {\n    extendOptions = extendOptions || {};\n    var Super = this;\n    var SuperId = Super.cid;\n    var cachedCtors = extendOptions._Ctor || (extendOptions._Ctor = {});\n    if (cachedCtors[SuperId]) {\n      return cachedCtors[SuperId]\n    }\n\n    var name = extendOptions.name || Super.options.name;\n    if (process.env.NODE_ENV !== 'production' && name) {\n      validateComponentName(name);\n    }\n\n    var Sub = function VueComponent (options) {\n      this._init(options);\n    };\n    Sub.prototype = Object.create(Super.prototype);\n    Sub.prototype.constructor = Sub;\n    Sub.cid = cid++;\n    Sub.options = mergeOptions(\n      Super.options,\n      extendOptions\n    );\n    Sub['super'] = Super;\n\n    // For props and computed properties, we define the proxy getters on\n    // the Vue instances at extension time, on the extended prototype. This\n    // avoids Object.defineProperty calls for each instance created.\n    if (Sub.options.props) {\n      initProps$1(Sub);\n    }\n    if (Sub.options.computed) {\n      initComputed$1(Sub);\n    }\n\n    // allow further extension/mixin/plugin usage\n    Sub.extend = Super.extend;\n    Sub.mixin = Super.mixin;\n    Sub.use = Super.use;\n\n    // create asset registers, so extended classes\n    // can have their private assets too.\n    ASSET_TYPES.forEach(function (type) {\n      Sub[type] = Super[type];\n    });\n    // enable recursive self-lookup\n    if (name) {\n      Sub.options.components[name] = Sub;\n    }\n\n    // keep a reference to the super options at extension time.\n    // later at instantiation we can check if Super's options have\n    // been updated.\n    Sub.superOptions = Super.options;\n    Sub.extendOptions = extendOptions;\n    Sub.sealedOptions = extend({}, Sub.options);\n\n    // cache constructor\n    cachedCtors[SuperId] = Sub;\n    return Sub\n  };\n}\n\nfunction initProps$1 (Comp) {\n  var props = Comp.options.props;\n  for (var key in props) {\n    proxy(Comp.prototype, \"_props\", key);\n  }\n}\n\nfunction initComputed$1 (Comp) {\n  var computed = Comp.options.computed;\n  for (var key in computed) {\n    defineComputed(Comp.prototype, key, computed[key]);\n  }\n}\n\n/*  */\n\nfunction initAssetRegisters (Vue) {\n  /**\n   * Create asset registration methods.\n   */\n  ASSET_TYPES.forEach(function (type) {\n    Vue[type] = function (\n      id,\n      definition\n    ) {\n      if (!definition) {\n        return this.options[type + 's'][id]\n      } else {\n        /* istanbul ignore if */\n        if (process.env.NODE_ENV !== 'production' && type === 'component') {\n          validateComponentName(id);\n        }\n        if (type === 'component' && isPlainObject(definition)) {\n          definition.name = definition.name || id;\n          definition = this.options._base.extend(definition);\n        }\n        if (type === 'directive' && typeof definition === 'function') {\n          definition = { bind: definition, update: definition };\n        }\n        this.options[type + 's'][id] = definition;\n        return definition\n      }\n    };\n  });\n}\n\n/*  */\n\n\n\nfunction getComponentName (opts) {\n  return opts && (opts.Ctor.options.name || opts.tag)\n}\n\nfunction matches (pattern, name) {\n  if (Array.isArray(pattern)) {\n    return pattern.indexOf(name) > -1\n  } else if (typeof pattern === 'string') {\n    return pattern.split(',').indexOf(name) > -1\n  } else if (isRegExp(pattern)) {\n    return pattern.test(name)\n  }\n  /* istanbul ignore next */\n  return false\n}\n\nfunction pruneCache (keepAliveInstance, filter) {\n  var cache = keepAliveInstance.cache;\n  var keys = keepAliveInstance.keys;\n  var _vnode = keepAliveInstance._vnode;\n  for (var key in cache) {\n    var cachedNode = cache[key];\n    if (cachedNode) {\n      var name = getComponentName(cachedNode.componentOptions);\n      if (name && !filter(name)) {\n        pruneCacheEntry(cache, key, keys, _vnode);\n      }\n    }\n  }\n}\n\nfunction pruneCacheEntry (\n  cache,\n  key,\n  keys,\n  current\n) {\n  var cached$$1 = cache[key];\n  if (cached$$1 && (!current || cached$$1.tag !== current.tag)) {\n    cached$$1.componentInstance.$destroy();\n  }\n  cache[key] = null;\n  remove(keys, key);\n}\n\nvar patternTypes = [String, RegExp, Array];\n\nvar KeepAlive = {\n  name: 'keep-alive',\n  abstract: true,\n\n  props: {\n    include: patternTypes,\n    exclude: patternTypes,\n    max: [String, Number]\n  },\n\n  created: function created () {\n    this.cache = Object.create(null);\n    this.keys = [];\n  },\n\n  destroyed: function destroyed () {\n    for (var key in this.cache) {\n      pruneCacheEntry(this.cache, key, this.keys);\n    }\n  },\n\n  mounted: function mounted () {\n    var this$1 = this;\n\n    this.$watch('include', function (val) {\n      pruneCache(this$1, function (name) { return matches(val, name); });\n    });\n    this.$watch('exclude', function (val) {\n      pruneCache(this$1, function (name) { return !matches(val, name); });\n    });\n  },\n\n  render: function render () {\n    var slot = this.$slots.default;\n    var vnode = getFirstComponentChild(slot);\n    var componentOptions = vnode && vnode.componentOptions;\n    if (componentOptions) {\n      // check pattern\n      var name = getComponentName(componentOptions);\n      var ref = this;\n      var include = ref.include;\n      var exclude = ref.exclude;\n      if (\n        // not included\n        (include && (!name || !matches(include, name))) ||\n        // excluded\n        (exclude && name && matches(exclude, name))\n      ) {\n        return vnode\n      }\n\n      var ref$1 = this;\n      var cache = ref$1.cache;\n      var keys = ref$1.keys;\n      var key = vnode.key == null\n        // same constructor may get registered as different local components\n        // so cid alone is not enough (#3269)\n        ? componentOptions.Ctor.cid + (componentOptions.tag ? (\"::\" + (componentOptions.tag)) : '')\n        : vnode.key;\n      if (cache[key]) {\n        vnode.componentInstance = cache[key].componentInstance;\n        // make current key freshest\n        remove(keys, key);\n        keys.push(key);\n      } else {\n        cache[key] = vnode;\n        keys.push(key);\n        // prune oldest entry\n        if (this.max && keys.length > parseInt(this.max)) {\n          pruneCacheEntry(cache, keys[0], keys, this._vnode);\n        }\n      }\n\n      vnode.data.keepAlive = true;\n    }\n    return vnode || (slot && slot[0])\n  }\n};\n\nvar builtInComponents = {\n  KeepAlive: KeepAlive\n};\n\n/*  */\n\nfunction initGlobalAPI (Vue) {\n  // config\n  var configDef = {};\n  configDef.get = function () { return config; };\n  if (process.env.NODE_ENV !== 'production') {\n    configDef.set = function () {\n      warn(\n        'Do not replace the Vue.config object, set individual fields instead.'\n      );\n    };\n  }\n  Object.defineProperty(Vue, 'config', configDef);\n\n  // exposed util methods.\n  // NOTE: these are not considered part of the public API - avoid relying on\n  // them unless you are aware of the risk.\n  Vue.util = {\n    warn: warn,\n    extend: extend,\n    mergeOptions: mergeOptions,\n    defineReactive: defineReactive$$1\n  };\n\n  Vue.set = set;\n  Vue.delete = del;\n  Vue.nextTick = nextTick;\n\n  // 2.6 explicit observable API\n  Vue.observable = function (obj) {\n    observe(obj);\n    return obj\n  };\n\n  Vue.options = Object.create(null);\n  ASSET_TYPES.forEach(function (type) {\n    Vue.options[type + 's'] = Object.create(null);\n  });\n\n  // this is used to identify the \"base\" constructor to extend all plain-object\n  // components with in Weex's multi-instance scenarios.\n  Vue.options._base = Vue;\n\n  extend(Vue.options.components, builtInComponents);\n\n  initUse(Vue);\n  initMixin$1(Vue);\n  initExtend(Vue);\n  initAssetRegisters(Vue);\n}\n\ninitGlobalAPI(Vue);\n\nObject.defineProperty(Vue.prototype, '$isServer', {\n  get: isServerRendering\n});\n\nObject.defineProperty(Vue.prototype, '$ssrContext', {\n  get: function get () {\n    /* istanbul ignore next */\n    return this.$vnode && this.$vnode.ssrContext\n  }\n});\n\n// expose FunctionalRenderContext for ssr runtime helper installation\nObject.defineProperty(Vue, 'FunctionalRenderContext', {\n  value: FunctionalRenderContext\n});\n\nVue.version = '2.6.10';\n\n/*  */\n\n// these are reserved for web because they are directly compiled away\n// during template compilation\nvar isReservedAttr = makeMap('style,class');\n\n// attributes that should be using props for binding\nvar acceptValue = makeMap('input,textarea,option,select,progress');\nvar mustUseProp = function (tag, type, attr) {\n  return (\n    (attr === 'value' && acceptValue(tag)) && type !== 'button' ||\n    (attr === 'selected' && tag === 'option') ||\n    (attr === 'checked' && tag === 'input') ||\n    (attr === 'muted' && tag === 'video')\n  )\n};\n\nvar isEnumeratedAttr = makeMap('contenteditable,draggable,spellcheck');\n\nvar isValidContentEditableValue = makeMap('events,caret,typing,plaintext-only');\n\nvar convertEnumeratedValue = function (key, value) {\n  return isFalsyAttrValue(value) || value === 'false'\n    ? 'false'\n    // allow arbitrary string value for contenteditable\n    : key === 'contenteditable' && isValidContentEditableValue(value)\n      ? value\n      : 'true'\n};\n\nvar isBooleanAttr = makeMap(\n  'allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,' +\n  'default,defaultchecked,defaultmuted,defaultselected,defer,disabled,' +\n  'enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,' +\n  'muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,' +\n  'required,reversed,scoped,seamless,selected,sortable,translate,' +\n  'truespeed,typemustmatch,visible'\n);\n\nvar xlinkNS = 'http://www.w3.org/1999/xlink';\n\nvar isXlink = function (name) {\n  return name.charAt(5) === ':' && name.slice(0, 5) === 'xlink'\n};\n\nvar getXlinkProp = function (name) {\n  return isXlink(name) ? name.slice(6, name.length) : ''\n};\n\nvar isFalsyAttrValue = function (val) {\n  return val == null || val === false\n};\n\n/*  */\n\nfunction genClassForVnode (vnode) {\n  var data = vnode.data;\n  var parentNode = vnode;\n  var childNode = vnode;\n  while (isDef(childNode.componentInstance)) {\n    childNode = childNode.componentInstance._vnode;\n    if (childNode && childNode.data) {\n      data = mergeClassData(childNode.data, data);\n    }\n  }\n  while (isDef(parentNode = parentNode.parent)) {\n    if (parentNode && parentNode.data) {\n      data = mergeClassData(data, parentNode.data);\n    }\n  }\n  return renderClass(data.staticClass, data.class)\n}\n\nfunction mergeClassData (child, parent) {\n  return {\n    staticClass: concat(child.staticClass, parent.staticClass),\n    class: isDef(child.class)\n      ? [child.class, parent.class]\n      : parent.class\n  }\n}\n\nfunction renderClass (\n  staticClass,\n  dynamicClass\n) {\n  if (isDef(staticClass) || isDef(dynamicClass)) {\n    return concat(staticClass, stringifyClass(dynamicClass))\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction concat (a, b) {\n  return a ? b ? (a + ' ' + b) : a : (b || '')\n}\n\nfunction stringifyClass (value) {\n  if (Array.isArray(value)) {\n    return stringifyArray(value)\n  }\n  if (isObject(value)) {\n    return stringifyObject(value)\n  }\n  if (typeof value === 'string') {\n    return value\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction stringifyArray (value) {\n  var res = '';\n  var stringified;\n  for (var i = 0, l = value.length; i < l; i++) {\n    if (isDef(stringified = stringifyClass(value[i])) && stringified !== '') {\n      if (res) { res += ' '; }\n      res += stringified;\n    }\n  }\n  return res\n}\n\nfunction stringifyObject (value) {\n  var res = '';\n  for (var key in value) {\n    if (value[key]) {\n      if (res) { res += ' '; }\n      res += key;\n    }\n  }\n  return res\n}\n\n/*  */\n\nvar namespaceMap = {\n  svg: 'http://www.w3.org/2000/svg',\n  math: 'http://www.w3.org/1998/Math/MathML'\n};\n\nvar isHTMLTag = makeMap(\n  'html,body,base,head,link,meta,style,title,' +\n  'address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,' +\n  'div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,' +\n  'a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,' +\n  's,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,' +\n  'embed,object,param,source,canvas,script,noscript,del,ins,' +\n  'caption,col,colgroup,table,thead,tbody,td,th,tr,' +\n  'button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,' +\n  'output,progress,select,textarea,' +\n  'details,dialog,menu,menuitem,summary,' +\n  'content,element,shadow,template,blockquote,iframe,tfoot'\n);\n\n// this map is intentionally selective, only covering SVG elements that may\n// contain child elements.\nvar isSVG = makeMap(\n  'svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,' +\n  'foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,' +\n  'polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view',\n  true\n);\n\nvar isReservedTag = function (tag) {\n  return isHTMLTag(tag) || isSVG(tag)\n};\n\nfunction getTagNamespace (tag) {\n  if (isSVG(tag)) {\n    return 'svg'\n  }\n  // basic support for MathML\n  // note it doesn't support other MathML elements being component roots\n  if (tag === 'math') {\n    return 'math'\n  }\n}\n\nvar unknownElementCache = Object.create(null);\nfunction isUnknownElement (tag) {\n  /* istanbul ignore if */\n  if (!inBrowser) {\n    return true\n  }\n  if (isReservedTag(tag)) {\n    return false\n  }\n  tag = tag.toLowerCase();\n  /* istanbul ignore if */\n  if (unknownElementCache[tag] != null) {\n    return unknownElementCache[tag]\n  }\n  var el = document.createElement(tag);\n  if (tag.indexOf('-') > -1) {\n    // http://stackoverflow.com/a/28210364/1070244\n    return (unknownElementCache[tag] = (\n      el.constructor === window.HTMLUnknownElement ||\n      el.constructor === window.HTMLElement\n    ))\n  } else {\n    return (unknownElementCache[tag] = /HTMLUnknownElement/.test(el.toString()))\n  }\n}\n\nvar isTextInputType = makeMap('text,number,password,search,email,tel,url');\n\n/*  */\n\n/**\n * Query an element selector if it's not an element already.\n */\nfunction query (el) {\n  if (typeof el === 'string') {\n    var selected = document.querySelector(el);\n    if (!selected) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'Cannot find element: ' + el\n      );\n      return document.createElement('div')\n    }\n    return selected\n  } else {\n    return el\n  }\n}\n\n/*  */\n\nfunction createElement$1 (tagName, vnode) {\n  var elm = document.createElement(tagName);\n  if (tagName !== 'select') {\n    return elm\n  }\n  // false or null will remove the attribute but undefined will not\n  if (vnode.data && vnode.data.attrs && vnode.data.attrs.multiple !== undefined) {\n    elm.setAttribute('multiple', 'multiple');\n  }\n  return elm\n}\n\nfunction createElementNS (namespace, tagName) {\n  return document.createElementNS(namespaceMap[namespace], tagName)\n}\n\nfunction createTextNode (text) {\n  return document.createTextNode(text)\n}\n\nfunction createComment (text) {\n  return document.createComment(text)\n}\n\nfunction insertBefore (parentNode, newNode, referenceNode) {\n  parentNode.insertBefore(newNode, referenceNode);\n}\n\nfunction removeChild (node, child) {\n  node.removeChild(child);\n}\n\nfunction appendChild (node, child) {\n  node.appendChild(child);\n}\n\nfunction parentNode (node) {\n  return node.parentNode\n}\n\nfunction nextSibling (node) {\n  return node.nextSibling\n}\n\nfunction tagName (node) {\n  return node.tagName\n}\n\nfunction setTextContent (node, text) {\n  node.textContent = text;\n}\n\nfunction setStyleScope (node, scopeId) {\n  node.setAttribute(scopeId, '');\n}\n\nvar nodeOps = /*#__PURE__*/Object.freeze({\n  createElement: createElement$1,\n  createElementNS: createElementNS,\n  createTextNode: createTextNode,\n  createComment: createComment,\n  insertBefore: insertBefore,\n  removeChild: removeChild,\n  appendChild: appendChild,\n  parentNode: parentNode,\n  nextSibling: nextSibling,\n  tagName: tagName,\n  setTextContent: setTextContent,\n  setStyleScope: setStyleScope\n});\n\n/*  */\n\nvar ref = {\n  create: function create (_, vnode) {\n    registerRef(vnode);\n  },\n  update: function update (oldVnode, vnode) {\n    if (oldVnode.data.ref !== vnode.data.ref) {\n      registerRef(oldVnode, true);\n      registerRef(vnode);\n    }\n  },\n  destroy: function destroy (vnode) {\n    registerRef(vnode, true);\n  }\n};\n\nfunction registerRef (vnode, isRemoval) {\n  var key = vnode.data.ref;\n  if (!isDef(key)) { return }\n\n  var vm = vnode.context;\n  var ref = vnode.componentInstance || vnode.elm;\n  var refs = vm.$refs;\n  if (isRemoval) {\n    if (Array.isArray(refs[key])) {\n      remove(refs[key], ref);\n    } else if (refs[key] === ref) {\n      refs[key] = undefined;\n    }\n  } else {\n    if (vnode.data.refInFor) {\n      if (!Array.isArray(refs[key])) {\n        refs[key] = [ref];\n      } else if (refs[key].indexOf(ref) < 0) {\n        // $flow-disable-line\n        refs[key].push(ref);\n      }\n    } else {\n      refs[key] = ref;\n    }\n  }\n}\n\n/**\n * Virtual DOM patching algorithm based on Snabbdom by\n * Simon Friis Vindum (@paldepind)\n * Licensed under the MIT License\n * https://github.com/paldepind/snabbdom/blob/master/LICENSE\n *\n * modified by Evan You (@yyx990803)\n *\n * Not type-checking this because this file is perf-critical and the cost\n * of making flow understand it is not worth it.\n */\n\nvar emptyNode = new VNode('', {}, []);\n\nvar hooks = ['create', 'activate', 'update', 'remove', 'destroy'];\n\nfunction sameVnode (a, b) {\n  return (\n    a.key === b.key && (\n      (\n        a.tag === b.tag &&\n        a.isComment === b.isComment &&\n        isDef(a.data) === isDef(b.data) &&\n        sameInputType(a, b)\n      ) || (\n        isTrue(a.isAsyncPlaceholder) &&\n        a.asyncFactory === b.asyncFactory &&\n        isUndef(b.asyncFactory.error)\n      )\n    )\n  )\n}\n\nfunction sameInputType (a, b) {\n  if (a.tag !== 'input') { return true }\n  var i;\n  var typeA = isDef(i = a.data) && isDef(i = i.attrs) && i.type;\n  var typeB = isDef(i = b.data) && isDef(i = i.attrs) && i.type;\n  return typeA === typeB || isTextInputType(typeA) && isTextInputType(typeB)\n}\n\nfunction createKeyToOldIdx (children, beginIdx, endIdx) {\n  var i, key;\n  var map = {};\n  for (i = beginIdx; i <= endIdx; ++i) {\n    key = children[i].key;\n    if (isDef(key)) { map[key] = i; }\n  }\n  return map\n}\n\nfunction createPatchFunction (backend) {\n  var i, j;\n  var cbs = {};\n\n  var modules = backend.modules;\n  var nodeOps = backend.nodeOps;\n\n  for (i = 0; i < hooks.length; ++i) {\n    cbs[hooks[i]] = [];\n    for (j = 0; j < modules.length; ++j) {\n      if (isDef(modules[j][hooks[i]])) {\n        cbs[hooks[i]].push(modules[j][hooks[i]]);\n      }\n    }\n  }\n\n  function emptyNodeAt (elm) {\n    return new VNode(nodeOps.tagName(elm).toLowerCase(), {}, [], undefined, elm)\n  }\n\n  function createRmCb (childElm, listeners) {\n    function remove$$1 () {\n      if (--remove$$1.listeners === 0) {\n        removeNode(childElm);\n      }\n    }\n    remove$$1.listeners = listeners;\n    return remove$$1\n  }\n\n  function removeNode (el) {\n    var parent = nodeOps.parentNode(el);\n    // element may have already been removed due to v-html / v-text\n    if (isDef(parent)) {\n      nodeOps.removeChild(parent, el);\n    }\n  }\n\n  function isUnknownElement$$1 (vnode, inVPre) {\n    return (\n      !inVPre &&\n      !vnode.ns &&\n      !(\n        config.ignoredElements.length &&\n        config.ignoredElements.some(function (ignore) {\n          return isRegExp(ignore)\n            ? ignore.test(vnode.tag)\n            : ignore === vnode.tag\n        })\n      ) &&\n      config.isUnknownElement(vnode.tag)\n    )\n  }\n\n  var creatingElmInVPre = 0;\n\n  function createElm (\n    vnode,\n    insertedVnodeQueue,\n    parentElm,\n    refElm,\n    nested,\n    ownerArray,\n    index\n  ) {\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n      // This vnode was used in a previous render!\n      // now it's used as a new node, overwriting its elm would cause\n      // potential patch errors down the road when it's used as an insertion\n      // reference node. Instead, we clone the node on-demand before creating\n      // associated DOM element for it.\n      vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    vnode.isRootInsert = !nested; // for transition enter check\n    if (createComponent(vnode, insertedVnodeQueue, parentElm, refElm)) {\n      return\n    }\n\n    var data = vnode.data;\n    var children = vnode.children;\n    var tag = vnode.tag;\n    if (isDef(tag)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (data && data.pre) {\n          creatingElmInVPre++;\n        }\n        if (isUnknownElement$$1(vnode, creatingElmInVPre)) {\n          warn(\n            'Unknown custom element: <' + tag + '> - did you ' +\n            'register the component correctly? For recursive components, ' +\n            'make sure to provide the \"name\" option.',\n            vnode.context\n          );\n        }\n      }\n\n      vnode.elm = vnode.ns\n        ? nodeOps.createElementNS(vnode.ns, tag)\n        : nodeOps.createElement(tag, vnode);\n      setScope(vnode);\n\n      /* istanbul ignore if */\n      {\n        createChildren(vnode, children, insertedVnodeQueue);\n        if (isDef(data)) {\n          invokeCreateHooks(vnode, insertedVnodeQueue);\n        }\n        insert(parentElm, vnode.elm, refElm);\n      }\n\n      if (process.env.NODE_ENV !== 'production' && data && data.pre) {\n        creatingElmInVPre--;\n      }\n    } else if (isTrue(vnode.isComment)) {\n      vnode.elm = nodeOps.createComment(vnode.text);\n      insert(parentElm, vnode.elm, refElm);\n    } else {\n      vnode.elm = nodeOps.createTextNode(vnode.text);\n      insert(parentElm, vnode.elm, refElm);\n    }\n  }\n\n  function createComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i = vnode.data;\n    if (isDef(i)) {\n      var isReactivated = isDef(vnode.componentInstance) && i.keepAlive;\n      if (isDef(i = i.hook) && isDef(i = i.init)) {\n        i(vnode, false /* hydrating */);\n      }\n      // after calling the init hook, if the vnode is a child component\n      // it should've created a child instance and mounted it. the child\n      // component also has set the placeholder vnode's elm.\n      // in that case we can just return the element and be done.\n      if (isDef(vnode.componentInstance)) {\n        initComponent(vnode, insertedVnodeQueue);\n        insert(parentElm, vnode.elm, refElm);\n        if (isTrue(isReactivated)) {\n          reactivateComponent(vnode, insertedVnodeQueue, parentElm, refElm);\n        }\n        return true\n      }\n    }\n  }\n\n  function initComponent (vnode, insertedVnodeQueue) {\n    if (isDef(vnode.data.pendingInsert)) {\n      insertedVnodeQueue.push.apply(insertedVnodeQueue, vnode.data.pendingInsert);\n      vnode.data.pendingInsert = null;\n    }\n    vnode.elm = vnode.componentInstance.$el;\n    if (isPatchable(vnode)) {\n      invokeCreateHooks(vnode, insertedVnodeQueue);\n      setScope(vnode);\n    } else {\n      // empty component root.\n      // skip all element-related modules except for ref (#3455)\n      registerRef(vnode);\n      // make sure to invoke the insert hook\n      insertedVnodeQueue.push(vnode);\n    }\n  }\n\n  function reactivateComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i;\n    // hack for #4339: a reactivated component with inner transition\n    // does not trigger because the inner node's created hooks are not called\n    // again. It's not ideal to involve module-specific logic in here but\n    // there doesn't seem to be a better way to do it.\n    var innerNode = vnode;\n    while (innerNode.componentInstance) {\n      innerNode = innerNode.componentInstance._vnode;\n      if (isDef(i = innerNode.data) && isDef(i = i.transition)) {\n        for (i = 0; i < cbs.activate.length; ++i) {\n          cbs.activate[i](emptyNode, innerNode);\n        }\n        insertedVnodeQueue.push(innerNode);\n        break\n      }\n    }\n    // unlike a newly created component,\n    // a reactivated keep-alive component doesn't insert itself\n    insert(parentElm, vnode.elm, refElm);\n  }\n\n  function insert (parent, elm, ref$$1) {\n    if (isDef(parent)) {\n      if (isDef(ref$$1)) {\n        if (nodeOps.parentNode(ref$$1) === parent) {\n          nodeOps.insertBefore(parent, elm, ref$$1);\n        }\n      } else {\n        nodeOps.appendChild(parent, elm);\n      }\n    }\n  }\n\n  function createChildren (vnode, children, insertedVnodeQueue) {\n    if (Array.isArray(children)) {\n      if (process.env.NODE_ENV !== 'production') {\n        checkDuplicateKeys(children);\n      }\n      for (var i = 0; i < children.length; ++i) {\n        createElm(children[i], insertedVnodeQueue, vnode.elm, null, true, children, i);\n      }\n    } else if (isPrimitive(vnode.text)) {\n      nodeOps.appendChild(vnode.elm, nodeOps.createTextNode(String(vnode.text)));\n    }\n  }\n\n  function isPatchable (vnode) {\n    while (vnode.componentInstance) {\n      vnode = vnode.componentInstance._vnode;\n    }\n    return isDef(vnode.tag)\n  }\n\n  function invokeCreateHooks (vnode, insertedVnodeQueue) {\n    for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n      cbs.create[i$1](emptyNode, vnode);\n    }\n    i = vnode.data.hook; // Reuse variable\n    if (isDef(i)) {\n      if (isDef(i.create)) { i.create(emptyNode, vnode); }\n      if (isDef(i.insert)) { insertedVnodeQueue.push(vnode); }\n    }\n  }\n\n  // set scope id attribute for scoped CSS.\n  // this is implemented as a special case to avoid the overhead\n  // of going through the normal attribute patching process.\n  function setScope (vnode) {\n    var i;\n    if (isDef(i = vnode.fnScopeId)) {\n      nodeOps.setStyleScope(vnode.elm, i);\n    } else {\n      var ancestor = vnode;\n      while (ancestor) {\n        if (isDef(i = ancestor.context) && isDef(i = i.$options._scopeId)) {\n          nodeOps.setStyleScope(vnode.elm, i);\n        }\n        ancestor = ancestor.parent;\n      }\n    }\n    // for slot content they should also get the scopeId from the host instance.\n    if (isDef(i = activeInstance) &&\n      i !== vnode.context &&\n      i !== vnode.fnContext &&\n      isDef(i = i.$options._scopeId)\n    ) {\n      nodeOps.setStyleScope(vnode.elm, i);\n    }\n  }\n\n  function addVnodes (parentElm, refElm, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      createElm(vnodes[startIdx], insertedVnodeQueue, parentElm, refElm, false, vnodes, startIdx);\n    }\n  }\n\n  function invokeDestroyHook (vnode) {\n    var i, j;\n    var data = vnode.data;\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.destroy)) { i(vnode); }\n      for (i = 0; i < cbs.destroy.length; ++i) { cbs.destroy[i](vnode); }\n    }\n    if (isDef(i = vnode.children)) {\n      for (j = 0; j < vnode.children.length; ++j) {\n        invokeDestroyHook(vnode.children[j]);\n      }\n    }\n  }\n\n  function removeVnodes (parentElm, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var ch = vnodes[startIdx];\n      if (isDef(ch)) {\n        if (isDef(ch.tag)) {\n          removeAndInvokeRemoveHook(ch);\n          invokeDestroyHook(ch);\n        } else { // Text node\n          removeNode(ch.elm);\n        }\n      }\n    }\n  }\n\n  function removeAndInvokeRemoveHook (vnode, rm) {\n    if (isDef(rm) || isDef(vnode.data)) {\n      var i;\n      var listeners = cbs.remove.length + 1;\n      if (isDef(rm)) {\n        // we have a recursively passed down rm callback\n        // increase the listeners count\n        rm.listeners += listeners;\n      } else {\n        // directly removing\n        rm = createRmCb(vnode.elm, listeners);\n      }\n      // recursively invoke hooks on child component root node\n      if (isDef(i = vnode.componentInstance) && isDef(i = i._vnode) && isDef(i.data)) {\n        removeAndInvokeRemoveHook(i, rm);\n      }\n      for (i = 0; i < cbs.remove.length; ++i) {\n        cbs.remove[i](vnode, rm);\n      }\n      if (isDef(i = vnode.data.hook) && isDef(i = i.remove)) {\n        i(vnode, rm);\n      } else {\n        rm();\n      }\n    } else {\n      removeNode(vnode.elm);\n    }\n  }\n\n  function updateChildren (parentElm, oldCh, newCh, insertedVnodeQueue, removeOnly) {\n    var oldStartIdx = 0;\n    var newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx, idxInOld, vnodeToMove, refElm;\n\n    // removeOnly is a special flag used only by <transition-group>\n    // to ensure removed elements stay in correct relative positions\n    // during leaving transitions\n    var canMove = !removeOnly;\n\n    if (process.env.NODE_ENV !== 'production') {\n      checkDuplicateKeys(newCh);\n    }\n\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n      if (isUndef(oldStartVnode)) {\n        oldStartVnode = oldCh[++oldStartIdx]; // Vnode has been moved left\n      } else if (isUndef(oldEndVnode)) {\n        oldEndVnode = oldCh[--oldEndIdx];\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\n        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\n        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\n        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx);\n        canMove && nodeOps.insertBefore(parentElm, oldStartVnode.elm, nodeOps.nextSibling(oldEndVnode.elm));\n        oldStartVnode = oldCh[++oldStartIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\n        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n        canMove && nodeOps.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        if (isUndef(oldKeyToIdx)) { oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx); }\n        idxInOld = isDef(newStartVnode.key)\n          ? oldKeyToIdx[newStartVnode.key]\n          : findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx);\n        if (isUndef(idxInOld)) { // New element\n          createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);\n        } else {\n          vnodeToMove = oldCh[idxInOld];\n          if (sameVnode(vnodeToMove, newStartVnode)) {\n            patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n            oldCh[idxInOld] = undefined;\n            canMove && nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm);\n          } else {\n            // same key but different element. treat as new element\n            createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);\n          }\n        }\n        newStartVnode = newCh[++newStartIdx];\n      }\n    }\n    if (oldStartIdx > oldEndIdx) {\n      refElm = isUndef(newCh[newEndIdx + 1]) ? null : newCh[newEndIdx + 1].elm;\n      addVnodes(parentElm, refElm, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n    } else if (newStartIdx > newEndIdx) {\n      removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n    }\n  }\n\n  function checkDuplicateKeys (children) {\n    var seenKeys = {};\n    for (var i = 0; i < children.length; i++) {\n      var vnode = children[i];\n      var key = vnode.key;\n      if (isDef(key)) {\n        if (seenKeys[key]) {\n          warn(\n            (\"Duplicate keys detected: '\" + key + \"'. This may cause an update error.\"),\n            vnode.context\n          );\n        } else {\n          seenKeys[key] = true;\n        }\n      }\n    }\n  }\n\n  function findIdxInOld (node, oldCh, start, end) {\n    for (var i = start; i < end; i++) {\n      var c = oldCh[i];\n      if (isDef(c) && sameVnode(node, c)) { return i }\n    }\n  }\n\n  function patchVnode (\n    oldVnode,\n    vnode,\n    insertedVnodeQueue,\n    ownerArray,\n    index,\n    removeOnly\n  ) {\n    if (oldVnode === vnode) {\n      return\n    }\n\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n      // clone reused vnode\n      vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    var elm = vnode.elm = oldVnode.elm;\n\n    if (isTrue(oldVnode.isAsyncPlaceholder)) {\n      if (isDef(vnode.asyncFactory.resolved)) {\n        hydrate(oldVnode.elm, vnode, insertedVnodeQueue);\n      } else {\n        vnode.isAsyncPlaceholder = true;\n      }\n      return\n    }\n\n    // reuse element for static trees.\n    // note we only do this if the vnode is cloned -\n    // if the new node is not cloned it means the render functions have been\n    // reset by the hot-reload-api and we need to do a proper re-render.\n    if (isTrue(vnode.isStatic) &&\n      isTrue(oldVnode.isStatic) &&\n      vnode.key === oldVnode.key &&\n      (isTrue(vnode.isCloned) || isTrue(vnode.isOnce))\n    ) {\n      vnode.componentInstance = oldVnode.componentInstance;\n      return\n    }\n\n    var i;\n    var data = vnode.data;\n    if (isDef(data) && isDef(i = data.hook) && isDef(i = i.prepatch)) {\n      i(oldVnode, vnode);\n    }\n\n    var oldCh = oldVnode.children;\n    var ch = vnode.children;\n    if (isDef(data) && isPatchable(vnode)) {\n      for (i = 0; i < cbs.update.length; ++i) { cbs.update[i](oldVnode, vnode); }\n      if (isDef(i = data.hook) && isDef(i = i.update)) { i(oldVnode, vnode); }\n    }\n    if (isUndef(vnode.text)) {\n      if (isDef(oldCh) && isDef(ch)) {\n        if (oldCh !== ch) { updateChildren(elm, oldCh, ch, insertedVnodeQueue, removeOnly); }\n      } else if (isDef(ch)) {\n        if (process.env.NODE_ENV !== 'production') {\n          checkDuplicateKeys(ch);\n        }\n        if (isDef(oldVnode.text)) { nodeOps.setTextContent(elm, ''); }\n        addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n      } else if (isDef(oldCh)) {\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n      } else if (isDef(oldVnode.text)) {\n        nodeOps.setTextContent(elm, '');\n      }\n    } else if (oldVnode.text !== vnode.text) {\n      nodeOps.setTextContent(elm, vnode.text);\n    }\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.postpatch)) { i(oldVnode, vnode); }\n    }\n  }\n\n  function invokeInsertHook (vnode, queue, initial) {\n    // delay insert hooks for component root nodes, invoke them after the\n    // element is really inserted\n    if (isTrue(initial) && isDef(vnode.parent)) {\n      vnode.parent.data.pendingInsert = queue;\n    } else {\n      for (var i = 0; i < queue.length; ++i) {\n        queue[i].data.hook.insert(queue[i]);\n      }\n    }\n  }\n\n  var hydrationBailed = false;\n  // list of modules that can skip create hook during hydration because they\n  // are already rendered on the client or has no need for initialization\n  // Note: style is excluded because it relies on initial clone for future\n  // deep updates (#7063).\n  var isRenderedModule = makeMap('attrs,class,staticClass,staticStyle,key');\n\n  // Note: this is a browser-only function so we can assume elms are DOM nodes.\n  function hydrate (elm, vnode, insertedVnodeQueue, inVPre) {\n    var i;\n    var tag = vnode.tag;\n    var data = vnode.data;\n    var children = vnode.children;\n    inVPre = inVPre || (data && data.pre);\n    vnode.elm = elm;\n\n    if (isTrue(vnode.isComment) && isDef(vnode.asyncFactory)) {\n      vnode.isAsyncPlaceholder = true;\n      return true\n    }\n    // assert node match\n    if (process.env.NODE_ENV !== 'production') {\n      if (!assertNodeMatch(elm, vnode, inVPre)) {\n        return false\n      }\n    }\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.init)) { i(vnode, true /* hydrating */); }\n      if (isDef(i = vnode.componentInstance)) {\n        // child component. it should have hydrated its own tree.\n        initComponent(vnode, insertedVnodeQueue);\n        return true\n      }\n    }\n    if (isDef(tag)) {\n      if (isDef(children)) {\n        // empty element, allow client to pick up and populate children\n        if (!elm.hasChildNodes()) {\n          createChildren(vnode, children, insertedVnodeQueue);\n        } else {\n          // v-html and domProps: innerHTML\n          if (isDef(i = data) && isDef(i = i.domProps) && isDef(i = i.innerHTML)) {\n            if (i !== elm.innerHTML) {\n              /* istanbul ignore if */\n              if (process.env.NODE_ENV !== 'production' &&\n                typeof console !== 'undefined' &&\n                !hydrationBailed\n              ) {\n                hydrationBailed = true;\n                console.warn('Parent: ', elm);\n                console.warn('server innerHTML: ', i);\n                console.warn('client innerHTML: ', elm.innerHTML);\n              }\n              return false\n            }\n          } else {\n            // iterate and compare children lists\n            var childrenMatch = true;\n            var childNode = elm.firstChild;\n            for (var i$1 = 0; i$1 < children.length; i$1++) {\n              if (!childNode || !hydrate(childNode, children[i$1], insertedVnodeQueue, inVPre)) {\n                childrenMatch = false;\n                break\n              }\n              childNode = childNode.nextSibling;\n            }\n            // if childNode is not null, it means the actual childNodes list is\n            // longer than the virtual children list.\n            if (!childrenMatch || childNode) {\n              /* istanbul ignore if */\n              if (process.env.NODE_ENV !== 'production' &&\n                typeof console !== 'undefined' &&\n                !hydrationBailed\n              ) {\n                hydrationBailed = true;\n                console.warn('Parent: ', elm);\n                console.warn('Mismatching childNodes vs. VNodes: ', elm.childNodes, children);\n              }\n              return false\n            }\n          }\n        }\n      }\n      if (isDef(data)) {\n        var fullInvoke = false;\n        for (var key in data) {\n          if (!isRenderedModule(key)) {\n            fullInvoke = true;\n            invokeCreateHooks(vnode, insertedVnodeQueue);\n            break\n          }\n        }\n        if (!fullInvoke && data['class']) {\n          // ensure collecting deps for deep class bindings for future updates\n          traverse(data['class']);\n        }\n      }\n    } else if (elm.data !== vnode.text) {\n      elm.data = vnode.text;\n    }\n    return true\n  }\n\n  function assertNodeMatch (node, vnode, inVPre) {\n    if (isDef(vnode.tag)) {\n      return vnode.tag.indexOf('vue-component') === 0 || (\n        !isUnknownElement$$1(vnode, inVPre) &&\n        vnode.tag.toLowerCase() === (node.tagName && node.tagName.toLowerCase())\n      )\n    } else {\n      return node.nodeType === (vnode.isComment ? 8 : 3)\n    }\n  }\n\n  return function patch (oldVnode, vnode, hydrating, removeOnly) {\n    if (isUndef(vnode)) {\n      if (isDef(oldVnode)) { invokeDestroyHook(oldVnode); }\n      return\n    }\n\n    var isInitialPatch = false;\n    var insertedVnodeQueue = [];\n\n    if (isUndef(oldVnode)) {\n      // empty mount (likely as component), create new root element\n      isInitialPatch = true;\n      createElm(vnode, insertedVnodeQueue);\n    } else {\n      var isRealElement = isDef(oldVnode.nodeType);\n      if (!isRealElement && sameVnode(oldVnode, vnode)) {\n        // patch existing root node\n        patchVnode(oldVnode, vnode, insertedVnodeQueue, null, null, removeOnly);\n      } else {\n        if (isRealElement) {\n          // mounting to a real element\n          // check if this is server-rendered content and if we can perform\n          // a successful hydration.\n          if (oldVnode.nodeType === 1 && oldVnode.hasAttribute(SSR_ATTR)) {\n            oldVnode.removeAttribute(SSR_ATTR);\n            hydrating = true;\n          }\n          if (isTrue(hydrating)) {\n            if (hydrate(oldVnode, vnode, insertedVnodeQueue)) {\n              invokeInsertHook(vnode, insertedVnodeQueue, true);\n              return oldVnode\n            } else if (process.env.NODE_ENV !== 'production') {\n              warn(\n                'The client-side rendered virtual DOM tree is not matching ' +\n                'server-rendered content. This is likely caused by incorrect ' +\n                'HTML markup, for example nesting block-level elements inside ' +\n                '<p>, or missing <tbody>. Bailing hydration and performing ' +\n                'full client-side render.'\n              );\n            }\n          }\n          // either not server-rendered, or hydration failed.\n          // create an empty node and replace it\n          oldVnode = emptyNodeAt(oldVnode);\n        }\n\n        // replacing existing element\n        var oldElm = oldVnode.elm;\n        var parentElm = nodeOps.parentNode(oldElm);\n\n        // create new node\n        createElm(\n          vnode,\n          insertedVnodeQueue,\n          // extremely rare edge case: do not insert if old element is in a\n          // leaving transition. Only happens when combining transition +\n          // keep-alive + HOCs. (#4590)\n          oldElm._leaveCb ? null : parentElm,\n          nodeOps.nextSibling(oldElm)\n        );\n\n        // update parent placeholder node element, recursively\n        if (isDef(vnode.parent)) {\n          var ancestor = vnode.parent;\n          var patchable = isPatchable(vnode);\n          while (ancestor) {\n            for (var i = 0; i < cbs.destroy.length; ++i) {\n              cbs.destroy[i](ancestor);\n            }\n            ancestor.elm = vnode.elm;\n            if (patchable) {\n              for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n                cbs.create[i$1](emptyNode, ancestor);\n              }\n              // #6513\n              // invoke insert hooks that may have been merged by create hooks.\n              // e.g. for directives that uses the \"inserted\" hook.\n              var insert = ancestor.data.hook.insert;\n              if (insert.merged) {\n                // start at index 1 to avoid re-invoking component mounted hook\n                for (var i$2 = 1; i$2 < insert.fns.length; i$2++) {\n                  insert.fns[i$2]();\n                }\n              }\n            } else {\n              registerRef(ancestor);\n            }\n            ancestor = ancestor.parent;\n          }\n        }\n\n        // destroy old node\n        if (isDef(parentElm)) {\n          removeVnodes(parentElm, [oldVnode], 0, 0);\n        } else if (isDef(oldVnode.tag)) {\n          invokeDestroyHook(oldVnode);\n        }\n      }\n    }\n\n    invokeInsertHook(vnode, insertedVnodeQueue, isInitialPatch);\n    return vnode.elm\n  }\n}\n\n/*  */\n\nvar directives = {\n  create: updateDirectives,\n  update: updateDirectives,\n  destroy: function unbindDirectives (vnode) {\n    updateDirectives(vnode, emptyNode);\n  }\n};\n\nfunction updateDirectives (oldVnode, vnode) {\n  if (oldVnode.data.directives || vnode.data.directives) {\n    _update(oldVnode, vnode);\n  }\n}\n\nfunction _update (oldVnode, vnode) {\n  var isCreate = oldVnode === emptyNode;\n  var isDestroy = vnode === emptyNode;\n  var oldDirs = normalizeDirectives$1(oldVnode.data.directives, oldVnode.context);\n  var newDirs = normalizeDirectives$1(vnode.data.directives, vnode.context);\n\n  var dirsWithInsert = [];\n  var dirsWithPostpatch = [];\n\n  var key, oldDir, dir;\n  for (key in newDirs) {\n    oldDir = oldDirs[key];\n    dir = newDirs[key];\n    if (!oldDir) {\n      // new directive, bind\n      callHook$1(dir, 'bind', vnode, oldVnode);\n      if (dir.def && dir.def.inserted) {\n        dirsWithInsert.push(dir);\n      }\n    } else {\n      // existing directive, update\n      dir.oldValue = oldDir.value;\n      dir.oldArg = oldDir.arg;\n      callHook$1(dir, 'update', vnode, oldVnode);\n      if (dir.def && dir.def.componentUpdated) {\n        dirsWithPostpatch.push(dir);\n      }\n    }\n  }\n\n  if (dirsWithInsert.length) {\n    var callInsert = function () {\n      for (var i = 0; i < dirsWithInsert.length; i++) {\n        callHook$1(dirsWithInsert[i], 'inserted', vnode, oldVnode);\n      }\n    };\n    if (isCreate) {\n      mergeVNodeHook(vnode, 'insert', callInsert);\n    } else {\n      callInsert();\n    }\n  }\n\n  if (dirsWithPostpatch.length) {\n    mergeVNodeHook(vnode, 'postpatch', function () {\n      for (var i = 0; i < dirsWithPostpatch.length; i++) {\n        callHook$1(dirsWithPostpatch[i], 'componentUpdated', vnode, oldVnode);\n      }\n    });\n  }\n\n  if (!isCreate) {\n    for (key in oldDirs) {\n      if (!newDirs[key]) {\n        // no longer present, unbind\n        callHook$1(oldDirs[key], 'unbind', oldVnode, oldVnode, isDestroy);\n      }\n    }\n  }\n}\n\nvar emptyModifiers = Object.create(null);\n\nfunction normalizeDirectives$1 (\n  dirs,\n  vm\n) {\n  var res = Object.create(null);\n  if (!dirs) {\n    // $flow-disable-line\n    return res\n  }\n  var i, dir;\n  for (i = 0; i < dirs.length; i++) {\n    dir = dirs[i];\n    if (!dir.modifiers) {\n      // $flow-disable-line\n      dir.modifiers = emptyModifiers;\n    }\n    res[getRawDirName(dir)] = dir;\n    dir.def = resolveAsset(vm.$options, 'directives', dir.name, true);\n  }\n  // $flow-disable-line\n  return res\n}\n\nfunction getRawDirName (dir) {\n  return dir.rawName || ((dir.name) + \".\" + (Object.keys(dir.modifiers || {}).join('.')))\n}\n\nfunction callHook$1 (dir, hook, vnode, oldVnode, isDestroy) {\n  var fn = dir.def && dir.def[hook];\n  if (fn) {\n    try {\n      fn(vnode.elm, dir, vnode, oldVnode, isDestroy);\n    } catch (e) {\n      handleError(e, vnode.context, (\"directive \" + (dir.name) + \" \" + hook + \" hook\"));\n    }\n  }\n}\n\nvar baseModules = [\n  ref,\n  directives\n];\n\n/*  */\n\nfunction updateAttrs (oldVnode, vnode) {\n  var opts = vnode.componentOptions;\n  if (isDef(opts) && opts.Ctor.options.inheritAttrs === false) {\n    return\n  }\n  if (isUndef(oldVnode.data.attrs) && isUndef(vnode.data.attrs)) {\n    return\n  }\n  var key, cur, old;\n  var elm = vnode.elm;\n  var oldAttrs = oldVnode.data.attrs || {};\n  var attrs = vnode.data.attrs || {};\n  // clone observed objects, as the user probably wants to mutate it\n  if (isDef(attrs.__ob__)) {\n    attrs = vnode.data.attrs = extend({}, attrs);\n  }\n\n  for (key in attrs) {\n    cur = attrs[key];\n    old = oldAttrs[key];\n    if (old !== cur) {\n      setAttr(elm, key, cur);\n    }\n  }\n  // #4391: in IE9, setting type can reset value for input[type=radio]\n  // #6666: IE/Edge forces progress value down to 1 before setting a max\n  /* istanbul ignore if */\n  if ((isIE || isEdge) && attrs.value !== oldAttrs.value) {\n    setAttr(elm, 'value', attrs.value);\n  }\n  for (key in oldAttrs) {\n    if (isUndef(attrs[key])) {\n      if (isXlink(key)) {\n        elm.removeAttributeNS(xlinkNS, getXlinkProp(key));\n      } else if (!isEnumeratedAttr(key)) {\n        elm.removeAttribute(key);\n      }\n    }\n  }\n}\n\nfunction setAttr (el, key, value) {\n  if (el.tagName.indexOf('-') > -1) {\n    baseSetAttr(el, key, value);\n  } else if (isBooleanAttr(key)) {\n    // set attribute for blank value\n    // e.g. <option disabled>Select one</option>\n    if (isFalsyAttrValue(value)) {\n      el.removeAttribute(key);\n    } else {\n      // technically allowfullscreen is a boolean attribute for <iframe>,\n      // but Flash expects a value of \"true\" when used on <embed> tag\n      value = key === 'allowfullscreen' && el.tagName === 'EMBED'\n        ? 'true'\n        : key;\n      el.setAttribute(key, value);\n    }\n  } else if (isEnumeratedAttr(key)) {\n    el.setAttribute(key, convertEnumeratedValue(key, value));\n  } else if (isXlink(key)) {\n    if (isFalsyAttrValue(value)) {\n      el.removeAttributeNS(xlinkNS, getXlinkProp(key));\n    } else {\n      el.setAttributeNS(xlinkNS, key, value);\n    }\n  } else {\n    baseSetAttr(el, key, value);\n  }\n}\n\nfunction baseSetAttr (el, key, value) {\n  if (isFalsyAttrValue(value)) {\n    el.removeAttribute(key);\n  } else {\n    // #7138: IE10 & 11 fires input event when setting placeholder on\n    // <textarea>... block the first input event and remove the blocker\n    // immediately.\n    /* istanbul ignore if */\n    if (\n      isIE && !isIE9 &&\n      el.tagName === 'TEXTAREA' &&\n      key === 'placeholder' && value !== '' && !el.__ieph\n    ) {\n      var blocker = function (e) {\n        e.stopImmediatePropagation();\n        el.removeEventListener('input', blocker);\n      };\n      el.addEventListener('input', blocker);\n      // $flow-disable-line\n      el.__ieph = true; /* IE placeholder patched */\n    }\n    el.setAttribute(key, value);\n  }\n}\n\nvar attrs = {\n  create: updateAttrs,\n  update: updateAttrs\n};\n\n/*  */\n\nfunction updateClass (oldVnode, vnode) {\n  var el = vnode.elm;\n  var data = vnode.data;\n  var oldData = oldVnode.data;\n  if (\n    isUndef(data.staticClass) &&\n    isUndef(data.class) && (\n      isUndef(oldData) || (\n        isUndef(oldData.staticClass) &&\n        isUndef(oldData.class)\n      )\n    )\n  ) {\n    return\n  }\n\n  var cls = genClassForVnode(vnode);\n\n  // handle transition classes\n  var transitionClass = el._transitionClasses;\n  if (isDef(transitionClass)) {\n    cls = concat(cls, stringifyClass(transitionClass));\n  }\n\n  // set the class\n  if (cls !== el._prevClass) {\n    el.setAttribute('class', cls);\n    el._prevClass = cls;\n  }\n}\n\nvar klass = {\n  create: updateClass,\n  update: updateClass\n};\n\n/*  */\n\n/*  */\n\n/*  */\n\n/*  */\n\n// in some cases, the event used has to be determined at runtime\n// so we used some reserved tokens during compile.\nvar RANGE_TOKEN = '__r';\nvar CHECKBOX_RADIO_TOKEN = '__c';\n\n/*  */\n\n// normalize v-model event tokens that can only be determined at runtime.\n// it's important to place the event as the first in the array because\n// the whole point is ensuring the v-model callback gets called before\n// user-attached handlers.\nfunction normalizeEvents (on) {\n  /* istanbul ignore if */\n  if (isDef(on[RANGE_TOKEN])) {\n    // IE input[type=range] only supports `change` event\n    var event = isIE ? 'change' : 'input';\n    on[event] = [].concat(on[RANGE_TOKEN], on[event] || []);\n    delete on[RANGE_TOKEN];\n  }\n  // This was originally intended to fix #4521 but no longer necessary\n  // after 2.5. Keeping it for backwards compat with generated code from < 2.4\n  /* istanbul ignore if */\n  if (isDef(on[CHECKBOX_RADIO_TOKEN])) {\n    on.change = [].concat(on[CHECKBOX_RADIO_TOKEN], on.change || []);\n    delete on[CHECKBOX_RADIO_TOKEN];\n  }\n}\n\nvar target$1;\n\nfunction createOnceHandler$1 (event, handler, capture) {\n  var _target = target$1; // save current target element in closure\n  return function onceHandler () {\n    var res = handler.apply(null, arguments);\n    if (res !== null) {\n      remove$2(event, onceHandler, capture, _target);\n    }\n  }\n}\n\n// #9446: Firefox <= 53 (in particular, ESR 52) has incorrect Event.timeStamp\n// implementation and does not fire microtasks in between event propagation, so\n// safe to exclude.\nvar useMicrotaskFix = isUsingMicroTask && !(isFF && Number(isFF[1]) <= 53);\n\nfunction add$1 (\n  name,\n  handler,\n  capture,\n  passive\n) {\n  // async edge case #6566: inner click event triggers patch, event handler\n  // attached to outer element during patch, and triggered again. This\n  // happens because browsers fire microtask ticks between event propagation.\n  // the solution is simple: we save the timestamp when a handler is attached,\n  // and the handler would only fire if the event passed to it was fired\n  // AFTER it was attached.\n  if (useMicrotaskFix) {\n    var attachedTimestamp = currentFlushTimestamp;\n    var original = handler;\n    handler = original._wrapper = function (e) {\n      if (\n        // no bubbling, should always fire.\n        // this is just a safety net in case event.timeStamp is unreliable in\n        // certain weird environments...\n        e.target === e.currentTarget ||\n        // event is fired after handler attachment\n        e.timeStamp >= attachedTimestamp ||\n        // bail for environments that have buggy event.timeStamp implementations\n        // #9462 iOS 9 bug: event.timeStamp is 0 after history.pushState\n        // #9681 QtWebEngine event.timeStamp is negative value\n        e.timeStamp <= 0 ||\n        // #9448 bail if event is fired in another document in a multi-page\n        // electron/nw.js app, since event.timeStamp will be using a different\n        // starting reference\n        e.target.ownerDocument !== document\n      ) {\n        return original.apply(this, arguments)\n      }\n    };\n  }\n  target$1.addEventListener(\n    name,\n    handler,\n    supportsPassive\n      ? { capture: capture, passive: passive }\n      : capture\n  );\n}\n\nfunction remove$2 (\n  name,\n  handler,\n  capture,\n  _target\n) {\n  (_target || target$1).removeEventListener(\n    name,\n    handler._wrapper || handler,\n    capture\n  );\n}\n\nfunction updateDOMListeners (oldVnode, vnode) {\n  if (isUndef(oldVnode.data.on) && isUndef(vnode.data.on)) {\n    return\n  }\n  var on = vnode.data.on || {};\n  var oldOn = oldVnode.data.on || {};\n  target$1 = vnode.elm;\n  normalizeEvents(on);\n  updateListeners(on, oldOn, add$1, remove$2, createOnceHandler$1, vnode.context);\n  target$1 = undefined;\n}\n\nvar events = {\n  create: updateDOMListeners,\n  update: updateDOMListeners\n};\n\n/*  */\n\nvar svgContainer;\n\nfunction updateDOMProps (oldVnode, vnode) {\n  if (isUndef(oldVnode.data.domProps) && isUndef(vnode.data.domProps)) {\n    return\n  }\n  var key, cur;\n  var elm = vnode.elm;\n  var oldProps = oldVnode.data.domProps || {};\n  var props = vnode.data.domProps || {};\n  // clone observed objects, as the user probably wants to mutate it\n  if (isDef(props.__ob__)) {\n    props = vnode.data.domProps = extend({}, props);\n  }\n\n  for (key in oldProps) {\n    if (!(key in props)) {\n      elm[key] = '';\n    }\n  }\n\n  for (key in props) {\n    cur = props[key];\n    // ignore children if the node has textContent or innerHTML,\n    // as these will throw away existing DOM nodes and cause removal errors\n    // on subsequent patches (#3360)\n    if (key === 'textContent' || key === 'innerHTML') {\n      if (vnode.children) { vnode.children.length = 0; }\n      if (cur === oldProps[key]) { continue }\n      // #6601 work around Chrome version <= 55 bug where single textNode\n      // replaced by innerHTML/textContent retains its parentNode property\n      if (elm.childNodes.length === 1) {\n        elm.removeChild(elm.childNodes[0]);\n      }\n    }\n\n    if (key === 'value' && elm.tagName !== 'PROGRESS') {\n      // store value as _value as well since\n      // non-string values will be stringified\n      elm._value = cur;\n      // avoid resetting cursor position when value is the same\n      var strCur = isUndef(cur) ? '' : String(cur);\n      if (shouldUpdateValue(elm, strCur)) {\n        elm.value = strCur;\n      }\n    } else if (key === 'innerHTML' && isSVG(elm.tagName) && isUndef(elm.innerHTML)) {\n      // IE doesn't support innerHTML for SVG elements\n      svgContainer = svgContainer || document.createElement('div');\n      svgContainer.innerHTML = \"<svg>\" + cur + \"</svg>\";\n      var svg = svgContainer.firstChild;\n      while (elm.firstChild) {\n        elm.removeChild(elm.firstChild);\n      }\n      while (svg.firstChild) {\n        elm.appendChild(svg.firstChild);\n      }\n    } else if (\n      // skip the update if old and new VDOM state is the same.\n      // `value` is handled separately because the DOM value may be temporarily\n      // out of sync with VDOM state due to focus, composition and modifiers.\n      // This  #4521 by skipping the unnecesarry `checked` update.\n      cur !== oldProps[key]\n    ) {\n      // some property updates can throw\n      // e.g. `value` on <progress> w/ non-finite value\n      try {\n        elm[key] = cur;\n      } catch (e) {}\n    }\n  }\n}\n\n// check platforms/web/util/attrs.js acceptValue\n\n\nfunction shouldUpdateValue (elm, checkVal) {\n  return (!elm.composing && (\n    elm.tagName === 'OPTION' ||\n    isNotInFocusAndDirty(elm, checkVal) ||\n    isDirtyWithModifiers(elm, checkVal)\n  ))\n}\n\nfunction isNotInFocusAndDirty (elm, checkVal) {\n  // return true when textbox (.number and .trim) loses focus and its value is\n  // not equal to the updated value\n  var notInFocus = true;\n  // #6157\n  // work around IE bug when accessing document.activeElement in an iframe\n  try { notInFocus = document.activeElement !== elm; } catch (e) {}\n  return notInFocus && elm.value !== checkVal\n}\n\nfunction isDirtyWithModifiers (elm, newVal) {\n  var value = elm.value;\n  var modifiers = elm._vModifiers; // injected by v-model runtime\n  if (isDef(modifiers)) {\n    if (modifiers.number) {\n      return toNumber(value) !== toNumber(newVal)\n    }\n    if (modifiers.trim) {\n      return value.trim() !== newVal.trim()\n    }\n  }\n  return value !== newVal\n}\n\nvar domProps = {\n  create: updateDOMProps,\n  update: updateDOMProps\n};\n\n/*  */\n\nvar parseStyleText = cached(function (cssText) {\n  var res = {};\n  var listDelimiter = /;(?![^(]*\\))/g;\n  var propertyDelimiter = /:(.+)/;\n  cssText.split(listDelimiter).forEach(function (item) {\n    if (item) {\n      var tmp = item.split(propertyDelimiter);\n      tmp.length > 1 && (res[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return res\n});\n\n// merge static and dynamic style data on the same vnode\nfunction normalizeStyleData (data) {\n  var style = normalizeStyleBinding(data.style);\n  // static style is pre-processed into an object during compilation\n  // and is always a fresh object, so it's safe to merge into it\n  return data.staticStyle\n    ? extend(data.staticStyle, style)\n    : style\n}\n\n// normalize possible array / string values into Object\nfunction normalizeStyleBinding (bindingStyle) {\n  if (Array.isArray(bindingStyle)) {\n    return toObject(bindingStyle)\n  }\n  if (typeof bindingStyle === 'string') {\n    return parseStyleText(bindingStyle)\n  }\n  return bindingStyle\n}\n\n/**\n * parent component style should be after child's\n * so that parent component's style could override it\n */\nfunction getStyle (vnode, checkChild) {\n  var res = {};\n  var styleData;\n\n  if (checkChild) {\n    var childNode = vnode;\n    while (childNode.componentInstance) {\n      childNode = childNode.componentInstance._vnode;\n      if (\n        childNode && childNode.data &&\n        (styleData = normalizeStyleData(childNode.data))\n      ) {\n        extend(res, styleData);\n      }\n    }\n  }\n\n  if ((styleData = normalizeStyleData(vnode.data))) {\n    extend(res, styleData);\n  }\n\n  var parentNode = vnode;\n  while ((parentNode = parentNode.parent)) {\n    if (parentNode.data && (styleData = normalizeStyleData(parentNode.data))) {\n      extend(res, styleData);\n    }\n  }\n  return res\n}\n\n/*  */\n\nvar cssVarRE = /^--/;\nvar importantRE = /\\s*!important$/;\nvar setProp = function (el, name, val) {\n  /* istanbul ignore if */\n  if (cssVarRE.test(name)) {\n    el.style.setProperty(name, val);\n  } else if (importantRE.test(val)) {\n    el.style.setProperty(hyphenate(name), val.replace(importantRE, ''), 'important');\n  } else {\n    var normalizedName = normalize(name);\n    if (Array.isArray(val)) {\n      // Support values array created by autoprefixer, e.g.\n      // {display: [\"-webkit-box\", \"-ms-flexbox\", \"flex\"]}\n      // Set them one by one, and the browser will only set those it can recognize\n      for (var i = 0, len = val.length; i < len; i++) {\n        el.style[normalizedName] = val[i];\n      }\n    } else {\n      el.style[normalizedName] = val;\n    }\n  }\n};\n\nvar vendorNames = ['Webkit', 'Moz', 'ms'];\n\nvar emptyStyle;\nvar normalize = cached(function (prop) {\n  emptyStyle = emptyStyle || document.createElement('div').style;\n  prop = camelize(prop);\n  if (prop !== 'filter' && (prop in emptyStyle)) {\n    return prop\n  }\n  var capName = prop.charAt(0).toUpperCase() + prop.slice(1);\n  for (var i = 0; i < vendorNames.length; i++) {\n    var name = vendorNames[i] + capName;\n    if (name in emptyStyle) {\n      return name\n    }\n  }\n});\n\nfunction updateStyle (oldVnode, vnode) {\n  var data = vnode.data;\n  var oldData = oldVnode.data;\n\n  if (isUndef(data.staticStyle) && isUndef(data.style) &&\n    isUndef(oldData.staticStyle) && isUndef(oldData.style)\n  ) {\n    return\n  }\n\n  var cur, name;\n  var el = vnode.elm;\n  var oldStaticStyle = oldData.staticStyle;\n  var oldStyleBinding = oldData.normalizedStyle || oldData.style || {};\n\n  // if static style exists, stylebinding already merged into it when doing normalizeStyleData\n  var oldStyle = oldStaticStyle || oldStyleBinding;\n\n  var style = normalizeStyleBinding(vnode.data.style) || {};\n\n  // store normalized style under a different key for next diff\n  // make sure to clone it if it's reactive, since the user likely wants\n  // to mutate it.\n  vnode.data.normalizedStyle = isDef(style.__ob__)\n    ? extend({}, style)\n    : style;\n\n  var newStyle = getStyle(vnode, true);\n\n  for (name in oldStyle) {\n    if (isUndef(newStyle[name])) {\n      setProp(el, name, '');\n    }\n  }\n  for (name in newStyle) {\n    cur = newStyle[name];\n    if (cur !== oldStyle[name]) {\n      // ie9 setting to null has no effect, must use empty string\n      setProp(el, name, cur == null ? '' : cur);\n    }\n  }\n}\n\nvar style = {\n  create: updateStyle,\n  update: updateStyle\n};\n\n/*  */\n\nvar whitespaceRE = /\\s+/;\n\n/**\n * Add class with compatibility for SVG since classList is not supported on\n * SVG elements in IE\n */\nfunction addClass (el, cls) {\n  /* istanbul ignore if */\n  if (!cls || !(cls = cls.trim())) {\n    return\n  }\n\n  /* istanbul ignore else */\n  if (el.classList) {\n    if (cls.indexOf(' ') > -1) {\n      cls.split(whitespaceRE).forEach(function (c) { return el.classList.add(c); });\n    } else {\n      el.classList.add(cls);\n    }\n  } else {\n    var cur = \" \" + (el.getAttribute('class') || '') + \" \";\n    if (cur.indexOf(' ' + cls + ' ') < 0) {\n      el.setAttribute('class', (cur + cls).trim());\n    }\n  }\n}\n\n/**\n * Remove class with compatibility for SVG since classList is not supported on\n * SVG elements in IE\n */\nfunction removeClass (el, cls) {\n  /* istanbul ignore if */\n  if (!cls || !(cls = cls.trim())) {\n    return\n  }\n\n  /* istanbul ignore else */\n  if (el.classList) {\n    if (cls.indexOf(' ') > -1) {\n      cls.split(whitespaceRE).forEach(function (c) { return el.classList.remove(c); });\n    } else {\n      el.classList.remove(cls);\n    }\n    if (!el.classList.length) {\n      el.removeAttribute('class');\n    }\n  } else {\n    var cur = \" \" + (el.getAttribute('class') || '') + \" \";\n    var tar = ' ' + cls + ' ';\n    while (cur.indexOf(tar) >= 0) {\n      cur = cur.replace(tar, ' ');\n    }\n    cur = cur.trim();\n    if (cur) {\n      el.setAttribute('class', cur);\n    } else {\n      el.removeAttribute('class');\n    }\n  }\n}\n\n/*  */\n\nfunction resolveTransition (def$$1) {\n  if (!def$$1) {\n    return\n  }\n  /* istanbul ignore else */\n  if (typeof def$$1 === 'object') {\n    var res = {};\n    if (def$$1.css !== false) {\n      extend(res, autoCssTransition(def$$1.name || 'v'));\n    }\n    extend(res, def$$1);\n    return res\n  } else if (typeof def$$1 === 'string') {\n    return autoCssTransition(def$$1)\n  }\n}\n\nvar autoCssTransition = cached(function (name) {\n  return {\n    enterClass: (name + \"-enter\"),\n    enterToClass: (name + \"-enter-to\"),\n    enterActiveClass: (name + \"-enter-active\"),\n    leaveClass: (name + \"-leave\"),\n    leaveToClass: (name + \"-leave-to\"),\n    leaveActiveClass: (name + \"-leave-active\")\n  }\n});\n\nvar hasTransition = inBrowser && !isIE9;\nvar TRANSITION = 'transition';\nvar ANIMATION = 'animation';\n\n// Transition property/event sniffing\nvar transitionProp = 'transition';\nvar transitionEndEvent = 'transitionend';\nvar animationProp = 'animation';\nvar animationEndEvent = 'animationend';\nif (hasTransition) {\n  /* istanbul ignore if */\n  if (window.ontransitionend === undefined &&\n    window.onwebkittransitionend !== undefined\n  ) {\n    transitionProp = 'WebkitTransition';\n    transitionEndEvent = 'webkitTransitionEnd';\n  }\n  if (window.onanimationend === undefined &&\n    window.onwebkitanimationend !== undefined\n  ) {\n    animationProp = 'WebkitAnimation';\n    animationEndEvent = 'webkitAnimationEnd';\n  }\n}\n\n// binding to window is necessary to make hot reload work in IE in strict mode\nvar raf = inBrowser\n  ? window.requestAnimationFrame\n    ? window.requestAnimationFrame.bind(window)\n    : setTimeout\n  : /* istanbul ignore next */ function (fn) { return fn(); };\n\nfunction nextFrame (fn) {\n  raf(function () {\n    raf(fn);\n  });\n}\n\nfunction addTransitionClass (el, cls) {\n  var transitionClasses = el._transitionClasses || (el._transitionClasses = []);\n  if (transitionClasses.indexOf(cls) < 0) {\n    transitionClasses.push(cls);\n    addClass(el, cls);\n  }\n}\n\nfunction removeTransitionClass (el, cls) {\n  if (el._transitionClasses) {\n    remove(el._transitionClasses, cls);\n  }\n  removeClass(el, cls);\n}\n\nfunction whenTransitionEnds (\n  el,\n  expectedType,\n  cb\n) {\n  var ref = getTransitionInfo(el, expectedType);\n  var type = ref.type;\n  var timeout = ref.timeout;\n  var propCount = ref.propCount;\n  if (!type) { return cb() }\n  var event = type === TRANSITION ? transitionEndEvent : animationEndEvent;\n  var ended = 0;\n  var end = function () {\n    el.removeEventListener(event, onEnd);\n    cb();\n  };\n  var onEnd = function (e) {\n    if (e.target === el) {\n      if (++ended >= propCount) {\n        end();\n      }\n    }\n  };\n  setTimeout(function () {\n    if (ended < propCount) {\n      end();\n    }\n  }, timeout + 1);\n  el.addEventListener(event, onEnd);\n}\n\nvar transformRE = /\\b(transform|all)(,|$)/;\n\nfunction getTransitionInfo (el, expectedType) {\n  var styles = window.getComputedStyle(el);\n  // JSDOM may return undefined for transition properties\n  var transitionDelays = (styles[transitionProp + 'Delay'] || '').split(', ');\n  var transitionDurations = (styles[transitionProp + 'Duration'] || '').split(', ');\n  var transitionTimeout = getTimeout(transitionDelays, transitionDurations);\n  var animationDelays = (styles[animationProp + 'Delay'] || '').split(', ');\n  var animationDurations = (styles[animationProp + 'Duration'] || '').split(', ');\n  var animationTimeout = getTimeout(animationDelays, animationDurations);\n\n  var type;\n  var timeout = 0;\n  var propCount = 0;\n  /* istanbul ignore if */\n  if (expectedType === TRANSITION) {\n    if (transitionTimeout > 0) {\n      type = TRANSITION;\n      timeout = transitionTimeout;\n      propCount = transitionDurations.length;\n    }\n  } else if (expectedType === ANIMATION) {\n    if (animationTimeout > 0) {\n      type = ANIMATION;\n      timeout = animationTimeout;\n      propCount = animationDurations.length;\n    }\n  } else {\n    timeout = Math.max(transitionTimeout, animationTimeout);\n    type = timeout > 0\n      ? transitionTimeout > animationTimeout\n        ? TRANSITION\n        : ANIMATION\n      : null;\n    propCount = type\n      ? type === TRANSITION\n        ? transitionDurations.length\n        : animationDurations.length\n      : 0;\n  }\n  var hasTransform =\n    type === TRANSITION &&\n    transformRE.test(styles[transitionProp + 'Property']);\n  return {\n    type: type,\n    timeout: timeout,\n    propCount: propCount,\n    hasTransform: hasTransform\n  }\n}\n\nfunction getTimeout (delays, durations) {\n  /* istanbul ignore next */\n  while (delays.length < durations.length) {\n    delays = delays.concat(delays);\n  }\n\n  return Math.max.apply(null, durations.map(function (d, i) {\n    return toMs(d) + toMs(delays[i])\n  }))\n}\n\n// Old versions of Chromium (below 61.0.3163.100) formats floating pointer numbers\n// in a locale-dependent way, using a comma instead of a dot.\n// If comma is not replaced with a dot, the input will be rounded down (i.e. acting\n// as a floor function) causing unexpected behaviors\nfunction toMs (s) {\n  return Number(s.slice(0, -1).replace(',', '.')) * 1000\n}\n\n/*  */\n\nfunction enter (vnode, toggleDisplay) {\n  var el = vnode.elm;\n\n  // call leave callback now\n  if (isDef(el._leaveCb)) {\n    el._leaveCb.cancelled = true;\n    el._leaveCb();\n  }\n\n  var data = resolveTransition(vnode.data.transition);\n  if (isUndef(data)) {\n    return\n  }\n\n  /* istanbul ignore if */\n  if (isDef(el._enterCb) || el.nodeType !== 1) {\n    return\n  }\n\n  var css = data.css;\n  var type = data.type;\n  var enterClass = data.enterClass;\n  var enterToClass = data.enterToClass;\n  var enterActiveClass = data.enterActiveClass;\n  var appearClass = data.appearClass;\n  var appearToClass = data.appearToClass;\n  var appearActiveClass = data.appearActiveClass;\n  var beforeEnter = data.beforeEnter;\n  var enter = data.enter;\n  var afterEnter = data.afterEnter;\n  var enterCancelled = data.enterCancelled;\n  var beforeAppear = data.beforeAppear;\n  var appear = data.appear;\n  var afterAppear = data.afterAppear;\n  var appearCancelled = data.appearCancelled;\n  var duration = data.duration;\n\n  // activeInstance will always be the <transition> component managing this\n  // transition. One edge case to check is when the <transition> is placed\n  // as the root node of a child component. In that case we need to check\n  // <transition>'s parent for appear check.\n  var context = activeInstance;\n  var transitionNode = activeInstance.$vnode;\n  while (transitionNode && transitionNode.parent) {\n    context = transitionNode.context;\n    transitionNode = transitionNode.parent;\n  }\n\n  var isAppear = !context._isMounted || !vnode.isRootInsert;\n\n  if (isAppear && !appear && appear !== '') {\n    return\n  }\n\n  var startClass = isAppear && appearClass\n    ? appearClass\n    : enterClass;\n  var activeClass = isAppear && appearActiveClass\n    ? appearActiveClass\n    : enterActiveClass;\n  var toClass = isAppear && appearToClass\n    ? appearToClass\n    : enterToClass;\n\n  var beforeEnterHook = isAppear\n    ? (beforeAppear || beforeEnter)\n    : beforeEnter;\n  var enterHook = isAppear\n    ? (typeof appear === 'function' ? appear : enter)\n    : enter;\n  var afterEnterHook = isAppear\n    ? (afterAppear || afterEnter)\n    : afterEnter;\n  var enterCancelledHook = isAppear\n    ? (appearCancelled || enterCancelled)\n    : enterCancelled;\n\n  var explicitEnterDuration = toNumber(\n    isObject(duration)\n      ? duration.enter\n      : duration\n  );\n\n  if (process.env.NODE_ENV !== 'production' && explicitEnterDuration != null) {\n    checkDuration(explicitEnterDuration, 'enter', vnode);\n  }\n\n  var expectsCSS = css !== false && !isIE9;\n  var userWantsControl = getHookArgumentsLength(enterHook);\n\n  var cb = el._enterCb = once(function () {\n    if (expectsCSS) {\n      removeTransitionClass(el, toClass);\n      removeTransitionClass(el, activeClass);\n    }\n    if (cb.cancelled) {\n      if (expectsCSS) {\n        removeTransitionClass(el, startClass);\n      }\n      enterCancelledHook && enterCancelledHook(el);\n    } else {\n      afterEnterHook && afterEnterHook(el);\n    }\n    el._enterCb = null;\n  });\n\n  if (!vnode.data.show) {\n    // remove pending leave element on enter by injecting an insert hook\n    mergeVNodeHook(vnode, 'insert', function () {\n      var parent = el.parentNode;\n      var pendingNode = parent && parent._pending && parent._pending[vnode.key];\n      if (pendingNode &&\n        pendingNode.tag === vnode.tag &&\n        pendingNode.elm._leaveCb\n      ) {\n        pendingNode.elm._leaveCb();\n      }\n      enterHook && enterHook(el, cb);\n    });\n  }\n\n  // start enter transition\n  beforeEnterHook && beforeEnterHook(el);\n  if (expectsCSS) {\n    addTransitionClass(el, startClass);\n    addTransitionClass(el, activeClass);\n    nextFrame(function () {\n      removeTransitionClass(el, startClass);\n      if (!cb.cancelled) {\n        addTransitionClass(el, toClass);\n        if (!userWantsControl) {\n          if (isValidDuration(explicitEnterDuration)) {\n            setTimeout(cb, explicitEnterDuration);\n          } else {\n            whenTransitionEnds(el, type, cb);\n          }\n        }\n      }\n    });\n  }\n\n  if (vnode.data.show) {\n    toggleDisplay && toggleDisplay();\n    enterHook && enterHook(el, cb);\n  }\n\n  if (!expectsCSS && !userWantsControl) {\n    cb();\n  }\n}\n\nfunction leave (vnode, rm) {\n  var el = vnode.elm;\n\n  // call enter callback now\n  if (isDef(el._enterCb)) {\n    el._enterCb.cancelled = true;\n    el._enterCb();\n  }\n\n  var data = resolveTransition(vnode.data.transition);\n  if (isUndef(data) || el.nodeType !== 1) {\n    return rm()\n  }\n\n  /* istanbul ignore if */\n  if (isDef(el._leaveCb)) {\n    return\n  }\n\n  var css = data.css;\n  var type = data.type;\n  var leaveClass = data.leaveClass;\n  var leaveToClass = data.leaveToClass;\n  var leaveActiveClass = data.leaveActiveClass;\n  var beforeLeave = data.beforeLeave;\n  var leave = data.leave;\n  var afterLeave = data.afterLeave;\n  var leaveCancelled = data.leaveCancelled;\n  var delayLeave = data.delayLeave;\n  var duration = data.duration;\n\n  var expectsCSS = css !== false && !isIE9;\n  var userWantsControl = getHookArgumentsLength(leave);\n\n  var explicitLeaveDuration = toNumber(\n    isObject(duration)\n      ? duration.leave\n      : duration\n  );\n\n  if (process.env.NODE_ENV !== 'production' && isDef(explicitLeaveDuration)) {\n    checkDuration(explicitLeaveDuration, 'leave', vnode);\n  }\n\n  var cb = el._leaveCb = once(function () {\n    if (el.parentNode && el.parentNode._pending) {\n      el.parentNode._pending[vnode.key] = null;\n    }\n    if (expectsCSS) {\n      removeTransitionClass(el, leaveToClass);\n      removeTransitionClass(el, leaveActiveClass);\n    }\n    if (cb.cancelled) {\n      if (expectsCSS) {\n        removeTransitionClass(el, leaveClass);\n      }\n      leaveCancelled && leaveCancelled(el);\n    } else {\n      rm();\n      afterLeave && afterLeave(el);\n    }\n    el._leaveCb = null;\n  });\n\n  if (delayLeave) {\n    delayLeave(performLeave);\n  } else {\n    performLeave();\n  }\n\n  function performLeave () {\n    // the delayed leave may have already been cancelled\n    if (cb.cancelled) {\n      return\n    }\n    // record leaving element\n    if (!vnode.data.show && el.parentNode) {\n      (el.parentNode._pending || (el.parentNode._pending = {}))[(vnode.key)] = vnode;\n    }\n    beforeLeave && beforeLeave(el);\n    if (expectsCSS) {\n      addTransitionClass(el, leaveClass);\n      addTransitionClass(el, leaveActiveClass);\n      nextFrame(function () {\n        removeTransitionClass(el, leaveClass);\n        if (!cb.cancelled) {\n          addTransitionClass(el, leaveToClass);\n          if (!userWantsControl) {\n            if (isValidDuration(explicitLeaveDuration)) {\n              setTimeout(cb, explicitLeaveDuration);\n            } else {\n              whenTransitionEnds(el, type, cb);\n            }\n          }\n        }\n      });\n    }\n    leave && leave(el, cb);\n    if (!expectsCSS && !userWantsControl) {\n      cb();\n    }\n  }\n}\n\n// only used in dev mode\nfunction checkDuration (val, name, vnode) {\n  if (typeof val !== 'number') {\n    warn(\n      \"<transition> explicit \" + name + \" duration is not a valid number - \" +\n      \"got \" + (JSON.stringify(val)) + \".\",\n      vnode.context\n    );\n  } else if (isNaN(val)) {\n    warn(\n      \"<transition> explicit \" + name + \" duration is NaN - \" +\n      'the duration expression might be incorrect.',\n      vnode.context\n    );\n  }\n}\n\nfunction isValidDuration (val) {\n  return typeof val === 'number' && !isNaN(val)\n}\n\n/**\n * Normalize a transition hook's argument length. The hook may be:\n * - a merged hook (invoker) with the original in .fns\n * - a wrapped component method (check ._length)\n * - a plain function (.length)\n */\nfunction getHookArgumentsLength (fn) {\n  if (isUndef(fn)) {\n    return false\n  }\n  var invokerFns = fn.fns;\n  if (isDef(invokerFns)) {\n    // invoker\n    return getHookArgumentsLength(\n      Array.isArray(invokerFns)\n        ? invokerFns[0]\n        : invokerFns\n    )\n  } else {\n    return (fn._length || fn.length) > 1\n  }\n}\n\nfunction _enter (_, vnode) {\n  if (vnode.data.show !== true) {\n    enter(vnode);\n  }\n}\n\nvar transition = inBrowser ? {\n  create: _enter,\n  activate: _enter,\n  remove: function remove$$1 (vnode, rm) {\n    /* istanbul ignore else */\n    if (vnode.data.show !== true) {\n      leave(vnode, rm);\n    } else {\n      rm();\n    }\n  }\n} : {};\n\nvar platformModules = [\n  attrs,\n  klass,\n  events,\n  domProps,\n  style,\n  transition\n];\n\n/*  */\n\n// the directive module should be applied last, after all\n// built-in modules have been applied.\nvar modules = platformModules.concat(baseModules);\n\nvar patch = createPatchFunction({ nodeOps: nodeOps, modules: modules });\n\n/**\n * Not type checking this file because flow doesn't like attaching\n * properties to Elements.\n */\n\n/* istanbul ignore if */\nif (isIE9) {\n  // http://www.matts411.com/post/internet-explorer-9-oninput/\n  document.addEventListener('selectionchange', function () {\n    var el = document.activeElement;\n    if (el && el.vmodel) {\n      trigger(el, 'input');\n    }\n  });\n}\n\nvar directive = {\n  inserted: function inserted (el, binding, vnode, oldVnode) {\n    if (vnode.tag === 'select') {\n      // #6903\n      if (oldVnode.elm && !oldVnode.elm._vOptions) {\n        mergeVNodeHook(vnode, 'postpatch', function () {\n          directive.componentUpdated(el, binding, vnode);\n        });\n      } else {\n        setSelected(el, binding, vnode.context);\n      }\n      el._vOptions = [].map.call(el.options, getValue);\n    } else if (vnode.tag === 'textarea' || isTextInputType(el.type)) {\n      el._vModifiers = binding.modifiers;\n      if (!binding.modifiers.lazy) {\n        el.addEventListener('compositionstart', onCompositionStart);\n        el.addEventListener('compositionend', onCompositionEnd);\n        // Safari < 10.2 & UIWebView doesn't fire compositionend when\n        // switching focus before confirming composition choice\n        // this also fixes the issue where some browsers e.g. iOS Chrome\n        // fires \"change\" instead of \"input\" on autocomplete.\n        el.addEventListener('change', onCompositionEnd);\n        /* istanbul ignore if */\n        if (isIE9) {\n          el.vmodel = true;\n        }\n      }\n    }\n  },\n\n  componentUpdated: function componentUpdated (el, binding, vnode) {\n    if (vnode.tag === 'select') {\n      setSelected(el, binding, vnode.context);\n      // in case the options rendered by v-for have changed,\n      // it's possible that the value is out-of-sync with the rendered options.\n      // detect such cases and filter out values that no longer has a matching\n      // option in the DOM.\n      var prevOptions = el._vOptions;\n      var curOptions = el._vOptions = [].map.call(el.options, getValue);\n      if (curOptions.some(function (o, i) { return !looseEqual(o, prevOptions[i]); })) {\n        // trigger change event if\n        // no matching option found for at least one value\n        var needReset = el.multiple\n          ? binding.value.some(function (v) { return hasNoMatchingOption(v, curOptions); })\n          : binding.value !== binding.oldValue && hasNoMatchingOption(binding.value, curOptions);\n        if (needReset) {\n          trigger(el, 'change');\n        }\n      }\n    }\n  }\n};\n\nfunction setSelected (el, binding, vm) {\n  actuallySetSelected(el, binding, vm);\n  /* istanbul ignore if */\n  if (isIE || isEdge) {\n    setTimeout(function () {\n      actuallySetSelected(el, binding, vm);\n    }, 0);\n  }\n}\n\nfunction actuallySetSelected (el, binding, vm) {\n  var value = binding.value;\n  var isMultiple = el.multiple;\n  if (isMultiple && !Array.isArray(value)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"<select multiple v-model=\\\"\" + (binding.expression) + \"\\\"> \" +\n      \"expects an Array value for its binding, but got \" + (Object.prototype.toString.call(value).slice(8, -1)),\n      vm\n    );\n    return\n  }\n  var selected, option;\n  for (var i = 0, l = el.options.length; i < l; i++) {\n    option = el.options[i];\n    if (isMultiple) {\n      selected = looseIndexOf(value, getValue(option)) > -1;\n      if (option.selected !== selected) {\n        option.selected = selected;\n      }\n    } else {\n      if (looseEqual(getValue(option), value)) {\n        if (el.selectedIndex !== i) {\n          el.selectedIndex = i;\n        }\n        return\n      }\n    }\n  }\n  if (!isMultiple) {\n    el.selectedIndex = -1;\n  }\n}\n\nfunction hasNoMatchingOption (value, options) {\n  return options.every(function (o) { return !looseEqual(o, value); })\n}\n\nfunction getValue (option) {\n  return '_value' in option\n    ? option._value\n    : option.value\n}\n\nfunction onCompositionStart (e) {\n  e.target.composing = true;\n}\n\nfunction onCompositionEnd (e) {\n  // prevent triggering an input event for no reason\n  if (!e.target.composing) { return }\n  e.target.composing = false;\n  trigger(e.target, 'input');\n}\n\nfunction trigger (el, type) {\n  var e = document.createEvent('HTMLEvents');\n  e.initEvent(type, true, true);\n  el.dispatchEvent(e);\n}\n\n/*  */\n\n// recursively search for possible transition defined inside the component root\nfunction locateNode (vnode) {\n  return vnode.componentInstance && (!vnode.data || !vnode.data.transition)\n    ? locateNode(vnode.componentInstance._vnode)\n    : vnode\n}\n\nvar show = {\n  bind: function bind (el, ref, vnode) {\n    var value = ref.value;\n\n    vnode = locateNode(vnode);\n    var transition$$1 = vnode.data && vnode.data.transition;\n    var originalDisplay = el.__vOriginalDisplay =\n      el.style.display === 'none' ? '' : el.style.display;\n    if (value && transition$$1) {\n      vnode.data.show = true;\n      enter(vnode, function () {\n        el.style.display = originalDisplay;\n      });\n    } else {\n      el.style.display = value ? originalDisplay : 'none';\n    }\n  },\n\n  update: function update (el, ref, vnode) {\n    var value = ref.value;\n    var oldValue = ref.oldValue;\n\n    /* istanbul ignore if */\n    if (!value === !oldValue) { return }\n    vnode = locateNode(vnode);\n    var transition$$1 = vnode.data && vnode.data.transition;\n    if (transition$$1) {\n      vnode.data.show = true;\n      if (value) {\n        enter(vnode, function () {\n          el.style.display = el.__vOriginalDisplay;\n        });\n      } else {\n        leave(vnode, function () {\n          el.style.display = 'none';\n        });\n      }\n    } else {\n      el.style.display = value ? el.__vOriginalDisplay : 'none';\n    }\n  },\n\n  unbind: function unbind (\n    el,\n    binding,\n    vnode,\n    oldVnode,\n    isDestroy\n  ) {\n    if (!isDestroy) {\n      el.style.display = el.__vOriginalDisplay;\n    }\n  }\n};\n\nvar platformDirectives = {\n  model: directive,\n  show: show\n};\n\n/*  */\n\nvar transitionProps = {\n  name: String,\n  appear: Boolean,\n  css: Boolean,\n  mode: String,\n  type: String,\n  enterClass: String,\n  leaveClass: String,\n  enterToClass: String,\n  leaveToClass: String,\n  enterActiveClass: String,\n  leaveActiveClass: String,\n  appearClass: String,\n  appearActiveClass: String,\n  appearToClass: String,\n  duration: [Number, String, Object]\n};\n\n// in case the child is also an abstract component, e.g. <keep-alive>\n// we want to recursively retrieve the real component to be rendered\nfunction getRealChild (vnode) {\n  var compOptions = vnode && vnode.componentOptions;\n  if (compOptions && compOptions.Ctor.options.abstract) {\n    return getRealChild(getFirstComponentChild(compOptions.children))\n  } else {\n    return vnode\n  }\n}\n\nfunction extractTransitionData (comp) {\n  var data = {};\n  var options = comp.$options;\n  // props\n  for (var key in options.propsData) {\n    data[key] = comp[key];\n  }\n  // events.\n  // extract listeners and pass them directly to the transition methods\n  var listeners = options._parentListeners;\n  for (var key$1 in listeners) {\n    data[camelize(key$1)] = listeners[key$1];\n  }\n  return data\n}\n\nfunction placeholder (h, rawChild) {\n  if (/\\d-keep-alive$/.test(rawChild.tag)) {\n    return h('keep-alive', {\n      props: rawChild.componentOptions.propsData\n    })\n  }\n}\n\nfunction hasParentTransition (vnode) {\n  while ((vnode = vnode.parent)) {\n    if (vnode.data.transition) {\n      return true\n    }\n  }\n}\n\nfunction isSameChild (child, oldChild) {\n  return oldChild.key === child.key && oldChild.tag === child.tag\n}\n\nvar isNotTextNode = function (c) { return c.tag || isAsyncPlaceholder(c); };\n\nvar isVShowDirective = function (d) { return d.name === 'show'; };\n\nvar Transition = {\n  name: 'transition',\n  props: transitionProps,\n  abstract: true,\n\n  render: function render (h) {\n    var this$1 = this;\n\n    var children = this.$slots.default;\n    if (!children) {\n      return\n    }\n\n    // filter out text nodes (possible whitespaces)\n    children = children.filter(isNotTextNode);\n    /* istanbul ignore if */\n    if (!children.length) {\n      return\n    }\n\n    // warn multiple elements\n    if (process.env.NODE_ENV !== 'production' && children.length > 1) {\n      warn(\n        '<transition> can only be used on a single element. Use ' +\n        '<transition-group> for lists.',\n        this.$parent\n      );\n    }\n\n    var mode = this.mode;\n\n    // warn invalid mode\n    if (process.env.NODE_ENV !== 'production' &&\n      mode && mode !== 'in-out' && mode !== 'out-in'\n    ) {\n      warn(\n        'invalid <transition> mode: ' + mode,\n        this.$parent\n      );\n    }\n\n    var rawChild = children[0];\n\n    // if this is a component root node and the component's\n    // parent container node also has transition, skip.\n    if (hasParentTransition(this.$vnode)) {\n      return rawChild\n    }\n\n    // apply transition data to child\n    // use getRealChild() to ignore abstract components e.g. keep-alive\n    var child = getRealChild(rawChild);\n    /* istanbul ignore if */\n    if (!child) {\n      return rawChild\n    }\n\n    if (this._leaving) {\n      return placeholder(h, rawChild)\n    }\n\n    // ensure a key that is unique to the vnode type and to this transition\n    // component instance. This key will be used to remove pending leaving nodes\n    // during entering.\n    var id = \"__transition-\" + (this._uid) + \"-\";\n    child.key = child.key == null\n      ? child.isComment\n        ? id + 'comment'\n        : id + child.tag\n      : isPrimitive(child.key)\n        ? (String(child.key).indexOf(id) === 0 ? child.key : id + child.key)\n        : child.key;\n\n    var data = (child.data || (child.data = {})).transition = extractTransitionData(this);\n    var oldRawChild = this._vnode;\n    var oldChild = getRealChild(oldRawChild);\n\n    // mark v-show\n    // so that the transition module can hand over the control to the directive\n    if (child.data.directives && child.data.directives.some(isVShowDirective)) {\n      child.data.show = true;\n    }\n\n    if (\n      oldChild &&\n      oldChild.data &&\n      !isSameChild(child, oldChild) &&\n      !isAsyncPlaceholder(oldChild) &&\n      // #6687 component root is a comment node\n      !(oldChild.componentInstance && oldChild.componentInstance._vnode.isComment)\n    ) {\n      // replace old child transition data with fresh one\n      // important for dynamic transitions!\n      var oldData = oldChild.data.transition = extend({}, data);\n      // handle transition mode\n      if (mode === 'out-in') {\n        // return placeholder node and queue update when leave finishes\n        this._leaving = true;\n        mergeVNodeHook(oldData, 'afterLeave', function () {\n          this$1._leaving = false;\n          this$1.$forceUpdate();\n        });\n        return placeholder(h, rawChild)\n      } else if (mode === 'in-out') {\n        if (isAsyncPlaceholder(child)) {\n          return oldRawChild\n        }\n        var delayedLeave;\n        var performLeave = function () { delayedLeave(); };\n        mergeVNodeHook(data, 'afterEnter', performLeave);\n        mergeVNodeHook(data, 'enterCancelled', performLeave);\n        mergeVNodeHook(oldData, 'delayLeave', function (leave) { delayedLeave = leave; });\n      }\n    }\n\n    return rawChild\n  }\n};\n\n/*  */\n\nvar props = extend({\n  tag: String,\n  moveClass: String\n}, transitionProps);\n\ndelete props.mode;\n\nvar TransitionGroup = {\n  props: props,\n\n  beforeMount: function beforeMount () {\n    var this$1 = this;\n\n    var update = this._update;\n    this._update = function (vnode, hydrating) {\n      var restoreActiveInstance = setActiveInstance(this$1);\n      // force removing pass\n      this$1.__patch__(\n        this$1._vnode,\n        this$1.kept,\n        false, // hydrating\n        true // removeOnly (!important, avoids unnecessary moves)\n      );\n      this$1._vnode = this$1.kept;\n      restoreActiveInstance();\n      update.call(this$1, vnode, hydrating);\n    };\n  },\n\n  render: function render (h) {\n    var tag = this.tag || this.$vnode.data.tag || 'span';\n    var map = Object.create(null);\n    var prevChildren = this.prevChildren = this.children;\n    var rawChildren = this.$slots.default || [];\n    var children = this.children = [];\n    var transitionData = extractTransitionData(this);\n\n    for (var i = 0; i < rawChildren.length; i++) {\n      var c = rawChildren[i];\n      if (c.tag) {\n        if (c.key != null && String(c.key).indexOf('__vlist') !== 0) {\n          children.push(c);\n          map[c.key] = c\n          ;(c.data || (c.data = {})).transition = transitionData;\n        } else if (process.env.NODE_ENV !== 'production') {\n          var opts = c.componentOptions;\n          var name = opts ? (opts.Ctor.options.name || opts.tag || '') : c.tag;\n          warn((\"<transition-group> children must be keyed: <\" + name + \">\"));\n        }\n      }\n    }\n\n    if (prevChildren) {\n      var kept = [];\n      var removed = [];\n      for (var i$1 = 0; i$1 < prevChildren.length; i$1++) {\n        var c$1 = prevChildren[i$1];\n        c$1.data.transition = transitionData;\n        c$1.data.pos = c$1.elm.getBoundingClientRect();\n        if (map[c$1.key]) {\n          kept.push(c$1);\n        } else {\n          removed.push(c$1);\n        }\n      }\n      this.kept = h(tag, null, kept);\n      this.removed = removed;\n    }\n\n    return h(tag, null, children)\n  },\n\n  updated: function updated () {\n    var children = this.prevChildren;\n    var moveClass = this.moveClass || ((this.name || 'v') + '-move');\n    if (!children.length || !this.hasMove(children[0].elm, moveClass)) {\n      return\n    }\n\n    // we divide the work into three loops to avoid mixing DOM reads and writes\n    // in each iteration - which helps prevent layout thrashing.\n    children.forEach(callPendingCbs);\n    children.forEach(recordPosition);\n    children.forEach(applyTranslation);\n\n    // force reflow to put everything in position\n    // assign to this to avoid being removed in tree-shaking\n    // $flow-disable-line\n    this._reflow = document.body.offsetHeight;\n\n    children.forEach(function (c) {\n      if (c.data.moved) {\n        var el = c.elm;\n        var s = el.style;\n        addTransitionClass(el, moveClass);\n        s.transform = s.WebkitTransform = s.transitionDuration = '';\n        el.addEventListener(transitionEndEvent, el._moveCb = function cb (e) {\n          if (e && e.target !== el) {\n            return\n          }\n          if (!e || /transform$/.test(e.propertyName)) {\n            el.removeEventListener(transitionEndEvent, cb);\n            el._moveCb = null;\n            removeTransitionClass(el, moveClass);\n          }\n        });\n      }\n    });\n  },\n\n  methods: {\n    hasMove: function hasMove (el, moveClass) {\n      /* istanbul ignore if */\n      if (!hasTransition) {\n        return false\n      }\n      /* istanbul ignore if */\n      if (this._hasMove) {\n        return this._hasMove\n      }\n      // Detect whether an element with the move class applied has\n      // CSS transitions. Since the element may be inside an entering\n      // transition at this very moment, we make a clone of it and remove\n      // all other transition classes applied to ensure only the move class\n      // is applied.\n      var clone = el.cloneNode();\n      if (el._transitionClasses) {\n        el._transitionClasses.forEach(function (cls) { removeClass(clone, cls); });\n      }\n      addClass(clone, moveClass);\n      clone.style.display = 'none';\n      this.$el.appendChild(clone);\n      var info = getTransitionInfo(clone);\n      this.$el.removeChild(clone);\n      return (this._hasMove = info.hasTransform)\n    }\n  }\n};\n\nfunction callPendingCbs (c) {\n  /* istanbul ignore if */\n  if (c.elm._moveCb) {\n    c.elm._moveCb();\n  }\n  /* istanbul ignore if */\n  if (c.elm._enterCb) {\n    c.elm._enterCb();\n  }\n}\n\nfunction recordPosition (c) {\n  c.data.newPos = c.elm.getBoundingClientRect();\n}\n\nfunction applyTranslation (c) {\n  var oldPos = c.data.pos;\n  var newPos = c.data.newPos;\n  var dx = oldPos.left - newPos.left;\n  var dy = oldPos.top - newPos.top;\n  if (dx || dy) {\n    c.data.moved = true;\n    var s = c.elm.style;\n    s.transform = s.WebkitTransform = \"translate(\" + dx + \"px,\" + dy + \"px)\";\n    s.transitionDuration = '0s';\n  }\n}\n\nvar platformComponents = {\n  Transition: Transition,\n  TransitionGroup: TransitionGroup\n};\n\n/*  */\n\n// install platform specific utils\nVue.config.mustUseProp = mustUseProp;\nVue.config.isReservedTag = isReservedTag;\nVue.config.isReservedAttr = isReservedAttr;\nVue.config.getTagNamespace = getTagNamespace;\nVue.config.isUnknownElement = isUnknownElement;\n\n// install platform runtime directives & components\nextend(Vue.options.directives, platformDirectives);\nextend(Vue.options.components, platformComponents);\n\n// install platform patch function\nVue.prototype.__patch__ = inBrowser ? patch : noop;\n\n// public mount method\nVue.prototype.$mount = function (\n  el,\n  hydrating\n) {\n  el = el && inBrowser ? query(el) : undefined;\n  return mountComponent(this, el, hydrating)\n};\n\n// devtools global hook\n/* istanbul ignore next */\nif (inBrowser) {\n  setTimeout(function () {\n    if (config.devtools) {\n      if (devtools) {\n        devtools.emit('init', Vue);\n      } else if (\n        process.env.NODE_ENV !== 'production' &&\n        process.env.NODE_ENV !== 'test'\n      ) {\n        console[console.info ? 'info' : 'log'](\n          'Download the Vue Devtools extension for a better development experience:\\n' +\n          'https://github.com/vuejs/vue-devtools'\n        );\n      }\n    }\n    if (process.env.NODE_ENV !== 'production' &&\n      process.env.NODE_ENV !== 'test' &&\n      config.productionTip !== false &&\n      typeof console !== 'undefined'\n    ) {\n      console[console.info ? 'info' : 'log'](\n        \"You are running Vue in development mode.\\n\" +\n        \"Make sure to turn on production mode when deploying for production.\\n\" +\n        \"See more tips at https://vuejs.org/guide/deployment.html\"\n      );\n    }\n  }, 0);\n}\n\n/*  */\n\nexport default Vue;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\n */\n\nexport const CONSTANTS = {\n  /**\n   * @define {boolean} Whether this is the client Node.js SDK.\n   */\n  NODE_CLIENT: false,\n  /**\n   * @define {boolean} Whether this is the Admin Node.js SDK.\n   */\n  NODE_ADMIN: false,\n\n  /**\n   * Firebase SDK Version\n   */\n  SDK_VERSION: '${JSCORE_VERSION}'\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\n\n/**\n * Throws an error if the provided assertion is falsy\n */\nexport const assert = function(assertion: unknown, message: string): void {\n  if (!assertion) {\n    throw assertionError(message);\n  }\n};\n\n/**\n * Returns an Error object suitable for throwing.\n */\nexport const assertionError = function(message: string): Error {\n  return new Error(\n    'Firebase Database (' +\n      CONSTANTS.SDK_VERSION +\n      ') INTERNAL ASSERT FAILED: ' +\n      message\n  );\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst stringToByteArray = function(str: string): number[] {\n  // TODO(user): Use native implementations if/when available\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (\n      (c & 0xfc00) === 0xd800 &&\n      i + 1 < str.length &&\n      (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00\n    ) {\n      // Surrogate Pair\n      c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Turns an array of numbers into the string given by the concatenation of the\n * characters to which the numbers correspond.\n * @param bytes Array of numbers representing characters.\n * @return Stringification of the array.\n */\nconst byteArrayToString = function(bytes: number[]): string {\n  // TODO(user): Use native implementations if/when available\n  const out: string[] = [];\n  let pos = 0,\n    c = 0;\n  while (pos < bytes.length) {\n    const c1 = bytes[pos++];\n    if (c1 < 128) {\n      out[c++] = String.fromCharCode(c1);\n    } else if (c1 > 191 && c1 < 224) {\n      const c2 = bytes[pos++];\n      out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n    } else if (c1 > 239 && c1 < 365) {\n      // Surrogate Pair\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      const c4 = bytes[pos++];\n      const u =\n        (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\n        0x10000;\n      out[c++] = String.fromCharCode(0xd800 + (u >> 10));\n      out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\n    } else {\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      out[c++] = String.fromCharCode(\n        ((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)\n      );\n    }\n  }\n  return out.join('');\n};\n\n// Static lookup maps, lazily populated by init_()\nexport const base64 = {\n  /**\n   * Maps bytes to characters.\n   * @type {Object}\n   * @private\n   */\n  byteToCharMap_: null,\n\n  /**\n   * Maps characters to bytes.\n   * @type {Object}\n   * @private\n   */\n  charToByteMap_: null,\n\n  /**\n   * Maps bytes to websafe characters.\n   * @type {Object}\n   * @private\n   */\n  byteToCharMapWebSafe_: null,\n\n  /**\n   * Maps websafe characters to bytes.\n   * @type {Object}\n   * @private\n   */\n  charToByteMapWebSafe_: null,\n\n  /**\n   * Our default alphabet, shared between\n   * ENCODED_VALS and ENCODED_VALS_WEBSAFE\n   * @type {string}\n   */\n  ENCODED_VALS_BASE:\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\n\n  /**\n   * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\n   * @type {string}\n   */\n  get ENCODED_VALS() {\n    return this.ENCODED_VALS_BASE + '+/=';\n  },\n\n  /**\n   * Our websafe alphabet.\n   * @type {string}\n   */\n  get ENCODED_VALS_WEBSAFE() {\n    return this.ENCODED_VALS_BASE + '-_.';\n  },\n\n  /**\n   * Whether this browser supports the atob and btoa functions. This extension\n   * started at Mozilla but is now implemented by many browsers. We use the\n   * ASSUME_* variables to avoid pulling in the full useragent detection library\n   * but still allowing the standard per-browser compilations.\n   *\n   * @type {boolean}\n   */\n  HAS_NATIVE_SUPPORT: typeof atob === 'function',\n\n  /**\n   * Base64-encode an array of bytes.\n   *\n   * @param input An array of bytes (numbers with\n   *     value in [0, 255]) to encode.\n   * @param webSafe Boolean indicating we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string {\n    if (!Array.isArray(input)) {\n      throw Error('encodeByteArray takes an array as a parameter');\n    }\n\n    this.init_();\n\n    const byteToCharMap: number[] = webSafe\n      ? this.byteToCharMapWebSafe_\n      : this.byteToCharMap_;\n\n    const output: number[] = [];\n\n    for (let i = 0; i < input.length; i += 3) {\n      const byte1 = input[i];\n      const haveByte2 = i + 1 < input.length;\n      const byte2 = haveByte2 ? input[i + 1] : 0;\n      const haveByte3 = i + 2 < input.length;\n      const byte3 = haveByte3 ? input[i + 2] : 0;\n\n      const outByte1 = byte1 >> 2;\n      const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\n      let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\n      let outByte4 = byte3 & 0x3f;\n\n      if (!haveByte3) {\n        outByte4 = 64;\n\n        if (!haveByte2) {\n          outByte3 = 64;\n        }\n      }\n\n      output.push(\n        byteToCharMap[outByte1],\n        byteToCharMap[outByte2],\n        byteToCharMap[outByte3],\n        byteToCharMap[outByte4]\n      );\n    }\n\n    return output.join('');\n  },\n\n  /**\n   * Base64-encode a string.\n   *\n   * @param input A string to encode.\n   * @param webSafe If true, we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeString(input: string, webSafe?: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return btoa(input);\n    }\n    return this.encodeByteArray(stringToByteArray(input), webSafe);\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * @param input to decode.\n   * @param webSafe True if we should use the\n   *     alternative alphabet.\n   * @return string representing the decoded value.\n   */\n  decodeString(input: string, webSafe: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return atob(input);\n    }\n    return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * In base-64 decoding, groups of four characters are converted into three\n   * bytes.  If the encoder did not apply padding, the input length may not\n   * be a multiple of 4.\n   *\n   * In this case, the last group will have fewer than 4 characters, and\n   * padding will be inferred.  If the group has one or two characters, it decodes\n   * to one byte.  If the group has three characters, it decodes to two bytes.\n   *\n   * @param input Input to decode.\n   * @param webSafe True if we should use the web-safe alphabet.\n   * @return bytes representing the decoded value.\n   */\n  decodeStringToByteArray(input: string, webSafe: boolean): number[] {\n    this.init_();\n\n    const charToByteMap = webSafe\n      ? this.charToByteMapWebSafe_\n      : this.charToByteMap_;\n\n    const output: number[] = [];\n\n    for (let i = 0; i < input.length; ) {\n      const byte1 = charToByteMap[input.charAt(i++)];\n\n      const haveByte2 = i < input.length;\n      const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\n      ++i;\n\n      const haveByte3 = i < input.length;\n      const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      const haveByte4 = i < input.length;\n      const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\n        throw Error();\n      }\n\n      const outByte1 = (byte1 << 2) | (byte2 >> 4);\n      output.push(outByte1);\n\n      if (byte3 !== 64) {\n        const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\n        output.push(outByte2);\n\n        if (byte4 !== 64) {\n          const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\n          output.push(outByte3);\n        }\n      }\n    }\n\n    return output;\n  },\n\n  /**\n   * Lazy static initialization function. Called before\n   * accessing any of the static map variables.\n   * @private\n   */\n  init_() {\n    if (!this.byteToCharMap_) {\n      this.byteToCharMap_ = {};\n      this.charToByteMap_ = {};\n      this.byteToCharMapWebSafe_ = {};\n      this.charToByteMapWebSafe_ = {};\n\n      // We want quick mappings back and forth, so we precompute two maps.\n      for (let i = 0; i < this.ENCODED_VALS.length; i++) {\n        this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\n        this.charToByteMap_[this.byteToCharMap_[i]] = i;\n        this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\n        this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\n\n        // Be forgiving when decoding and correctly decode both encodings.\n        if (i >= this.ENCODED_VALS_BASE.length) {\n          this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\n          this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\n        }\n      }\n    }\n  }\n};\n\n/**\n * URL-safe base64 encoding\n */\nexport const base64Encode = function(str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  return base64.encodeByteArray(utf8Bytes, true);\n};\n\n/**\n * URL-safe base64 decoding\n *\n * NOTE: DO NOT use the global atob() function - it does NOT support the\n * base64Url variant encoding.\n *\n * @param str To be decoded\n * @return Decoded result, if possible\n */\nexport const base64Decode = function(str: string): string | null {\n  try {\n    return base64.decodeString(str, true);\n  } catch (e) {\n    console.error('base64Decode failed: ', e);\n  }\n  return null;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Do a deep-copy of basic JavaScript Objects or Arrays.\n */\nexport function deepCopy<T>(value: T): T {\n  return deepExtend(undefined, value) as T;\n}\n\n/**\n * Copy properties from source to target (recursively allows extension\n * of Objects and Arrays).  Scalar values in the target are over-written.\n * If target is undefined, an object of the appropriate type will be created\n * (and returned).\n *\n * We recursively copy all child properties of plain Objects in the source- so\n * that namespace- like dictionaries are merged.\n *\n * Note that the target can be a function, in which case the properties in\n * the source Object are copied onto it as static properties of the Function.\n */\nexport function deepExtend(target: unknown, source: unknown): unknown {\n  if (!(source instanceof Object)) {\n    return source;\n  }\n\n  switch (source.constructor) {\n    case Date:\n      // Treat Dates like scalars; if the target date object had any child\n      // properties - they will be lost!\n      const dateValue = source as Date;\n      return new Date(dateValue.getTime());\n\n    case Object:\n      if (target === undefined) {\n        target = {};\n      }\n      break;\n\n    case Array:\n      // Always copy the array source and overwrite the target.\n      target = [];\n      break;\n\n    default:\n      // Not a plain Object - treat it as a scalar.\n      return source;\n  }\n\n  for (const prop in source) {\n    if (!source.hasOwnProperty(prop)) {\n      continue;\n    }\n    (target as { [key: string]: unknown })[prop] = deepExtend(\n      (target as { [key: string]: unknown })[prop],\n      (source as { [key: string]: unknown })[prop]\n    );\n  }\n\n  return target;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class Deferred<R> {\n  promise: Promise<R>;\n  reject: (value?: unknown) => void;\n  resolve: (value?: unknown) => void;\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n    });\n  }\n\n  /**\n   * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\n   * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\n   * and returns a node-style callback which will resolve or reject the Deferred's promise.\n   */\n  wrapCallback(\n    callback?: (error?: unknown, value?: unknown) => void\n  ): (error: unknown, value?: unknown) => void {\n    return (error, value?) => {\n      if (error) {\n        this.reject(error);\n      } else {\n        this.resolve(value);\n      }\n      if (typeof callback === 'function') {\n        // Attaching noop handler just in case developer wasn't expecting\n        // promises\n        this.promise.catch(() => {});\n\n        // Some of our callbacks don't expect a value and our own tests\n        // assert that the parameter length is 1\n        if (callback.length === 1) {\n          callback(error);\n        } else {\n          callback(error, value);\n        }\n      }\n    };\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\n\n/**\n * Returns navigator.userAgent string or '' if it's not defined.\n * @return user agent string\n */\nexport function getUA(): string {\n  if (\n    typeof navigator !== 'undefined' &&\n    typeof navigator['userAgent'] === 'string'\n  ) {\n    return navigator['userAgent'];\n  } else {\n    return '';\n  }\n}\n\n/**\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\n *\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\n * wait for a callback.\n */\nexport function isMobileCordova(): boolean {\n  return (\n    typeof window !== 'undefined' &&\n    // @ts-ignore Setting up an broadly applicable index signature for Window\n    // just to deal with this case would probably be a bad idea.\n    !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\n    /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())\n  );\n}\n\n/**\n * Detect Node.js.\n *\n * @return true if Node.js environment is detected.\n */\n// Node detection logic from: https://github.com/iliakan/detect-node/\nexport function isNode(): boolean {\n  try {\n    return (\n      Object.prototype.toString.call(global.process) === '[object process]'\n    );\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Detect Browser Environment\n */\nexport function isBrowser(): boolean {\n  return typeof self === 'object' && self.self === self;\n}\n\n/**\n * Detect React Native.\n *\n * @return true if ReactNative environment is detected.\n */\nexport function isReactNative(): boolean {\n  return (\n    typeof navigator === 'object' && navigator['product'] === 'ReactNative'\n  );\n}\n\n/**\n * Detect whether the current SDK build is the Node version.\n *\n * @return true if it's the Node SDK build.\n */\nexport function isNodeSdk(): boolean {\n  return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Standardized Firebase Error.\n *\n * Usage:\n *\n *   // Typescript string literals for type-safe codes\n *   type Err =\n *     'unknown' |\n *     'object-not-found'\n *     ;\n *\n *   // Closure enum for type-safe error codes\n *   // at-enum {string}\n *   var Err = {\n *     UNKNOWN: 'unknown',\n *     OBJECT_NOT_FOUND: 'object-not-found',\n *   }\n *\n *   let errors: Map<Err, string> = {\n *     'generic-error': \"Unknown error\",\n *     'file-not-found': \"Could not find file: {$file}\",\n *   };\n *\n *   // Type-safe function - must pass a valid error code as param.\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\n *\n *   ...\n *   throw error.create(Err.GENERIC);\n *   ...\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\n *   ...\n *   // Service: Could not file file: foo.txt (service/file-not-found).\n *\n *   catch (e) {\n *     assert(e.message === \"Could not find file: foo.txt.\");\n *     if (e.code === 'service/file-not-found') {\n *       console.log(\"Could not read file: \" + e['file']);\n *     }\n *   }\n */\n\nexport type ErrorMap<ErrorCode extends string> = {\n  readonly [K in ErrorCode]: string\n};\n\nconst ERROR_NAME = 'FirebaseError';\n\nexport interface StringLike {\n  toString(): string;\n}\n\nexport interface ErrorData {\n  [key: string]: StringLike | undefined;\n}\n\nexport interface FirebaseError extends Error, ErrorData {\n  // Unique code for error - format is service/error-code-string.\n  readonly code: string;\n\n  // Developer-friendly error message.\n  readonly message: string;\n\n  // Always 'FirebaseError'.\n  readonly name: typeof ERROR_NAME;\n\n  // Where available - stack backtrace in a string.\n  readonly stack?: string;\n}\n\n// Based on code from:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\nexport class FirebaseError extends Error {\n  readonly name = ERROR_NAME;\n\n  constructor(readonly code: string, message: string) {\n    super(message);\n\n    // Fix For ES5\n    // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n    Object.setPrototypeOf(this, FirebaseError.prototype);\n\n    // Maintains proper stack trace for where our error was thrown.\n    // Only available on V8.\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ErrorFactory.prototype.create);\n    }\n  }\n}\n\nexport class ErrorFactory<\n  ErrorCode extends string,\n  ErrorParams extends { readonly [K in ErrorCode]?: ErrorData } = {}\n> {\n  constructor(\n    private readonly service: string,\n    private readonly serviceName: string,\n    private readonly errors: ErrorMap<ErrorCode>\n  ) {}\n\n  create<K extends ErrorCode>(\n    code: K,\n    ...data: K extends keyof ErrorParams ? [ErrorParams[K]] : []\n  ): FirebaseError {\n    const customData = (data[0] as ErrorData) || {};\n    const fullCode = `${this.service}/${code}`;\n    const template = this.errors[code];\n\n    const message = template ? replaceTemplate(template, customData) : 'Error';\n    // Service Name: Error message (service/code).\n    const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;\n\n    const error = new FirebaseError(fullCode, fullMessage);\n\n    // Keys with an underscore at the end of their name are not included in\n    // error.data for some reason.\n    // TODO: Replace with Object.entries when lib is updated to es2017.\n    for (const key of Object.keys(customData)) {\n      if (key.slice(-1) !== '_') {\n        if (key in error) {\n          console.warn(\n            `Overwriting FirebaseError base field \"${key}\" can cause unexpected behavior.`\n          );\n        }\n        error[key] = customData[key];\n      }\n    }\n\n    return error;\n  }\n}\n\nfunction replaceTemplate(template: string, data: ErrorData): string {\n  return template.replace(PATTERN, (_, key) => {\n    const value = data[key];\n    return value != null ? value.toString() : `<${key}?>`;\n  });\n}\n\nconst PATTERN = /\\{\\$([^}]+)}/g;\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Evaluates a JSON string into a javascript object.\n *\n * @param {string} str A string containing JSON.\n * @return {*} The javascript object representing the specified JSON.\n */\nexport function jsonEval(str: string): unknown {\n  return JSON.parse(str);\n}\n\n/**\n * Returns JSON representing a javascript object.\n * @param {*} data Javascript object to be stringified.\n * @return {string} The JSON contents of the object.\n */\nexport function stringify(data: unknown): string {\n  return JSON.stringify(data);\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64Decode } from './crypt';\nimport { jsonEval } from './json';\n\ninterface Claims {\n  [key: string]: {};\n}\n\ninterface DecodedToken {\n  header: object;\n  claims: Claims;\n  data: object;\n  signature: string;\n}\n\n/**\n * Decodes a Firebase auth. token into constituent parts.\n *\n * Notes:\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const decode = function(token: string): DecodedToken {\n  let header = {},\n    claims: Claims = {},\n    data = {},\n    signature = '';\n\n  try {\n    const parts = token.split('.');\n    header = jsonEval(base64Decode(parts[0]) || '') as object;\n    claims = jsonEval(base64Decode(parts[1]) || '') as Claims;\n    signature = parts[2];\n    data = claims['d'] || {};\n    delete claims['d'];\n  } catch (e) {}\n\n  return {\n    header,\n    claims,\n    data,\n    signature\n  };\n};\n\ninterface DecodedToken {\n  header: object;\n  claims: Claims;\n  data: object;\n  signature: string;\n}\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isValidTimestamp = function(token: string): boolean {\n  const claims: Claims = decode(token).claims;\n  const now: number = Math.floor(new Date().getTime() / 1000);\n  let validSince: number = 0,\n    validUntil: number = 0;\n\n  if (typeof claims === 'object') {\n    if (claims.hasOwnProperty('nbf')) {\n      validSince = claims['nbf'] as number;\n    } else if (claims.hasOwnProperty('iat')) {\n      validSince = claims['iat'] as number;\n    }\n\n    if (claims.hasOwnProperty('exp')) {\n      validUntil = claims['exp'] as number;\n    } else {\n      // token will expire after 24h by default\n      validUntil = validSince + 86400;\n    }\n  }\n\n  return (\n    !!now &&\n    !!validSince &&\n    !!validUntil &&\n    now >= validSince &&\n    now <= validUntil\n  );\n};\n\n/**\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\n *\n * Notes:\n * - May return null if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const issuedAtTime = function(token: string): number | null {\n  const claims: Claims = decode(token).claims;\n  if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\n    return claims['iat'] as number;\n  }\n  return null;\n};\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isValidFormat = function(token: string): boolean {\n  const decoded = decode(token),\n    claims = decoded.claims;\n\n  return !!claims && typeof claims === 'object' && claims.hasOwnProperty('iat');\n};\n\n/**\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isAdmin = function(token: string): boolean {\n  const claims: Claims = decode(token).claims;\n  return typeof claims === 'object' && claims['admin'] === true;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable */\n// will enable after https://github.com/firebase/firebase-js-sdk/pull/1811 is merged\n\ninterface UtilObject<V> {\n  [key: string]: V;\n}\n\n// See http://www.devthought.com/2012/01/18/an-object-is-not-a-hash/\nexport const contains = function<V>(obj: UtilObject<V>, key: string): boolean {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n};\n\nexport const safeGet = function<V>(\n  obj: UtilObject<V>,\n  key: string\n): V | undefined {\n  if (Object.prototype.hasOwnProperty.call(obj, key)) return obj[key];\n  // else return undefined.\n};\n\n/**\n * Enumerates the keys/values in an object, excluding keys defined on the prototype.\n *\n * @param {?Object.<K,V>} obj Object to enumerate.\n * @param {!function(K, V)} fn Function to call for each key and value.\n * @template K,V\n */\nexport const forEach = function<V>(\n  obj: UtilObject<V>,\n  fn: (key: string, value: V) => void\n): void {\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      fn(key, obj[key]);\n    }\n  }\n};\n\n/**\n * Copies all the (own) properties from one object to another.\n * @param {!Object} objTo\n * @param {!Object} objFrom\n * @return {!Object} objTo\n */\nexport const extend = function<V>(\n  objTo: UtilObject<V>,\n  objFrom: UtilObject<V>\n): UtilObject<V> {\n  forEach(objFrom, function(key, value) {\n    objTo[key] = value;\n  });\n  return objTo;\n};\n\n/**\n * Returns a clone of the specified object.\n * @param {!Object} obj\n * @return {!Object} cloned obj.\n */\nexport const clone = function<V>(obj: UtilObject<V>) {\n  return extend({}, obj);\n};\n\n/**\n * Returns true if obj has typeof \"object\" and is not null.  Unlike goog.isObject(), does not return true\n * for functions.\n */\nexport const isNonNullObject = function<V>(obj: UtilObject<V>): boolean {\n  return typeof obj === 'object' && obj !== null;\n};\n\nexport const isEmpty = function<V>(obj: UtilObject<V>) {\n  for (var key in obj) {\n    return false;\n  }\n  return true;\n};\n\nexport const getCount = function<V>(obj: UtilObject<V>): number {\n  var rv = 0;\n  for (var key in obj) {\n    rv++;\n  }\n  return rv;\n};\n\nexport const map = function<V>(\n  obj: UtilObject<V>,\n  fn: (value: V, key: string | number, obj: UtilObject<V>) => unknown,\n  context?: unknown\n) {\n  var res: UtilObject<V> = {};\n  for (var key in obj) {\n    res[key] = fn.call(context, obj[key], key, obj);\n  }\n  return res;\n};\n\nexport const findKey = function<V>(\n  obj: UtilObject<V>,\n  fn: (value: V, key: string | number, obj: UtilObject<V>) => unknown,\n  context?: unknown\n) {\n  for (var key in obj) {\n    if (fn.call(context, obj[key], key, obj)) {\n      return key;\n    }\n  }\n  return undefined;\n};\n\nexport const findValue = function<V>(\n  obj: UtilObject<V>,\n  fn: (value: V, key: string | number, obj: UtilObject<V>) => unknown,\n  context?: unknown\n) {\n  var key = findKey(obj, fn, context);\n  return key && obj[key];\n};\n\nexport const getAnyKey = function<V>(obj: UtilObject<V>) {\n  for (var key in obj) {\n    return key;\n  }\n};\n\nexport const getValues = function<V>(obj: UtilObject<V>) {\n  var res: V[] = [];\n  var i = 0;\n  for (var key in obj) {\n    res[i++] = obj[key];\n  }\n  return res;\n};\n\n/**\n * Tests whether every key/value pair in an object pass the test implemented\n * by the provided function\n *\n * @param {?Object.<K,V>} obj Object to test.\n * @param {!function(K, V)} fn Function to call for each key and value.\n * @template K,V\n */\nexport const every = function<V>(\n  obj: UtilObject<V>,\n  fn: (k: string, v?: V) => boolean\n): boolean {\n  for (let key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      if (!fn(key, obj[key])) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { forEach } from './obj';\n\n/**\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a params\n * object (e.g. {arg: 'val', arg2: 'val2'})\n * Note: You must prepend it with ? when adding it to a URL.\n */\nexport const querystring = function<V>(querystringParams: {\n  [key: string]: string;\n}): string {\n  const params: string[] = [];\n  forEach(querystringParams, (key: string, value) => {\n    if (Array.isArray(value)) {\n      value.forEach(arrayVal => {\n        params.push(\n          encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal)\n        );\n      });\n    } else {\n      params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    }\n  });\n  return params.length ? '&' + params.join('&') : '';\n};\n\n/**\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object (e.g. {arg: 'val', arg2: 'val2'})\n *\n * @param {string} querystring\n * @return {!Object}\n */\nexport const querystringDecode = function(querystring: string): object {\n  const obj: { [key: string]: unknown } = {};\n  const tokens = querystring.replace(/^\\?/, '').split('&');\n\n  tokens.forEach(token => {\n    if (token) {\n      const key = token.split('=');\n      obj[key[0]] = key[1];\n    }\n  });\n  return obj;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview SHA-1 cryptographic hash.\n * Variable names follow the notation in FIPS PUB 180-3:\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\n *\n * Usage:\n *   var sha1 = new sha1();\n *   sha1.update(bytes);\n *   var hash = sha1.digest();\n *\n * Performance:\n *   Chrome 23:   ~400 Mbit/s\n *   Firefox 16:  ~250 Mbit/s\n *\n */\n\n/**\n * SHA-1 cryptographic hash constructor.\n *\n * The properties declared here are discussed in the above algorithm document.\n * @constructor\n * @final\n * @struct\n */\nexport class Sha1 {\n  /**\n   * Holds the previous values of accumulated variables a-e in the compress_\n   * function.\n   * @private\n   */\n  private chain_: number[] = [];\n\n  /**\n   * A buffer holding the partially computed hash result.\n   * @private\n   */\n  private buf_: number[] = [];\n\n  /**\n   * An array of 80 bytes, each a part of the message to be hashed.  Referred to\n   * as the message schedule in the docs.\n   * @private\n   */\n  private W_: number[] = [];\n\n  /**\n   * Contains data needed to pad messages less than 64 bytes.\n   * @private\n   */\n  private pad_: number[] = [];\n\n  /**\n   * @private {number}\n   */\n  private inbuf_: number = 0;\n\n  /**\n   * @private {number}\n   */\n  private total_: number = 0;\n\n  blockSize: number;\n\n  constructor() {\n    this.blockSize = 512 / 8;\n\n    this.pad_[0] = 128;\n    for (let i = 1; i < this.blockSize; ++i) {\n      this.pad_[i] = 0;\n    }\n\n    this.reset();\n  }\n\n  reset(): void {\n    this.chain_[0] = 0x67452301;\n    this.chain_[1] = 0xefcdab89;\n    this.chain_[2] = 0x98badcfe;\n    this.chain_[3] = 0x10325476;\n    this.chain_[4] = 0xc3d2e1f0;\n\n    this.inbuf_ = 0;\n    this.total_ = 0;\n  }\n\n  /**\n   * Internal compress helper function.\n   * @param buf Block to compress.\n   * @param offset Offset of the block in the buffer.\n   * @private\n   */\n  compress_(buf: number[] | Uint8Array | string, offset?: number): void {\n    if (!offset) {\n      offset = 0;\n    }\n\n    const W = this.W_;\n\n    // get 16 big endian words\n    if (typeof buf === 'string') {\n      for (let i = 0; i < 16; i++) {\n        // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\n        // have a bug that turns the post-increment ++ operator into pre-increment\n        // during JIT compilation.  We have code that depends heavily on SHA-1 for\n        // correctness and which is affected by this bug, so I've removed all uses\n        // of post-increment ++ in which the result value is used.  We can revert\n        // this change once the Safari bug\n        // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\n        // most clients have been updated.\n        W[i] =\n          (buf.charCodeAt(offset) << 24) |\n          (buf.charCodeAt(offset + 1) << 16) |\n          (buf.charCodeAt(offset + 2) << 8) |\n          buf.charCodeAt(offset + 3);\n        offset += 4;\n      }\n    } else {\n      for (let i = 0; i < 16; i++) {\n        W[i] =\n          (buf[offset] << 24) |\n          (buf[offset + 1] << 16) |\n          (buf[offset + 2] << 8) |\n          buf[offset + 3];\n        offset += 4;\n      }\n    }\n\n    // expand to 80 words\n    for (let i = 16; i < 80; i++) {\n      const t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n      W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\n    }\n\n    let a = this.chain_[0];\n    let b = this.chain_[1];\n    let c = this.chain_[2];\n    let d = this.chain_[3];\n    let e = this.chain_[4];\n    let f, k;\n\n    // TODO(user): Try to unroll this loop to speed up the computation.\n    for (let i = 0; i < 80; i++) {\n      if (i < 40) {\n        if (i < 20) {\n          f = d ^ (b & (c ^ d));\n          k = 0x5a827999;\n        } else {\n          f = b ^ c ^ d;\n          k = 0x6ed9eba1;\n        }\n      } else {\n        if (i < 60) {\n          f = (b & c) | (d & (b | c));\n          k = 0x8f1bbcdc;\n        } else {\n          f = b ^ c ^ d;\n          k = 0xca62c1d6;\n        }\n      }\n\n      const t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\n      e = d;\n      d = c;\n      c = ((b << 30) | (b >>> 2)) & 0xffffffff;\n      b = a;\n      a = t;\n    }\n\n    this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\n    this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\n    this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\n    this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\n    this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\n  }\n\n  update(bytes?: number[] | Uint8Array | string, length?: number): void {\n    // TODO(johnlenz): tighten the function signature and remove this check\n    if (bytes == null) {\n      return;\n    }\n\n    if (length === undefined) {\n      length = bytes.length;\n    }\n\n    const lengthMinusBlock = length - this.blockSize;\n    let n = 0;\n    // Using local instead of member variables gives ~5% speedup on Firefox 16.\n    const buf = this.buf_;\n    let inbuf = this.inbuf_;\n\n    // The outer while loop should execute at most twice.\n    while (n < length) {\n      // When we have no data in the block to top up, we can directly process the\n      // input buffer (assuming it contains sufficient data). This gives ~25%\n      // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\n      // the data is provided in large chunks (or in multiples of 64 bytes).\n      if (inbuf === 0) {\n        while (n <= lengthMinusBlock) {\n          this.compress_(bytes, n);\n          n += this.blockSize;\n        }\n      }\n\n      if (typeof bytes === 'string') {\n        while (n < length) {\n          buf[inbuf] = bytes.charCodeAt(n);\n          ++inbuf;\n          ++n;\n          if (inbuf === this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      } else {\n        while (n < length) {\n          buf[inbuf] = bytes[n];\n          ++inbuf;\n          ++n;\n          if (inbuf === this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      }\n    }\n\n    this.inbuf_ = inbuf;\n    this.total_ += length;\n  }\n\n  /** @override */\n  digest(): number[] {\n    const digest: number[] = [];\n    let totalBits = this.total_ * 8;\n\n    // Add pad 0x80 0x00*.\n    if (this.inbuf_ < 56) {\n      this.update(this.pad_, 56 - this.inbuf_);\n    } else {\n      this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\n    }\n\n    // Add # bits.\n    for (let i = this.blockSize - 1; i >= 56; i--) {\n      this.buf_[i] = totalBits & 255;\n      totalBits /= 256; // Don't use bit-shifting here!\n    }\n\n    this.compress_(this.buf_);\n\n    let n = 0;\n    for (let i = 0; i < 5; i++) {\n      for (let j = 24; j >= 0; j -= 8) {\n        digest[n] = (this.chain_[i] >> j) & 255;\n        ++n;\n      }\n    }\n    return digest;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport type NextFn<T> = (value: T) => void;\nexport type ErrorFn = (error: Error) => void;\nexport type CompleteFn = () => void;\n\nexport interface Observer<T> {\n  // Called once for each value in a stream of values.\n  next: NextFn<T>;\n\n  // A stream terminates by a single call to EITHER error() or complete().\n  error: ErrorFn;\n\n  // No events will be sent to next() once complete() is called.\n  complete: CompleteFn;\n}\n\nexport type PartialObserver<T> = Partial<Observer<T>>;\n\n// TODO: Support also Unsubscribe.unsubscribe?\nexport type Unsubscribe = () => void;\n\n/**\n * The Subscribe interface has two forms - passing the inline function\n * callbacks, or a object interface with callback properties.\n */\nexport interface Subscribe<T> {\n  (next?: NextFn<T>, error?: ErrorFn, complete?: CompleteFn): Unsubscribe;\n  (observer: PartialObserver<T>): Unsubscribe;\n}\n\nexport interface Observable<T> {\n  // Subscribe method\n  subscribe: Subscribe<T>;\n}\n\nexport type Executor<T> = (observer: Observer<T>) => void;\n\n/**\n * Helper to make a Subscribe function (just like Promise helps make a\n * Thenable).\n *\n * @param executor Function which can make calls to a single Observer\n *     as a proxy.\n * @param onNoObservers Callback when count of Observers goes to zero.\n */\nexport function createSubscribe<T>(\n  executor: Executor<T>,\n  onNoObservers?: Executor<T>\n): Subscribe<T> {\n  const proxy = new ObserverProxy<T>(executor, onNoObservers);\n  return proxy.subscribe.bind(proxy);\n}\n\n/**\n * Implement fan-out for any number of Observers attached via a subscribe\n * function.\n */\nclass ObserverProxy<T> implements Observer<T> {\n  private observers: Array<Observer<T>> | undefined = [];\n  private unsubscribes: Unsubscribe[] = [];\n  private onNoObservers: Executor<T> | undefined;\n  private observerCount = 0;\n  // Micro-task scheduling by calling task.then().\n  private task = Promise.resolve();\n  private finalized = false;\n  private finalError: Error;\n\n  /**\n   * @param executor Function which can make calls to a single Observer\n   *     as a proxy.\n   * @param onNoObservers Callback when count of Observers goes to zero.\n   */\n  constructor(executor: Executor<T>, onNoObservers?: Executor<T>) {\n    this.onNoObservers = onNoObservers;\n    // Call the executor asynchronously so subscribers that are called\n    // synchronously after the creation of the subscribe function\n    // can still receive the very first value generated in the executor.\n    this.task\n      .then(() => {\n        executor(this);\n      })\n      .catch(e => {\n        this.error(e);\n      });\n  }\n\n  next(value: T): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.next(value);\n    });\n  }\n\n  error(error: Error): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.error(error);\n    });\n    this.close(error);\n  }\n\n  complete(): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.complete();\n    });\n    this.close();\n  }\n\n  /**\n   * Subscribe function that can be used to add an Observer to the fan-out list.\n   *\n   * - We require that no event is sent to a subscriber sychronously to their\n   *   call to subscribe().\n   */\n  subscribe(\n    nextOrObserver: PartialObserver<T> | Function,\n    error?: ErrorFn,\n    complete?: CompleteFn\n  ): Unsubscribe {\n    let observer: Observer<T>;\n\n    if (\n      nextOrObserver === undefined &&\n      error === undefined &&\n      complete === undefined\n    ) {\n      throw new Error('Missing Observer.');\n    }\n\n    // Assemble an Observer object when passed as callback functions.\n    if (implementsAnyMethods(nextOrObserver, ['next', 'error', 'complete'])) {\n      observer = nextOrObserver as Observer<T>;\n    } else {\n      observer = {\n        next: nextOrObserver as NextFn<T>,\n        error,\n        complete\n      } as Observer<T>;\n    }\n\n    if (observer.next === undefined) {\n      observer.next = noop as NextFn<T>;\n    }\n    if (observer.error === undefined) {\n      observer.error = noop as ErrorFn;\n    }\n    if (observer.complete === undefined) {\n      observer.complete = noop as CompleteFn;\n    }\n\n    const unsub = this.unsubscribeOne.bind(this, this.observers!.length);\n\n    // Attempt to subscribe to a terminated Observable - we\n    // just respond to the Observer with the final error or complete\n    // event.\n    if (this.finalized) {\n      // tslint:disable-next-line:no-floating-promises\n      this.task.then(() => {\n        try {\n          if (this.finalError) {\n            observer.error(this.finalError);\n          } else {\n            observer.complete();\n          }\n        } catch (e) {\n          // nothing\n        }\n        return;\n      });\n    }\n\n    this.observers!.push(observer as Observer<T>);\n\n    return unsub;\n  }\n\n  // Unsubscribe is synchronous - we guarantee that no events are sent to\n  // any unsubscribed Observer.\n  private unsubscribeOne(i: number): void {\n    if (this.observers === undefined || this.observers[i] === undefined) {\n      return;\n    }\n\n    delete this.observers[i];\n\n    this.observerCount -= 1;\n    if (this.observerCount === 0 && this.onNoObservers !== undefined) {\n      this.onNoObservers(this);\n    }\n  }\n\n  private forEachObserver(fn: (observer: Observer<T>) => void): void {\n    if (this.finalized) {\n      // Already closed by previous event....just eat the additional values.\n      return;\n    }\n\n    // Since sendOne calls asynchronously - there is no chance that\n    // this.observers will become undefined.\n    for (let i = 0; i < this.observers!.length; i++) {\n      this.sendOne(i, fn);\n    }\n  }\n\n  // Call the Observer via one of it's callback function. We are careful to\n  // confirm that the observe has not been unsubscribed since this asynchronous\n  // function had been queued.\n  private sendOne(i: number, fn: (observer: Observer<T>) => void): void {\n    // Execute the callback asynchronously\n    // tslint:disable-next-line:no-floating-promises\n    this.task.then(() => {\n      if (this.observers !== undefined && this.observers[i] !== undefined) {\n        try {\n          fn(this.observers[i]);\n        } catch (e) {\n          // Ignore exceptions raised in Observers or missing methods of an\n          // Observer.\n          // Log error to console. b/31404806\n          if (typeof console !== 'undefined' && console.error) {\n            console.error(e);\n          }\n        }\n      }\n    });\n  }\n\n  private close(err?: Error): void {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    if (err !== undefined) {\n      this.finalError = err;\n    }\n    // Proxy is no longer needed - garbage collect references\n    // tslint:disable-next-line:no-floating-promises\n    this.task.then(() => {\n      this.observers = undefined;\n      this.onNoObservers = undefined;\n    });\n  }\n}\n\n/** Turn synchronous function into one called asynchronously. */\nexport function async(fn: Function, onError?: ErrorFn): Function {\n  return (...args: unknown[]) => {\n    Promise.resolve(true)\n      .then(() => {\n        fn(...args);\n      })\n      .catch((error: Error) => {\n        if (onError) {\n          onError(error);\n        }\n      });\n  };\n}\n\n/**\n * Return true if the object passed in implements any of the named methods.\n */\nfunction implementsAnyMethods(\n  obj: { [key: string]: unknown },\n  methods: string[]\n): boolean {\n  if (typeof obj !== 'object' || obj === null) {\n    return false;\n  }\n\n  for (const method of methods) {\n    if (method in obj && typeof obj[method] === 'function') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction noop(): void {\n  // do nothing\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Check to make sure the appropriate number of arguments are provided for a public function.\n * Throws an error if it fails.\n *\n * @param fnName The function name\n * @param minCount The minimum number of arguments to allow for the function call\n * @param maxCount The maximum number of argument to allow for the function call\n * @param argCount The actual number of arguments provided.\n */\nexport const validateArgCount = function(\n  fnName: string,\n  minCount: number,\n  maxCount: number,\n  argCount: number\n): void {\n  let argError;\n  if (argCount < minCount) {\n    argError = 'at least ' + minCount;\n  } else if (argCount > maxCount) {\n    argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\n  }\n  if (argError) {\n    const error =\n      fnName +\n      ' failed: Was called with ' +\n      argCount +\n      (argCount === 1 ? ' argument.' : ' arguments.') +\n      ' Expects ' +\n      argError +\n      '.';\n    throw new Error(error);\n  }\n};\n\n/**\n * Generates a string to prefix an error message about failed argument validation\n *\n * @param fnName The function name\n * @param argumentNumber The index of the argument\n * @param optional Whether or not the argument is optional\n * @return The prefix to add to the error thrown for validation.\n */\nexport function errorPrefix(\n  fnName: string,\n  argumentNumber: number,\n  optional: boolean\n): string {\n  let argName = '';\n  switch (argumentNumber) {\n    case 1:\n      argName = optional ? 'first' : 'First';\n      break;\n    case 2:\n      argName = optional ? 'second' : 'Second';\n      break;\n    case 3:\n      argName = optional ? 'third' : 'Third';\n      break;\n    case 4:\n      argName = optional ? 'fourth' : 'Fourth';\n      break;\n    default:\n      throw new Error(\n        'errorPrefix called with argumentNumber > 4.  Need to update it?'\n      );\n  }\n\n  let error = fnName + ' failed: ';\n\n  error += argName + ' argument ';\n  return error;\n}\n\n/**\n * @param fnName\n * @param argumentNumber\n * @param namespace\n * @param optional\n */\nexport function validateNamespace(\n  fnName: string,\n  argumentNumber: number,\n  namespace: string,\n  optional: boolean\n): void {\n  if (optional && !namespace) {\n    return;\n  }\n  if (typeof namespace !== 'string') {\n    //TODO: I should do more validation here. We only allow certain chars in namespaces.\n    throw new Error(\n      errorPrefix(fnName, argumentNumber, optional) +\n        'must be a valid firebase namespace.'\n    );\n  }\n}\n\nexport function validateCallback(\n  fnName: string,\n  argumentNumber: number,\n  callback: Function,\n  optional: boolean\n): void {\n  if (optional && !callback) {\n    return;\n  }\n  if (typeof callback !== 'function') {\n    throw new Error(\n      errorPrefix(fnName, argumentNumber, optional) +\n        'must be a valid function.'\n    );\n  }\n}\n\nexport function validateContextObject(\n  fnName: string,\n  argumentNumber: number,\n  context: unknown,\n  optional: boolean\n): void {\n  if (optional && !context) {\n    return;\n  }\n  if (typeof context !== 'object' || context === null) {\n    throw new Error(\n      errorPrefix(fnName, argumentNumber, optional) +\n        'must be a valid context object.'\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from './assert';\n\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\n// so it's been modified.\n\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\n// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\n// pair).\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\n\n/**\n * @param {string} str\n * @return {Array}\n */\nexport const stringToByteArray = function(str: string): number[] {\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n\n    // Is this the lead surrogate in a surrogate pair?\n    if (c >= 0xd800 && c <= 0xdbff) {\n      const high = c - 0xd800; // the high 10 bits.\n      i++;\n      assert(i < str.length, 'Surrogate pair missing trail surrogate.');\n      const low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\n      c = 0x10000 + (high << 10) + low;\n    }\n\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (c < 65536) {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Calculate length without actually converting; useful for doing cheaper validation.\n * @param {string} str\n * @return {number}\n */\nexport const stringLength = function(str: string): number {\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    const c = str.charCodeAt(i);\n    if (c < 128) {\n      p++;\n    } else if (c < 2048) {\n      p += 2;\n    } else if (c >= 0xd800 && c <= 0xdbff) {\n      // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\n      p += 4;\n      i++; // skip trail surrogate.\n    } else {\n      p += 3;\n    }\n  }\n  return p;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport * from './src/assert';\nexport * from './src/crypt';\nexport * from './src/constants';\nexport * from './src/deepCopy';\nexport * from './src/deferred';\nexport * from './src/environment';\nexport * from './src/errors';\nexport * from './src/json';\nexport * from './src/jwt';\nexport * from './src/obj';\nexport * from './src/query';\nexport * from './src/sha1';\nexport * from './src/subscribe';\nexport * from './src/validation';\nexport * from './src/utf8';\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A container for all of the Logger instances\n */\nexport const instances: Logger[] = [];\n\n/**\n * The JS SDK supports 5 log levels and also allows a user the ability to\n * silence the logs altogether.\n *\n * The order is a follows:\n * DEBUG < VERBOSE < INFO < WARN < ERROR\n *\n * All of the log types above the current log level will be captured (i.e. if\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\n * `VERBOSE` logs will not)\n */\nexport enum LogLevel {\n  DEBUG,\n  VERBOSE,\n  INFO,\n  WARN,\n  ERROR,\n  SILENT\n}\n\n/**\n * The default log level\n */\nconst defaultLogLevel: LogLevel = LogLevel.INFO;\n\n/**\n * We allow users the ability to pass their own log handler. We will pass the\n * type of log, the current log level, and any other arguments passed (i.e. the\n * messages that the user wants to log) to this function.\n */\nexport type LogHandler = (\n  loggerInstance: Logger,\n  logType: LogLevel,\n  ...args: unknown[]\n) => void;\n\n/**\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\n * messages on to their corresponding console counterparts (if the log method\n * is supported by the current log level)\n */\nconst defaultLogHandler: LogHandler = (instance, logType, ...args): void => {\n  if (logType < instance.logLevel) {\n    return;\n  }\n  const now = new Date().toISOString();\n  switch (logType) {\n    /**\n     * By default, `console.debug` is not displayed in the developer console (in\n     * chrome). To avoid forcing users to have to opt-in to these logs twice\n     * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\n     * logs to the `console.log` function.\n     */\n    case LogLevel.DEBUG:\n      console.log(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    case LogLevel.VERBOSE:\n      console.log(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    case LogLevel.INFO:\n      console.info(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    case LogLevel.WARN:\n      console.warn(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    case LogLevel.ERROR:\n      console.error(`[${now}]  ${instance.name}:`, ...args);\n      break;\n    default:\n      throw new Error(\n        `Attempted to log a message with an invalid logType (value: ${logType})`\n      );\n  }\n};\n\nexport class Logger {\n  /**\n   * Gives you an instance of a Logger to capture messages according to\n   * Firebase's logging scheme.\n   *\n   * @param name The name that the logs will be associated with\n   */\n  constructor(public name: string) {\n    /**\n     * Capture the current instance for later use\n     */\n    instances.push(this);\n  }\n\n  /**\n   * The log level of the given Logger instance.\n   */\n  private _logLevel = defaultLogLevel;\n  get logLevel(): LogLevel {\n    return this._logLevel;\n  }\n  set logLevel(val: LogLevel) {\n    if (!(val in LogLevel)) {\n      throw new TypeError('Invalid value assigned to `logLevel`');\n    }\n    this._logLevel = val;\n  }\n\n  /**\n   * The log handler for the Logger instance.\n   */\n  private _logHandler: LogHandler = defaultLogHandler;\n  get logHandler(): LogHandler {\n    return this._logHandler;\n  }\n  set logHandler(val: LogHandler) {\n    if (typeof val !== 'function') {\n      throw new TypeError('Value assigned to `logHandler` must be a function');\n    }\n    this._logHandler = val;\n  }\n\n  /**\n   * The functions below are all based on the `console` interface\n   */\n\n  debug(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.DEBUG, ...args);\n  }\n  log(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.VERBOSE, ...args);\n  }\n  info(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.INFO, ...args);\n  }\n  warn(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.WARN, ...args);\n  }\n  error(...args: unknown[]): void {\n    this._logHandler(this, LogLevel.ERROR, ...args);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppConfig\n} from '@firebase/app-types';\nimport {\n  _FirebaseApp,\n  _FirebaseNamespace,\n  FirebaseService,\n  FirebaseAppInternals\n} from '@firebase/app-types/private';\nimport { deepCopy, deepExtend } from '@firebase/util';\nimport { AppError, ERROR_FACTORY } from './errors';\nimport { DEFAULT_ENTRY_NAME } from './constants';\n\ninterface ServicesCache {\n  [name: string]: {\n    [serviceName: string]: FirebaseService;\n  };\n}\n\n// An array to capture listeners before the true auth functions\n// exist\nlet tokenListeners: Array<(token: string | null) => void> = [];\n\n/**\n * Global context object for a collection of services using\n * a shared authentication state.\n */\nexport class FirebaseAppImpl implements FirebaseApp {\n  private readonly options_: FirebaseOptions;\n  private readonly name_: string;\n  private isDeleted_ = false;\n  private services_: ServicesCache = {};\n  private automaticDataCollectionEnabled_: boolean;\n\n  INTERNAL: FirebaseAppInternals;\n\n  constructor(\n    options: FirebaseOptions,\n    config: FirebaseAppConfig,\n    private readonly firebase_: _FirebaseNamespace\n  ) {\n    this.name_ = config.name!;\n    this.automaticDataCollectionEnabled_ =\n      config.automaticDataCollectionEnabled || false;\n    this.options_ = deepCopy<FirebaseOptions>(options);\n    this.INTERNAL = {\n      getUid: () => null,\n      getToken: () => Promise.resolve(null),\n      addAuthTokenListener: (callback: (token: string | null) => void) => {\n        tokenListeners.push(callback);\n        // Make sure callback is called, asynchronously, in the absence of the auth module\n        setTimeout(() => callback(null), 0);\n      },\n      removeAuthTokenListener: callback => {\n        tokenListeners = tokenListeners.filter(\n          listener => listener !== callback\n        );\n      }\n    };\n  }\n\n  get automaticDataCollectionEnabled(): boolean {\n    this.checkDestroyed_();\n    return this.automaticDataCollectionEnabled_;\n  }\n\n  set automaticDataCollectionEnabled(val) {\n    this.checkDestroyed_();\n    this.automaticDataCollectionEnabled_ = val;\n  }\n\n  get name(): string {\n    this.checkDestroyed_();\n    return this.name_;\n  }\n\n  get options(): FirebaseOptions {\n    this.checkDestroyed_();\n    return this.options_;\n  }\n\n  delete(): Promise<void> {\n    return new Promise(resolve => {\n      this.checkDestroyed_();\n      resolve();\n    })\n      .then(() => {\n        this.firebase_.INTERNAL.removeApp(this.name_);\n        const services: FirebaseService[] = [];\n\n        for (const serviceKey of Object.keys(this.services_)) {\n          for (const instanceKey of Object.keys(this.services_[serviceKey])) {\n            services.push(this.services_[serviceKey][instanceKey]);\n          }\n        }\n\n        return Promise.all(\n          services\n            .filter(service => 'INTERNAL' in service)\n            .map(service => service.INTERNAL!.delete())\n        );\n      })\n      .then(\n        (): void => {\n          this.isDeleted_ = true;\n          this.services_ = {};\n        }\n      );\n  }\n\n  /**\n   * Return a service instance associated with this app (creating it\n   * on demand), identified by the passed instanceIdentifier.\n   *\n   * NOTE: Currently storage is the only one that is leveraging this\n   * functionality. They invoke it by calling:\n   *\n   * ```javascript\n   * firebase.app().storage('STORAGE BUCKET ID')\n   * ```\n   *\n   * The service name is passed to this already\n   * @internal\n   */\n  _getService(\n    name: string,\n    instanceIdentifier: string = DEFAULT_ENTRY_NAME\n  ): FirebaseService {\n    this.checkDestroyed_();\n\n    if (!this.services_[name]) {\n      this.services_[name] = {};\n    }\n\n    if (!this.services_[name][instanceIdentifier]) {\n      /**\n       * If a custom instance has been defined (i.e. not '[DEFAULT]')\n       * then we will pass that instance on, otherwise we pass `null`\n       */\n      const instanceSpecifier =\n        instanceIdentifier !== DEFAULT_ENTRY_NAME\n          ? instanceIdentifier\n          : undefined;\n      const service = this.firebase_.INTERNAL.factories[name](\n        this,\n        this.extendApp.bind(this),\n        instanceSpecifier\n      );\n      this.services_[name][instanceIdentifier] = service;\n    }\n\n    return this.services_[name][instanceIdentifier];\n  }\n\n  /**\n   * Callback function used to extend an App instance at the time\n   * of service instance creation.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private extendApp(props: { [name: string]: any }): void {\n    // Copy the object onto the FirebaseAppImpl prototype\n    deepExtend(this, props);\n\n    /**\n     * If the app has overwritten the addAuthTokenListener stub, forward\n     * the active token listeners on to the true fxn.\n     *\n     * TODO: This function is required due to our current module\n     * structure. Once we are able to rely strictly upon a single module\n     * implementation, this code should be refactored and Auth should\n     * provide these stubs and the upgrade logic\n     */\n    if (props.INTERNAL && props.INTERNAL.addAuthTokenListener) {\n      tokenListeners.forEach(listener => {\n        this.INTERNAL.addAuthTokenListener(listener);\n      });\n      tokenListeners = [];\n    }\n  }\n\n  /**\n   * This function will throw an Error if the App has already been deleted -\n   * use before performing API actions on the App.\n   */\n  private checkDestroyed_(): void {\n    if (this.isDeleted_) {\n      throw ERROR_FACTORY.create(AppError.APP_DELETED, { name: this.name_ });\n    }\n  }\n}\n\n// Prevent dead-code elimination of these methods w/o invalid property\n// copying.\n(FirebaseAppImpl.prototype.name && FirebaseAppImpl.prototype.options) ||\n  FirebaseAppImpl.prototype.delete ||\n  console.log('dc');\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseNamespace,\n  FirebaseAppConfig\n} from '@firebase/app-types';\nimport {\n  _FirebaseApp,\n  _FirebaseNamespace,\n  FirebaseService,\n  FirebaseServiceFactory,\n  FirebaseServiceNamespace,\n  AppHook\n} from '@firebase/app-types/private';\nimport { deepExtend, contains } from '@firebase/util';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { ERROR_FACTORY, AppError } from './errors';\nimport { FirebaseAppLiteImpl } from './lite/firebaseAppLite';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport { version } from '../../firebase/package.json';\n\n/**\n * Because auth can't share code with other components, we attach the utility functions\n * in an internal namespace to share code.\n * This function return a firebase namespace object without\n * any utility functions, so it can be shared between the regular firebaseNamespace and\n * the lite version.\n */\nexport function createFirebaseNamespaceCore(\n  firebaseAppImpl: typeof FirebaseAppImpl | typeof FirebaseAppLiteImpl\n): FirebaseNamespace {\n  const apps: { [name: string]: FirebaseApp } = {};\n  const factories: { [service: string]: FirebaseServiceFactory } = {};\n  const appHooks: { [service: string]: AppHook } = {};\n\n  // A namespace is a plain JavaScript Object.\n  const namespace: FirebaseNamespace = {\n    // Hack to prevent Babel from modifying the object returned\n    // as the firebase namespace.\n    // @ts-ignore\n    __esModule: true,\n    initializeApp,\n    // @ts-ignore\n    app,\n    // @ts-ignore\n    apps: null,\n    SDK_VERSION: version,\n    INTERNAL: {\n      registerService,\n      removeApp,\n      factories,\n      useAsService\n    }\n  };\n\n  // Inject a circular default export to allow Babel users who were previously\n  // using:\n  //\n  //   import firebase from 'firebase';\n  //   which becomes: var firebase = require('firebase').default;\n  //\n  // instead of\n  //\n  //   import * as firebase from 'firebase';\n  //   which becomes: var firebase = require('firebase');\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (namespace as any)['default'] = namespace;\n\n  // firebase.apps is a read-only getter.\n  Object.defineProperty(namespace, 'apps', {\n    get: getApps\n  });\n\n  /**\n   * Called by App.delete() - but before any services associated with the App\n   * are deleted.\n   */\n  function removeApp(name: string): void {\n    const app = apps[name];\n    callAppHooks(app, 'delete');\n    delete apps[name];\n  }\n\n  /**\n   * Get the App object for a given name (or DEFAULT).\n   */\n  function app(name?: string): FirebaseApp {\n    name = name || DEFAULT_ENTRY_NAME;\n    if (!contains(apps, name)) {\n      throw ERROR_FACTORY.create(AppError.NO_APP, { name });\n    }\n    return apps[name];\n  }\n\n  // @ts-ignore\n  app['App'] = firebaseAppImpl;\n  /**\n   * Create a new App instance (name must be unique).\n   */\n  function initializeApp(\n    options: FirebaseOptions,\n    config?: FirebaseAppConfig\n  ): FirebaseApp;\n  function initializeApp(options: FirebaseOptions, name?: string): FirebaseApp;\n  function initializeApp(\n    options: FirebaseOptions,\n    rawConfig = {}\n  ): FirebaseApp {\n    if (typeof rawConfig !== 'object' || rawConfig === null) {\n      const name = rawConfig;\n      rawConfig = { name };\n    }\n\n    const config = rawConfig as FirebaseAppConfig;\n\n    if (config.name === undefined) {\n      config.name = DEFAULT_ENTRY_NAME;\n    }\n\n    const { name } = config;\n\n    if (typeof name !== 'string' || !name) {\n      throw ERROR_FACTORY.create(AppError.BAD_APP_NAME, { name: String(name) });\n    }\n\n    if (contains(apps, name)) {\n      throw ERROR_FACTORY.create(AppError.DUPLICATE_APP, { name });\n    }\n\n    const app = new firebaseAppImpl(\n      options,\n      config,\n      namespace as _FirebaseNamespace\n    );\n\n    apps[name] = app;\n    callAppHooks(app, 'create');\n\n    return app;\n  }\n\n  /*\n   * Return an array of all the non-deleted FirebaseApps.\n   */\n  function getApps(): FirebaseApp[] {\n    // Make a copy so caller cannot mutate the apps list.\n    return Object.keys(apps).map(name => apps[name]);\n  }\n\n  /*\n   * Register a Firebase Service.\n   *\n   * firebase.INTERNAL.registerService()\n   *\n   * TODO: Implement serviceProperties.\n   */\n  function registerService(\n    name: string,\n    createService: FirebaseServiceFactory,\n    serviceProperties?: { [prop: string]: unknown },\n    appHook?: AppHook,\n    allowMultipleInstances = false\n  ): FirebaseServiceNamespace<FirebaseService> {\n    // Cannot re-register a service that already exists\n    if (factories[name]) {\n      throw ERROR_FACTORY.create(AppError.DUPLICATE_SERVICE, { name });\n    }\n\n    // Capture the service factory for later service instantiation\n    factories[name] = createService;\n\n    // Capture the appHook, if passed\n    if (appHook) {\n      appHooks[name] = appHook;\n\n      // Run the **new** app hook on all existing apps\n      getApps().forEach(app => {\n        appHook('create', app);\n      });\n    }\n\n    // The Service namespace is an accessor function ...\n    function serviceNamespace(appArg: FirebaseApp = app()): FirebaseService {\n      // @ts-ignore\n      if (typeof appArg[name] !== 'function') {\n        // Invalid argument.\n        // This happens in the following case: firebase.storage('gs:/')\n        throw ERROR_FACTORY.create(AppError.INVALID_APP_ARGUMENT, {\n          name\n        });\n      }\n\n      // Forward service instance lookup to the FirebaseApp.\n      // @ts-ignore\n      return appArg[name]();\n    }\n\n    // ... and a container for service-level properties.\n    if (serviceProperties !== undefined) {\n      deepExtend(serviceNamespace, serviceProperties);\n    }\n\n    // Monkey-patch the serviceNamespace onto the firebase namespace\n    // @ts-ignore\n    namespace[name] = serviceNamespace;\n\n    // Patch the FirebaseAppImpl prototype\n    // @ts-ignore\n    firebaseAppImpl.prototype[name] = function(...args) {\n      const serviceFxn = this._getService.bind(this, name);\n      return serviceFxn.apply(this, allowMultipleInstances ? args : []);\n    };\n\n    return serviceNamespace;\n  }\n\n  function callAppHooks(app: FirebaseApp, eventName: string): void {\n    for (const serviceName of Object.keys(factories)) {\n      // Ignore virtual services\n      const factoryName = useAsService(app, serviceName);\n      if (factoryName === null) {\n        return;\n      }\n\n      if (appHooks[factoryName]) {\n        appHooks[factoryName](eventName, app);\n      }\n    }\n  }\n\n  // Map the requested service to a registered service name\n  // (used to map auth to serverAuth service when needed).\n  function useAsService(app: FirebaseApp, name: string): string | null {\n    if (name === 'serverAuth') {\n      return null;\n    }\n\n    const useService = name;\n\n    return useService;\n  }\n\n  return namespace;\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseNamespace } from '@firebase/app-types';\nimport { _FirebaseApp, _FirebaseNamespace } from '@firebase/app-types/private';\nimport { createSubscribe, deepExtend, ErrorFactory } from '@firebase/util';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { createFirebaseNamespaceCore } from './firebaseNamespaceCore';\n\n/**\n * Return a firebase namespace object.\n *\n * In production, this will be called exactly once and the result\n * assigned to the 'firebase' global.  It may be called multiple times\n * in unit tests.\n */\nexport function createFirebaseNamespace(): FirebaseNamespace {\n  const namespace = createFirebaseNamespaceCore(FirebaseAppImpl);\n  (namespace as _FirebaseNamespace).INTERNAL = {\n    ...(namespace as _FirebaseNamespace).INTERNAL,\n    createFirebaseNamespace,\n    extendNamespace,\n    createSubscribe,\n    ErrorFactory,\n    deepExtend\n  };\n\n  /**\n   * Patch the top-level firebase namespace with additional properties.\n   *\n   * firebase.INTERNAL.extendNamespace()\n   */\n  function extendNamespace(props: { [prop: string]: unknown }): void {\n    deepExtend(namespace, props);\n  }\n\n  return namespace;\n}\n","import firebase from 'firebase/app'\n\nexport default firebase.initializeApp({\n  apiKey: \"AIzaSyA1LN0yN5_276Xn2MpJAaYXXbgADIWZdN4\",\n  authDomain: \"quarter-website.firebaseapp.com\",\n  databaseURL: \"https://quarter-website.firebaseio.com\",\n  projectId: \"quarter-website\",\n  storageBucket: \"quarter-website.appspot.com\",\n  messagingSenderId: \"64477425647\",\n  appId: \"1:64477425647:web:ac0d2eefe13f81f7\"\n})\n\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { jsonEval, stringify } from '@firebase/util';\n\n/**\n * Wraps a DOM Storage object and:\n * - automatically encode objects as JSON strings before storing them to allow us to store arbitrary types.\n * - prefixes names with \"firebase:\" to avoid collisions with app data.\n *\n * We automatically (see storage.js) create two such wrappers, one for sessionStorage,\n * and one for localStorage.\n *\n * @constructor\n */\nexport class DOMStorageWrapper {\n  // Use a prefix to avoid collisions with other stuff saved by the app.\n  private prefix_ = 'firebase:';\n\n  /**\n   * @param {Storage} domStorage_ The underlying storage object (e.g. localStorage or sessionStorage)\n   */\n  constructor(private domStorage_: Storage) {}\n\n  /**\n   * @param {string} key The key to save the value under\n   * @param {?Object} value The value being stored, or null to remove the key.\n   */\n  set(key: string, value: any | null) {\n    if (value == null) {\n      this.domStorage_.removeItem(this.prefixedName_(key));\n    } else {\n      this.domStorage_.setItem(this.prefixedName_(key), stringify(value));\n    }\n  }\n\n  /**\n   * @param {string} key\n   * @return {*} The value that was stored under this key, or null\n   */\n  get(key: string): any {\n    const storedVal = this.domStorage_.getItem(this.prefixedName_(key));\n    if (storedVal == null) {\n      return null;\n    } else {\n      return jsonEval(storedVal);\n    }\n  }\n\n  /**\n   * @param {string} key\n   */\n  remove(key: string) {\n    this.domStorage_.removeItem(this.prefixedName_(key));\n  }\n\n  isInMemoryStorage: boolean;\n\n  /**\n   * @param {string} name\n   * @return {string}\n   */\n  prefixedName_(name: string): string {\n    return this.prefix_ + name;\n  }\n\n  toString(): string {\n    return this.domStorage_.toString();\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { contains } from '@firebase/util';\n\n/**\n * An in-memory storage implementation that matches the API of DOMStorageWrapper\n * (TODO: create interface for both to implement).\n *\n * @constructor\n */\nexport class MemoryStorage {\n  private cache_: { [k: string]: any } = {};\n\n  set(key: string, value: any | null) {\n    if (value == null) {\n      delete this.cache_[key];\n    } else {\n      this.cache_[key] = value;\n    }\n  }\n\n  get(key: string): any {\n    if (contains(this.cache_, key)) {\n      return this.cache_[key];\n    }\n    return null;\n  }\n\n  remove(key: string) {\n    delete this.cache_[key];\n  }\n\n  isInMemoryStorage = true;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DOMStorageWrapper } from './DOMStorageWrapper';\nimport { MemoryStorage } from './MemoryStorage';\n\ndeclare const window: any;\n\n/**\n * Helper to create a DOMStorageWrapper or else fall back to MemoryStorage.\n * TODO: Once MemoryStorage and DOMStorageWrapper have a shared interface this method annotation should change\n * to reflect this type\n *\n * @param {string} domStorageName Name of the underlying storage object\n *   (e.g. 'localStorage' or 'sessionStorage').\n * @return {?} Turning off type information until a common interface is defined.\n */\nconst createStoragefor = function(\n  domStorageName: string\n): DOMStorageWrapper | MemoryStorage {\n  try {\n    // NOTE: just accessing \"localStorage\" or \"window['localStorage']\" may throw a security exception,\n    // so it must be inside the try/catch.\n    if (\n      typeof window !== 'undefined' &&\n      typeof window[domStorageName] !== 'undefined'\n    ) {\n      // Need to test cache. Just because it's here doesn't mean it works\n      const domStorage = window[domStorageName];\n      domStorage.setItem('firebase:sentinel', 'cache');\n      domStorage.removeItem('firebase:sentinel');\n      return new DOMStorageWrapper(domStorage);\n    }\n  } catch (e) {}\n\n  // Failed to create wrapper.  Just return in-memory storage.\n  // TODO: log?\n  return new MemoryStorage();\n};\n\n/** A storage object that lasts across sessions */\nexport const PersistentStorage = createStoragefor('localStorage');\n\n/** A storage object that only lasts one session */\nexport const SessionStorage = createStoragefor('sessionStorage');\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Query } from '../../api/Query';\n\ndeclare const window: any;\ndeclare const Windows: any;\n\nimport { assert } from '@firebase/util';\nimport { forEach } from '@firebase/util';\nimport { base64 } from '@firebase/util';\nimport { Sha1 } from '@firebase/util';\nimport { stringToByteArray } from '@firebase/util';\nimport { stringify } from '@firebase/util';\nimport { SessionStorage } from '../storage/storage';\nimport { isNodeSdk } from '@firebase/util';\nimport { Logger, LogLevel } from '@firebase/logger';\n\nconst logClient = new Logger('@firebase/database');\n\n/**\n * Returns a locally-unique ID (generated by just incrementing up from 0 each time its called).\n * @type {function(): number} Generated ID.\n */\nexport const LUIDGenerator: () => number = (function() {\n  let id = 1;\n  return function() {\n    return id++;\n  };\n})();\n\n/**\n * Sha1 hash of the input string\n * @param {!string} str The string to hash\n * @return {!string} The resulting hash\n */\nexport const sha1 = function(str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  const sha1 = new Sha1();\n  sha1.update(utf8Bytes);\n  const sha1Bytes = sha1.digest();\n  return base64.encodeByteArray(sha1Bytes);\n};\n\n/**\n * @param {...*} var_args\n * @return {string}\n * @private\n */\nconst buildLogMessage_ = function(...var_args: any[]): string {\n  let message = '';\n  for (let i = 0; i < var_args.length; i++) {\n    if (\n      Array.isArray(var_args[i]) ||\n      (var_args[i] &&\n        typeof var_args[i] === 'object' &&\n        typeof var_args[i].length === 'number')\n    ) {\n      message += buildLogMessage_.apply(null, var_args[i]);\n    } else if (typeof var_args[i] === 'object') {\n      message += stringify(var_args[i]);\n    } else {\n      message += var_args[i];\n    }\n    message += ' ';\n  }\n\n  return message;\n};\n\n/**\n * Use this for all debug messages in Firebase.\n * @type {?function(string)}\n */\nexport let logger: ((a: string) => void) | null = null;\n\n/**\n * Flag to check for log availability on first log message\n * @type {boolean}\n * @private\n */\nlet firstLog_ = true;\n\n/**\n * The implementation of Firebase.enableLogging (defined here to break dependencies)\n * @param {boolean|?function(string)} logger_ A flag to turn on logging, or a custom logger\n * @param {boolean=} persistent Whether or not to persist logging settings across refreshes\n */\nexport const enableLogging = function(\n  logger_?: boolean | ((a: string) => void) | null,\n  persistent?: boolean\n) {\n  assert(\n    !persistent || (logger_ === true || logger_ === false),\n    \"Can't turn on custom loggers persistently.\"\n  );\n  if (logger_ === true) {\n    logClient.logLevel = LogLevel.VERBOSE;\n    logger = logClient.log.bind(logClient);\n    if (persistent) SessionStorage.set('logging_enabled', true);\n  } else if (typeof logger_ === 'function') {\n    logger = logger_;\n  } else {\n    logger = null;\n    SessionStorage.remove('logging_enabled');\n  }\n};\n\n/**\n *\n * @param {...(string|Arguments)} var_args\n */\nexport const log = function(...var_args: string[]) {\n  if (firstLog_ === true) {\n    firstLog_ = false;\n    if (logger === null && SessionStorage.get('logging_enabled') === true)\n      enableLogging(true);\n  }\n\n  if (logger) {\n    const message = buildLogMessage_.apply(null, var_args);\n    logger(message);\n  }\n};\n\n/**\n * @param {!string} prefix\n * @return {function(...[*])}\n */\nexport const logWrapper = function(\n  prefix: string\n): (...var_args: any[]) => void {\n  return function(...var_args: any[]) {\n    log(prefix, ...var_args);\n  };\n};\n\n/**\n * @param {...string} var_args\n */\nexport const error = function(...var_args: string[]) {\n  const message = 'FIREBASE INTERNAL ERROR: ' + buildLogMessage_(...var_args);\n  logClient.error(message);\n};\n\n/**\n * @param {...string} var_args\n */\nexport const fatal = function(...var_args: string[]) {\n  const message = `FIREBASE FATAL ERROR: ${buildLogMessage_(...var_args)}`;\n  logClient.error(message);\n  throw new Error(message);\n};\n\n/**\n * @param {...*} var_args\n */\nexport const warn = function(...var_args: any[]) {\n  const message = 'FIREBASE WARNING: ' + buildLogMessage_(...var_args);\n  logClient.warn(message);\n};\n\n/**\n * Logs a warning if the containing page uses https. Called when a call to new Firebase\n * does not use https.\n */\nexport const warnIfPageIsSecure = function() {\n  // Be very careful accessing browser globals. Who knows what may or may not exist.\n  if (\n    typeof window !== 'undefined' &&\n    window.location &&\n    window.location.protocol &&\n    window.location.protocol.indexOf('https:') !== -1\n  ) {\n    warn(\n      'Insecure Firebase access from a secure page. ' +\n        'Please use https in calls to new Firebase().'\n    );\n  }\n};\n\n/**\n * @param {!String} methodName\n */\nexport const warnAboutUnsupportedMethod = function(methodName: string) {\n  warn(\n    methodName +\n      ' is unsupported and will likely change soon.  ' +\n      'Please do not use.'\n  );\n};\n\n/**\n * Returns true if data is NaN, or +/- Infinity.\n * @param {*} data\n * @return {boolean}\n */\nexport const isInvalidJSONNumber = function(data: any): boolean {\n  return (\n    typeof data === 'number' &&\n    (data != data || // NaN\n      data == Number.POSITIVE_INFINITY ||\n      data == Number.NEGATIVE_INFINITY)\n  );\n};\n\n/**\n * @param {function()} fn\n */\nexport const executeWhenDOMReady = function(fn: () => void) {\n  if (isNodeSdk() || document.readyState === 'complete') {\n    fn();\n  } else {\n    // Modeled after jQuery. Try DOMContentLoaded and onreadystatechange (which\n    // fire before onload), but fall back to onload.\n\n    let called = false;\n    let wrappedFn = function() {\n      if (!document.body) {\n        setTimeout(wrappedFn, Math.floor(10));\n        return;\n      }\n\n      if (!called) {\n        called = true;\n        fn();\n      }\n    };\n\n    if (document.addEventListener) {\n      document.addEventListener('DOMContentLoaded', wrappedFn, false);\n      // fallback to onload.\n      window.addEventListener('load', wrappedFn, false);\n    } else if ((document as any).attachEvent) {\n      // IE.\n      (document as any).attachEvent('onreadystatechange', function() {\n        if (document.readyState === 'complete') wrappedFn();\n      });\n      // fallback to onload.\n      (window as any).attachEvent('onload', wrappedFn);\n\n      // jQuery has an extra hack for IE that we could employ (based on\n      // http://javascript.nwbox.com/IEContentLoaded/) But it looks really old.\n      // I'm hoping we don't need it.\n    }\n  }\n};\n\n/**\n * Minimum key name. Invalid for actual data, used as a marker to sort before any valid names\n * @type {!string}\n */\nexport const MIN_NAME = '[MIN_NAME]';\n\n/**\n * Maximum key name. Invalid for actual data, used as a marker to sort above any valid names\n * @type {!string}\n */\nexport const MAX_NAME = '[MAX_NAME]';\n\n/**\n * Compares valid Firebase key names, plus min and max name\n * @param {!string} a\n * @param {!string} b\n * @return {!number}\n */\nexport const nameCompare = function(a: string, b: string): number {\n  if (a === b) {\n    return 0;\n  } else if (a === MIN_NAME || b === MAX_NAME) {\n    return -1;\n  } else if (b === MIN_NAME || a === MAX_NAME) {\n    return 1;\n  } else {\n    const aAsInt = tryParseInt(a),\n      bAsInt = tryParseInt(b);\n\n    if (aAsInt !== null) {\n      if (bAsInt !== null) {\n        return aAsInt - bAsInt == 0 ? a.length - b.length : aAsInt - bAsInt;\n      } else {\n        return -1;\n      }\n    } else if (bAsInt !== null) {\n      return 1;\n    } else {\n      return a < b ? -1 : 1;\n    }\n  }\n};\n\n/**\n * @param {!string} a\n * @param {!string} b\n * @return {!number} comparison result.\n */\nexport const stringCompare = function(a: string, b: string): number {\n  if (a === b) {\n    return 0;\n  } else if (a < b) {\n    return -1;\n  } else {\n    return 1;\n  }\n};\n\n/**\n * @param {string} key\n * @param {Object} obj\n * @return {*}\n */\nexport const requireKey = function(\n  key: string,\n  obj: { [k: string]: any }\n): any {\n  if (obj && key in obj) {\n    return obj[key];\n  } else {\n    throw new Error(\n      'Missing required key (' + key + ') in object: ' + stringify(obj)\n    );\n  }\n};\n\n/**\n * @param {*} obj\n * @return {string}\n */\nexport const ObjectToUniqueKey = function(obj: any): string {\n  if (typeof obj !== 'object' || obj === null) return stringify(obj);\n\n  const keys = [];\n  for (let k in obj) {\n    keys.push(k);\n  }\n\n  // Export as json, but with the keys sorted.\n  keys.sort();\n  let key = '{';\n  for (let i = 0; i < keys.length; i++) {\n    if (i !== 0) key += ',';\n    key += stringify(keys[i]);\n    key += ':';\n    key += ObjectToUniqueKey(obj[keys[i]]);\n  }\n\n  key += '}';\n  return key;\n};\n\n/**\n * Splits a string into a number of smaller segments of maximum size\n * @param {!string} str The string\n * @param {!number} segsize The maximum number of chars in the string.\n * @return {Array.<string>} The string, split into appropriately-sized chunks\n */\nexport const splitStringBySize = function(\n  str: string,\n  segsize: number\n): string[] {\n  const len = str.length;\n\n  if (len <= segsize) {\n    return [str];\n  }\n\n  const dataSegs = [];\n  for (let c = 0; c < len; c += segsize) {\n    if (c + segsize > len) {\n      dataSegs.push(str.substring(c, len));\n    } else {\n      dataSegs.push(str.substring(c, c + segsize));\n    }\n  }\n  return dataSegs;\n};\n\n/**\n * Apply a function to each (key, value) pair in an object or\n * apply a function to each (index, value) pair in an array\n * @param {!(Object|Array)} obj The object or array to iterate over\n * @param {function(?, ?)} fn The function to apply\n */\nexport const each = function(\n  obj: Object | Array<any>,\n  fn: (v?: any, k?: any) => void\n) {\n  if (Array.isArray(obj)) {\n    for (let i = 0; i < obj.length; ++i) {\n      fn(i, obj[i]);\n    }\n  } else {\n    /**\n     * in the conversion of code we removed the goog.object.forEach\n     * function which did a value,key callback. We standardized on\n     * a single impl that does a key, value callback. So we invert\n     * to not have to touch the `each` code points\n     */\n    forEach(obj, (key: any, val: any) => fn(val, key));\n  }\n};\n\n/**\n * Like goog.bind, but doesn't bother to create a closure if opt_context is null/undefined.\n * @param {function(*)} callback Callback function.\n * @param {?Object=} context Optional context to bind to.\n * @return {function(*)}\n */\nexport const bindCallback = function(\n  callback: (a: any) => void,\n  context?: object | null\n): Function {\n  return context ? callback.bind(context) : callback;\n};\n\n/**\n * Borrowed from http://hg.secondlife.com/llsd/src/tip/js/typedarray.js (MIT License)\n * I made one modification at the end and removed the NaN / Infinity\n * handling (since it seemed broken [caused an overflow] and we don't need it).  See MJL comments.\n * @param {!number} v A double\n * @return {string}\n */\nexport const doubleToIEEE754String = function(v: number): string {\n  assert(!isInvalidJSONNumber(v), 'Invalid JSON number'); // MJL\n\n  const ebits = 11,\n    fbits = 52;\n  let bias = (1 << (ebits - 1)) - 1,\n    s,\n    e,\n    f,\n    ln,\n    i,\n    bits,\n    str;\n\n  // Compute sign, exponent, fraction\n  // Skip NaN / Infinity handling --MJL.\n  if (v === 0) {\n    e = 0;\n    f = 0;\n    s = 1 / v === -Infinity ? 1 : 0;\n  } else {\n    s = v < 0;\n    v = Math.abs(v);\n\n    if (v >= Math.pow(2, 1 - bias)) {\n      // Normalized\n      ln = Math.min(Math.floor(Math.log(v) / Math.LN2), bias);\n      e = ln + bias;\n      f = Math.round(v * Math.pow(2, fbits - ln) - Math.pow(2, fbits));\n    } else {\n      // Denormalized\n      e = 0;\n      f = Math.round(v / Math.pow(2, 1 - bias - fbits));\n    }\n  }\n\n  // Pack sign, exponent, fraction\n  bits = [];\n  for (i = fbits; i; i -= 1) {\n    bits.push(f % 2 ? 1 : 0);\n    f = Math.floor(f / 2);\n  }\n  for (i = ebits; i; i -= 1) {\n    bits.push(e % 2 ? 1 : 0);\n    e = Math.floor(e / 2);\n  }\n  bits.push(s ? 1 : 0);\n  bits.reverse();\n  str = bits.join('');\n\n  // Return the data as a hex string. --MJL\n  let hexByteString = '';\n  for (i = 0; i < 64; i += 8) {\n    let hexByte = parseInt(str.substr(i, 8), 2).toString(16);\n    if (hexByte.length === 1) hexByte = '0' + hexByte;\n    hexByteString = hexByteString + hexByte;\n  }\n  return hexByteString.toLowerCase();\n};\n\n/**\n * Used to detect if we're in a Chrome content script (which executes in an\n * isolated environment where long-polling doesn't work).\n * @return {boolean}\n */\nexport const isChromeExtensionContentScript = function(): boolean {\n  return !!(\n    typeof window === 'object' &&\n    window['chrome'] &&\n    window['chrome']['extension'] &&\n    !/^chrome/.test(window.location.href)\n  );\n};\n\n/**\n * Used to detect if we're in a Windows 8 Store app.\n * @return {boolean}\n */\nexport const isWindowsStoreApp = function(): boolean {\n  // Check for the presence of a couple WinRT globals\n  return typeof Windows === 'object' && typeof Windows.UI === 'object';\n};\n\n/**\n * Converts a server error code to a Javascript Error\n * @param {!string} code\n * @param {!Query} query\n * @return {Error}\n */\nexport const errorForServerCode = function(code: string, query: Query): Error {\n  let reason = 'Unknown Error';\n  if (code === 'too_big') {\n    reason =\n      'The data requested exceeds the maximum size ' +\n      'that can be accessed with a single request.';\n  } else if (code == 'permission_denied') {\n    reason = \"Client doesn't have permission to access the desired data.\";\n  } else if (code == 'unavailable') {\n    reason = 'The service is unavailable';\n  }\n\n  const error = new Error(\n    code + ' at ' + query.path.toString() + ': ' + reason\n  );\n  (error as any).code = code.toUpperCase();\n  return error;\n};\n\n/**\n * Used to test for integer-looking strings\n * @type {RegExp}\n * @private\n */\nexport const INTEGER_REGEXP_ = new RegExp('^-?\\\\d{1,10}$');\n\n/**\n * If the string contains a 32-bit integer, return it.  Else return null.\n * @param {!string} str\n * @return {?number}\n */\nexport const tryParseInt = function(str: string): number | null {\n  if (INTEGER_REGEXP_.test(str)) {\n    const intVal = Number(str);\n    if (intVal >= -2147483648 && intVal <= 2147483647) {\n      return intVal;\n    }\n  }\n  return null;\n};\n\n/**\n * Helper to run some code but catch any exceptions and re-throw them later.\n * Useful for preventing user callbacks from breaking internal code.\n *\n * Re-throwing the exception from a setTimeout is a little evil, but it's very\n * convenient (we don't have to try to figure out when is a safe point to\n * re-throw it), and the behavior seems reasonable:\n *\n * * If you aren't pausing on exceptions, you get an error in the console with\n *   the correct stack trace.\n * * If you're pausing on all exceptions, the debugger will pause on your\n *   exception and then again when we rethrow it.\n * * If you're only pausing on uncaught exceptions, the debugger will only pause\n *   on us re-throwing it.\n *\n * @param {!function()} fn The code to guard.\n */\nexport const exceptionGuard = function(fn: () => void) {\n  try {\n    fn();\n  } catch (e) {\n    // Re-throw exception when it's safe.\n    setTimeout(function() {\n      // It used to be that \"throw e\" would result in a good console error with\n      // relevant context, but as of Chrome 39, you just get the firebase.js\n      // file/line number where we re-throw it, which is useless. So we log\n      // e.stack explicitly.\n      const stack = e.stack || '';\n      warn('Exception was thrown by user callback.', stack);\n      throw e;\n    }, Math.floor(0));\n  }\n};\n\n/**\n * Helper function to safely call opt_callback with the specified arguments.  It:\n * 1. Turns into a no-op if opt_callback is null or undefined.\n * 2. Wraps the call inside exceptionGuard to prevent exceptions from breaking our state.\n *\n * @param {?Function=} callback Optional onComplete callback.\n * @param {...*} var_args Arbitrary args to be passed to opt_onComplete\n */\nexport const callUserCallback = function(\n  callback?: Function | null,\n  ...var_args: any[]\n) {\n  if (typeof callback === 'function') {\n    exceptionGuard(function() {\n      callback(...var_args);\n    });\n  }\n};\n\n/**\n * @return {boolean} true if we think we're currently being crawled.\n */\nexport const beingCrawled = function(): boolean {\n  const userAgent =\n    (typeof window === 'object' &&\n      window['navigator'] &&\n      window['navigator']['userAgent']) ||\n    '';\n\n  // For now we whitelist the most popular crawlers.  We should refine this to be the set of crawlers we\n  // believe to support JavaScript/AJAX rendering.\n  // NOTE: Google Webmaster Tools doesn't really belong, but their \"This is how a visitor to your website\n  // would have seen the page\" is flaky if we don't treat it as a crawler.\n  return (\n    userAgent.search(\n      /googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i\n    ) >= 0\n  );\n};\n\n/**\n * Export a property of an object using a getter function.\n *\n * @param {!Object} object\n * @param {string} name\n * @param {!function(): *} fnGet\n */\nexport const exportPropGetter = function(\n  object: Object,\n  name: string,\n  fnGet: () => any\n) {\n  Object.defineProperty(object, name, { get: fnGet });\n};\n\n/**\n * Same as setTimeout() except on Node.JS it will /not/ prevent the process from exiting.\n *\n * It is removed with clearTimeout() as normal.\n *\n * @param {Function} fn Function to run.\n * @param {number} time Milliseconds to wait before running.\n * @return {number|Object} The setTimeout() return value.\n */\nexport const setTimeoutNonBlocking = function(\n  fn: Function,\n  time: number\n): number | Object {\n  const timeout: number | Object = setTimeout(fn, time);\n  if (typeof timeout === 'object' && (timeout as any)['unref']) {\n    (timeout as any)['unref']();\n  }\n  return timeout;\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { nameCompare } from './util';\nimport { stringLength } from '@firebase/util';\n/**\n * An immutable object representing a parsed path.  It's immutable so that you\n * can pass them around to other functions without worrying about them changing\n * it.\n */\n\nexport class Path {\n  private pieces_: string[];\n  private pieceNum_: number;\n\n  /**\n   * Singleton to represent an empty path\n   *\n   * @const\n   */\n  static get Empty() {\n    return new Path('');\n  }\n\n  /**\n   * @param {string|Array.<string>} pathOrString Path string to parse,\n   *      or another path, or the raw tokens array\n   * @param {number=} pieceNum\n   */\n  constructor(pathOrString: string | string[], pieceNum?: number) {\n    if (pieceNum === void 0) {\n      this.pieces_ = (pathOrString as string).split('/');\n\n      // Remove empty pieces.\n      let copyTo = 0;\n      for (let i = 0; i < this.pieces_.length; i++) {\n        if (this.pieces_[i].length > 0) {\n          this.pieces_[copyTo] = this.pieces_[i];\n          copyTo++;\n        }\n      }\n      this.pieces_.length = copyTo;\n\n      this.pieceNum_ = 0;\n    } else {\n      this.pieces_ = pathOrString as string[];\n      this.pieceNum_ = pieceNum;\n    }\n  }\n\n  getFront(): string | null {\n    if (this.pieceNum_ >= this.pieces_.length) return null;\n\n    return this.pieces_[this.pieceNum_];\n  }\n\n  /**\n   * @return {number} The number of segments in this path\n   */\n  getLength(): number {\n    return this.pieces_.length - this.pieceNum_;\n  }\n\n  /**\n   * @return {!Path}\n   */\n  popFront(): Path {\n    let pieceNum = this.pieceNum_;\n    if (pieceNum < this.pieces_.length) {\n      pieceNum++;\n    }\n    return new Path(this.pieces_, pieceNum);\n  }\n\n  /**\n   * @return {?string}\n   */\n  getBack(): string | null {\n    if (this.pieceNum_ < this.pieces_.length)\n      return this.pieces_[this.pieces_.length - 1];\n\n    return null;\n  }\n\n  toString(): string {\n    let pathString = '';\n    for (let i = this.pieceNum_; i < this.pieces_.length; i++) {\n      if (this.pieces_[i] !== '') pathString += '/' + this.pieces_[i];\n    }\n\n    return pathString || '/';\n  }\n\n  toUrlEncodedString(): string {\n    let pathString = '';\n    for (let i = this.pieceNum_; i < this.pieces_.length; i++) {\n      if (this.pieces_[i] !== '')\n        pathString += '/' + encodeURIComponent(String(this.pieces_[i]));\n    }\n\n    return pathString || '/';\n  }\n\n  /**\n   * Shallow copy of the parts of the path.\n   *\n   * @param {number=} begin\n   * @return {!Array<string>}\n   */\n  slice(begin: number = 0): string[] {\n    return this.pieces_.slice(this.pieceNum_ + begin);\n  }\n\n  /**\n   * @return {?Path}\n   */\n  parent(): Path | null {\n    if (this.pieceNum_ >= this.pieces_.length) return null;\n\n    const pieces = [];\n    for (let i = this.pieceNum_; i < this.pieces_.length - 1; i++)\n      pieces.push(this.pieces_[i]);\n\n    return new Path(pieces, 0);\n  }\n\n  /**\n   * @param {string|!Path} childPathObj\n   * @return {!Path}\n   */\n  child(childPathObj: string | Path): Path {\n    const pieces = [];\n    for (let i = this.pieceNum_; i < this.pieces_.length; i++)\n      pieces.push(this.pieces_[i]);\n\n    if (childPathObj instanceof Path) {\n      for (\n        let i = childPathObj.pieceNum_;\n        i < childPathObj.pieces_.length;\n        i++\n      ) {\n        pieces.push(childPathObj.pieces_[i]);\n      }\n    } else {\n      const childPieces = childPathObj.split('/');\n      for (let i = 0; i < childPieces.length; i++) {\n        if (childPieces[i].length > 0) pieces.push(childPieces[i]);\n      }\n    }\n\n    return new Path(pieces, 0);\n  }\n\n  /**\n   * @return {boolean} True if there are no segments in this path\n   */\n  isEmpty(): boolean {\n    return this.pieceNum_ >= this.pieces_.length;\n  }\n\n  /**\n   * @param {!Path} outerPath\n   * @param {!Path} innerPath\n   * @return {!Path} The path from outerPath to innerPath\n   */\n  static relativePath(outerPath: Path, innerPath: Path): Path {\n    const outer = outerPath.getFront(),\n      inner = innerPath.getFront();\n    if (outer === null) {\n      return innerPath;\n    } else if (outer === inner) {\n      return Path.relativePath(outerPath.popFront(), innerPath.popFront());\n    } else {\n      throw new Error(\n        'INTERNAL ERROR: innerPath (' +\n          innerPath +\n          ') is not within ' +\n          'outerPath (' +\n          outerPath +\n          ')'\n      );\n    }\n  }\n\n  /**\n   * @param {!Path} left\n   * @param {!Path} right\n   * @return {number} -1, 0, 1 if left is less, equal, or greater than the right.\n   */\n  static comparePaths(left: Path, right: Path): number {\n    const leftKeys = left.slice();\n    const rightKeys = right.slice();\n    for (let i = 0; i < leftKeys.length && i < rightKeys.length; i++) {\n      const cmp = nameCompare(leftKeys[i], rightKeys[i]);\n      if (cmp !== 0) return cmp;\n    }\n    if (leftKeys.length === rightKeys.length) return 0;\n    return leftKeys.length < rightKeys.length ? -1 : 1;\n  }\n\n  /**\n   *\n   * @param {Path} other\n   * @return {boolean} true if paths are the same.\n   */\n  equals(other: Path): boolean {\n    if (this.getLength() !== other.getLength()) {\n      return false;\n    }\n\n    for (\n      let i = this.pieceNum_, j = other.pieceNum_;\n      i <= this.pieces_.length;\n      i++, j++\n    ) {\n      if (this.pieces_[i] !== other.pieces_[j]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   *\n   * @param {!Path} other\n   * @return {boolean} True if this path is a parent (or the same as) other\n   */\n  contains(other: Path): boolean {\n    let i = this.pieceNum_;\n    let j = other.pieceNum_;\n    if (this.getLength() > other.getLength()) {\n      return false;\n    }\n    while (i < this.pieces_.length) {\n      if (this.pieces_[i] !== other.pieces_[j]) {\n        return false;\n      }\n      ++i;\n      ++j;\n    }\n    return true;\n  }\n} // end Path\n\n/**\n * Dynamic (mutable) path used to count path lengths.\n *\n * This class is used to efficiently check paths for valid\n * length (in UTF8 bytes) and depth (used in path validation).\n *\n * Throws Error exception if path is ever invalid.\n *\n * The definition of a path always begins with '/'.\n */\nexport class ValidationPath {\n  /** @type {!Array<string>} */\n  private parts_: string[];\n  /** @type {number} Initialize to number of '/' chars needed in path. */\n  private byteLength_: number;\n\n  /**\n   * @param {!Path} path Initial Path.\n   * @param {string} errorPrefix_ Prefix for any error messages.\n   */\n  constructor(path: Path, private errorPrefix_: string) {\n    /** @type {!Array<string>} */\n    this.parts_ = path.slice();\n    /** @type {number} Initialize to number of '/' chars needed in path. */\n    this.byteLength_ = Math.max(1, this.parts_.length);\n\n    for (let i = 0; i < this.parts_.length; i++) {\n      this.byteLength_ += stringLength(this.parts_[i]);\n    }\n    this.checkValid_();\n  }\n\n  /** @const {number} Maximum key depth. */\n  static get MAX_PATH_DEPTH() {\n    return 32;\n  }\n\n  /** @const {number} Maximum number of (UTF8) bytes in a Firebase path. */\n  static get MAX_PATH_LENGTH_BYTES() {\n    return 768;\n  }\n\n  /** @param {string} child */\n  push(child: string) {\n    // Count the needed '/'\n    if (this.parts_.length > 0) {\n      this.byteLength_ += 1;\n    }\n    this.parts_.push(child);\n    this.byteLength_ += stringLength(child);\n    this.checkValid_();\n  }\n\n  pop() {\n    const last = this.parts_.pop();\n    this.byteLength_ -= stringLength(last);\n    // Un-count the previous '/'\n    if (this.parts_.length > 0) {\n      this.byteLength_ -= 1;\n    }\n  }\n\n  private checkValid_() {\n    if (this.byteLength_ > ValidationPath.MAX_PATH_LENGTH_BYTES) {\n      throw new Error(\n        this.errorPrefix_ +\n          'has a key path longer than ' +\n          ValidationPath.MAX_PATH_LENGTH_BYTES +\n          ' bytes (' +\n          this.byteLength_ +\n          ').'\n      );\n    }\n    if (this.parts_.length > ValidationPath.MAX_PATH_DEPTH) {\n      throw new Error(\n        this.errorPrefix_ +\n          'path specified exceeds the maximum depth that can be written (' +\n          ValidationPath.MAX_PATH_DEPTH +\n          ') or object contains a cycle ' +\n          this.toErrorString()\n      );\n    }\n  }\n\n  /**\n   * String for use in error messages - uses '.' notation for path.\n   *\n   * @return {string}\n   */\n  toErrorString(): string {\n    if (this.parts_.length == 0) {\n      return '';\n    }\n    return \"in property '\" + this.parts_.join('.') + \"'\";\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const PROTOCOL_VERSION = '5';\n\nexport const VERSION_PARAM = 'v';\n\nexport const TRANSPORT_SESSION_PARAM = 's';\n\nexport const REFERER_PARAM = 'r';\n\nexport const FORGE_REF = 'f';\n\nexport const FORGE_DOMAIN = 'firebaseio.com';\n\nexport const LAST_SESSION_PARAM = 'ls';\n\nexport const WEBSOCKET = 'websocket';\n\nexport const LONG_POLLING = 'long_polling';\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { forEach } from '@firebase/util';\nimport { PersistentStorage } from './storage/storage';\nimport { LONG_POLLING, WEBSOCKET } from '../realtime/Constants';\n\n/**\n * A class that holds metadata about a Repo object\n *\n * @constructor\n */\nexport class RepoInfo {\n  host: string;\n  domain: string;\n  internalHost: string;\n\n  /**\n   * @param {string} host Hostname portion of the url for the repo\n   * @param {boolean} secure Whether or not this repo is accessed over ssl\n   * @param {string} namespace The namespace represented by the repo\n   * @param {boolean} webSocketOnly Whether to prefer websockets over all other transports (used by Nest).\n   * @param {string=} persistenceKey Override the default session persistence storage key\n   */\n  constructor(\n    host: string,\n    public secure: boolean,\n    public namespace: string,\n    public webSocketOnly: boolean,\n    public persistenceKey: string = ''\n  ) {\n    this.host = host.toLowerCase();\n    this.domain = this.host.substr(this.host.indexOf('.') + 1);\n    this.internalHost = PersistentStorage.get('host:' + host) || this.host;\n  }\n\n  needsQueryParam(): boolean {\n    return this.host !== this.internalHost || this.isCustomHost();\n  }\n\n  isCacheableHost(): boolean {\n    return this.internalHost.substr(0, 2) === 's-';\n  }\n\n  isDemoHost() {\n    return this.domain === 'firebaseio-demo.com';\n  }\n\n  isCustomHost() {\n    return (\n      this.domain !== 'firebaseio.com' && this.domain !== 'firebaseio-demo.com'\n    );\n  }\n\n  updateHost(newHost: string) {\n    if (newHost !== this.internalHost) {\n      this.internalHost = newHost;\n      if (this.isCacheableHost()) {\n        PersistentStorage.set('host:' + this.host, this.internalHost);\n      }\n    }\n  }\n\n  /**\n   * Returns the websocket URL for this repo\n   * @param {string} type of connection\n   * @param {Object} params list\n   * @return {string} The URL for this repo\n   */\n  connectionURL(type: string, params: { [k: string]: string }): string {\n    assert(typeof type === 'string', 'typeof type must == string');\n    assert(typeof params === 'object', 'typeof params must == object');\n\n    let connURL: string;\n    if (type === WEBSOCKET) {\n      connURL =\n        (this.secure ? 'wss://' : 'ws://') + this.internalHost + '/.ws?';\n    } else if (type === LONG_POLLING) {\n      connURL =\n        (this.secure ? 'https://' : 'http://') + this.internalHost + '/.lp?';\n    } else {\n      throw new Error('Unknown connection type: ' + type);\n    }\n    if (this.needsQueryParam()) {\n      params['ns'] = this.namespace;\n    }\n\n    const pairs: string[] = [];\n\n    forEach(params, (key: string, value: string) => {\n      pairs.push(key + '=' + value);\n    });\n\n    return connURL + pairs.join('&');\n  }\n\n  /** @return {string} */\n  toString(): string {\n    let str = this.toURLString();\n    if (this.persistenceKey) {\n      str += '<' + this.persistenceKey + '>';\n    }\n    return str;\n  }\n\n  /** @return {string} */\n  toURLString(): string {\n    return (this.secure ? 'https://' : 'http://') + this.host;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../Path';\nimport { RepoInfo } from '../../RepoInfo';\nimport { warnIfPageIsSecure, warn, fatal } from '../util';\n\n/**\n * @param {!string} pathString\n * @return {string}\n */\nfunction decodePath(pathString: string): string {\n  let pathStringDecoded = '';\n  const pieces = pathString.split('/');\n  for (let i = 0; i < pieces.length; i++) {\n    if (pieces[i].length > 0) {\n      let piece = pieces[i];\n      try {\n        piece = decodeURIComponent(piece.replace(/\\+/g, ' '));\n      } catch (e) {}\n      pathStringDecoded += '/' + piece;\n    }\n  }\n  return pathStringDecoded;\n}\n\n/**\n * @param {!string} queryString\n * @return {!{[key:string]:string}} key value hash\n */\nfunction decodeQuery(queryString: string): { [key: string]: string } {\n  let results = {};\n  if (queryString.charAt(0) === '?') {\n    queryString = queryString.substring(1);\n  }\n  for (const segment of queryString.split('&')) {\n    if (segment.length === 0) {\n      continue;\n    }\n    const kv = segment.split('=');\n    if (kv.length === 2) {\n      results[decodeURIComponent(kv[0])] = decodeURIComponent(kv[1]);\n    } else {\n      warn(`Invalid query segment '${segment}' in query '${queryString}'`);\n    }\n  }\n  return results;\n}\n\n/**\n *\n * @param {!string} dataURL\n * @return {{repoInfo: !RepoInfo, path: !Path}}\n */\nexport const parseRepoInfo = function(\n  dataURL: string\n): { repoInfo: RepoInfo; path: Path } {\n  const parsedUrl = parseURL(dataURL),\n    namespace = parsedUrl.subdomain;\n\n  if (parsedUrl.domain === 'firebase') {\n    fatal(\n      parsedUrl.host +\n        ' is no longer supported. ' +\n        'Please use <YOUR FIREBASE>.firebaseio.com instead'\n    );\n  }\n\n  // Catch common error of uninitialized namespace value.\n  if (\n    (!namespace || namespace == 'undefined') &&\n    parsedUrl.domain !== 'localhost'\n  ) {\n    fatal(\n      'Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com'\n    );\n  }\n\n  if (!parsedUrl.secure) {\n    warnIfPageIsSecure();\n  }\n\n  const webSocketOnly = parsedUrl.scheme === 'ws' || parsedUrl.scheme === 'wss';\n\n  return {\n    repoInfo: new RepoInfo(\n      parsedUrl.host,\n      parsedUrl.secure,\n      namespace,\n      webSocketOnly\n    ),\n    path: new Path(parsedUrl.pathString)\n  };\n};\n\n/**\n *\n * @param {!string} dataURL\n * @return {{host: string, port: number, domain: string, subdomain: string, secure: boolean, scheme: string, pathString: string}}\n */\nexport const parseURL = function(\n  dataURL: string\n): {\n  host: string;\n  port: number;\n  domain: string;\n  subdomain: string;\n  secure: boolean;\n  scheme: string;\n  pathString: string;\n} {\n  // Default to empty strings in the event of a malformed string.\n  let host = '',\n    domain = '',\n    subdomain = '',\n    pathString = '';\n\n  // Always default to SSL, unless otherwise specified.\n  let secure = true,\n    scheme = 'https',\n    port = 443;\n\n  // Don't do any validation here. The caller is responsible for validating the result of parsing.\n  if (typeof dataURL === 'string') {\n    // Parse scheme.\n    let colonInd = dataURL.indexOf('//');\n    if (colonInd >= 0) {\n      scheme = dataURL.substring(0, colonInd - 1);\n      dataURL = dataURL.substring(colonInd + 2);\n    }\n\n    // Parse host, path, and query string.\n    let slashInd = dataURL.indexOf('/');\n    if (slashInd === -1) {\n      slashInd = dataURL.length;\n    }\n    let questionMarkInd = dataURL.indexOf('?');\n    if (questionMarkInd === -1) {\n      questionMarkInd = dataURL.length;\n    }\n    host = dataURL.substring(0, Math.min(slashInd, questionMarkInd));\n    if (slashInd < questionMarkInd) {\n      // For pathString, questionMarkInd will always come after slashInd\n      pathString = decodePath(dataURL.substring(slashInd, questionMarkInd));\n    }\n    let queryParams = decodeQuery(\n      dataURL.substring(Math.min(dataURL.length, questionMarkInd))\n    );\n\n    // If we have a port, use scheme for determining if it's secure.\n    colonInd = host.indexOf(':');\n    if (colonInd >= 0) {\n      secure = scheme === 'https' || scheme === 'wss';\n      port = parseInt(host.substring(colonInd + 1), 10);\n    } else {\n      colonInd = dataURL.length;\n    }\n\n    const parts = host.split('.');\n    if (parts.length === 3) {\n      // Normalize namespaces to lowercase to share storage / connection.\n      domain = parts[1];\n      subdomain = parts[0].toLowerCase();\n    } else if (parts.length === 2) {\n      domain = parts[0];\n    } else if (parts[0].slice(0, colonInd).toLowerCase() === 'localhost') {\n      domain = 'localhost';\n    }\n    // Support `ns` query param if subdomain not already set\n    if (subdomain === '' && 'ns' in queryParams) {\n      subdomain = queryParams['ns'];\n    }\n  }\n\n  return {\n    host,\n    port,\n    domain,\n    subdomain,\n    secure,\n    scheme,\n    pathString\n  };\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path, ValidationPath } from './Path';\nimport { forEach, contains, safeGet } from '@firebase/util';\nimport { isInvalidJSONNumber } from './util';\nimport { errorPrefix as errorPrefixFxn } from '@firebase/util';\nimport { stringLength } from '@firebase/util';\nimport { RepoInfo } from '../RepoInfo';\n\n/**\n * True for invalid Firebase keys\n * @type {RegExp}\n * @private\n */\nexport const INVALID_KEY_REGEX_ = /[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/;\n\n/**\n * True for invalid Firebase paths.\n * Allows '/' in paths.\n * @type {RegExp}\n * @private\n */\nexport const INVALID_PATH_REGEX_ = /[\\[\\].#$\\u0000-\\u001F\\u007F]/;\n\n/**\n * Maximum number of characters to allow in leaf value\n * @type {number}\n * @private\n */\nexport const MAX_LEAF_SIZE_ = 10 * 1024 * 1024;\n\n/**\n * @param {*} key\n * @return {boolean}\n */\nexport const isValidKey = function(key: any): boolean {\n  return (\n    typeof key === 'string' && key.length !== 0 && !INVALID_KEY_REGEX_.test(key)\n  );\n};\n\n/**\n * @param {string} pathString\n * @return {boolean}\n */\nexport const isValidPathString = function(pathString: string): boolean {\n  return (\n    typeof pathString === 'string' &&\n    pathString.length !== 0 &&\n    !INVALID_PATH_REGEX_.test(pathString)\n  );\n};\n\n/**\n * @param {string} pathString\n * @return {boolean}\n */\nexport const isValidRootPathString = function(pathString: string): boolean {\n  if (pathString) {\n    // Allow '/.info/' at the beginning.\n    pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\n  }\n\n  return isValidPathString(pathString);\n};\n\n/**\n * @param {*} priority\n * @return {boolean}\n */\nexport const isValidPriority = function(priority: any): boolean {\n  return (\n    priority === null ||\n    typeof priority === 'string' ||\n    (typeof priority === 'number' && !isInvalidJSONNumber(priority)) ||\n    (priority && typeof priority === 'object' && contains(priority, '.sv'))\n  );\n};\n\n/**\n * Pre-validate a datum passed as an argument to Firebase function.\n *\n * @param {string} fnName\n * @param {number} argumentNumber\n * @param {*} data\n * @param {!Path} path\n * @param {boolean} optional\n */\nexport const validateFirebaseDataArg = function(\n  fnName: string,\n  argumentNumber: number,\n  data: any,\n  path: Path,\n  optional: boolean\n) {\n  if (optional && data === undefined) return;\n\n  validateFirebaseData(\n    errorPrefixFxn(fnName, argumentNumber, optional),\n    data,\n    path\n  );\n};\n\n/**\n * Validate a data object client-side before sending to server.\n *\n * @param {string} errorPrefix\n * @param {*} data\n * @param {!Path|!ValidationPath} path_\n */\nexport const validateFirebaseData = function(\n  errorPrefix: string,\n  data: any,\n  path_: Path | ValidationPath\n) {\n  const path =\n    path_ instanceof Path ? new ValidationPath(path_, errorPrefix) : path_;\n\n  if (data === undefined) {\n    throw new Error(errorPrefix + 'contains undefined ' + path.toErrorString());\n  }\n  if (typeof data === 'function') {\n    throw new Error(\n      errorPrefix +\n        'contains a function ' +\n        path.toErrorString() +\n        ' with contents = ' +\n        data.toString()\n    );\n  }\n  if (isInvalidJSONNumber(data)) {\n    throw new Error(\n      errorPrefix + 'contains ' + data.toString() + ' ' + path.toErrorString()\n    );\n  }\n\n  // Check max leaf size, but try to avoid the utf8 conversion if we can.\n  if (\n    typeof data === 'string' &&\n    data.length > MAX_LEAF_SIZE_ / 3 &&\n    stringLength(data) > MAX_LEAF_SIZE_\n  ) {\n    throw new Error(\n      errorPrefix +\n        'contains a string greater than ' +\n        MAX_LEAF_SIZE_ +\n        ' utf8 bytes ' +\n        path.toErrorString() +\n        \" ('\" +\n        data.substring(0, 50) +\n        \"...')\"\n    );\n  }\n\n  // TODO = Perf = Consider combining the recursive validation of keys into NodeFromJSON\n  // to save extra walking of large objects.\n  if (data && typeof data === 'object') {\n    let hasDotValue = false,\n      hasActualChild = false;\n    forEach(data, function(key: string, value: any) {\n      if (key === '.value') {\n        hasDotValue = true;\n      } else if (key !== '.priority' && key !== '.sv') {\n        hasActualChild = true;\n        if (!isValidKey(key)) {\n          throw new Error(\n            errorPrefix +\n              ' contains an invalid key (' +\n              key +\n              ') ' +\n              path.toErrorString() +\n              '.  Keys must be non-empty strings ' +\n              'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"'\n          );\n        }\n      }\n\n      path.push(key);\n      validateFirebaseData(errorPrefix, value, path);\n      path.pop();\n    });\n\n    if (hasDotValue && hasActualChild) {\n      throw new Error(\n        errorPrefix +\n          ' contains \".value\" child ' +\n          path.toErrorString() +\n          ' in addition to actual children.'\n      );\n    }\n  }\n};\n\n/**\n * Pre-validate paths passed in the firebase function.\n *\n * @param {string} errorPrefix\n * @param {Array<!Path>} mergePaths\n */\nexport const validateFirebaseMergePaths = function(\n  errorPrefix: string,\n  mergePaths: Path[]\n) {\n  let i, curPath;\n  for (i = 0; i < mergePaths.length; i++) {\n    curPath = mergePaths[i];\n    const keys = curPath.slice();\n    for (let j = 0; j < keys.length; j++) {\n      if (keys[j] === '.priority' && j === keys.length - 1) {\n        // .priority is OK\n      } else if (!isValidKey(keys[j])) {\n        throw new Error(\n          errorPrefix +\n            'contains an invalid key (' +\n            keys[j] +\n            ') in path ' +\n            curPath.toString() +\n            '. Keys must be non-empty strings ' +\n            'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"'\n        );\n      }\n    }\n  }\n\n  // Check that update keys are not descendants of each other.\n  // We rely on the property that sorting guarantees that ancestors come\n  // right before descendants.\n  mergePaths.sort(Path.comparePaths);\n  let prevPath: Path | null = null;\n  for (i = 0; i < mergePaths.length; i++) {\n    curPath = mergePaths[i];\n    if (prevPath !== null && prevPath.contains(curPath)) {\n      throw new Error(\n        errorPrefix +\n          'contains a path ' +\n          prevPath.toString() +\n          ' that is ancestor of another path ' +\n          curPath.toString()\n      );\n    }\n    prevPath = curPath;\n  }\n};\n\n/**\n * pre-validate an object passed as an argument to firebase function (\n * must be an object - e.g. for firebase.update()).\n *\n * @param {string} fnName\n * @param {number} argumentNumber\n * @param {*} data\n * @param {!Path} path\n * @param {boolean} optional\n */\nexport const validateFirebaseMergeDataArg = function(\n  fnName: string,\n  argumentNumber: number,\n  data: any,\n  path: Path,\n  optional: boolean\n) {\n  if (optional && data === undefined) return;\n\n  const errorPrefix = errorPrefixFxn(fnName, argumentNumber, optional);\n\n  if (!(data && typeof data === 'object') || Array.isArray(data)) {\n    throw new Error(\n      errorPrefix + ' must be an object containing the children to replace.'\n    );\n  }\n\n  const mergePaths: Path[] = [];\n  forEach(data, function(key: string, value: any) {\n    const curPath = new Path(key);\n    validateFirebaseData(errorPrefix, value, path.child(curPath));\n    if (curPath.getBack() === '.priority') {\n      if (!isValidPriority(value)) {\n        throw new Error(\n          errorPrefix +\n            \"contains an invalid value for '\" +\n            curPath.toString() +\n            \"', which must be a valid \" +\n            'Firebase priority (a string, finite number, server value, or null).'\n        );\n      }\n    }\n    mergePaths.push(curPath);\n  });\n  validateFirebaseMergePaths(errorPrefix, mergePaths);\n};\n\nexport const validatePriority = function(\n  fnName: string,\n  argumentNumber: number,\n  priority: any,\n  optional: boolean\n) {\n  if (optional && priority === undefined) return;\n  if (isInvalidJSONNumber(priority))\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'is ' +\n        priority.toString() +\n        ', but must be a valid Firebase priority (a string, finite number, ' +\n        'server value, or null).'\n    );\n  // Special case to allow importing data with a .sv.\n  if (!isValidPriority(priority))\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'must be a valid Firebase priority ' +\n        '(a string, finite number, server value, or null).'\n    );\n};\n\nexport const validateEventType = function(\n  fnName: string,\n  argumentNumber: number,\n  eventType: string,\n  optional: boolean\n) {\n  if (optional && eventType === undefined) return;\n\n  switch (eventType) {\n    case 'value':\n    case 'child_added':\n    case 'child_removed':\n    case 'child_changed':\n    case 'child_moved':\n      break;\n    default:\n      throw new Error(\n        errorPrefixFxn(fnName, argumentNumber, optional) +\n          'must be a valid event type = \"value\", \"child_added\", \"child_removed\", ' +\n          '\"child_changed\", or \"child_moved\".'\n      );\n  }\n};\n\nexport const validateKey = function(\n  fnName: string,\n  argumentNumber: number,\n  key: string,\n  optional: boolean\n) {\n  if (optional && key === undefined) return;\n  if (!isValidKey(key))\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'was an invalid key = \"' +\n        key +\n        '\".  Firebase keys must be non-empty strings and ' +\n        'can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").'\n    );\n};\n\nexport const validatePathString = function(\n  fnName: string,\n  argumentNumber: number,\n  pathString: string,\n  optional: boolean\n) {\n  if (optional && pathString === undefined) return;\n\n  if (!isValidPathString(pathString))\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'was an invalid path = \"' +\n        pathString +\n        '\". Paths must be non-empty strings and ' +\n        'can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"'\n    );\n};\n\nexport const validateRootPathString = function(\n  fnName: string,\n  argumentNumber: number,\n  pathString: string,\n  optional: boolean\n) {\n  if (pathString) {\n    // Allow '/.info/' at the beginning.\n    pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\n  }\n\n  validatePathString(fnName, argumentNumber, pathString, optional);\n};\n\nexport const validateWritablePath = function(fnName: string, path: Path) {\n  if (path.getFront() === '.info') {\n    throw new Error(fnName + \" failed = Can't modify data under /.info/\");\n  }\n};\n\nexport const validateUrl = function(\n  fnName: string,\n  argumentNumber: number,\n  parsedUrl: { repoInfo: RepoInfo; path: Path }\n) {\n  // TODO = Validate server better.\n  const pathString = parsedUrl.path.toString();\n  if (\n    !(typeof parsedUrl.repoInfo.host === 'string') ||\n    parsedUrl.repoInfo.host.length === 0 ||\n    (!isValidKey(parsedUrl.repoInfo.namespace) &&\n      parsedUrl.repoInfo.host.split(':')[0] !== 'localhost') ||\n    (pathString.length !== 0 && !isValidRootPathString(pathString))\n  ) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, false) +\n        'must be a valid firebase URL and ' +\n        'the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".'\n    );\n  }\n};\n\nexport const validateCredential = function(\n  fnName: string,\n  argumentNumber: number,\n  cred: any,\n  optional: boolean\n) {\n  if (optional && cred === undefined) return;\n  if (!(typeof cred === 'string'))\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'must be a valid credential (a string).'\n    );\n};\n\nexport const validateBoolean = function(\n  fnName: string,\n  argumentNumber: number,\n  bool: any,\n  optional: boolean\n) {\n  if (optional && bool === undefined) return;\n  if (typeof bool !== 'boolean')\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) + 'must be a boolean.'\n    );\n};\n\nexport const validateString = function(\n  fnName: string,\n  argumentNumber: number,\n  string: any,\n  optional: boolean\n) {\n  if (optional && string === undefined) return;\n  if (!(typeof string === 'string')) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'must be a valid string.'\n    );\n  }\n};\n\nexport const validateObject = function(\n  fnName: string,\n  argumentNumber: number,\n  obj: any,\n  optional: boolean\n) {\n  if (optional && obj === undefined) return;\n  if (!(obj && typeof obj === 'object') || obj === null) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentNumber, optional) +\n        'must be a valid object.'\n    );\n  }\n};\n\nexport const validateObjectContainsKey = function(\n  fnName: string,\n  argumentNumber: number,\n  obj: any,\n  key: string,\n  optional: boolean,\n  opt_type?: string\n) {\n  const objectContainsKey =\n    obj && typeof obj === 'object' && contains(obj, key);\n\n  if (!objectContainsKey) {\n    if (optional) {\n      return;\n    } else {\n      throw new Error(\n        errorPrefixFxn(fnName, argumentNumber, optional) +\n          'must contain the key \"' +\n          key +\n          '\"'\n      );\n    }\n  }\n\n  if (opt_type) {\n    const val = safeGet(obj, key);\n    if (\n      (opt_type === 'number' && !(typeof val === 'number')) ||\n      (opt_type === 'string' && !(typeof val === 'string')) ||\n      (opt_type === 'boolean' && !(typeof val === 'boolean')) ||\n      (opt_type === 'function' && !(typeof val === 'function')) ||\n      (opt_type === 'object' && !(typeof val === 'object') && val)\n    ) {\n      if (optional) {\n        throw new Error(\n          errorPrefixFxn(fnName, argumentNumber, optional) +\n            'contains invalid value for key \"' +\n            key +\n            '\" (must be of type \"' +\n            opt_type +\n            '\")'\n        );\n      } else {\n        throw new Error(\n          errorPrefixFxn(fnName, argumentNumber, optional) +\n            'must contain the key \"' +\n            key +\n            '\" with type \"' +\n            opt_type +\n            '\"'\n        );\n      }\n    }\n  }\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { validateArgCount, validateCallback } from '@firebase/util';\nimport {\n  validateWritablePath,\n  validateFirebaseDataArg,\n  validatePriority,\n  validateFirebaseMergeDataArg\n} from '../core/util/validation';\nimport { warn } from '../core/util/util';\nimport { Deferred } from '@firebase/util';\nimport { Repo } from '../core/Repo';\nimport { Path } from '../core/util/Path';\n\n/**\n * @constructor\n */\nexport class OnDisconnect {\n  /**\n   * @param {!Repo} repo_\n   * @param {!Path} path_\n   */\n  constructor(private repo_: Repo, private path_: Path) {}\n\n  /**\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  cancel(onComplete?: (a: Error | null) => void): Promise<void> {\n    validateArgCount('OnDisconnect.cancel', 0, 1, arguments.length);\n    validateCallback('OnDisconnect.cancel', 1, onComplete, true);\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectCancel(\n      this.path_,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  remove(onComplete?: (a: Error | null) => void): Promise<void> {\n    validateArgCount('OnDisconnect.remove', 0, 1, arguments.length);\n    validateWritablePath('OnDisconnect.remove', this.path_);\n    validateCallback('OnDisconnect.remove', 1, onComplete, true);\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectSet(\n      this.path_,\n      null,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {*} value\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  set(value: any, onComplete?: (a: Error | null) => void): Promise<void> {\n    validateArgCount('OnDisconnect.set', 1, 2, arguments.length);\n    validateWritablePath('OnDisconnect.set', this.path_);\n    validateFirebaseDataArg('OnDisconnect.set', 1, value, this.path_, false);\n    validateCallback('OnDisconnect.set', 2, onComplete, true);\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectSet(\n      this.path_,\n      value,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {*} value\n   * @param {number|string|null} priority\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  setWithPriority(\n    value: any,\n    priority: number | string | null,\n    onComplete?: (a: Error | null) => void\n  ): Promise<void> {\n    validateArgCount('OnDisconnect.setWithPriority', 2, 3, arguments.length);\n    validateWritablePath('OnDisconnect.setWithPriority', this.path_);\n    validateFirebaseDataArg(\n      'OnDisconnect.setWithPriority',\n      1,\n      value,\n      this.path_,\n      false\n    );\n    validatePriority('OnDisconnect.setWithPriority', 2, priority, false);\n    validateCallback('OnDisconnect.setWithPriority', 3, onComplete, true);\n\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectSetWithPriority(\n      this.path_,\n      value,\n      priority,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {!Object} objectToMerge\n   * @param {function(?Error)=} onComplete\n   * @return {!firebase.Promise}\n   */\n  update(\n    objectToMerge: object,\n    onComplete?: (a: Error | null) => void\n  ): Promise<void> {\n    validateArgCount('OnDisconnect.update', 1, 2, arguments.length);\n    validateWritablePath('OnDisconnect.update', this.path_);\n    if (Array.isArray(objectToMerge)) {\n      const newObjectToMerge: { [k: string]: any } = {};\n      for (let i = 0; i < objectToMerge.length; ++i) {\n        newObjectToMerge['' + i] = objectToMerge[i];\n      }\n      objectToMerge = newObjectToMerge;\n      warn(\n        'Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the ' +\n          'existing data, or an Object with integer keys if you really do want to only update some of the children.'\n      );\n    }\n    validateFirebaseMergeDataArg(\n      'OnDisconnect.update',\n      1,\n      objectToMerge,\n      this.path_,\n      false\n    );\n    validateCallback('OnDisconnect.update', 2, onComplete, true);\n    const deferred = new Deferred<void>();\n    this.repo_.onDisconnectUpdate(\n      this.path_,\n      objectToMerge,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DataSnapshot } from './DataSnapshot';\nimport { validateArgCount } from '@firebase/util';\n\nexport class TransactionResult {\n  /**\n   * A type for the resolve value of Firebase.transaction.\n   * @constructor\n   * @dict\n   * @param {boolean} committed\n   * @param {DataSnapshot} snapshot\n   */\n  constructor(public committed: boolean, public snapshot: DataSnapshot) {}\n\n  // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\n  // for end-users\n  toJSON(): object {\n    validateArgCount('TransactionResult.toJSON', 0, 1, arguments.length);\n    return { committed: this.committed, snapshot: this.snapshot.toJSON() };\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\n/**\n * Fancy ID generator that creates 20-character string identifiers with the\n * following properties:\n *\n * 1. They're based on timestamp so that they sort *after* any existing ids.\n * 2. They contain 72-bits of random data after the timestamp so that IDs won't\n *    collide with other clients' IDs.\n * 3. They sort *lexicographically* (so the timestamp is converted to characters\n *    that will sort properly).\n * 4. They're monotonically increasing. Even if you generate more than one in\n *    the same timestamp, the latter ones will sort after the former ones. We do\n *    this by using the previous random bits but \"incrementing\" them by 1 (only\n *    in the case of a timestamp collision).\n */\nexport const nextPushId = (function() {\n  // Modeled after base64 web-safe chars, but ordered by ASCII.\n  const PUSH_CHARS =\n    '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz';\n\n  // Timestamp of last push, used to prevent local collisions if you push twice\n  // in one ms.\n  let lastPushTime = 0;\n\n  // We generate 72-bits of randomness which get turned into 12 characters and\n  // appended to the timestamp to prevent collisions with other clients. We\n  // store the last characters we generated because in the event of a collision,\n  // we'll use those same characters except \"incremented\" by one.\n  const lastRandChars: number[] = [];\n\n  return function(now: number) {\n    const duplicateTime = now === lastPushTime;\n    lastPushTime = now;\n\n    let i;\n    const timeStampChars = new Array(8);\n    for (i = 7; i >= 0; i--) {\n      timeStampChars[i] = PUSH_CHARS.charAt(now % 64);\n      // NOTE: Can't use << here because javascript will convert to int and lose\n      // the upper bits.\n      now = Math.floor(now / 64);\n    }\n    assert(now === 0, 'Cannot push at time == 0');\n\n    let id = timeStampChars.join('');\n\n    if (!duplicateTime) {\n      for (i = 0; i < 12; i++) {\n        lastRandChars[i] = Math.floor(Math.random() * 64);\n      }\n    } else {\n      // If the timestamp hasn't changed since last push, use the same random\n      // number, except incremented by 1.\n      for (i = 11; i >= 0 && lastRandChars[i] === 63; i--) {\n        lastRandChars[i] = 0;\n      }\n      lastRandChars[i]++;\n    }\n    for (i = 0; i < 12; i++) {\n      id += PUSH_CHARS.charAt(lastRandChars[i]);\n    }\n    assert(id.length === 20, 'nextPushId: Length should be 20.');\n\n    return id;\n  };\n})();\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../util/Path';\nimport { Index } from './indexes/Index';\n\n/**\n * Node is an interface defining the common functionality for nodes in\n * a DataSnapshot.\n *\n * @interface\n */\nexport interface Node {\n  /**\n   * Whether this node is a leaf node.\n   * @return {boolean} Whether this is a leaf node.\n   */\n  isLeafNode(): boolean;\n\n  /**\n   * Gets the priority of the node.\n   * @return {!Node} The priority of the node.\n   */\n  getPriority(): Node;\n\n  /**\n   * Returns a duplicate node with the new priority.\n   * @param {!Node} newPriorityNode New priority to set for the node.\n   * @return {!Node} Node with new priority.\n   */\n  updatePriority(newPriorityNode: Node): Node;\n\n  /**\n   * Returns the specified immediate child, or null if it doesn't exist.\n   * @param {string} childName The name of the child to retrieve.\n   * @return {!Node} The retrieved child, or an empty node.\n   */\n  getImmediateChild(childName: string): Node;\n\n  /**\n   * Returns a child by path, or null if it doesn't exist.\n   * @param {!Path} path The path of the child to retrieve.\n   * @return {!Node} The retrieved child or an empty node.\n   */\n  getChild(path: Path): Node;\n\n  /**\n   * Returns the name of the child immediately prior to the specified childNode, or null.\n   * @param {!string} childName The name of the child to find the predecessor of.\n   * @param {!Node} childNode The node to find the predecessor of.\n   * @param {!Index} index The index to use to determine the predecessor\n   * @return {?string} The name of the predecessor child, or null if childNode is the first child.\n   */\n  getPredecessorChildName(\n    childName: String,\n    childNode: Node,\n    index: Index\n  ): string | null;\n\n  /**\n   * Returns a duplicate node, with the specified immediate child updated.\n   * Any value in the node will be removed.\n   * @param {string} childName The name of the child to update.\n   * @param {!Node} newChildNode The new child node\n   * @return {!Node} The updated node.\n   */\n  updateImmediateChild(childName: string, newChildNode: Node): Node;\n\n  /**\n   * Returns a duplicate node, with the specified child updated.  Any value will\n   * be removed.\n   * @param {!Path} path The path of the child to update.\n   * @param {!Node} newChildNode The new child node, which may be an empty node\n   * @return {!Node} The updated node.\n   */\n  updateChild(path: Path, newChildNode: Node): Node;\n\n  /**\n   * True if the immediate child specified exists\n   * @param {!string} childName\n   * @return {boolean}\n   */\n  hasChild(childName: string): boolean;\n\n  /**\n   * @return {boolean} True if this node has no value or children.\n   */\n  isEmpty(): boolean;\n\n  /**\n   * @return {number} The number of children of this node.\n   */\n  numChildren(): number;\n\n  /**\n   * Calls action for each child.\n   * @param {!Index} index\n   * @param {function(string, !Node)} action Action to be called for\n   * each child.  It's passed the child name and the child node.\n   * @return {*} The first truthy value return by action, or the last falsey one\n   */\n  forEachChild(index: Index, action: (a: string, b: Node) => void): any;\n\n  /**\n   * @param {boolean=} exportFormat True for export format (also wire protocol format).\n   * @return {*} Value of this node as JSON.\n   */\n  val(exportFormat?: boolean): unknown;\n\n  /**\n   * @return {string} hash representing the node contents.\n   */\n  hash(): string;\n\n  /**\n   * @param {!Node} other Another node\n   * @return {!number} -1 for less than, 0 for equal, 1 for greater than other\n   */\n  compareTo(other: Node): number;\n\n  /**\n   * @param {!Node} other\n   * @return {boolean} Whether or not this snapshot equals other\n   */\n  equals(other: Node): boolean;\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {!Node} This node, with the specified index now available\n   */\n  withIndex(indexDefinition: Index): Node;\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {boolean}\n   */\n  isIndexed(indexDefinition: Index): boolean;\n}\n\n/**\n *\n * @param {!string} name\n * @param {!Node} node\n * @constructor\n * @struct\n */\nexport class NamedNode {\n  constructor(public name: string, public node: Node) {}\n\n  /**\n   *\n   * @param {!string} name\n   * @param {!Node} node\n   * @return {NamedNode}\n   */\n  static Wrap(name: string, node: Node) {\n    return new NamedNode(name, node);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Node, NamedNode } from '../Node';\nimport { MIN_NAME, MAX_NAME } from '../../util/util';\nimport { Comparator } from '../../util/SortedMap';\n\n/**\n *\n * @constructor\n */\nexport abstract class Index {\n  /**\n   * @param {!NamedNode} a\n   * @param {!NamedNode} b\n   * @return {number}\n   */\n  abstract compare(a: NamedNode, b: NamedNode): number;\n\n  /**\n   * @param {!Node} node\n   * @return {boolean}\n   */\n  abstract isDefinedOn(node: Node): boolean;\n\n  /**\n   * @return {function(!NamedNode, !NamedNode):number} A standalone comparison function for\n   * this index\n   */\n  getCompare(): Comparator<NamedNode> {\n    return this.compare.bind(this);\n  }\n\n  /**\n   * Given a before and after value for a node, determine if the indexed value has changed. Even if they are different,\n   * it's possible that the changes are isolated to parts of the snapshot that are not indexed.\n   *\n   * @param {!Node} oldNode\n   * @param {!Node} newNode\n   * @return {boolean} True if the portion of the snapshot being indexed changed between oldNode and newNode\n   */\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    const oldWrapped = new NamedNode(MIN_NAME, oldNode);\n    const newWrapped = new NamedNode(MIN_NAME, newNode);\n    return this.compare(oldWrapped, newWrapped) !== 0;\n  }\n\n  /**\n   * @return {!NamedNode} a node wrapper that will sort equal to or less than\n   * any other node wrapper, using this index\n   */\n  minPost(): NamedNode {\n    return (NamedNode as any).MIN;\n  }\n\n  /**\n   * @return {!NamedNode} a node wrapper that will sort greater than or equal to\n   * any other node wrapper, using this index\n   */\n  abstract maxPost(): NamedNode;\n\n  /**\n   * @param {*} indexValue\n   * @param {string} name\n   * @return {!NamedNode}\n   */\n  abstract makePost(indexValue: any, name: string): NamedNode;\n\n  /**\n   * @return {!string} String representation for inclusion in a query spec\n   */\n  abstract toString(): string;\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Index } from './Index';\nimport { Node, NamedNode } from '../Node';\nimport { nameCompare, MAX_NAME } from '../../util/util';\nimport { assert, assertionError } from '@firebase/util';\nimport { ChildrenNode } from '../ChildrenNode';\n\nlet __EMPTY_NODE: ChildrenNode;\n\nexport class KeyIndex extends Index {\n  static get __EMPTY_NODE() {\n    return __EMPTY_NODE;\n  }\n\n  static set __EMPTY_NODE(val) {\n    __EMPTY_NODE = val;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  compare(a: NamedNode, b: NamedNode): number {\n    return nameCompare(a.name, b.name);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isDefinedOn(node: Node): boolean {\n    // We could probably return true here (since every node has a key), but it's never called\n    // so just leaving unimplemented for now.\n    throw assertionError('KeyIndex.isDefinedOn not expected to be called.');\n  }\n\n  /**\n   * @inheritDoc\n   */\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    return false; // The key for a node never changes.\n  }\n\n  /**\n   * @inheritDoc\n   */\n  minPost() {\n    return (NamedNode as any).MIN;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  maxPost(): NamedNode {\n    // TODO: This should really be created once and cached in a static property, but\n    // NamedNode isn't defined yet, so I can't use it in a static.  Bleh.\n    return new NamedNode(MAX_NAME, __EMPTY_NODE);\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {string} name\n   * @return {!NamedNode}\n   */\n  makePost(indexValue: string, name: string): NamedNode {\n    assert(\n      typeof indexValue === 'string',\n      'KeyIndex indexValue must always be a string.'\n    );\n    // We just use empty node, but it'll never be compared, since our comparator only looks at name.\n    return new NamedNode(indexValue, __EMPTY_NODE);\n  }\n\n  /**\n   * @return {!string} String representation for inclusion in a query spec\n   */\n  toString(): string {\n    return '.key';\n  }\n}\n\nexport const KEY_INDEX = new KeyIndex();\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { doubleToIEEE754String } from '../util/util';\nimport { contains } from '@firebase/util';\nimport { Node } from './Node';\n\nlet MAX_NODE: Node;\n\nexport function setMaxNode(val: Node) {\n  MAX_NODE = val;\n}\n\n/**\n * @param {(!string|!number)} priority\n * @return {!string}\n */\nexport const priorityHashText = function(priority: string | number): string {\n  if (typeof priority === 'number')\n    return 'number:' + doubleToIEEE754String(priority);\n  else return 'string:' + priority;\n};\n\n/**\n * Validates that a priority snapshot Node is valid.\n *\n * @param {!Node} priorityNode\n */\nexport const validatePriorityNode = function(priorityNode: Node) {\n  if (priorityNode.isLeafNode()) {\n    const val = priorityNode.val();\n    assert(\n      typeof val === 'string' ||\n        typeof val === 'number' ||\n        (typeof val === 'object' &&\n          contains(val as { [key: string]: unknown }, '.sv')),\n      'Priority must be a string or number.'\n    );\n  } else {\n    assert(\n      priorityNode === MAX_NODE || priorityNode.isEmpty(),\n      'priority of unexpected type.'\n    );\n  }\n  // Don't call getPriority() on MAX_NODE to avoid hitting assertion.\n  assert(\n    priorityNode === MAX_NODE || priorityNode.getPriority().isEmpty(),\n    \"Priority nodes can't have a priority of their own.\"\n  );\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { doubleToIEEE754String, sha1 } from '../util/util';\nimport { priorityHashText, validatePriorityNode } from './snap';\nimport { Node } from './Node';\nimport { Path } from '../util/Path';\nimport { Index } from './indexes/Index';\nimport { ChildrenNodeConstructor } from './ChildrenNode';\n\nlet __childrenNodeConstructor: ChildrenNodeConstructor;\n\n/**\n * LeafNode is a class for storing leaf nodes in a DataSnapshot.  It\n * implements Node and stores the value of the node (a string,\n * number, or boolean) accessible via getValue().\n */\nexport class LeafNode implements Node {\n  static set __childrenNodeConstructor(val: ChildrenNodeConstructor) {\n    __childrenNodeConstructor = val;\n  }\n\n  static get __childrenNodeConstructor() {\n    return __childrenNodeConstructor;\n  }\n\n  /**\n   * The sort order for comparing leaf nodes of different types. If two leaf nodes have\n   * the same type, the comparison falls back to their value\n   * @type {Array.<!string>}\n   * @const\n   */\n  static VALUE_TYPE_ORDER = ['object', 'boolean', 'number', 'string'];\n\n  private lazyHash_: string | null = null;\n\n  /**\n   * @implements {Node}\n   * @param {!(string|number|boolean|Object)} value_ The value to store in this leaf node.\n   *                                         The object type is possible in the event of a deferred value\n   * @param {!Node=} priorityNode_ The priority of this node.\n   */\n  constructor(\n    private readonly value_: string | number | boolean | object,\n    private priorityNode_: Node = LeafNode.__childrenNodeConstructor.EMPTY_NODE\n  ) {\n    assert(\n      this.value_ !== undefined && this.value_ !== null,\n      \"LeafNode shouldn't be created with null/undefined value.\"\n    );\n\n    validatePriorityNode(this.priorityNode_);\n  }\n\n  /** @inheritDoc */\n  isLeafNode(): boolean {\n    return true;\n  }\n\n  /** @inheritDoc */\n  getPriority(): Node {\n    return this.priorityNode_;\n  }\n\n  /** @inheritDoc */\n  updatePriority(newPriorityNode: Node): Node {\n    return new LeafNode(this.value_, newPriorityNode);\n  }\n\n  /** @inheritDoc */\n  getImmediateChild(childName: string): Node {\n    // Hack to treat priority as a regular child\n    if (childName === '.priority') {\n      return this.priorityNode_;\n    } else {\n      return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\n    }\n  }\n\n  /** @inheritDoc */\n  getChild(path: Path): Node {\n    if (path.isEmpty()) {\n      return this;\n    } else if (path.getFront() === '.priority') {\n      return this.priorityNode_;\n    } else {\n      return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  hasChild(): boolean {\n    return false;\n  }\n\n  /** @inheritDoc */\n  getPredecessorChildName(childName: String, childNode: Node): null {\n    return null;\n  }\n\n  /** @inheritDoc */\n  updateImmediateChild(childName: string, newChildNode: Node): Node {\n    if (childName === '.priority') {\n      return this.updatePriority(newChildNode);\n    } else if (newChildNode.isEmpty() && childName !== '.priority') {\n      return this;\n    } else {\n      return LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(\n        childName,\n        newChildNode\n      ).updatePriority(this.priorityNode_);\n    }\n  }\n\n  /** @inheritDoc */\n  updateChild(path: Path, newChildNode: Node): Node {\n    const front = path.getFront();\n    if (front === null) {\n      return newChildNode;\n    } else if (newChildNode.isEmpty() && front !== '.priority') {\n      return this;\n    } else {\n      assert(\n        front !== '.priority' || path.getLength() === 1,\n        '.priority must be the last token in a path'\n      );\n\n      return this.updateImmediateChild(\n        front,\n        LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(\n          path.popFront(),\n          newChildNode\n        )\n      );\n    }\n  }\n\n  /** @inheritDoc */\n  isEmpty(): boolean {\n    return false;\n  }\n\n  /** @inheritDoc */\n  numChildren(): number {\n    return 0;\n  }\n\n  /** @inheritDoc */\n  forEachChild(index: Index, action: (s: string, n: Node) => void): any {\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  val(exportFormat?: boolean): Object {\n    if (exportFormat && !this.getPriority().isEmpty())\n      return {\n        '.value': this.getValue(),\n        '.priority': this.getPriority().val()\n      };\n    else return this.getValue();\n  }\n\n  /** @inheritDoc */\n  hash(): string {\n    if (this.lazyHash_ === null) {\n      let toHash = '';\n      if (!this.priorityNode_.isEmpty())\n        toHash +=\n          'priority:' +\n          priorityHashText(this.priorityNode_.val() as number | string) +\n          ':';\n\n      const type = typeof this.value_;\n      toHash += type + ':';\n      if (type === 'number') {\n        toHash += doubleToIEEE754String(this.value_ as number);\n      } else {\n        toHash += this.value_;\n      }\n      this.lazyHash_ = sha1(toHash);\n    }\n    return this.lazyHash_;\n  }\n\n  /**\n   * Returns the value of the leaf node.\n   * @return {Object|string|number|boolean} The value of the node.\n   */\n  getValue(): object | string | number | boolean {\n    return this.value_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  compareTo(other: Node): number {\n    if (other === LeafNode.__childrenNodeConstructor.EMPTY_NODE) {\n      return 1;\n    } else if (other instanceof LeafNode.__childrenNodeConstructor) {\n      return -1;\n    } else {\n      assert(other.isLeafNode(), 'Unknown node type');\n      return this.compareToLeafNode_(other as LeafNode);\n    }\n  }\n\n  /**\n   * Comparison specifically for two leaf nodes\n   * @param {!LeafNode} otherLeaf\n   * @return {!number}\n   * @private\n   */\n  private compareToLeafNode_(otherLeaf: LeafNode): number {\n    const otherLeafType = typeof otherLeaf.value_;\n    const thisLeafType = typeof this.value_;\n    const otherIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(otherLeafType);\n    const thisIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(thisLeafType);\n    assert(otherIndex >= 0, 'Unknown leaf type: ' + otherLeafType);\n    assert(thisIndex >= 0, 'Unknown leaf type: ' + thisLeafType);\n    if (otherIndex === thisIndex) {\n      // Same type, compare values\n      if (thisLeafType === 'object') {\n        // Deferred value nodes are all equal, but we should also never get to this point...\n        return 0;\n      } else {\n        // Note that this works because true > false, all others are number or string comparisons\n        if (this.value_ < otherLeaf.value_) {\n          return -1;\n        } else if (this.value_ === otherLeaf.value_) {\n          return 0;\n        } else {\n          return 1;\n        }\n      }\n    } else {\n      return thisIndex - otherIndex;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  withIndex(): Node {\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isIndexed(): boolean {\n    return true;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  equals(other: Node): boolean {\n    /**\n     * @inheritDoc\n     */\n    if (other === this) {\n      return true;\n    } else if (other.isLeafNode()) {\n      const otherLeaf = other as LeafNode;\n      return (\n        this.value_ === otherLeaf.value_ &&\n        this.priorityNode_.equals(otherLeaf.priorityNode_)\n      );\n    } else {\n      return false;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Index } from './Index';\nimport { nameCompare, MAX_NAME } from '../../util/util';\nimport { NamedNode, Node } from '../Node';\nimport { LeafNode } from '../LeafNode';\n\nlet nodeFromJSON: (a: any) => Node;\nlet MAX_NODE: Node;\n\nexport function setNodeFromJSON(val: (a: any) => Node) {\n  nodeFromJSON = val;\n}\n\nexport function setMaxNode(val: Node) {\n  MAX_NODE = val;\n}\n\n/**\n * @constructor\n * @extends {Index}\n * @private\n */\nexport class PriorityIndex extends Index {\n  /**\n   * @inheritDoc\n   */\n  compare(a: NamedNode, b: NamedNode): number {\n    const aPriority = a.node.getPriority();\n    const bPriority = b.node.getPriority();\n    const indexCmp = aPriority.compareTo(bPriority);\n    if (indexCmp === 0) {\n      return nameCompare(a.name, b.name);\n    } else {\n      return indexCmp;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isDefinedOn(node: Node): boolean {\n    return !node.getPriority().isEmpty();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    return !oldNode.getPriority().equals(newNode.getPriority());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  minPost(): NamedNode {\n    return (NamedNode as any).MIN;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  maxPost(): NamedNode {\n    return new NamedNode(MAX_NAME, new LeafNode('[PRIORITY-POST]', MAX_NODE));\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {string} name\n   * @return {!NamedNode}\n   */\n  makePost(indexValue: any, name: string): NamedNode {\n    const priorityNode = nodeFromJSON(indexValue);\n    return new NamedNode(name, new LeafNode('[PRIORITY-POST]', priorityNode));\n  }\n\n  /**\n   * @return {!string} String representation for inclusion in a query spec\n   */\n  toString(): string {\n    return '.priority';\n  }\n}\n\nexport const PRIORITY_INDEX = new PriorityIndex();\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Implementation of an immutable SortedMap using a Left-leaning\n * Red-Black Tree, adapted from the implementation in Mugs\n * (http://mads379.github.com/mugs/) by Mads Hartmann Jensen\n * (mads379@gmail.com).\n *\n * Original paper on Left-leaning Red-Black Trees:\n *   http://www.cs.princeton.edu/~rs/talks/LLRB/LLRB.pdf\n *\n * Invariant 1: No red node has a red child\n * Invariant 2: Every leaf path has the same number of black nodes\n * Invariant 3: Only the left child can be red (left leaning)\n */\n\n// TODO: There are some improvements I'd like to make to improve memory / perf:\n//  * Create two prototypes, LLRedNode and LLBlackNode, instead of storing a\n//    color property in every node.\n// TODO: It would also be good (and possibly necessary) to create a base\n// interface for LLRBNode and LLRBEmptyNode.\n\nexport type Comparator<K> = (key1: K, key2: K) => number;\n\n/**\n * An iterator over an LLRBNode.\n */\nexport class SortedMapIterator<K, V, T> {\n  /** @private\n   * @type {Array.<!LLRBNode>}\n   */\n  private nodeStack_: (LLRBNode<K, V> | LLRBEmptyNode<K, V>)[] = [];\n\n  /**\n   * @template K, V, T\n   * @param {LLRBNode|LLRBEmptyNode} node Node to iterate.\n   * @param {?K} startKey\n   * @param {function(K, K): number} comparator\n   * @param {boolean} isReverse_ Whether or not to iterate in reverse\n   * @param {(function(K, V):T)=} resultGenerator_\n   */\n  constructor(\n    node: LLRBNode<K, V> | LLRBEmptyNode<K, V>,\n    startKey: K | null,\n    comparator: Comparator<K>,\n    private isReverse_: boolean,\n    private resultGenerator_: ((k: K, v: V) => T) | null = null\n  ) {\n    let cmp = 1;\n    while (!node.isEmpty()) {\n      node = node as LLRBNode<K, V>;\n      cmp = startKey ? comparator(node.key, startKey) : 1;\n      // flip the comparison if we're going in reverse\n      if (isReverse_) cmp *= -1;\n\n      if (cmp < 0) {\n        // This node is less than our start key. ignore it\n        if (this.isReverse_) {\n          node = node.left;\n        } else {\n          node = node.right;\n        }\n      } else if (cmp === 0) {\n        // This node is exactly equal to our start key. Push it on the stack, but stop iterating;\n        this.nodeStack_.push(node);\n        break;\n      } else {\n        // This node is greater than our start key, add it to the stack and move to the next one\n        this.nodeStack_.push(node);\n        if (this.isReverse_) {\n          node = node.right;\n        } else {\n          node = node.left;\n        }\n      }\n    }\n  }\n\n  getNext(): T {\n    if (this.nodeStack_.length === 0) return null;\n\n    let node = this.nodeStack_.pop();\n    let result: T;\n    if (this.resultGenerator_)\n      result = this.resultGenerator_(node.key, node.value);\n    else result = { key: node.key, value: node.value } as any;\n\n    if (this.isReverse_) {\n      node = node.left;\n      while (!node.isEmpty()) {\n        this.nodeStack_.push(node);\n        node = node.right;\n      }\n    } else {\n      node = node.right;\n      while (!node.isEmpty()) {\n        this.nodeStack_.push(node);\n        node = node.left;\n      }\n    }\n\n    return result;\n  }\n\n  hasNext(): boolean {\n    return this.nodeStack_.length > 0;\n  }\n\n  peek(): T {\n    if (this.nodeStack_.length === 0) return null;\n\n    const node = this.nodeStack_[this.nodeStack_.length - 1];\n    if (this.resultGenerator_) {\n      return this.resultGenerator_(node.key, node.value);\n    } else {\n      return { key: node.key, value: node.value } as any;\n    }\n  }\n}\n\n/**\n * Represents a node in a Left-leaning Red-Black tree.\n */\nexport class LLRBNode<K, V> {\n  color: boolean;\n  left: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n  right: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n\n  /**\n   * @template K, V\n   * @param {!K} key Key associated with this node.\n   * @param {!V} value Value associated with this node.\n   * @param {?boolean} color Whether this node is red.\n   * @param {?(LLRBNode|LLRBEmptyNode)=} left Left child.\n   * @param {?(LLRBNode|LLRBEmptyNode)=} right Right child.\n   */\n  constructor(\n    public key: K,\n    public value: V,\n    color: boolean | null,\n    left?: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null,\n    right?: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null\n  ) {\n    this.color = color != null ? color : LLRBNode.RED;\n    this.left =\n      left != null ? left : (SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>);\n    this.right =\n      right != null ? right : (SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>);\n  }\n\n  static RED = true;\n  static BLACK = false;\n\n  /**\n   * Returns a copy of the current node, optionally replacing pieces of it.\n   *\n   * @param {?K} key New key for the node, or null.\n   * @param {?V} value New value for the node, or null.\n   * @param {?boolean} color New color for the node, or null.\n   * @param {?LLRBNode|LLRBEmptyNode} left New left child for the node, or null.\n   * @param {?LLRBNode|LLRBEmptyNode} right New right child for the node, or null.\n   * @return {!LLRBNode} The node copy.\n   */\n  copy(\n    key: K | null,\n    value: V | null,\n    color: boolean | null,\n    left: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null,\n    right: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null\n  ): LLRBNode<K, V> {\n    return new LLRBNode(\n      key != null ? key : this.key,\n      value != null ? value : this.value,\n      color != null ? color : this.color,\n      left != null ? left : this.left,\n      right != null ? right : this.right\n    );\n  }\n\n  /**\n   * @return {number} The total number of nodes in the tree.\n   */\n  count(): number {\n    return this.left.count() + 1 + this.right.count();\n  }\n\n  /**\n   * @return {boolean} True if the tree is empty.\n   */\n  isEmpty(): boolean {\n    return false;\n  }\n\n  /**\n   * Traverses the tree in key order and calls the specified action function\n   * for each node.\n   *\n   * @param {function(!K, !V):*} action Callback function to be called for each\n   *   node.  If it returns true, traversal is aborted.\n   * @return {*} The first truthy value returned by action, or the last falsey\n   *   value returned by action\n   */\n  inorderTraversal(action: (k: K, v: V) => any): boolean {\n    return (\n      this.left.inorderTraversal(action) ||\n      action(this.key, this.value) ||\n      this.right.inorderTraversal(action)\n    );\n  }\n\n  /**\n   * Traverses the tree in reverse key order and calls the specified action function\n   * for each node.\n   *\n   * @param {function(!Object, !Object)} action Callback function to be called for each\n   * node.  If it returns true, traversal is aborted.\n   * @return {*} True if traversal was aborted.\n   */\n  reverseTraversal(action: (k: K, v: V) => void): boolean {\n    return (\n      this.right.reverseTraversal(action) ||\n      action(this.key, this.value) ||\n      this.left.reverseTraversal(action)\n    );\n  }\n\n  /**\n   * @return {!Object} The minimum node in the tree.\n   * @private\n   */\n  private min_(): LLRBNode<K, V> {\n    if (this.left.isEmpty()) {\n      return this;\n    } else {\n      return (this.left as LLRBNode<K, V>).min_();\n    }\n  }\n\n  /**\n   * @return {!K} The maximum key in the tree.\n   */\n  minKey(): K {\n    return this.min_().key;\n  }\n\n  /**\n   * @return {!K} The maximum key in the tree.\n   */\n  maxKey(): K {\n    if (this.right.isEmpty()) {\n      return this.key;\n    } else {\n      return this.right.maxKey();\n    }\n  }\n\n  /**\n   *\n   * @param {!Object} key Key to insert.\n   * @param {!Object} value Value to insert.\n   * @param {Comparator} comparator Comparator.\n   * @return {!LLRBNode} New tree, with the key/value added.\n   */\n  insert(key: K, value: V, comparator: Comparator<K>): LLRBNode<K, V> {\n    let cmp, n;\n    n = this;\n    cmp = comparator(key, n.key);\n    if (cmp < 0) {\n      n = n.copy(null, null, null, n.left.insert(key, value, comparator), null);\n    } else if (cmp === 0) {\n      n = n.copy(null, value, null, null, null);\n    } else {\n      n = n.copy(\n        null,\n        null,\n        null,\n        null,\n        n.right.insert(key, value, comparator)\n      );\n    }\n    return n.fixUp_();\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode|LLRBEmptyNode} New tree, with the minimum key removed.\n   */\n  private removeMin_(): LLRBNode<K, V> | LLRBEmptyNode<K, V> {\n    if (this.left.isEmpty()) {\n      return SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>;\n    }\n    let n: LLRBNode<K, V> = this;\n    if (!n.left.isRed_() && !n.left.left.isRed_()) n = n.moveRedLeft_();\n    n = n.copy(null, null, null, (n.left as LLRBNode<K, V>).removeMin_(), null);\n    return n.fixUp_();\n  }\n\n  /**\n   * @param {!Object} key The key of the item to remove.\n   * @param {Comparator} comparator Comparator.\n   * @return {!LLRBNode|LLRBEmptyNode} New tree, with the specified item removed.\n   */\n  remove(\n    key: K,\n    comparator: Comparator<K>\n  ): LLRBNode<K, V> | LLRBEmptyNode<K, V> {\n    let n, smallest;\n    n = this;\n    if (comparator(key, n.key) < 0) {\n      if (!n.left.isEmpty() && !n.left.isRed_() && !n.left.left.isRed_()) {\n        n = n.moveRedLeft_();\n      }\n      n = n.copy(null, null, null, n.left.remove(key, comparator), null);\n    } else {\n      if (n.left.isRed_()) n = n.rotateRight_();\n      if (!n.right.isEmpty() && !n.right.isRed_() && !n.right.left.isRed_()) {\n        n = n.moveRedRight_();\n      }\n      if (comparator(key, n.key) === 0) {\n        if (n.right.isEmpty()) {\n          return SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>;\n        } else {\n          smallest = (n.right as LLRBNode<K, V>).min_();\n          n = n.copy(\n            smallest.key,\n            smallest.value,\n            null,\n            null,\n            (n.right as LLRBNode<K, V>).removeMin_()\n          );\n        }\n      }\n      n = n.copy(null, null, null, null, n.right.remove(key, comparator));\n    }\n    return n.fixUp_();\n  }\n\n  /**\n   * @private\n   * @return {boolean} Whether this is a RED node.\n   */\n  isRed_(): boolean {\n    return this.color;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree after performing any needed rotations.\n   */\n  private fixUp_(): LLRBNode<K, V> {\n    let n = this as any;\n    if (n.right.isRed_() && !n.left.isRed_()) n = n.rotateLeft_();\n    if (n.left.isRed_() && n.left.left.isRed_()) n = n.rotateRight_();\n    if (n.left.isRed_() && n.right.isRed_()) n = n.colorFlip_();\n    return n;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after moveRedLeft.\n   */\n  private moveRedLeft_(): LLRBNode<K, V> {\n    let n = this.colorFlip_();\n    if (n.right.left.isRed_()) {\n      n = n.copy(\n        null,\n        null,\n        null,\n        null,\n        (n.right as LLRBNode<K, V>).rotateRight_()\n      );\n      n = n.rotateLeft_();\n      n = n.colorFlip_();\n    }\n    return n;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after moveRedRight.\n   */\n  private moveRedRight_(): LLRBNode<K, V> {\n    let n = this.colorFlip_();\n    if (n.left.left.isRed_()) {\n      n = n.rotateRight_();\n      n = n.colorFlip_();\n    }\n    return n;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after rotateLeft.\n   */\n  private rotateLeft_(): LLRBNode<K, V> {\n    const nl = this.copy(null, null, LLRBNode.RED, null, this.right.left);\n    return this.right.copy(null, null, this.color, nl, null) as LLRBNode<K, V>;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after rotateRight.\n   */\n  private rotateRight_(): LLRBNode<K, V> {\n    const nr = this.copy(null, null, LLRBNode.RED, this.left.right, null);\n    return this.left.copy(null, null, this.color, null, nr) as LLRBNode<K, V>;\n  }\n\n  /**\n   * @private\n   * @return {!LLRBNode} New tree, after colorFlip.\n   */\n  private colorFlip_(): LLRBNode<K, V> {\n    const left = this.left.copy(null, null, !this.left.color, null, null);\n    const right = this.right.copy(null, null, !this.right.color, null, null);\n    return this.copy(null, null, !this.color, left, right);\n  }\n\n  /**\n   * For testing.\n   *\n   * @private\n   * @return {boolean} True if all is well.\n   */\n  private checkMaxDepth_(): boolean {\n    const blackDepth = this.check_();\n    return Math.pow(2.0, blackDepth) <= this.count() + 1;\n  }\n\n  /**\n   * @private\n   * @return {number} Not sure what this returns exactly. :-).\n   */\n  check_(): number {\n    let blackDepth;\n    if (this.isRed_() && this.left.isRed_()) {\n      throw new Error(\n        'Red node has red child(' + this.key + ',' + this.value + ')'\n      );\n    }\n    if (this.right.isRed_()) {\n      throw new Error(\n        'Right child of (' + this.key + ',' + this.value + ') is red'\n      );\n    }\n    blackDepth = this.left.check_();\n    if (blackDepth !== this.right.check_()) {\n      throw new Error('Black depths differ');\n    } else {\n      return blackDepth + (this.isRed_() ? 0 : 1);\n    }\n  }\n}\n\n/**\n * Represents an empty node (a leaf node in the Red-Black Tree).\n */\nexport class LLRBEmptyNode<K, V> {\n  key: K;\n  value: V;\n  left: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n  right: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n  color: boolean;\n\n  /**\n   * Returns a copy of the current node.\n   *\n   * @return {!LLRBEmptyNode} The node copy.\n   */\n  copy(\n    key: K | null,\n    value: V | null,\n    color: boolean | null,\n    left: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null,\n    right: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null\n  ): LLRBEmptyNode<K, V> {\n    return this;\n  }\n\n  /**\n   * Returns a copy of the tree, with the specified key/value added.\n   *\n   * @param {!K} key Key to be added.\n   * @param {!V} value Value to be added.\n   * @param {Comparator} comparator Comparator.\n   * @return {!LLRBNode} New tree, with item added.\n   */\n  insert(key: K, value: V, comparator: Comparator<K>): LLRBNode<K, V> {\n    return new LLRBNode(key, value, null);\n  }\n\n  /**\n   * Returns a copy of the tree, with the specified key removed.\n   *\n   * @param {!K} key The key to remove.\n   * @param {Comparator} comparator Comparator.\n   * @return {!LLRBEmptyNode} New tree, with item removed.\n   */\n  remove(key: K, comparator: Comparator<K>): LLRBEmptyNode<K, V> {\n    return this;\n  }\n\n  /**\n   * @return {number} The total number of nodes in the tree.\n   */\n  count(): number {\n    return 0;\n  }\n\n  /**\n   * @return {boolean} True if the tree is empty.\n   */\n  isEmpty(): boolean {\n    return true;\n  }\n\n  /**\n   * Traverses the tree in key order and calls the specified action function\n   * for each node.\n   *\n   * @param {function(!K, !V):*} action Callback function to be called for each\n   * node.  If it returns true, traversal is aborted.\n   * @return {boolean} True if traversal was aborted.\n   */\n  inorderTraversal(action: (k: K, v: V) => any): boolean {\n    return false;\n  }\n\n  /**\n   * Traverses the tree in reverse key order and calls the specified action function\n   * for each node.\n   *\n   * @param {function(!K, !V)} action Callback function to be called for each\n   * node.  If it returns true, traversal is aborted.\n   * @return {boolean} True if traversal was aborted.\n   */\n  reverseTraversal(action: (k: K, v: V) => void): boolean {\n    return false;\n  }\n\n  /**\n   * @return {null}\n   */\n  minKey(): null {\n    return null;\n  }\n\n  /**\n   * @return {null}\n   */\n  maxKey(): null {\n    return null;\n  }\n\n  /**\n   * @private\n   * @return {number} Not sure what this returns exactly. :-).\n   */\n  check_(): number {\n    return 0;\n  }\n\n  /**\n   * @private\n   * @return {boolean} Whether this node is red.\n   */\n  isRed_() {\n    return false;\n  }\n}\n\n/**\n * An immutable sorted map implementation, based on a Left-leaning Red-Black\n * tree.\n */\nexport class SortedMap<K, V> {\n  /**\n   * Always use the same empty node, to reduce memory.\n   * @const\n   */\n  static EMPTY_NODE = new LLRBEmptyNode();\n\n  /**\n   * @template K, V\n   * @param {function(K, K):number} comparator_ Key comparator.\n   * @param {LLRBNode=} root_ (Optional) Root node for the map.\n   */\n  constructor(\n    private comparator_: Comparator<K>,\n    private root_:\n      | LLRBNode<K, V>\n      | LLRBEmptyNode<K, V> = SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>\n  ) {}\n\n  /**\n   * Returns a copy of the map, with the specified key/value added or replaced.\n   * (TODO: We should perhaps rename this method to 'put')\n   *\n   * @param {!K} key Key to be added.\n   * @param {!V} value Value to be added.\n   * @return {!SortedMap.<K, V>} New map, with item added.\n   */\n  insert(key: K, value: V): SortedMap<K, V> {\n    return new SortedMap(\n      this.comparator_,\n      this.root_\n        .insert(key, value, this.comparator_)\n        .copy(null, null, LLRBNode.BLACK, null, null)\n    );\n  }\n\n  /**\n   * Returns a copy of the map, with the specified key removed.\n   *\n   * @param {!K} key The key to remove.\n   * @return {!SortedMap.<K, V>} New map, with item removed.\n   */\n  remove(key: K): SortedMap<K, V> {\n    return new SortedMap(\n      this.comparator_,\n      this.root_\n        .remove(key, this.comparator_)\n        .copy(null, null, LLRBNode.BLACK, null, null)\n    );\n  }\n\n  /**\n   * Returns the value of the node with the given key, or null.\n   *\n   * @param {!K} key The key to look up.\n   * @return {?V} The value of the node with the given key, or null if the\n   * key doesn't exist.\n   */\n  get(key: K): V | null {\n    let cmp;\n    let node = this.root_;\n    while (!node.isEmpty()) {\n      cmp = this.comparator_(key, node.key);\n      if (cmp === 0) {\n        return node.value;\n      } else if (cmp < 0) {\n        node = node.left;\n      } else if (cmp > 0) {\n        node = node.right;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns the key of the item *before* the specified key, or null if key is the first item.\n   * @param {K} key The key to find the predecessor of\n   * @return {?K} The predecessor key.\n   */\n  getPredecessorKey(key: K): K | null {\n    let cmp,\n      node = this.root_,\n      rightParent = null;\n    while (!node.isEmpty()) {\n      cmp = this.comparator_(key, node.key);\n      if (cmp === 0) {\n        if (!node.left.isEmpty()) {\n          node = node.left;\n          while (!node.right.isEmpty()) node = node.right;\n          return node.key;\n        } else if (rightParent) {\n          return rightParent.key;\n        } else {\n          return null; // first item.\n        }\n      } else if (cmp < 0) {\n        node = node.left;\n      } else if (cmp > 0) {\n        rightParent = node;\n        node = node.right;\n      }\n    }\n\n    throw new Error(\n      'Attempted to find predecessor key for a nonexistent key.  What gives?'\n    );\n  }\n\n  /**\n   * @return {boolean} True if the map is empty.\n   */\n  isEmpty(): boolean {\n    return this.root_.isEmpty();\n  }\n\n  /**\n   * @return {number} The total number of nodes in the map.\n   */\n  count(): number {\n    return this.root_.count();\n  }\n\n  /**\n   * @return {?K} The minimum key in the map.\n   */\n  minKey(): K | null {\n    return this.root_.minKey();\n  }\n\n  /**\n   * @return {?K} The maximum key in the map.\n   */\n  maxKey(): K | null {\n    return this.root_.maxKey();\n  }\n\n  /**\n   * Traverses the map in key order and calls the specified action function\n   * for each key/value pair.\n   *\n   * @param {function(!K, !V):*} action Callback function to be called\n   * for each key/value pair.  If action returns true, traversal is aborted.\n   * @return {*} The first truthy value returned by action, or the last falsey\n   *   value returned by action\n   */\n  inorderTraversal(action: (k: K, v: V) => any): boolean {\n    return this.root_.inorderTraversal(action);\n  }\n\n  /**\n   * Traverses the map in reverse key order and calls the specified action function\n   * for each key/value pair.\n   *\n   * @param {function(!Object, !Object)} action Callback function to be called\n   * for each key/value pair.  If action returns true, traversal is aborted.\n   * @return {*} True if the traversal was aborted.\n   */\n  reverseTraversal(action: (k: K, v: V) => void): boolean {\n    return this.root_.reverseTraversal(action);\n  }\n\n  /**\n   * Returns an iterator over the SortedMap.\n   * @template T\n   * @param {(function(K, V):T)=} resultGenerator\n   * @return {SortedMapIterator.<K, V, T>} The iterator.\n   */\n  getIterator<T>(\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      null,\n      this.comparator_,\n      false,\n      resultGenerator\n    );\n  }\n\n  getIteratorFrom<T>(\n    key: K,\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      key,\n      this.comparator_,\n      false,\n      resultGenerator\n    );\n  }\n\n  getReverseIteratorFrom<T>(\n    key: K,\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      key,\n      this.comparator_,\n      true,\n      resultGenerator\n    );\n  }\n\n  getReverseIterator<T>(\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      null,\n      this.comparator_,\n      true,\n      resultGenerator\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LLRBNode } from '../util/SortedMap';\nimport { SortedMap } from '../util/SortedMap';\nimport { NamedNode } from './Node';\n\nconst LOG_2 = Math.log(2);\n\n/**\n * @constructor\n */\nclass Base12Num {\n  count: number;\n  private current_: number;\n  private bits_: number;\n\n  /**\n   * @param {number} length\n   */\n  constructor(length: number) {\n    const logBase2 = (num: number) =>\n      parseInt((Math.log(num) / LOG_2) as any, 10);\n    const bitMask = (bits: number) => parseInt(Array(bits + 1).join('1'), 2);\n    this.count = logBase2(length + 1);\n    this.current_ = this.count - 1;\n    const mask = bitMask(this.count);\n    this.bits_ = (length + 1) & mask;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  nextBitIsOne(): boolean {\n    //noinspection JSBitwiseOperatorUsage\n    const result = !(this.bits_ & (0x1 << this.current_));\n    this.current_--;\n    return result;\n  }\n}\n\n/**\n * Takes a list of child nodes and constructs a SortedSet using the given comparison\n * function\n *\n * Uses the algorithm described in the paper linked here:\n * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.46.1458\n *\n * @template K, V\n * @param {Array.<!NamedNode>} childList Unsorted list of children\n * @param {function(!NamedNode, !NamedNode):number} cmp The comparison method to be used\n * @param {(function(NamedNode):K)=} keyFn An optional function to extract K from a node wrapper, if K's\n *                                                        type is not NamedNode\n * @param {(function(K, K):number)=} mapSortFn An optional override for comparator used by the generated sorted map\n * @return {SortedMap.<K, V>}\n */\nexport const buildChildSet = function<K, V>(\n  childList: NamedNode[],\n  cmp: (a: NamedNode, b: NamedNode) => number,\n  keyFn?: (a: NamedNode) => K,\n  mapSortFn?: (a: K, b: K) => number\n): SortedMap<K, V> {\n  childList.sort(cmp);\n\n  const buildBalancedTree = function(\n    low: number,\n    high: number\n  ): LLRBNode<K, V> | null {\n    const length = high - low;\n    let namedNode: NamedNode;\n    let key: K;\n    if (length == 0) {\n      return null;\n    } else if (length == 1) {\n      namedNode = childList[low];\n      key = keyFn ? keyFn(namedNode) : ((namedNode as any) as K);\n      return new LLRBNode(\n        key,\n        (namedNode.node as any) as V,\n        LLRBNode.BLACK,\n        null,\n        null\n      );\n    } else {\n      const middle = parseInt((length / 2) as any, 10) + low;\n      const left = buildBalancedTree(low, middle);\n      const right = buildBalancedTree(middle + 1, high);\n      namedNode = childList[middle];\n      key = keyFn ? keyFn(namedNode) : ((namedNode as any) as K);\n      return new LLRBNode(\n        key,\n        (namedNode.node as any) as V,\n        LLRBNode.BLACK,\n        left,\n        right\n      );\n    }\n  };\n\n  const buildFrom12Array = function(base12: Base12Num): LLRBNode<K, V> {\n    let node: LLRBNode<K, V> = null;\n    let root = null;\n    let index = childList.length;\n\n    const buildPennant = function(chunkSize: number, color: boolean) {\n      const low = index - chunkSize;\n      const high = index;\n      index -= chunkSize;\n      const childTree = buildBalancedTree(low + 1, high);\n      const namedNode = childList[low];\n      const key: K = keyFn ? keyFn(namedNode) : ((namedNode as any) as K);\n      attachPennant(\n        new LLRBNode(key, (namedNode.node as any) as V, color, null, childTree)\n      );\n    };\n\n    const attachPennant = function(pennant: LLRBNode<K, V>) {\n      if (node) {\n        node.left = pennant;\n        node = pennant;\n      } else {\n        root = pennant;\n        node = pennant;\n      }\n    };\n\n    for (let i = 0; i < base12.count; ++i) {\n      const isOne = base12.nextBitIsOne();\n      // The number of nodes taken in each slice is 2^(arr.length - (i + 1))\n      const chunkSize = Math.pow(2, base12.count - (i + 1));\n      if (isOne) {\n        buildPennant(chunkSize, LLRBNode.BLACK);\n      } else {\n        // current == 2\n        buildPennant(chunkSize, LLRBNode.BLACK);\n        buildPennant(chunkSize, LLRBNode.RED);\n      }\n    }\n    return root;\n  };\n\n  const base12 = new Base12Num(childList.length);\n  const root = buildFrom12Array(base12);\n\n  return new SortedMap<K, V>(mapSortFn || (cmp as any), root);\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { buildChildSet } from './childSet';\nimport { contains, clone, map, safeGet } from '@firebase/util';\nimport { NamedNode, Node } from './Node';\nimport { PRIORITY_INDEX } from './indexes/PriorityIndex';\nimport { KEY_INDEX } from './indexes/KeyIndex';\nimport { SortedMap } from '../util/SortedMap';\nimport { Index } from './indexes/Index';\n\nlet _defaultIndexMap: IndexMap;\n\nconst fallbackObject = {};\n\n/**\n *\n * @param {Object.<string, FallbackType|SortedMap.<NamedNode, Node>>} indexes\n * @param {Object.<string, Index>} indexSet\n * @constructor\n */\nexport class IndexMap {\n  /**\n   * The default IndexMap for nodes without a priority\n   * @type {!IndexMap}\n   * @const\n   */\n  static get Default(): IndexMap {\n    assert(\n      fallbackObject && PRIORITY_INDEX,\n      'ChildrenNode.ts has not been loaded'\n    );\n    _defaultIndexMap =\n      _defaultIndexMap ||\n      new IndexMap(\n        { '.priority': fallbackObject },\n        { '.priority': PRIORITY_INDEX }\n      );\n    return _defaultIndexMap;\n  }\n\n  constructor(\n    private indexes_: {\n      [k: string]: SortedMap<NamedNode, Node> | /*FallbackType*/ object;\n    },\n    private indexSet_: { [k: string]: Index }\n  ) {}\n\n  /**\n   *\n   * @param {!string} indexKey\n   * @return {?SortedMap.<NamedNode, Node>}\n   */\n  get(indexKey: string): SortedMap<NamedNode, Node> | null {\n    const sortedMap = safeGet(this.indexes_, indexKey);\n    if (!sortedMap) throw new Error('No index defined for ' + indexKey);\n\n    if (sortedMap === fallbackObject) {\n      // The index exists, but it falls back to just name comparison. Return null so that the calling code uses the\n      // regular child map\n      return null;\n    } else {\n      return sortedMap as SortedMap<NamedNode, Node>;\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {boolean}\n   */\n  hasIndex(indexDefinition: Index): boolean {\n    return contains(this.indexSet_, indexDefinition.toString());\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @param {!SortedMap.<string, !Node>} existingChildren\n   * @return {!IndexMap}\n   */\n  addIndex(\n    indexDefinition: Index,\n    existingChildren: SortedMap<string, Node>\n  ): IndexMap {\n    assert(\n      indexDefinition !== KEY_INDEX,\n      \"KeyIndex always exists and isn't meant to be added to the IndexMap.\"\n    );\n    const childList = [];\n    let sawIndexedValue = false;\n    const iter = existingChildren.getIterator(NamedNode.Wrap);\n    let next = iter.getNext();\n    while (next) {\n      sawIndexedValue =\n        sawIndexedValue || indexDefinition.isDefinedOn(next.node);\n      childList.push(next);\n      next = iter.getNext();\n    }\n    let newIndex;\n    if (sawIndexedValue) {\n      newIndex = buildChildSet(childList, indexDefinition.getCompare());\n    } else {\n      newIndex = fallbackObject;\n    }\n    const indexName = indexDefinition.toString();\n    const newIndexSet = clone(this.indexSet_);\n    newIndexSet[indexName] = indexDefinition;\n    const newIndexes = clone(this.indexes_);\n    newIndexes[indexName] = newIndex;\n    return new IndexMap(newIndexes, newIndexSet);\n  }\n\n  /**\n   * Ensure that this node is properly tracked in any indexes that we're maintaining\n   * @param {!NamedNode} namedNode\n   * @param {!SortedMap.<string, !Node>} existingChildren\n   * @return {!IndexMap}\n   */\n  addToIndexes(\n    namedNode: NamedNode,\n    existingChildren: SortedMap<string, Node>\n  ): IndexMap {\n    const newIndexes = map(\n      this.indexes_,\n      (indexedChildren: SortedMap<NamedNode, Node>, indexName: string) => {\n        const index = safeGet(this.indexSet_, indexName);\n        assert(index, 'Missing index implementation for ' + indexName);\n        if (indexedChildren === fallbackObject) {\n          // Check to see if we need to index everything\n          if (index.isDefinedOn(namedNode.node)) {\n            // We need to build this index\n            const childList = [];\n            const iter = existingChildren.getIterator(NamedNode.Wrap);\n            let next = iter.getNext();\n            while (next) {\n              if (next.name != namedNode.name) {\n                childList.push(next);\n              }\n              next = iter.getNext();\n            }\n            childList.push(namedNode);\n            return buildChildSet(childList, index.getCompare());\n          } else {\n            // No change, this remains a fallback\n            return fallbackObject;\n          }\n        } else {\n          const existingSnap = existingChildren.get(namedNode.name);\n          let newChildren = indexedChildren;\n          if (existingSnap) {\n            newChildren = newChildren.remove(\n              new NamedNode(namedNode.name, existingSnap)\n            );\n          }\n          return newChildren.insert(namedNode, namedNode.node);\n        }\n      }\n    );\n    return new IndexMap(newIndexes, this.indexSet_);\n  }\n\n  /**\n   * Create a new IndexMap instance with the given value removed\n   * @param {!NamedNode} namedNode\n   * @param {!SortedMap.<string, !Node>} existingChildren\n   * @return {!IndexMap}\n   */\n  removeFromIndexes(\n    namedNode: NamedNode,\n    existingChildren: SortedMap<string, Node>\n  ): IndexMap {\n    const newIndexes = map(this.indexes_, function(\n      indexedChildren: SortedMap<NamedNode, Node>\n    ) {\n      if (indexedChildren === fallbackObject) {\n        // This is the fallback. Just return it, nothing to do in this case\n        return indexedChildren;\n      } else {\n        const existingSnap = existingChildren.get(namedNode.name);\n        if (existingSnap) {\n          return indexedChildren.remove(\n            new NamedNode(namedNode.name, existingSnap)\n          );\n        } else {\n          // No record of this child\n          return indexedChildren;\n        }\n      }\n    });\n    return new IndexMap(newIndexes, this.indexSet_);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { nameCompare } from '../util/util';\nimport { NamedNode } from './Node';\n\nexport function NAME_ONLY_COMPARATOR(left: NamedNode, right: NamedNode) {\n  return nameCompare(left.name, right.name);\n}\n\nexport function NAME_COMPARATOR(left: string, right: string) {\n  return nameCompare(left, right);\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { sha1, MAX_NAME, MIN_NAME } from '../util/util';\nimport { SortedMap, SortedMapIterator } from '../util/SortedMap';\nimport { Node, NamedNode } from './Node';\nimport { validatePriorityNode, priorityHashText, setMaxNode } from './snap';\nimport {\n  PRIORITY_INDEX,\n  setMaxNode as setPriorityMaxNode\n} from './indexes/PriorityIndex';\nimport { KEY_INDEX, KeyIndex } from './indexes/KeyIndex';\nimport { IndexMap } from './IndexMap';\nimport { LeafNode } from './LeafNode';\nimport { NAME_COMPARATOR } from './comparators';\nimport { Index } from './indexes/Index';\nimport { Path } from '../util/Path';\n\nexport interface ChildrenNodeConstructor {\n  new (\n    children_: SortedMap<string, Node>,\n    priorityNode_: Node | null,\n    indexMap_: IndexMap\n  ): ChildrenNode;\n  EMPTY_NODE: ChildrenNode;\n}\n\n// TODO: For memory savings, don't store priorityNode_ if it's empty.\n\nlet EMPTY_NODE: ChildrenNode;\n\n/**\n * ChildrenNode is a class for storing internal nodes in a DataSnapshot\n * (i.e. nodes with children).  It implements Node and stores the\n * list of children in the children property, sorted by child name.\n *\n * @constructor\n * @implements {Node}\n */\nexport class ChildrenNode implements Node {\n  private lazyHash_: string | null = null;\n\n  static get EMPTY_NODE(): ChildrenNode {\n    return (\n      EMPTY_NODE ||\n      (EMPTY_NODE = new ChildrenNode(\n        new SortedMap<string, Node>(NAME_COMPARATOR),\n        null,\n        IndexMap.Default\n      ))\n    );\n  }\n\n  /**\n   *\n   * @param {!SortedMap.<string, !Node>} children_ List of children\n   * of this node..\n   * @param {?Node} priorityNode_ The priority of this node (as a snapshot node).\n   * @param {!IndexMap} indexMap_\n   */\n  constructor(\n    private readonly children_: SortedMap<string, Node>,\n    private readonly priorityNode_: Node | null,\n    private indexMap_: IndexMap\n  ) {\n    /**\n     * Note: The only reason we allow null priority is for EMPTY_NODE, since we can't use\n     * EMPTY_NODE as the priority of EMPTY_NODE.  We might want to consider making EMPTY_NODE its own\n     * class instead of an empty ChildrenNode.\n     */\n    if (this.priorityNode_) {\n      validatePriorityNode(this.priorityNode_);\n    }\n\n    if (this.children_.isEmpty()) {\n      assert(\n        !this.priorityNode_ || this.priorityNode_.isEmpty(),\n        'An empty node cannot have a priority'\n      );\n    }\n  }\n\n  /** @inheritDoc */\n  isLeafNode(): boolean {\n    return false;\n  }\n\n  /** @inheritDoc */\n  getPriority(): Node {\n    return this.priorityNode_ || EMPTY_NODE;\n  }\n\n  /** @inheritDoc */\n  updatePriority(newPriorityNode: Node): Node {\n    if (this.children_.isEmpty()) {\n      // Don't allow priorities on empty nodes\n      return this;\n    } else {\n      return new ChildrenNode(this.children_, newPriorityNode, this.indexMap_);\n    }\n  }\n\n  /** @inheritDoc */\n  getImmediateChild(childName: string): Node {\n    // Hack to treat priority as a regular child\n    if (childName === '.priority') {\n      return this.getPriority();\n    } else {\n      const child = this.children_.get(childName);\n      return child === null ? EMPTY_NODE : child;\n    }\n  }\n\n  /** @inheritDoc */\n  getChild(path: Path): Node {\n    const front = path.getFront();\n    if (front === null) return this;\n\n    return this.getImmediateChild(front).getChild(path.popFront());\n  }\n\n  /** @inheritDoc */\n  hasChild(childName: string): boolean {\n    return this.children_.get(childName) !== null;\n  }\n\n  /** @inheritDoc */\n  updateImmediateChild(childName: string, newChildNode: Node): Node {\n    assert(newChildNode, 'We should always be passing snapshot nodes');\n    if (childName === '.priority') {\n      return this.updatePriority(newChildNode);\n    } else {\n      const namedNode = new NamedNode(childName, newChildNode);\n      let newChildren, newIndexMap, newPriority;\n      if (newChildNode.isEmpty()) {\n        newChildren = this.children_.remove(childName);\n        newIndexMap = this.indexMap_.removeFromIndexes(\n          namedNode,\n          this.children_\n        );\n      } else {\n        newChildren = this.children_.insert(childName, newChildNode);\n        newIndexMap = this.indexMap_.addToIndexes(namedNode, this.children_);\n      }\n\n      newPriority = newChildren.isEmpty() ? EMPTY_NODE : this.priorityNode_;\n      return new ChildrenNode(newChildren, newPriority, newIndexMap);\n    }\n  }\n\n  /** @inheritDoc */\n  updateChild(path: Path, newChildNode: Node): Node {\n    const front = path.getFront();\n    if (front === null) {\n      return newChildNode;\n    } else {\n      assert(\n        path.getFront() !== '.priority' || path.getLength() === 1,\n        '.priority must be the last token in a path'\n      );\n      const newImmediateChild = this.getImmediateChild(front).updateChild(\n        path.popFront(),\n        newChildNode\n      );\n      return this.updateImmediateChild(front, newImmediateChild);\n    }\n  }\n\n  /** @inheritDoc */\n  isEmpty(): boolean {\n    return this.children_.isEmpty();\n  }\n\n  /** @inheritDoc */\n  numChildren(): number {\n    return this.children_.count();\n  }\n\n  /**\n   * @private\n   * @type {RegExp}\n   */\n  private static INTEGER_REGEXP_ = /^(0|[1-9]\\d*)$/;\n\n  /** @inheritDoc */\n  val(exportFormat?: boolean): object {\n    if (this.isEmpty()) return null;\n\n    const obj: { [k: string]: unknown } = {};\n    let numKeys = 0,\n      maxKey = 0,\n      allIntegerKeys = true;\n    this.forEachChild(PRIORITY_INDEX, function(key: string, childNode: Node) {\n      obj[key] = childNode.val(exportFormat);\n\n      numKeys++;\n      if (allIntegerKeys && ChildrenNode.INTEGER_REGEXP_.test(key)) {\n        maxKey = Math.max(maxKey, Number(key));\n      } else {\n        allIntegerKeys = false;\n      }\n    });\n\n    if (!exportFormat && allIntegerKeys && maxKey < 2 * numKeys) {\n      // convert to array.\n      const array: unknown[] = [];\n      for (let key in obj) array[(key as any) as number] = obj[key];\n\n      return array;\n    } else {\n      if (exportFormat && !this.getPriority().isEmpty()) {\n        obj['.priority'] = this.getPriority().val();\n      }\n      return obj;\n    }\n  }\n\n  /** @inheritDoc */\n  hash(): string {\n    if (this.lazyHash_ === null) {\n      let toHash = '';\n      if (!this.getPriority().isEmpty())\n        toHash +=\n          'priority:' +\n          priorityHashText(this.getPriority().val() as string | number) +\n          ':';\n\n      this.forEachChild(PRIORITY_INDEX, function(key, childNode) {\n        const childHash = childNode.hash();\n        if (childHash !== '') toHash += ':' + key + ':' + childHash;\n      });\n\n      this.lazyHash_ = toHash === '' ? '' : sha1(toHash);\n    }\n    return this.lazyHash_;\n  }\n\n  /** @inheritDoc */\n  getPredecessorChildName(\n    childName: string,\n    childNode: Node,\n    index: Index\n  ): string {\n    const idx = this.resolveIndex_(index);\n    if (idx) {\n      const predecessor = idx.getPredecessorKey(\n        new NamedNode(childName, childNode)\n      );\n      return predecessor ? predecessor.name : null;\n    } else {\n      return this.children_.getPredecessorKey(childName);\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {?string}\n   */\n  getFirstChildName(indexDefinition: Index): string | null {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      const minKey = idx.minKey();\n      return minKey && minKey.name;\n    } else {\n      return this.children_.minKey();\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {?NamedNode}\n   */\n  getFirstChild(indexDefinition: Index): NamedNode | null {\n    const minKey = this.getFirstChildName(indexDefinition);\n    if (minKey) {\n      return new NamedNode(minKey, this.children_.get(minKey));\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Given an index, return the key name of the largest value we have, according to that index\n   * @param {!Index} indexDefinition\n   * @return {?string}\n   */\n  getLastChildName(indexDefinition: Index): string | null {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      const maxKey = idx.maxKey();\n      return maxKey && maxKey.name;\n    } else {\n      return this.children_.maxKey();\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {?NamedNode}\n   */\n  getLastChild(indexDefinition: Index): NamedNode | null {\n    const maxKey = this.getLastChildName(indexDefinition);\n    if (maxKey) {\n      return new NamedNode(maxKey, this.children_.get(maxKey));\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachChild(\n    index: Index,\n    action: (key: string, node: Node) => boolean | void\n  ): boolean {\n    const idx = this.resolveIndex_(index);\n    if (idx) {\n      return idx.inorderTraversal(function(wrappedNode) {\n        return action(wrappedNode.name, wrappedNode.node);\n      });\n    } else {\n      return this.children_.inorderTraversal(action);\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {SortedMapIterator}\n   */\n  getIterator(\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    return this.getIteratorFrom(indexDefinition.minPost(), indexDefinition);\n  }\n\n  /**\n   *\n   * @param {!NamedNode} startPost\n   * @param {!Index} indexDefinition\n   * @return {!SortedMapIterator}\n   */\n  getIteratorFrom(\n    startPost: NamedNode,\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      return idx.getIteratorFrom(startPost, key => key);\n    } else {\n      const iterator = this.children_.getIteratorFrom(\n        startPost.name,\n        NamedNode.Wrap\n      );\n      let next = iterator.peek();\n      while (next != null && indexDefinition.compare(next, startPost) < 0) {\n        iterator.getNext();\n        next = iterator.peek();\n      }\n      return iterator;\n    }\n  }\n\n  /**\n   * @param {!Index} indexDefinition\n   * @return {!SortedMapIterator}\n   */\n  getReverseIterator(\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    return this.getReverseIteratorFrom(\n      indexDefinition.maxPost(),\n      indexDefinition\n    );\n  }\n\n  /**\n   * @param {!NamedNode} endPost\n   * @param {!Index} indexDefinition\n   * @return {!SortedMapIterator}\n   */\n  getReverseIteratorFrom(\n    endPost: NamedNode,\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      return idx.getReverseIteratorFrom(endPost, function(key) {\n        return key;\n      });\n    } else {\n      const iterator = this.children_.getReverseIteratorFrom(\n        endPost.name,\n        NamedNode.Wrap\n      );\n      let next = iterator.peek();\n      while (next != null && indexDefinition.compare(next, endPost) > 0) {\n        iterator.getNext();\n        next = iterator.peek();\n      }\n      return iterator;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  compareTo(other: ChildrenNode): number {\n    if (this.isEmpty()) {\n      if (other.isEmpty()) {\n        return 0;\n      } else {\n        return -1;\n      }\n    } else if (other.isLeafNode() || other.isEmpty()) {\n      return 1;\n    } else if (other === MAX_NODE) {\n      return -1;\n    } else {\n      // Must be another node with children.\n      return 0;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  withIndex(indexDefinition: Index): Node {\n    if (\n      indexDefinition === KEY_INDEX ||\n      this.indexMap_.hasIndex(indexDefinition)\n    ) {\n      return this;\n    } else {\n      const newIndexMap = this.indexMap_.addIndex(\n        indexDefinition,\n        this.children_\n      );\n      return new ChildrenNode(this.children_, this.priorityNode_, newIndexMap);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isIndexed(index: Index): boolean {\n    return index === KEY_INDEX || this.indexMap_.hasIndex(index);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  equals(other: Node): boolean {\n    if (other === this) {\n      return true;\n    } else if (other.isLeafNode()) {\n      return false;\n    } else {\n      const otherChildrenNode = other as ChildrenNode;\n      if (!this.getPriority().equals(otherChildrenNode.getPriority())) {\n        return false;\n      } else if (\n        this.children_.count() === otherChildrenNode.children_.count()\n      ) {\n        const thisIter = this.getIterator(PRIORITY_INDEX);\n        const otherIter = otherChildrenNode.getIterator(PRIORITY_INDEX);\n        let thisCurrent = thisIter.getNext();\n        let otherCurrent = otherIter.getNext();\n        while (thisCurrent && otherCurrent) {\n          if (\n            thisCurrent.name !== otherCurrent.name ||\n            !thisCurrent.node.equals(otherCurrent.node)\n          ) {\n            return false;\n          }\n          thisCurrent = thisIter.getNext();\n          otherCurrent = otherIter.getNext();\n        }\n        return thisCurrent === null && otherCurrent === null;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  /**\n   * Returns a SortedMap ordered by index, or null if the default (by-key) ordering can be used\n   * instead.\n   *\n   * @private\n   * @param {!Index} indexDefinition\n   * @return {?SortedMap.<NamedNode, Node>}\n   */\n  private resolveIndex_(\n    indexDefinition: Index\n  ): SortedMap<NamedNode, Node> | null {\n    if (indexDefinition === KEY_INDEX) {\n      return null;\n    } else {\n      return this.indexMap_.get(indexDefinition.toString());\n    }\n  }\n}\n\n/**\n * @constructor\n * @extends {ChildrenNode}\n * @private\n */\nexport class MaxNode extends ChildrenNode {\n  constructor() {\n    super(\n      new SortedMap<string, Node>(NAME_COMPARATOR),\n      ChildrenNode.EMPTY_NODE,\n      IndexMap.Default\n    );\n  }\n\n  compareTo(other: Node): number {\n    if (other === this) {\n      return 0;\n    } else {\n      return 1;\n    }\n  }\n\n  equals(other: Node): boolean {\n    // Not that we every compare it, but MAX_NODE is only ever equal to itself\n    return other === this;\n  }\n\n  getPriority(): MaxNode {\n    return this;\n  }\n\n  getImmediateChild(childName: string): ChildrenNode {\n    return ChildrenNode.EMPTY_NODE;\n  }\n\n  isEmpty(): boolean {\n    return false;\n  }\n}\n\n/**\n * Marker that will sort higher than any other snapshot.\n * @type {!MAX_NODE}\n * @const\n */\nexport const MAX_NODE = new MaxNode();\n\n/**\n * Document NamedNode extensions\n */\ndeclare module './Node' {\n  interface NamedNode {\n    MIN: NamedNode;\n    MAX: NamedNode;\n  }\n}\n\nObject.defineProperties(NamedNode, {\n  MIN: {\n    value: new NamedNode(MIN_NAME, ChildrenNode.EMPTY_NODE)\n  },\n  MAX: {\n    value: new NamedNode(MAX_NAME, MAX_NODE)\n  }\n});\n\n/**\n * Reference Extensions\n */\nKeyIndex.__EMPTY_NODE = ChildrenNode.EMPTY_NODE;\nLeafNode.__childrenNodeConstructor = ChildrenNode;\nsetMaxNode(MAX_NODE);\nsetPriorityMaxNode(MAX_NODE);\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ChildrenNode } from './ChildrenNode';\nimport { LeafNode } from './LeafNode';\nimport { NamedNode, Node } from './Node';\nimport { forEach, contains } from '@firebase/util';\nimport { assert } from '@firebase/util';\nimport { buildChildSet } from './childSet';\nimport { NAME_COMPARATOR, NAME_ONLY_COMPARATOR } from './comparators';\nimport { IndexMap } from './IndexMap';\nimport { PRIORITY_INDEX, setNodeFromJSON } from './indexes/PriorityIndex';\nimport { SortedMap } from '../util/SortedMap';\n\nconst USE_HINZE = true;\n\n/**\n * Constructs a snapshot node representing the passed JSON and returns it.\n * @param {*} json JSON to create a node for.\n * @param {?string|?number=} priority Optional priority to use.  This will be ignored if the\n * passed JSON contains a .priority property.\n * @return {!Node}\n */\nexport function nodeFromJSON(\n  json: any | null,\n  priority: string | number | null = null\n): Node {\n  if (json === null) {\n    return ChildrenNode.EMPTY_NODE;\n  }\n\n  if (typeof json === 'object' && '.priority' in json) {\n    priority = json['.priority'];\n  }\n\n  assert(\n    priority === null ||\n      typeof priority === 'string' ||\n      typeof priority === 'number' ||\n      (typeof priority === 'object' && '.sv' in (priority as object)),\n    'Invalid priority type found: ' + typeof priority\n  );\n\n  if (typeof json === 'object' && '.value' in json && json['.value'] !== null) {\n    json = json['.value'];\n  }\n\n  // Valid leaf nodes include non-objects or server-value wrapper objects\n  if (typeof json !== 'object' || '.sv' in json) {\n    const jsonLeaf = json as string | number | boolean | object;\n    return new LeafNode(jsonLeaf, nodeFromJSON(priority));\n  }\n\n  if (!(json instanceof Array) && USE_HINZE) {\n    const children: NamedNode[] = [];\n    let childrenHavePriority = false;\n    const hinzeJsonObj: { [k: string]: any } = json as object;\n    forEach(hinzeJsonObj, (key: string, child: any) => {\n      if (typeof key !== 'string' || key.substring(0, 1) !== '.') {\n        // Ignore metadata nodes\n        const childNode = nodeFromJSON(hinzeJsonObj[key]);\n        if (!childNode.isEmpty()) {\n          childrenHavePriority =\n            childrenHavePriority || !childNode.getPriority().isEmpty();\n          children.push(new NamedNode(key, childNode));\n        }\n      }\n    });\n\n    if (children.length == 0) {\n      return ChildrenNode.EMPTY_NODE;\n    }\n\n    const childSet = buildChildSet(\n      children,\n      NAME_ONLY_COMPARATOR,\n      namedNode => namedNode.name,\n      NAME_COMPARATOR\n    ) as SortedMap<string, Node>;\n    if (childrenHavePriority) {\n      const sortedChildSet = buildChildSet(\n        children,\n        PRIORITY_INDEX.getCompare()\n      );\n      return new ChildrenNode(\n        childSet,\n        nodeFromJSON(priority),\n        new IndexMap(\n          { '.priority': sortedChildSet },\n          { '.priority': PRIORITY_INDEX }\n        )\n      );\n    } else {\n      return new ChildrenNode(\n        childSet,\n        nodeFromJSON(priority),\n        IndexMap.Default\n      );\n    }\n  } else {\n    let node: Node = ChildrenNode.EMPTY_NODE;\n    const jsonObj = json as { [key: string]: unknown };\n    forEach(jsonObj, (key: string, childData: any) => {\n      if (contains(jsonObj, key)) {\n        if (key.substring(0, 1) !== '.') {\n          // ignore metadata nodes.\n          const childNode = nodeFromJSON(childData);\n          if (childNode.isLeafNode() || !childNode.isEmpty())\n            node = node.updateImmediateChild(key, childNode);\n        }\n      }\n    });\n\n    return node.updatePriority(nodeFromJSON(priority));\n  }\n}\n\nsetNodeFromJSON(nodeFromJSON);\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Index } from './Index';\nimport { NamedNode, Node } from '../Node';\nimport { nameCompare } from '../../util/util';\nimport { nodeFromJSON } from '../nodeFromJSON';\n\n/**\n * @constructor\n * @extends {Index}\n * @private\n */\nexport class ValueIndex extends Index {\n  /**\n   * @inheritDoc\n   */\n  compare(a: NamedNode, b: NamedNode): number {\n    const indexCmp = a.node.compareTo(b.node);\n    if (indexCmp === 0) {\n      return nameCompare(a.name, b.name);\n    } else {\n      return indexCmp;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isDefinedOn(node: Node): boolean {\n    return true;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    return !oldNode.equals(newNode);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  minPost(): NamedNode {\n    return (NamedNode as any).MIN;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  maxPost(): NamedNode {\n    return (NamedNode as any).MAX;\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {string} name\n   * @return {!NamedNode}\n   */\n  makePost(indexValue: object, name: string): NamedNode {\n    const valueNode = nodeFromJSON(indexValue);\n    return new NamedNode(name, valueNode);\n  }\n\n  /**\n   * @return {!string} String representation for inclusion in a query spec\n   */\n  toString(): string {\n    return '.value';\n  }\n}\n\nexport const VALUE_INDEX = new ValueIndex();\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { nameCompare, MAX_NAME } from '../../util/util';\nimport { Index } from './Index';\nimport { ChildrenNode, MAX_NODE } from '../ChildrenNode';\nimport { NamedNode, Node } from '../Node';\nimport { nodeFromJSON } from '../nodeFromJSON';\nimport { Path } from '../../util/Path';\n\n/**\n * @param {!Path} indexPath\n * @constructor\n * @extends {Index}\n */\nexport class PathIndex extends Index {\n  constructor(private indexPath_: Path) {\n    super();\n\n    assert(\n      !indexPath_.isEmpty() && indexPath_.getFront() !== '.priority',\n      \"Can't create PathIndex with empty path or .priority key\"\n    );\n  }\n\n  /**\n   * @param {!Node} snap\n   * @return {!Node}\n   * @protected\n   */\n  protected extractChild(snap: Node): Node {\n    return snap.getChild(this.indexPath_);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isDefinedOn(node: Node): boolean {\n    return !node.getChild(this.indexPath_).isEmpty();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  compare(a: NamedNode, b: NamedNode): number {\n    const aChild = this.extractChild(a.node);\n    const bChild = this.extractChild(b.node);\n    const indexCmp = aChild.compareTo(bChild);\n    if (indexCmp === 0) {\n      return nameCompare(a.name, b.name);\n    } else {\n      return indexCmp;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  makePost(indexValue: object, name: string): NamedNode {\n    const valueNode = nodeFromJSON(indexValue);\n    const node = ChildrenNode.EMPTY_NODE.updateChild(\n      this.indexPath_,\n      valueNode\n    );\n    return new NamedNode(name, node);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  maxPost(): NamedNode {\n    const node = ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_, MAX_NODE);\n    return new NamedNode(MAX_NAME, node);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  toString(): string {\n    return this.indexPath_.slice().join('/');\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { validateArgCount, validateCallback } from '@firebase/util';\nimport { validatePathString } from '../core/util/validation';\nimport { Path } from '../core/util/Path';\nimport { PRIORITY_INDEX } from '../core/snap/indexes/PriorityIndex';\nimport { Node } from '../core/snap/Node';\nimport { Reference } from './Reference';\nimport { Index } from '../core/snap/indexes/Index';\nimport { ChildrenNode } from '../core/snap/ChildrenNode';\n\n/**\n * Class representing a firebase data snapshot.  It wraps a SnapshotNode and\n * surfaces the public methods (val, forEach, etc.) we want to expose.\n */\nexport class DataSnapshot {\n  /**\n   * @param {!Node} node_ A SnapshotNode to wrap.\n   * @param {!Reference} ref_ The ref of the location this snapshot came from.\n   * @param {!Index} index_ The iteration order for this snapshot\n   */\n  constructor(\n    private readonly node_: Node,\n    private readonly ref_: Reference,\n    private readonly index_: Index\n  ) {}\n\n  /**\n   * Retrieves the snapshot contents as JSON.  Returns null if the snapshot is\n   * empty.\n   *\n   * @return {*} JSON representation of the DataSnapshot contents, or null if empty.\n   */\n  val(): any {\n    validateArgCount('DataSnapshot.val', 0, 0, arguments.length);\n    return this.node_.val();\n  }\n\n  /**\n   * Returns the snapshot contents as JSON, including priorities of node.  Suitable for exporting\n   * the entire node contents.\n   * @return {*} JSON representation of the DataSnapshot contents, or null if empty.\n   */\n  exportVal(): any {\n    validateArgCount('DataSnapshot.exportVal', 0, 0, arguments.length);\n    return this.node_.val(true);\n  }\n\n  // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\n  // for end-users\n  toJSON(): any {\n    // Optional spacer argument is unnecessary because we're depending on recursion rather than stringifying the content\n    validateArgCount('DataSnapshot.toJSON', 0, 1, arguments.length);\n    return this.exportVal();\n  }\n\n  /**\n   * Returns whether the snapshot contains a non-null value.\n   *\n   * @return {boolean} Whether the snapshot contains a non-null value, or is empty.\n   */\n  exists(): boolean {\n    validateArgCount('DataSnapshot.exists', 0, 0, arguments.length);\n    return !this.node_.isEmpty();\n  }\n\n  /**\n   * Returns a DataSnapshot of the specified child node's contents.\n   *\n   * @param {!string} childPathString Path to a child.\n   * @return {!DataSnapshot} DataSnapshot for child node.\n   */\n  child(childPathString: string): DataSnapshot {\n    validateArgCount('DataSnapshot.child', 0, 1, arguments.length);\n    // Ensure the childPath is a string (can be a number)\n    childPathString = String(childPathString);\n    validatePathString('DataSnapshot.child', 1, childPathString, false);\n\n    const childPath = new Path(childPathString);\n    const childRef = this.ref_.child(childPath);\n    return new DataSnapshot(\n      this.node_.getChild(childPath),\n      childRef,\n      PRIORITY_INDEX\n    );\n  }\n\n  /**\n   * Returns whether the snapshot contains a child at the specified path.\n   *\n   * @param {!string} childPathString Path to a child.\n   * @return {boolean} Whether the child exists.\n   */\n  hasChild(childPathString: string): boolean {\n    validateArgCount('DataSnapshot.hasChild', 1, 1, arguments.length);\n    validatePathString('DataSnapshot.hasChild', 1, childPathString, false);\n\n    const childPath = new Path(childPathString);\n    return !this.node_.getChild(childPath).isEmpty();\n  }\n\n  /**\n   * Returns the priority of the object, or null if no priority was set.\n   *\n   * @return {string|number|null} The priority.\n   */\n  getPriority(): string | number | null {\n    validateArgCount('DataSnapshot.getPriority', 0, 0, arguments.length);\n\n    // typecast here because we never return deferred values or internal priorities (MAX_PRIORITY)\n    return this.node_.getPriority().val() as string | number | null;\n  }\n\n  /**\n   * Iterates through child nodes and calls the specified action for each one.\n   *\n   * @param {function(!DataSnapshot)} action Callback function to be called\n   * for each child.\n   * @return {boolean} True if forEach was canceled by action returning true for\n   * one of the child nodes.\n   */\n  forEach(action: (d: DataSnapshot) => boolean | void): boolean {\n    validateArgCount('DataSnapshot.forEach', 1, 1, arguments.length);\n    validateCallback('DataSnapshot.forEach', 1, action, false);\n\n    if (this.node_.isLeafNode()) return false;\n\n    const childrenNode = this.node_ as ChildrenNode;\n    // Sanitize the return value to a boolean. ChildrenNode.forEachChild has a weird return type...\n    return !!childrenNode.forEachChild(this.index_, (key, node) => {\n      return action(\n        new DataSnapshot(node, this.ref_.child(key), PRIORITY_INDEX)\n      );\n    });\n  }\n\n  /**\n   * Returns whether this DataSnapshot has children.\n   * @return {boolean} True if the DataSnapshot contains 1 or more child nodes.\n   */\n  hasChildren(): boolean {\n    validateArgCount('DataSnapshot.hasChildren', 0, 0, arguments.length);\n\n    if (this.node_.isLeafNode()) return false;\n    else return !this.node_.isEmpty();\n  }\n\n  get key() {\n    return this.ref_.getKey();\n  }\n\n  /**\n   * Returns the number of children for this DataSnapshot.\n   * @return {number} The number of children that this DataSnapshot contains.\n   */\n  numChildren(): number {\n    validateArgCount('DataSnapshot.numChildren', 0, 0, arguments.length);\n\n    return this.node_.numChildren();\n  }\n\n  /**\n   * @return {Reference} The Firebase reference for the location this snapshot's data came from.\n   */\n  getRef(): Reference {\n    validateArgCount('DataSnapshot.ref', 0, 0, arguments.length);\n\n    return this.ref_;\n  }\n\n  get ref() {\n    return this.getRef();\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringify } from '@firebase/util';\nimport { Path } from '../util/Path';\nimport { EventRegistration } from './EventRegistration';\nimport { DataSnapshot } from '../../api/DataSnapshot';\n\n/**\n * Encapsulates the data needed to raise an event\n * @interface\n */\nexport interface Event {\n  /**\n   * @return {!Path}\n   */\n  getPath(): Path;\n\n  /**\n   * @return {!string}\n   */\n  getEventType(): string;\n\n  /**\n   * @return {!function()}\n   */\n  getEventRunner(): () => void;\n\n  /**\n   * @return {!string}\n   */\n  toString(): string;\n}\n\n/**\n * Encapsulates the data needed to raise an event\n * @implements {Event}\n */\nexport class DataEvent implements Event {\n  /**\n   * @param {!string} eventType One of: value, child_added, child_changed, child_moved, child_removed\n   * @param {!EventRegistration} eventRegistration The function to call to with the event data. User provided\n   * @param {!DataSnapshot} snapshot The data backing the event\n   * @param {?string=} prevName Optional, the name of the previous child for child_* events.\n   */\n  constructor(\n    public eventType:\n      | 'value'\n      | ' child_added'\n      | ' child_changed'\n      | ' child_moved'\n      | ' child_removed',\n    public eventRegistration: EventRegistration,\n    public snapshot: DataSnapshot,\n    public prevName?: string | null\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  getPath(): Path {\n    const ref = this.snapshot.getRef();\n    if (this.eventType === 'value') {\n      return ref.path;\n    } else {\n      return ref.getParent().path;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventType(): string {\n    return this.eventType;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventRunner(): () => void {\n    return this.eventRegistration.getEventRunner(this);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  toString(): string {\n    return (\n      this.getPath().toString() +\n      ':' +\n      this.eventType +\n      ':' +\n      stringify(this.snapshot.exportVal())\n    );\n  }\n}\n\nexport class CancelEvent implements Event {\n  /**\n   * @param {EventRegistration} eventRegistration\n   * @param {Error} error\n   * @param {!Path} path\n   */\n  constructor(\n    public eventRegistration: EventRegistration,\n    public error: Error,\n    public path: Path\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  getPath(): Path {\n    return this.path;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventType(): string {\n    return 'cancel';\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventRunner(): () => void {\n    return this.eventRegistration.getEventRunner(this);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  toString(): string {\n    return this.path.toString() + ':cancel';\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DataSnapshot } from '../../api/DataSnapshot';\nimport { DataEvent, CancelEvent, Event } from './Event';\nimport { contains, getCount, getAnyKey, every } from '@firebase/util';\nimport { assert } from '@firebase/util';\nimport { Path } from '../util/Path';\nimport { Change } from './Change';\nimport { Query } from '../../api/Query';\n\n/**\n * An EventRegistration is basically an event type ('value', 'child_added', etc.) and a callback\n * to be notified of that type of event.\n *\n * That said, it can also contain a cancel callback to be notified if the event is canceled.  And\n * currently, this code is organized around the idea that you would register multiple child_ callbacks\n * together, as a single EventRegistration.  Though currently we don't do that.\n */\nexport interface EventRegistration {\n  /**\n   * True if this container has a callback to trigger for this event type\n   * @param {!string} eventType\n   * @return {boolean}\n   */\n  respondsTo(eventType: string): boolean;\n\n  /**\n   * @param {!Change} change\n   * @param {!Query} query\n   * @return {!Event}\n   */\n  createEvent(change: Change, query: Query): Event;\n\n  /**\n   * Given event data, return a function to trigger the user's callback\n   * @param {!Event} eventData\n   * @return {function()}\n   */\n  getEventRunner(eventData: Event): () => void;\n\n  /**\n   * @param {!Error} error\n   * @param {!Path} path\n   * @return {?CancelEvent}\n   */\n  createCancelEvent(error: Error, path: Path): CancelEvent | null;\n\n  /**\n   * @param {!EventRegistration} other\n   * @return {boolean}\n   */\n  matches(other: EventRegistration): boolean;\n\n  /**\n   * False basically means this is a \"dummy\" callback container being used as a sentinel\n   * to remove all callback containers of a particular type.  (e.g. if the user does\n   * ref.off('value') without specifying a specific callback).\n   *\n   * (TODO: Rework this, since it's hacky)\n   *\n   * @return {boolean}\n   */\n  hasAnyCallback(): boolean;\n}\n\n/**\n * Represents registration for 'value' events.\n */\nexport class ValueEventRegistration implements EventRegistration {\n  /**\n   * @param {?function(!DataSnapshot)} callback_\n   * @param {?function(Error)} cancelCallback_\n   * @param {?Object} context_\n   */\n  constructor(\n    private callback_: ((d: DataSnapshot) => void) | null,\n    private cancelCallback_: ((e: Error) => void) | null,\n    private context_: Object | null\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  respondsTo(eventType: string): boolean {\n    return eventType === 'value';\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createEvent(change: Change, query: Query): DataEvent {\n    const index = query.getQueryParams().getIndex();\n    return new DataEvent(\n      'value',\n      this,\n      new DataSnapshot(change.snapshotNode, query.getRef(), index)\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventRunner(eventData: CancelEvent | DataEvent): () => void {\n    const ctx = this.context_;\n    if (eventData.getEventType() === 'cancel') {\n      assert(\n        this.cancelCallback_,\n        'Raising a cancel event on a listener with no cancel callback'\n      );\n      const cancelCB = this.cancelCallback_;\n      return function() {\n        // We know that error exists, we checked above that this is a cancel event\n        cancelCB.call(ctx, (eventData as CancelEvent).error);\n      };\n    } else {\n      const cb = this.callback_;\n      return function() {\n        cb.call(ctx, (eventData as DataEvent).snapshot);\n      };\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createCancelEvent(error: Error, path: Path): CancelEvent | null {\n    if (this.cancelCallback_) {\n      return new CancelEvent(this, error, path);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  matches(other: EventRegistration): boolean {\n    if (!(other instanceof ValueEventRegistration)) {\n      return false;\n    } else if (!other.callback_ || !this.callback_) {\n      // If no callback specified, we consider it to match any callback.\n      return true;\n    } else {\n      return (\n        other.callback_ === this.callback_ && other.context_ === this.context_\n      );\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  hasAnyCallback(): boolean {\n    return this.callback_ !== null;\n  }\n}\n\n/**\n * Represents the registration of 1 or more child_xxx events.\n *\n * Currently, it is always exactly 1 child_xxx event, but the idea is we might let you\n * register a group of callbacks together in the future.\n *\n * @constructor\n * @implements {EventRegistration}\n */\nexport class ChildEventRegistration implements EventRegistration {\n  /**\n   * @param {?Object.<string, function(!DataSnapshot, ?string=)>} callbacks_\n   * @param {?function(Error)} cancelCallback_\n   * @param {Object=} context_\n   */\n  constructor(\n    private callbacks_:\n      | ({ [k: string]: (d: DataSnapshot, s?: string | null) => void })\n      | null,\n    private cancelCallback_: ((e: Error) => void) | null,\n    private context_?: Object\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  respondsTo(eventType: string): boolean {\n    let eventToCheck =\n      eventType === 'children_added' ? 'child_added' : eventType;\n    eventToCheck =\n      eventToCheck === 'children_removed' ? 'child_removed' : eventToCheck;\n    return contains(this.callbacks_, eventToCheck);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createCancelEvent(error: Error, path: Path): CancelEvent | null {\n    if (this.cancelCallback_) {\n      return new CancelEvent(this, error, path);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createEvent(change: Change, query: Query): DataEvent {\n    assert(change.childName != null, 'Child events should have a childName.');\n    const ref = query.getRef().child(/** @type {!string} */ (change.childName));\n    const index = query.getQueryParams().getIndex();\n    return new DataEvent(\n      change.type as any,\n      this,\n      new DataSnapshot(change.snapshotNode, ref, index as any),\n      change.prevName\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getEventRunner(eventData: CancelEvent | DataEvent): () => void {\n    const ctx = this.context_;\n    if (eventData.getEventType() === 'cancel') {\n      assert(\n        this.cancelCallback_,\n        'Raising a cancel event on a listener with no cancel callback'\n      );\n      const cancelCB = this.cancelCallback_;\n      return function() {\n        // We know that error exists, we checked above that this is a cancel event\n        cancelCB.call(ctx, (eventData as CancelEvent).error);\n      };\n    } else {\n      const cb = this.callbacks_[(eventData as DataEvent).eventType];\n      return function() {\n        cb.call(\n          ctx,\n          (eventData as DataEvent).snapshot,\n          (eventData as DataEvent).prevName\n        );\n      };\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  matches(other: EventRegistration): boolean {\n    if (other instanceof ChildEventRegistration) {\n      if (!this.callbacks_ || !other.callbacks_) {\n        return true;\n      } else if (this.context_ === other.context_) {\n        const otherCount = getCount(other.callbacks_);\n        const thisCount = getCount(this.callbacks_);\n        if (otherCount === thisCount) {\n          // If count is 1, do an exact match on eventType, if either is defined but null, it's a match.\n          //  If event types don't match, not a match\n          // If count is not 1, exact match across all\n\n          if (otherCount === 1) {\n            const otherKey /** @type {!string} */ = getAnyKey(other.callbacks_);\n            const thisKey /** @type {!string} */ = getAnyKey(this.callbacks_);\n            return (\n              thisKey === otherKey &&\n              (!other.callbacks_[otherKey] ||\n                !this.callbacks_[thisKey] ||\n                other.callbacks_[otherKey] === this.callbacks_[thisKey])\n            );\n          } else {\n            // Exact match on each key.\n            return every(\n              this.callbacks_,\n              (eventType, cb) => other.callbacks_[eventType] === cb\n            );\n          }\n        }\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  hasAnyCallback(): boolean {\n    return this.callbacks_ !== null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { KEY_INDEX } from '../core/snap/indexes/KeyIndex';\nimport { PRIORITY_INDEX } from '../core/snap/indexes/PriorityIndex';\nimport { VALUE_INDEX } from '../core/snap/indexes/ValueIndex';\nimport { PathIndex } from '../core/snap/indexes/PathIndex';\nimport { MIN_NAME, MAX_NAME, ObjectToUniqueKey } from '../core/util/util';\nimport { Path } from '../core/util/Path';\nimport {\n  isValidPriority,\n  validateEventType,\n  validatePathString,\n  validateFirebaseDataArg,\n  validateKey\n} from '../core/util/validation';\nimport {\n  errorPrefix,\n  validateArgCount,\n  validateCallback,\n  validateContextObject\n} from '@firebase/util';\nimport {\n  ValueEventRegistration,\n  ChildEventRegistration,\n  EventRegistration\n} from '../core/view/EventRegistration';\nimport { Deferred } from '@firebase/util';\nimport { Repo } from '../core/Repo';\nimport { QueryParams } from '../core/view/QueryParams';\nimport { Reference } from './Reference';\nimport { DataSnapshot } from './DataSnapshot';\n\nlet __referenceConstructor: new (repo: Repo, path: Path) => Query;\n\nexport interface SnapshotCallback {\n  (a: DataSnapshot, b?: string | null): any;\n}\n\n/**\n * A Query represents a filter to be applied to a firebase location.  This object purely represents the\n * query expression (and exposes our public API to build the query).  The actual query logic is in ViewBase.js.\n *\n * Since every Firebase reference is a query, Firebase inherits from this object.\n */\nexport class Query {\n  static set __referenceConstructor(val) {\n    __referenceConstructor = val;\n  }\n\n  static get __referenceConstructor() {\n    assert(__referenceConstructor, 'Reference.ts has not been loaded');\n    return __referenceConstructor;\n  }\n\n  constructor(\n    public repo: Repo,\n    public path: Path,\n    private queryParams_: QueryParams,\n    private orderByCalled_: boolean\n  ) {}\n\n  /**\n   * Validates start/end values for queries.\n   * @param {!QueryParams} params\n   * @private\n   */\n  private static validateQueryEndpoints_(params: QueryParams) {\n    let startNode = null;\n    let endNode = null;\n    if (params.hasStart()) {\n      startNode = params.getIndexStartValue();\n    }\n    if (params.hasEnd()) {\n      endNode = params.getIndexEndValue();\n    }\n\n    if (params.getIndex() === KEY_INDEX) {\n      const tooManyArgsError =\n        'Query: When ordering by key, you may only pass one argument to ' +\n        'startAt(), endAt(), or equalTo().';\n      const wrongArgTypeError =\n        'Query: When ordering by key, the argument passed to startAt(), endAt(),' +\n        'or equalTo() must be a string.';\n      if (params.hasStart()) {\n        const startName = params.getIndexStartName();\n        if (startName != MIN_NAME) {\n          throw new Error(tooManyArgsError);\n        } else if (typeof startNode !== 'string') {\n          throw new Error(wrongArgTypeError);\n        }\n      }\n      if (params.hasEnd()) {\n        const endName = params.getIndexEndName();\n        if (endName != MAX_NAME) {\n          throw new Error(tooManyArgsError);\n        } else if (typeof endNode !== 'string') {\n          throw new Error(wrongArgTypeError);\n        }\n      }\n    } else if (params.getIndex() === PRIORITY_INDEX) {\n      if (\n        (startNode != null && !isValidPriority(startNode)) ||\n        (endNode != null && !isValidPriority(endNode))\n      ) {\n        throw new Error(\n          'Query: When ordering by priority, the first argument passed to startAt(), ' +\n            'endAt(), or equalTo() must be a valid priority value (null, a number, or a string).'\n        );\n      }\n    } else {\n      assert(\n        params.getIndex() instanceof PathIndex ||\n          params.getIndex() === VALUE_INDEX,\n        'unknown index type.'\n      );\n      if (\n        (startNode != null && typeof startNode === 'object') ||\n        (endNode != null && typeof endNode === 'object')\n      ) {\n        throw new Error(\n          'Query: First argument passed to startAt(), endAt(), or equalTo() cannot be ' +\n            'an object.'\n        );\n      }\n    }\n  }\n\n  /**\n   * Validates that limit* has been called with the correct combination of parameters\n   * @param {!QueryParams} params\n   * @private\n   */\n  private static validateLimit_(params: QueryParams) {\n    if (\n      params.hasStart() &&\n      params.hasEnd() &&\n      params.hasLimit() &&\n      !params.hasAnchoredLimit()\n    ) {\n      throw new Error(\n        \"Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.\"\n      );\n    }\n  }\n\n  /**\n   * Validates that no other order by call has been made\n   * @param {!string} fnName\n   * @private\n   */\n  private validateNoPreviousOrderByCall_(fnName: string) {\n    if (this.orderByCalled_ === true) {\n      throw new Error(fnName + \": You can't combine multiple orderBy calls.\");\n    }\n  }\n\n  /**\n   * @return {!QueryParams}\n   */\n  getQueryParams(): QueryParams {\n    return this.queryParams_;\n  }\n\n  /**\n   * @return {!Reference}\n   */\n  getRef(): Reference {\n    validateArgCount('Query.ref', 0, 0, arguments.length);\n    // This is a slight hack. We cannot goog.require('fb.api.Firebase'), since Firebase requires fb.api.Query.\n    // However, we will always export 'Firebase' to the global namespace, so it's guaranteed to exist by the time this\n    // method gets called.\n    return new Query.__referenceConstructor(this.repo, this.path) as Reference;\n  }\n\n  /**\n   * @param {!string} eventType\n   * @param {!function(DataSnapshot, string=)} callback\n   * @param {(function(Error)|Object)=} cancelCallbackOrContext\n   * @param {Object=} context\n   * @return {!function(DataSnapshot, string=)}\n   */\n  on(\n    eventType: string,\n    callback: SnapshotCallback,\n    cancelCallbackOrContext?: ((a: Error) => any) | Object | null,\n    context?: Object | null\n  ): SnapshotCallback {\n    validateArgCount('Query.on', 2, 4, arguments.length);\n    validateEventType('Query.on', 1, eventType, false);\n    validateCallback('Query.on', 2, callback, false);\n\n    const ret = Query.getCancelAndContextArgs_(\n      'Query.on',\n      cancelCallbackOrContext,\n      context\n    );\n\n    if (eventType === 'value') {\n      this.onValueEvent(callback, ret.cancel, ret.context);\n    } else {\n      const callbacks: { [k: string]: typeof callback } = {};\n      callbacks[eventType] = callback;\n      this.onChildEvent(callbacks, ret.cancel, ret.context);\n    }\n    return callback;\n  }\n\n  /**\n   * @param {!function(!DataSnapshot)} callback\n   * @param {?function(Error)} cancelCallback\n   * @param {?Object} context\n   * @protected\n   */\n  protected onValueEvent(\n    callback: (a: DataSnapshot) => void,\n    cancelCallback: ((a: Error) => void) | null,\n    context: Object | null\n  ) {\n    const container = new ValueEventRegistration(\n      callback,\n      cancelCallback || null,\n      context || null\n    );\n    this.repo.addEventCallbackForQuery(this, container);\n  }\n\n  /**\n   * @param {!Object.<string, !function(!DataSnapshot, ?string)>} callbacks\n   * @param {?function(Error)} cancelCallback\n   * @param {?Object} context\n   * @protected\n   */\n  onChildEvent(\n    callbacks: { [k: string]: SnapshotCallback },\n    cancelCallback: ((a: Error) => any) | null,\n    context: Object | null\n  ) {\n    const container = new ChildEventRegistration(\n      callbacks,\n      cancelCallback,\n      context\n    );\n    this.repo.addEventCallbackForQuery(this, container);\n  }\n\n  /**\n   * @param {string=} eventType\n   * @param {(function(!DataSnapshot, ?string=))=} callback\n   * @param {Object=} context\n   */\n  off(\n    eventType?: string,\n    callback?: SnapshotCallback,\n    context?: Object | null\n  ): void {\n    validateArgCount('Query.off', 0, 3, arguments.length);\n    validateEventType('Query.off', 1, eventType, true);\n    validateCallback('Query.off', 2, callback, true);\n    validateContextObject('Query.off', 3, context, true);\n\n    let container: EventRegistration | null = null;\n    let callbacks: { [k: string]: typeof callback } | null = null;\n    if (eventType === 'value') {\n      const valueCallback = callback || null;\n      container = new ValueEventRegistration(\n        valueCallback,\n        null,\n        context || null\n      );\n    } else if (eventType) {\n      if (callback) {\n        callbacks = {};\n        callbacks[eventType] = callback;\n      }\n      container = new ChildEventRegistration(callbacks, null, context || null);\n    }\n    this.repo.removeEventCallbackForQuery(this, container);\n  }\n\n  /**\n   * Attaches a listener, waits for the first event, and then removes the listener\n   * @param {!string} eventType\n   * @param {!function(!DataSnapshot, string=)} userCallback\n   * @param failureCallbackOrContext\n   * @param context\n   * @return {!firebase.Promise}\n   */\n  once(\n    eventType: string,\n    userCallback?: SnapshotCallback,\n    failureCallbackOrContext?: ((a: Error) => void) | Object | null,\n    context?: Object | null\n  ): Promise<DataSnapshot> {\n    validateArgCount('Query.once', 1, 4, arguments.length);\n    validateEventType('Query.once', 1, eventType, false);\n    validateCallback('Query.once', 2, userCallback, true);\n\n    const ret = Query.getCancelAndContextArgs_(\n      'Query.once',\n      failureCallbackOrContext,\n      context\n    );\n\n    // TODO: Implement this more efficiently (in particular, use 'get' wire protocol for 'value' event)\n    // TODO: consider actually wiring the callbacks into the promise. We cannot do this without a breaking change\n    // because the API currently expects callbacks will be called synchronously if the data is cached, but this is\n    // against the Promise specification.\n    let firstCall = true;\n    const deferred = new Deferred<DataSnapshot>();\n\n    // A dummy error handler in case a user wasn't expecting promises\n    deferred.promise.catch(() => {});\n\n    const onceCallback = (snapshot: DataSnapshot) => {\n      // NOTE: Even though we unsubscribe, we may get called multiple times if a single action (e.g. set() with JSON)\n      // triggers multiple events (e.g. child_added or child_changed).\n      if (firstCall) {\n        firstCall = false;\n        this.off(eventType, onceCallback);\n\n        if (userCallback) {\n          userCallback.bind(ret.context)(snapshot);\n        }\n        deferred.resolve(snapshot);\n      }\n    };\n\n    this.on(\n      eventType,\n      onceCallback,\n      /*cancel=*/ err => {\n        this.off(eventType, onceCallback);\n\n        if (ret.cancel) ret.cancel.bind(ret.context)(err);\n        deferred.reject(err);\n      }\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * Set a limit and anchor it to the start of the window.\n   * @param {!number} limit\n   * @return {!Query}\n   */\n  limitToFirst(limit: number): Query {\n    validateArgCount('Query.limitToFirst', 1, 1, arguments.length);\n    if (\n      typeof limit !== 'number' ||\n      Math.floor(limit) !== limit ||\n      limit <= 0\n    ) {\n      throw new Error(\n        'Query.limitToFirst: First argument must be a positive integer.'\n      );\n    }\n    if (this.queryParams_.hasLimit()) {\n      throw new Error(\n        'Query.limitToFirst: Limit was already set (by another call to limit, ' +\n          'limitToFirst, or limitToLast).'\n      );\n    }\n\n    return new Query(\n      this.repo,\n      this.path,\n      this.queryParams_.limitToFirst(limit),\n      this.orderByCalled_\n    );\n  }\n\n  /**\n   * Set a limit and anchor it to the end of the window.\n   * @param {!number} limit\n   * @return {!Query}\n   */\n  limitToLast(limit: number): Query {\n    validateArgCount('Query.limitToLast', 1, 1, arguments.length);\n    if (\n      typeof limit !== 'number' ||\n      Math.floor(limit) !== limit ||\n      limit <= 0\n    ) {\n      throw new Error(\n        'Query.limitToLast: First argument must be a positive integer.'\n      );\n    }\n    if (this.queryParams_.hasLimit()) {\n      throw new Error(\n        'Query.limitToLast: Limit was already set (by another call to limit, ' +\n          'limitToFirst, or limitToLast).'\n      );\n    }\n\n    return new Query(\n      this.repo,\n      this.path,\n      this.queryParams_.limitToLast(limit),\n      this.orderByCalled_\n    );\n  }\n\n  /**\n   * Given a child path, return a new query ordered by the specified grandchild path.\n   * @param {!string} path\n   * @return {!Query}\n   */\n  orderByChild(path: string): Query {\n    validateArgCount('Query.orderByChild', 1, 1, arguments.length);\n    if (path === '$key') {\n      throw new Error(\n        'Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.'\n      );\n    } else if (path === '$priority') {\n      throw new Error(\n        'Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.'\n      );\n    } else if (path === '$value') {\n      throw new Error(\n        'Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.'\n      );\n    }\n    validatePathString('Query.orderByChild', 1, path, false);\n    this.validateNoPreviousOrderByCall_('Query.orderByChild');\n    const parsedPath = new Path(path);\n    if (parsedPath.isEmpty()) {\n      throw new Error(\n        'Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.'\n      );\n    }\n    const index = new PathIndex(parsedPath);\n    const newParams = this.queryParams_.orderBy(index);\n    Query.validateQueryEndpoints_(newParams);\n\n    return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\n  }\n\n  /**\n   * Return a new query ordered by the KeyIndex\n   * @return {!Query}\n   */\n  orderByKey(): Query {\n    validateArgCount('Query.orderByKey', 0, 0, arguments.length);\n    this.validateNoPreviousOrderByCall_('Query.orderByKey');\n    const newParams = this.queryParams_.orderBy(KEY_INDEX);\n    Query.validateQueryEndpoints_(newParams);\n    return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\n  }\n\n  /**\n   * Return a new query ordered by the PriorityIndex\n   * @return {!Query}\n   */\n  orderByPriority(): Query {\n    validateArgCount('Query.orderByPriority', 0, 0, arguments.length);\n    this.validateNoPreviousOrderByCall_('Query.orderByPriority');\n    const newParams = this.queryParams_.orderBy(PRIORITY_INDEX);\n    Query.validateQueryEndpoints_(newParams);\n    return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\n  }\n\n  /**\n   * Return a new query ordered by the ValueIndex\n   * @return {!Query}\n   */\n  orderByValue(): Query {\n    validateArgCount('Query.orderByValue', 0, 0, arguments.length);\n    this.validateNoPreviousOrderByCall_('Query.orderByValue');\n    const newParams = this.queryParams_.orderBy(VALUE_INDEX);\n    Query.validateQueryEndpoints_(newParams);\n    return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\n  }\n\n  /**\n   * @param {number|string|boolean|null} value\n   * @param {?string=} name\n   * @return {!Query}\n   */\n  startAt(\n    value: number | string | boolean | null = null,\n    name?: string | null\n  ): Query {\n    validateArgCount('Query.startAt', 0, 2, arguments.length);\n    validateFirebaseDataArg('Query.startAt', 1, value, this.path, true);\n    validateKey('Query.startAt', 2, name, true);\n\n    const newParams = this.queryParams_.startAt(value, name);\n    Query.validateLimit_(newParams);\n    Query.validateQueryEndpoints_(newParams);\n    if (this.queryParams_.hasStart()) {\n      throw new Error(\n        'Query.startAt: Starting point was already set (by another call to startAt ' +\n          'or equalTo).'\n      );\n    }\n\n    // Calling with no params tells us to start at the beginning.\n    if (value === undefined) {\n      value = null;\n      name = null;\n    }\n    return new Query(this.repo, this.path, newParams, this.orderByCalled_);\n  }\n\n  /**\n   * @param {number|string|boolean|null} value\n   * @param {?string=} name\n   * @return {!Query}\n   */\n  endAt(\n    value: number | string | boolean | null = null,\n    name?: string | null\n  ): Query {\n    validateArgCount('Query.endAt', 0, 2, arguments.length);\n    validateFirebaseDataArg('Query.endAt', 1, value, this.path, true);\n    validateKey('Query.endAt', 2, name, true);\n\n    const newParams = this.queryParams_.endAt(value, name);\n    Query.validateLimit_(newParams);\n    Query.validateQueryEndpoints_(newParams);\n    if (this.queryParams_.hasEnd()) {\n      throw new Error(\n        'Query.endAt: Ending point was already set (by another call to endAt or ' +\n          'equalTo).'\n      );\n    }\n\n    return new Query(this.repo, this.path, newParams, this.orderByCalled_);\n  }\n\n  /**\n   * Load the selection of children with exactly the specified value, and, optionally,\n   * the specified name.\n   * @param {number|string|boolean|null} value\n   * @param {string=} name\n   * @return {!Query}\n   */\n  equalTo(value: number | string | boolean | null, name?: string) {\n    validateArgCount('Query.equalTo', 1, 2, arguments.length);\n    validateFirebaseDataArg('Query.equalTo', 1, value, this.path, false);\n    validateKey('Query.equalTo', 2, name, true);\n    if (this.queryParams_.hasStart()) {\n      throw new Error(\n        'Query.equalTo: Starting point was already set (by another call to startAt or ' +\n          'equalTo).'\n      );\n    }\n    if (this.queryParams_.hasEnd()) {\n      throw new Error(\n        'Query.equalTo: Ending point was already set (by another call to endAt or ' +\n          'equalTo).'\n      );\n    }\n    return this.startAt(value, name).endAt(value, name);\n  }\n\n  /**\n   * @return {!string} URL for this location.\n   */\n  toString(): string {\n    validateArgCount('Query.toString', 0, 0, arguments.length);\n\n    return this.repo.toString() + this.path.toUrlEncodedString();\n  }\n\n  // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\n  // for end-users.\n  toJSON() {\n    // An optional spacer argument is unnecessary for a string.\n    validateArgCount('Query.toJSON', 0, 1, arguments.length);\n    return this.toString();\n  }\n\n  /**\n   * An object representation of the query parameters used by this Query.\n   * @return {!Object}\n   */\n  queryObject(): Object {\n    return this.queryParams_.getQueryObject();\n  }\n\n  /**\n   * @return {!string}\n   */\n  queryIdentifier(): string {\n    const obj = this.queryObject();\n    const id = ObjectToUniqueKey(obj);\n    return id === '{}' ? 'default' : id;\n  }\n\n  /**\n   * Return true if this query and the provided query are equivalent; otherwise, return false.\n   * @param {Query} other\n   * @return {boolean}\n   */\n  isEqual(other: Query): boolean {\n    validateArgCount('Query.isEqual', 1, 1, arguments.length);\n    if (!(other instanceof Query)) {\n      const error =\n        'Query.isEqual failed: First argument must be an instance of firebase.database.Query.';\n      throw new Error(error);\n    }\n\n    const sameRepo = this.repo === other.repo;\n    const samePath = this.path.equals(other.path);\n    const sameQueryIdentifier =\n      this.queryIdentifier() === other.queryIdentifier();\n\n    return sameRepo && samePath && sameQueryIdentifier;\n  }\n\n  /**\n   * Helper used by .on and .once to extract the context and or cancel arguments.\n   * @param {!string} fnName The function name (on or once)\n   * @param {(function(Error)|Object)=} cancelOrContext\n   * @param {Object=} context\n   * @return {{cancel: ?function(Error), context: ?Object}}\n   * @private\n   */\n  private static getCancelAndContextArgs_(\n    fnName: string,\n    cancelOrContext?: ((a: Error) => void) | Object | null,\n    context?: Object | null\n  ): { cancel: ((a: Error) => void) | null; context: Object | null } {\n    const ret: {\n      cancel: ((a: Error) => void) | null;\n      context: Object | null;\n    } = { cancel: null, context: null };\n    if (cancelOrContext && context) {\n      ret.cancel = cancelOrContext as (a: Error) => void;\n      validateCallback(fnName, 3, ret.cancel, true);\n\n      ret.context = context;\n      validateContextObject(fnName, 4, ret.context, true);\n    } else if (cancelOrContext) {\n      // we have either a cancel callback or a context.\n      if (typeof cancelOrContext === 'object' && cancelOrContext !== null) {\n        // it's a context!\n        ret.context = cancelOrContext;\n      } else if (typeof cancelOrContext === 'function') {\n        ret.cancel = cancelOrContext as (a: Error) => void;\n      } else {\n        throw new Error(\n          errorPrefix(fnName, 3, true) +\n            ' must either be a cancel callback or a context object.'\n        );\n      }\n    }\n    return ret;\n  }\n\n  get ref(): Reference {\n    return this.getRef();\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isEmpty, getCount, forEach, contains } from '@firebase/util';\n\n/**\n * Implements a set with a count of elements.\n *\n * @template K, V\n */\nexport class CountedSet<K extends string | number, V> {\n  set: { [k: string]: V } = {};\n\n  /**\n   * @param {!K} item\n   * @param {V} val\n   */\n  add(item: K, val: V) {\n    this.set[item as any] = val !== null ? val : (true as any);\n  }\n\n  /**\n   * @param {!K} key\n   * @return {boolean}\n   */\n  contains(key: K) {\n    return contains(this.set, key as string);\n  }\n\n  /**\n   * @param {!K} item\n   * @return {V}\n   */\n  get(item: K): V | void {\n    return this.contains(item) ? this.set[item as any] : undefined;\n  }\n\n  /**\n   * @param {!K} item\n   */\n  remove(item: K) {\n    delete this.set[item as any];\n  }\n\n  /**\n   * Deletes everything in the set\n   */\n  clear() {\n    this.set = {};\n  }\n\n  /**\n   * True if there's nothing in the set\n   * @return {boolean}\n   */\n  isEmpty(): boolean {\n    return isEmpty(this.set);\n  }\n\n  /**\n   * @return {number} The number of items in the set\n   */\n  count(): number {\n    return getCount(this.set);\n  }\n\n  /**\n   * Run a function on each k,v pair in the set\n   * @param {function(K, V)} fn\n   */\n  each(fn: (k: K | string, v: V) => void) {\n    forEach(this.set, (k: string, v: V) => fn(k, v));\n  }\n\n  /**\n   * Mostly for debugging\n   * @return {Array.<K>} The keys present in this CountedSet\n   */\n  keys(): K[] {\n    const keys: K[] = [];\n    forEach(this.set, (k: string) => {\n      keys.push(k as K);\n    });\n    return keys;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from './util/Path';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { CountedSet } from './util/CountedSet';\nimport { Node } from './snap/Node';\n\n/**\n * Helper class to store a sparse set of snapshots.\n *\n * @constructor\n */\nexport class SparseSnapshotTree {\n  /**\n   * @private\n   * @type {Node}\n   */\n  private value_: Node | null = null;\n\n  /**\n   * @private\n   * @type {CountedSet}\n   */\n  private children_: CountedSet<string, SparseSnapshotTree> | null = null;\n\n  /**\n   * Gets the node stored at the given path if one exists.\n   *\n   * @param {!Path} path Path to look up snapshot for.\n   * @return {?Node} The retrieved node, or null.\n   */\n  find(path: Path): Node | null {\n    if (this.value_ != null) {\n      return this.value_.getChild(path);\n    } else if (!path.isEmpty() && this.children_ != null) {\n      const childKey = path.getFront();\n      path = path.popFront();\n      if (this.children_.contains(childKey)) {\n        const childTree = this.children_.get(childKey) as SparseSnapshotTree;\n        return childTree.find(path);\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Stores the given node at the specified path. If there is already a node\n   * at a shallower path, it merges the new data into that snapshot node.\n   *\n   * @param {!Path} path Path to look up snapshot for.\n   * @param {!Node} data The new data, or null.\n   */\n  remember(path: Path, data: Node) {\n    if (path.isEmpty()) {\n      this.value_ = data;\n      this.children_ = null;\n    } else if (this.value_ !== null) {\n      this.value_ = this.value_.updateChild(path, data);\n    } else {\n      if (this.children_ == null) {\n        this.children_ = new CountedSet<string, SparseSnapshotTree>();\n      }\n\n      const childKey = path.getFront();\n      if (!this.children_.contains(childKey)) {\n        this.children_.add(childKey, new SparseSnapshotTree());\n      }\n\n      const child = this.children_.get(childKey) as SparseSnapshotTree;\n      path = path.popFront();\n      child.remember(path, data);\n    }\n  }\n\n  /**\n   * Purge the data at path from the cache.\n   *\n   * @param {!Path} path Path to look up snapshot for.\n   * @return {boolean} True if this node should now be removed.\n   */\n  forget(path: Path): boolean {\n    if (path.isEmpty()) {\n      this.value_ = null;\n      this.children_ = null;\n      return true;\n    } else {\n      if (this.value_ !== null) {\n        if (this.value_.isLeafNode()) {\n          // We're trying to forget a node that doesn't exist\n          return false;\n        } else {\n          const value = this.value_;\n          this.value_ = null;\n\n          const self = this;\n          value.forEachChild(PRIORITY_INDEX, function(key, tree) {\n            self.remember(new Path(key), tree);\n          });\n\n          return this.forget(path);\n        }\n      } else if (this.children_ !== null) {\n        const childKey = path.getFront();\n        path = path.popFront();\n        if (this.children_.contains(childKey)) {\n          const safeToRemove = (this.children_.get(\n            childKey\n          ) as SparseSnapshotTree).forget(path);\n          if (safeToRemove) {\n            this.children_.remove(childKey);\n          }\n        }\n\n        if (this.children_.isEmpty()) {\n          this.children_ = null;\n          return true;\n        } else {\n          return false;\n        }\n      } else {\n        return true;\n      }\n    }\n  }\n\n  /**\n   * Recursively iterates through all of the stored tree and calls the\n   * callback on each one.\n   *\n   * @param {!Path} prefixPath Path to look up node for.\n   * @param {!Function} func The function to invoke for each tree.\n   */\n  forEachTree(prefixPath: Path, func: (a: Path, b: Node) => any) {\n    if (this.value_ !== null) {\n      func(prefixPath, this.value_);\n    } else {\n      this.forEachChild((key, tree) => {\n        const path = new Path(prefixPath.toString() + '/' + key);\n        tree.forEachTree(path, func);\n      });\n    }\n  }\n\n  /**\n   * Iterates through each immediate child and triggers the callback.\n   *\n   * @param {!Function} func The function to invoke for each child.\n   */\n  forEachChild(func: (a: string, b: SparseSnapshotTree) => void) {\n    if (this.children_ !== null) {\n      this.children_.each((key, tree) => {\n        func(key, tree);\n      });\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Path } from './Path';\nimport { SparseSnapshotTree } from '../SparseSnapshotTree';\nimport { LeafNode } from '../snap/LeafNode';\nimport { nodeFromJSON } from '../snap/nodeFromJSON';\nimport { PRIORITY_INDEX } from '../snap/indexes/PriorityIndex';\nimport { Node } from '../snap/Node';\nimport { ChildrenNode } from '../snap/ChildrenNode';\n\n/**\n * Generate placeholders for deferred values.\n * @param {?Object} values\n * @return {!Object}\n */\nexport const generateWithValues = function(\n  values: {\n    [k: string]: any;\n  } | null\n): { [k: string]: any } {\n  values = values || {};\n  values['timestamp'] = values['timestamp'] || new Date().getTime();\n  return values;\n};\n\n/**\n * Value to use when firing local events. When writing server values, fire\n * local events with an approximate value, otherwise return value as-is.\n * @param {(Object|string|number|boolean)} value\n * @param {!Object} serverValues\n * @return {!(string|number|boolean)}\n */\nexport const resolveDeferredValue = function(\n  value: { [k: string]: any } | string | number | boolean,\n  serverValues: { [k: string]: any }\n): string | number | boolean {\n  if (!value || typeof value !== 'object') {\n    return value as string | number | boolean;\n  } else {\n    assert('.sv' in value, 'Unexpected leaf node or priority contents');\n    return serverValues[value['.sv']];\n  }\n};\n\n/**\n * Recursively replace all deferred values and priorities in the tree with the\n * specified generated replacement values.\n * @param {!SparseSnapshotTree} tree\n * @param {!Object} serverValues\n * @return {!SparseSnapshotTree}\n */\nexport const resolveDeferredValueTree = function(\n  tree: SparseSnapshotTree,\n  serverValues: Object\n): SparseSnapshotTree {\n  const resolvedTree = new SparseSnapshotTree();\n  tree.forEachTree(new Path(''), function(path, node) {\n    resolvedTree.remember(\n      path,\n      resolveDeferredValueSnapshot(node, serverValues)\n    );\n  });\n  return resolvedTree;\n};\n\n/**\n * Recursively replace all deferred values and priorities in the node with the\n * specified generated replacement values.  If there are no server values in the node,\n * it'll be returned as-is.\n * @param {!Node} node\n * @param {!Object} serverValues\n * @return {!Node}\n */\nexport const resolveDeferredValueSnapshot = function(\n  node: Node,\n  serverValues: Object\n): Node {\n  const rawPri = node.getPriority().val() as\n    | object\n    | boolean\n    | null\n    | number\n    | string;\n  const priority = resolveDeferredValue(rawPri, serverValues);\n  let newNode: Node;\n\n  if (node.isLeafNode()) {\n    const leafNode = node as LeafNode;\n    const value = resolveDeferredValue(leafNode.getValue(), serverValues);\n    if (\n      value !== leafNode.getValue() ||\n      priority !== leafNode.getPriority().val()\n    ) {\n      return new LeafNode(value, nodeFromJSON(priority));\n    } else {\n      return node;\n    }\n  } else {\n    const childrenNode = node as ChildrenNode;\n    newNode = childrenNode;\n    if (priority !== childrenNode.getPriority().val()) {\n      newNode = newNode.updatePriority(new LeafNode(priority));\n    }\n    childrenNode.forEachChild(PRIORITY_INDEX, function(childName, childNode) {\n      const newChildNode = resolveDeferredValueSnapshot(\n        childNode,\n        serverValues\n      );\n      if (newChildNode !== childNode) {\n        newNode = newNode.updateImmediateChild(childName, newChildNode);\n      }\n    });\n    return newNode;\n  }\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Path } from '../util/Path';\n\n/**\n *\n * @enum\n */\nexport enum OperationType {\n  OVERWRITE,\n  MERGE,\n  ACK_USER_WRITE,\n  LISTEN_COMPLETE\n}\n\n/**\n * @interface\n */\nexport interface Operation {\n  /**\n   * @type {!OperationSource}\n   */\n  source: OperationSource;\n\n  /**\n   * @type {!OperationType}\n   */\n  type: OperationType;\n\n  /**\n   * @type {!Path}\n   */\n  path: Path;\n\n  /**\n   * @param {string} childName\n   * @return {?Operation}\n   */\n  operationForChild(childName: string): Operation | null;\n}\n\n/**\n * @param {boolean} fromUser\n * @param {boolean} fromServer\n * @param {?string} queryId\n * @param {boolean} tagged\n * @constructor\n */\nexport class OperationSource {\n  constructor(\n    public fromUser: boolean,\n    public fromServer: boolean,\n    public queryId: string | null,\n    public tagged: boolean\n  ) {\n    assert(!tagged || fromServer, 'Tagged queries must be from server.');\n  }\n  /**\n   * @const\n   * @type {!OperationSource}\n   */\n  static User = new OperationSource(\n    /*fromUser=*/ true,\n    false,\n    null,\n    /*tagged=*/ false\n  );\n\n  /**\n   * @const\n   * @type {!OperationSource}\n   */\n  static Server = new OperationSource(\n    false,\n    /*fromServer=*/ true,\n    null,\n    /*tagged=*/ false\n  );\n\n  /**\n   * @param {string} queryId\n   * @return {!OperationSource}\n   */\n  static forServerTaggedQuery = function(queryId: string): OperationSource {\n    return new OperationSource(\n      false,\n      /*fromServer=*/ true,\n      queryId,\n      /*tagged=*/ true\n    );\n  };\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Path } from '../util/Path';\nimport { Operation, OperationSource, OperationType } from './Operation';\nimport { ImmutableTree } from '../util/ImmutableTree';\n\nexport class AckUserWrite implements Operation {\n  /** @inheritDoc */\n  type = OperationType.ACK_USER_WRITE;\n\n  /** @inheritDoc */\n  source = OperationSource.User;\n\n  /**\n   *\n   * @param {!Path} path\n   * @param {!ImmutableTree<!boolean>} affectedTree A tree containing true for each affected path. Affected paths can't overlap.\n   * @param {!boolean} revert\n   */\n  constructor(\n    /**@inheritDoc */ public path: Path,\n    /**@inheritDoc */ public affectedTree: ImmutableTree<boolean>,\n    /**@inheritDoc */ public revert: boolean\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  operationForChild(childName: string): AckUserWrite {\n    if (!this.path.isEmpty()) {\n      assert(\n        this.path.getFront() === childName,\n        'operationForChild called for unrelated child.'\n      );\n      return new AckUserWrite(\n        this.path.popFront(),\n        this.affectedTree,\n        this.revert\n      );\n    } else if (this.affectedTree.value != null) {\n      assert(\n        this.affectedTree.children.isEmpty(),\n        'affectedTree should not have overlapping affected paths.'\n      );\n      // All child locations are affected as well; just return same operation.\n      return this;\n    } else {\n      const childTree = this.affectedTree.subtree(new Path(childName));\n      return new AckUserWrite(Path.Empty, childTree, this.revert);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SortedMap } from './SortedMap';\nimport { Path } from './Path';\nimport { stringCompare } from './util';\nimport { forEach } from '@firebase/util';\n\nlet emptyChildrenSingleton: SortedMap<string, ImmutableTree<null>>;\n\n/**\n * Singleton empty children collection.\n *\n * @const\n * @type {!SortedMap.<string, !ImmutableTree.<?>>}\n */\nconst EmptyChildren = (): SortedMap<string, ImmutableTree<null>> => {\n  if (!emptyChildrenSingleton) {\n    emptyChildrenSingleton = new SortedMap<string, ImmutableTree<null>>(\n      stringCompare\n    );\n  }\n  return emptyChildrenSingleton;\n};\n\n/**\n * A tree with immutable elements.\n */\nexport class ImmutableTree<T> {\n  static Empty = new ImmutableTree<any>(null);\n\n  /**\n   * @template T\n   * @param {!Object.<string, !T>} obj\n   * @return {!ImmutableTree.<!T>}\n   */\n  static fromObject<T>(obj: { [k: string]: T }): ImmutableTree<T> {\n    let tree: ImmutableTree<T> = ImmutableTree.Empty;\n    forEach(obj, (childPath: string, childSnap: T) => {\n      tree = tree.set(new Path(childPath), childSnap);\n    });\n    return tree;\n  }\n\n  /**\n   * @template T\n   * @param {?T} value\n   * @param {SortedMap.<string, !ImmutableTree.<T>>=} children\n   */\n  constructor(\n    public readonly value: T | null,\n    public readonly children: SortedMap<\n      string,\n      ImmutableTree<T>\n    > = EmptyChildren()\n  ) {}\n\n  /**\n   * True if the value is empty and there are no children\n   * @return {boolean}\n   */\n  isEmpty(): boolean {\n    return this.value === null && this.children.isEmpty();\n  }\n\n  /**\n   * Given a path and predicate, return the first node and the path to that node\n   * where the predicate returns true.\n   *\n   * TODO Do a perf test -- If we're creating a bunch of {path: value:} objects\n   * on the way back out, it may be better to pass down a pathSoFar obj.\n   *\n   * @param {!Path} relativePath The remainder of the path\n   * @param {function(T):boolean} predicate The predicate to satisfy to return a\n   *   node\n   * @return {?{path:!Path, value:!T}}\n   */\n  findRootMostMatchingPathAndValue(\n    relativePath: Path,\n    predicate: (a: T) => boolean\n  ): { path: Path; value: T } | null {\n    if (this.value != null && predicate(this.value)) {\n      return { path: Path.Empty, value: this.value };\n    } else {\n      if (relativePath.isEmpty()) {\n        return null;\n      } else {\n        const front = relativePath.getFront();\n        const child = this.children.get(front);\n        if (child !== null) {\n          const childExistingPathAndValue = child.findRootMostMatchingPathAndValue(\n            relativePath.popFront(),\n            predicate\n          );\n          if (childExistingPathAndValue != null) {\n            const fullPath = new Path(front).child(\n              childExistingPathAndValue.path\n            );\n            return { path: fullPath, value: childExistingPathAndValue.value };\n          } else {\n            return null;\n          }\n        } else {\n          return null;\n        }\n      }\n    }\n  }\n\n  /**\n   * Find, if it exists, the shortest subpath of the given path that points a defined\n   * value in the tree\n   * @param {!Path} relativePath\n   * @return {?{path: !Path, value: !T}}\n   */\n  findRootMostValueAndPath(\n    relativePath: Path\n  ): { path: Path; value: T } | null {\n    return this.findRootMostMatchingPathAndValue(relativePath, () => true);\n  }\n\n  /**\n   * @param {!Path} relativePath\n   * @return {!ImmutableTree.<T>} The subtree at the given path\n   */\n  subtree(relativePath: Path): ImmutableTree<T> {\n    if (relativePath.isEmpty()) {\n      return this;\n    } else {\n      const front = relativePath.getFront();\n      const childTree = this.children.get(front);\n      if (childTree !== null) {\n        return childTree.subtree(relativePath.popFront());\n      } else {\n        return ImmutableTree.Empty;\n      }\n    }\n  }\n\n  /**\n   * Sets a value at the specified path.\n   *\n   * @param {!Path} relativePath Path to set value at.\n   * @param {?T} toSet Value to set.\n   * @return {!ImmutableTree.<T>} Resulting tree.\n   */\n  set(relativePath: Path, toSet: T | null): ImmutableTree<T> {\n    if (relativePath.isEmpty()) {\n      return new ImmutableTree(toSet, this.children);\n    } else {\n      const front = relativePath.getFront();\n      const child = this.children.get(front) || ImmutableTree.Empty;\n      const newChild = child.set(relativePath.popFront(), toSet);\n      const newChildren = this.children.insert(front, newChild);\n      return new ImmutableTree(this.value, newChildren);\n    }\n  }\n\n  /**\n   * Removes the value at the specified path.\n   *\n   * @param {!Path} relativePath Path to value to remove.\n   * @return {!ImmutableTree.<T>} Resulting tree.\n   */\n  remove(relativePath: Path): ImmutableTree<T> {\n    if (relativePath.isEmpty()) {\n      if (this.children.isEmpty()) {\n        return ImmutableTree.Empty;\n      } else {\n        return new ImmutableTree(null, this.children);\n      }\n    } else {\n      const front = relativePath.getFront();\n      const child = this.children.get(front);\n      if (child) {\n        const newChild = child.remove(relativePath.popFront());\n        let newChildren;\n        if (newChild.isEmpty()) {\n          newChildren = this.children.remove(front);\n        } else {\n          newChildren = this.children.insert(front, newChild);\n        }\n        if (this.value === null && newChildren.isEmpty()) {\n          return ImmutableTree.Empty;\n        } else {\n          return new ImmutableTree(this.value, newChildren);\n        }\n      } else {\n        return this;\n      }\n    }\n  }\n\n  /**\n   * Gets a value from the tree.\n   *\n   * @param {!Path} relativePath Path to get value for.\n   * @return {?T} Value at path, or null.\n   */\n  get(relativePath: Path): T | null {\n    if (relativePath.isEmpty()) {\n      return this.value;\n    } else {\n      const front = relativePath.getFront();\n      const child = this.children.get(front);\n      if (child) {\n        return child.get(relativePath.popFront());\n      } else {\n        return null;\n      }\n    }\n  }\n\n  /**\n   * Replace the subtree at the specified path with the given new tree.\n   *\n   * @param {!Path} relativePath Path to replace subtree for.\n   * @param {!ImmutableTree} newTree New tree.\n   * @return {!ImmutableTree} Resulting tree.\n   */\n  setTree(relativePath: Path, newTree: ImmutableTree<T>): ImmutableTree<T> {\n    if (relativePath.isEmpty()) {\n      return newTree;\n    } else {\n      const front = relativePath.getFront();\n      const child = this.children.get(front) || ImmutableTree.Empty;\n      const newChild = child.setTree(relativePath.popFront(), newTree);\n      let newChildren;\n      if (newChild.isEmpty()) {\n        newChildren = this.children.remove(front);\n      } else {\n        newChildren = this.children.insert(front, newChild);\n      }\n      return new ImmutableTree(this.value, newChildren);\n    }\n  }\n\n  /**\n   * Performs a depth first fold on this tree. Transforms a tree into a single\n   * value, given a function that operates on the path to a node, an optional\n   * current value, and a map of child names to folded subtrees\n   * @template V\n   * @param {function(Path, ?T, Object.<string, V>):V} fn\n   * @return {V}\n   */\n  fold<V>(fn: (path: Path, value: T, children: { [k: string]: V }) => V): V {\n    return this.fold_(Path.Empty, fn);\n  }\n\n  /**\n   * Recursive helper for public-facing fold() method\n   * @template V\n   * @param {!Path} pathSoFar\n   * @param {function(Path, ?T, Object.<string, V>):V} fn\n   * @return {V}\n   * @private\n   */\n  private fold_<V>(\n    pathSoFar: Path,\n    fn: (path: Path, value: T | null, children: { [k: string]: V }) => V\n  ): V {\n    const accum: { [k: string]: V } = {};\n    this.children.inorderTraversal(function(\n      childKey: string,\n      childTree: ImmutableTree<T>\n    ) {\n      accum[childKey] = childTree.fold_(pathSoFar.child(childKey), fn);\n    });\n    return fn(pathSoFar, this.value, accum);\n  }\n\n  /**\n   * Find the first matching value on the given path. Return the result of applying f to it.\n   * @template V\n   * @param {!Path} path\n   * @param {!function(!Path, !T):?V} f\n   * @return {?V}\n   */\n  findOnPath<V>(path: Path, f: (path: Path, value: T) => V | null): V | null {\n    return this.findOnPath_(path, Path.Empty, f);\n  }\n\n  private findOnPath_<V>(\n    pathToFollow: Path,\n    pathSoFar: Path,\n    f: (path: Path, value: T) => V | null\n  ): V | null {\n    const result = this.value ? f(pathSoFar, this.value) : false;\n    if (result) {\n      return result;\n    } else {\n      if (pathToFollow.isEmpty()) {\n        return null;\n      } else {\n        const front = pathToFollow.getFront()!;\n        const nextChild = this.children.get(front);\n        if (nextChild) {\n          return nextChild.findOnPath_(\n            pathToFollow.popFront(),\n            pathSoFar.child(front),\n            f\n          );\n        } else {\n          return null;\n        }\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {!Path} path\n   * @param {!function(!Path, !T)} f\n   * @returns {!ImmutableTree.<T>}\n   */\n  foreachOnPath(\n    path: Path,\n    f: (path: Path, value: T) => void\n  ): ImmutableTree<T> {\n    return this.foreachOnPath_(path, Path.Empty, f);\n  }\n\n  private foreachOnPath_(\n    pathToFollow: Path,\n    currentRelativePath: Path,\n    f: (path: Path, value: T) => void\n  ): ImmutableTree<T> {\n    if (pathToFollow.isEmpty()) {\n      return this;\n    } else {\n      if (this.value) {\n        f(currentRelativePath, this.value);\n      }\n      const front = pathToFollow.getFront();\n      const nextChild = this.children.get(front);\n      if (nextChild) {\n        return nextChild.foreachOnPath_(\n          pathToFollow.popFront(),\n          currentRelativePath.child(front),\n          f\n        );\n      } else {\n        return ImmutableTree.Empty;\n      }\n    }\n  }\n\n  /**\n   * Calls the given function for each node in the tree that has a value.\n   *\n   * @param {function(!Path, !T)} f A function to be called with\n   *   the path from the root of the tree to a node, and the value at that node.\n   *   Called in depth-first order.\n   */\n  foreach(f: (path: Path, value: T) => void) {\n    this.foreach_(Path.Empty, f);\n  }\n\n  private foreach_(\n    currentRelativePath: Path,\n    f: (path: Path, value: T) => void\n  ) {\n    this.children.inorderTraversal(function(childName, childTree) {\n      childTree.foreach_(currentRelativePath.child(childName), f);\n    });\n    if (this.value) {\n      f(currentRelativePath, this.value);\n    }\n  }\n\n  /**\n   *\n   * @param {function(string, !T)} f\n   */\n  foreachChild(f: (name: string, value: T) => void) {\n    this.children.inorderTraversal(\n      (childName: string, childTree: ImmutableTree<T>) => {\n        if (childTree.value) {\n          f(childName, childTree.value);\n        }\n      }\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../util/Path';\nimport { Operation, OperationSource, OperationType } from './Operation';\n\n/**\n * @param {!OperationSource} source\n * @param {!Path} path\n * @constructor\n * @implements {Operation}\n */\nexport class ListenComplete implements Operation {\n  /** @inheritDoc */\n  type = OperationType.LISTEN_COMPLETE;\n\n  constructor(public source: OperationSource, public path: Path) {}\n\n  operationForChild(childName: string): ListenComplete {\n    if (this.path.isEmpty()) {\n      return new ListenComplete(this.source, Path.Empty);\n    } else {\n      return new ListenComplete(this.source, this.path.popFront());\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Operation, OperationSource, OperationType } from './Operation';\nimport { Path } from '../util/Path';\nimport { Node } from '../snap/Node';\n\n/**\n * @param {!OperationSource} source\n * @param {!Path} path\n * @param {!Node} snap\n * @constructor\n * @implements {Operation}\n */\nexport class Overwrite implements Operation {\n  /** @inheritDoc */\n  type = OperationType.OVERWRITE;\n\n  constructor(\n    public source: OperationSource,\n    public path: Path,\n    public snap: Node\n  ) {}\n\n  operationForChild(childName: string): Overwrite {\n    if (this.path.isEmpty()) {\n      return new Overwrite(\n        this.source,\n        Path.Empty,\n        this.snap.getImmediateChild(childName)\n      );\n    } else {\n      return new Overwrite(this.source, this.path.popFront(), this.snap);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Operation, OperationSource, OperationType } from './Operation';\nimport { Overwrite } from './Overwrite';\nimport { Path } from '../util/Path';\nimport { assert } from '@firebase/util';\nimport { ImmutableTree } from '../util/ImmutableTree';\nimport { Node } from '../snap/Node';\n\n/**\n * @param {!OperationSource} source\n * @param {!Path} path\n * @param {!ImmutableTree.<!Node>} children\n * @constructor\n * @implements {Operation}\n */\nexport class Merge implements Operation {\n  /** @inheritDoc */\n  type = OperationType.MERGE;\n\n  constructor(\n    /**@inheritDoc */ public source: OperationSource,\n    /**@inheritDoc */ public path: Path,\n    /**@inheritDoc */ public children: ImmutableTree<Node>\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  operationForChild(childName: string): Operation {\n    if (this.path.isEmpty()) {\n      const childTree = this.children.subtree(new Path(childName));\n      if (childTree.isEmpty()) {\n        // This child is unaffected\n        return null;\n      } else if (childTree.value) {\n        // We have a snapshot for the child in question.  This becomes an overwrite of the child.\n        return new Overwrite(this.source, Path.Empty, childTree.value);\n      } else {\n        // This is a merge at a deeper level\n        return new Merge(this.source, Path.Empty, childTree);\n      }\n    } else {\n      assert(\n        this.path.getFront() === childName,\n        \"Can't get a merge for a child not on the path of the operation\"\n      );\n      return new Merge(this.source, this.path.popFront(), this.children);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  toString(): string {\n    return (\n      'Operation(' +\n      this.path +\n      ': ' +\n      this.source.toString() +\n      ' merge: ' +\n      this.children.toString() +\n      ')'\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Node } from '../snap/Node';\nimport { Path } from '../util/Path';\n\n/**\n * A cache node only stores complete children. Additionally it holds a flag whether the node can be considered fully\n * initialized in the sense that we know at one point in time this represented a valid state of the world, e.g.\n * initialized with data from the server, or a complete overwrite by the client. The filtered flag also tracks\n * whether a node potentially had children removed due to a filter.\n */\nexport class CacheNode {\n  /**\n   * @param {!Node} node_\n   * @param {boolean} fullyInitialized_\n   * @param {boolean} filtered_\n   */\n  constructor(\n    private node_: Node,\n    private fullyInitialized_: boolean,\n    private filtered_: boolean\n  ) {}\n\n  /**\n   * Returns whether this node was fully initialized with either server data or a complete overwrite by the client\n   * @return {boolean}\n   */\n  isFullyInitialized(): boolean {\n    return this.fullyInitialized_;\n  }\n\n  /**\n   * Returns whether this node is potentially missing children due to a filter applied to the node\n   * @return {boolean}\n   */\n  isFiltered(): boolean {\n    return this.filtered_;\n  }\n\n  /**\n   * @param {!Path} path\n   * @return {boolean}\n   */\n  isCompleteForPath(path: Path): boolean {\n    if (path.isEmpty()) {\n      return this.isFullyInitialized() && !this.filtered_;\n    }\n\n    const childKey = path.getFront();\n    return this.isCompleteForChild(childKey);\n  }\n\n  /**\n   * @param {!string} key\n   * @return {boolean}\n   */\n  isCompleteForChild(key: string): boolean {\n    return (\n      (this.isFullyInitialized() && !this.filtered_) || this.node_.hasChild(key)\n    );\n  }\n\n  /**\n   * @return {!Node}\n   */\n  getNode(): Node {\n    return this.node_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { CacheNode } from './CacheNode';\nimport { Node } from '../snap/Node';\n\n/**\n * Stores the data we have cached for a view.\n *\n * serverSnap is the cached server data, eventSnap is the cached event data (server data plus any local writes).\n *\n * @constructor\n */\nexport class ViewCache {\n  /**\n   *\n   * @param {!CacheNode} eventCache_\n   * @param {!CacheNode} serverCache_\n   */\n  constructor(\n    private readonly eventCache_: CacheNode,\n    private readonly serverCache_: CacheNode\n  ) {}\n\n  /**\n   * @const\n   * @type {ViewCache}\n   */\n  static Empty = new ViewCache(\n    new CacheNode(\n      ChildrenNode.EMPTY_NODE,\n      /*fullyInitialized=*/ false,\n      /*filtered=*/ false\n    ),\n    new CacheNode(\n      ChildrenNode.EMPTY_NODE,\n      /*fullyInitialized=*/ false,\n      /*filtered=*/ false\n    )\n  );\n\n  /**\n   * @param {!Node} eventSnap\n   * @param {boolean} complete\n   * @param {boolean} filtered\n   * @return {!ViewCache}\n   */\n  updateEventSnap(\n    eventSnap: Node,\n    complete: boolean,\n    filtered: boolean\n  ): ViewCache {\n    return new ViewCache(\n      new CacheNode(eventSnap, complete, filtered),\n      this.serverCache_\n    );\n  }\n\n  /**\n   * @param {!Node} serverSnap\n   * @param {boolean} complete\n   * @param {boolean} filtered\n   * @return {!ViewCache}\n   */\n  updateServerSnap(\n    serverSnap: Node,\n    complete: boolean,\n    filtered: boolean\n  ): ViewCache {\n    return new ViewCache(\n      this.eventCache_,\n      new CacheNode(serverSnap, complete, filtered)\n    );\n  }\n\n  /**\n   * @return {!CacheNode}\n   */\n  getEventCache(): CacheNode {\n    return this.eventCache_;\n  }\n\n  /**\n   * @return {?Node}\n   */\n  getCompleteEventSnap(): Node | null {\n    return this.eventCache_.isFullyInitialized()\n      ? this.eventCache_.getNode()\n      : null;\n  }\n\n  /**\n   * @return {!CacheNode}\n   */\n  getServerCache(): CacheNode {\n    return this.serverCache_;\n  }\n\n  /**\n   * @return {?Node}\n   */\n  getCompleteServerSnap(): Node | null {\n    return this.serverCache_.isFullyInitialized()\n      ? this.serverCache_.getNode()\n      : null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Node } from '../snap/Node';\n\n/**\n * @constructor\n * @struct\n * @param {!string} type The event type\n * @param {!Node} snapshotNode The data\n * @param {string=} childName The name for this child, if it's a child event\n * @param {Node=} oldSnap Used for intermediate processing of child changed events\n * @param {string=} prevName The name for the previous child, if applicable\n */\nexport class Change {\n  constructor(\n    public type: string,\n    public snapshotNode: Node,\n    public childName?: string,\n    public oldSnap?: Node,\n    public prevName?: string | null\n  ) {}\n\n  /**\n   * @param {!Node} snapshot\n   * @return {!Change}\n   */\n  static valueChange(snapshot: Node): Change {\n    return new Change(Change.VALUE, snapshot);\n  }\n\n  /**\n   * @param {string} childKey\n   * @param {!Node} snapshot\n   * @return {!Change}\n   */\n  static childAddedChange(childKey: string, snapshot: Node): Change {\n    return new Change(Change.CHILD_ADDED, snapshot, childKey);\n  }\n\n  /**\n   * @param {string} childKey\n   * @param {!Node} snapshot\n   * @return {!Change}\n   */\n  static childRemovedChange(childKey: string, snapshot: Node): Change {\n    return new Change(Change.CHILD_REMOVED, snapshot, childKey);\n  }\n\n  /**\n   * @param {string} childKey\n   * @param {!Node} newSnapshot\n   * @param {!Node} oldSnapshot\n   * @return {!Change}\n   */\n  static childChangedChange(\n    childKey: string,\n    newSnapshot: Node,\n    oldSnapshot: Node\n  ): Change {\n    return new Change(Change.CHILD_CHANGED, newSnapshot, childKey, oldSnapshot);\n  }\n\n  /**\n   * @param {string} childKey\n   * @param {!Node} snapshot\n   * @return {!Change}\n   */\n  static childMovedChange(childKey: string, snapshot: Node): Change {\n    return new Change(Change.CHILD_MOVED, snapshot, childKey);\n  }\n\n  //event types\n  /** Event type for a child added */\n  static CHILD_ADDED = 'child_added';\n\n  /** Event type for a child removed */\n  static CHILD_REMOVED = 'child_removed';\n\n  /** Event type for a child changed */\n  static CHILD_CHANGED = 'child_changed';\n\n  /** Event type for a child moved */\n  static CHILD_MOVED = 'child_moved';\n\n  /** Event type for a value change */\n  static VALUE = 'value';\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Change } from '../Change';\nimport { ChildrenNode } from '../../snap/ChildrenNode';\nimport { PRIORITY_INDEX } from '../../snap/indexes/PriorityIndex';\nimport { NodeFilter } from './NodeFilter';\nimport { Index } from '../../snap/indexes/Index';\nimport { Path } from '../../util/Path';\nimport { CompleteChildSource } from '../CompleteChildSource';\nimport { ChildChangeAccumulator } from '../ChildChangeAccumulator';\nimport { Node } from '../../snap/Node';\n\n/**\n * Doesn't really filter nodes but applies an index to the node and keeps track of any changes\n *\n * @constructor\n * @implements {NodeFilter}\n * @param {!Index} index\n */\nexport class IndexedFilter implements NodeFilter {\n  constructor(private readonly index_: Index) {}\n\n  updateChild(\n    snap: Node,\n    key: string,\n    newChild: Node,\n    affectedPath: Path,\n    source: CompleteChildSource,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    assert(\n      snap.isIndexed(this.index_),\n      'A node must be indexed if only a child is updated'\n    );\n    const oldChild = snap.getImmediateChild(key);\n    // Check if anything actually changed.\n    if (\n      oldChild.getChild(affectedPath).equals(newChild.getChild(affectedPath))\n    ) {\n      // There's an edge case where a child can enter or leave the view because affectedPath was set to null.\n      // In this case, affectedPath will appear null in both the old and new snapshots.  So we need\n      // to avoid treating these cases as \"nothing changed.\"\n      if (oldChild.isEmpty() == newChild.isEmpty()) {\n        // Nothing changed.\n\n        // This assert should be valid, but it's expensive (can dominate perf testing) so don't actually do it.\n        //assert(oldChild.equals(newChild), 'Old and new snapshots should be equal.');\n        return snap;\n      }\n    }\n\n    if (optChangeAccumulator != null) {\n      if (newChild.isEmpty()) {\n        if (snap.hasChild(key)) {\n          optChangeAccumulator.trackChildChange(\n            Change.childRemovedChange(key, oldChild)\n          );\n        } else {\n          assert(\n            snap.isLeafNode(),\n            'A child remove without an old child only makes sense on a leaf node'\n          );\n        }\n      } else if (oldChild.isEmpty()) {\n        optChangeAccumulator.trackChildChange(\n          Change.childAddedChange(key, newChild)\n        );\n      } else {\n        optChangeAccumulator.trackChildChange(\n          Change.childChangedChange(key, newChild, oldChild)\n        );\n      }\n    }\n    if (snap.isLeafNode() && newChild.isEmpty()) {\n      return snap;\n    } else {\n      // Make sure the node is indexed\n      return snap.updateImmediateChild(key, newChild).withIndex(this.index_);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateFullNode(\n    oldSnap: Node,\n    newSnap: Node,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (optChangeAccumulator != null) {\n      if (!oldSnap.isLeafNode()) {\n        oldSnap.forEachChild(PRIORITY_INDEX, function(key, childNode) {\n          if (!newSnap.hasChild(key)) {\n            optChangeAccumulator.trackChildChange(\n              Change.childRemovedChange(key, childNode)\n            );\n          }\n        });\n      }\n      if (!newSnap.isLeafNode()) {\n        newSnap.forEachChild(PRIORITY_INDEX, function(key, childNode) {\n          if (oldSnap.hasChild(key)) {\n            const oldChild = oldSnap.getImmediateChild(key);\n            if (!oldChild.equals(childNode)) {\n              optChangeAccumulator.trackChildChange(\n                Change.childChangedChange(key, childNode, oldChild)\n              );\n            }\n          } else {\n            optChangeAccumulator.trackChildChange(\n              Change.childAddedChange(key, childNode)\n            );\n          }\n        });\n      }\n    }\n    return newSnap.withIndex(this.index_);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updatePriority(oldSnap: Node, newPriority: Node): Node {\n    if (oldSnap.isEmpty()) {\n      return ChildrenNode.EMPTY_NODE;\n    } else {\n      return oldSnap.updatePriority(newPriority);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  filtersNodes(): boolean {\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndexedFilter(): IndexedFilter {\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndex(): Index {\n    return this.index_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getValues, safeGet } from '@firebase/util';\nimport { Change } from './Change';\nimport { assert, assertionError } from '@firebase/util';\n\n/**\n * @constructor\n */\nexport class ChildChangeAccumulator {\n  private changeMap_: { [k: string]: Change } = {};\n\n  /**\n   * @param {!Change} change\n   */\n  trackChildChange(change: Change) {\n    const type = change.type;\n    const childKey /** @type {!string} */ = change.childName;\n    assert(\n      type == Change.CHILD_ADDED ||\n        type == Change.CHILD_CHANGED ||\n        type == Change.CHILD_REMOVED,\n      'Only child changes supported for tracking'\n    );\n    assert(\n      childKey !== '.priority',\n      'Only non-priority child changes can be tracked.'\n    );\n    const oldChange = safeGet(this.changeMap_, childKey) as Change;\n    if (oldChange) {\n      const oldType = oldChange.type;\n      if (type == Change.CHILD_ADDED && oldType == Change.CHILD_REMOVED) {\n        this.changeMap_[childKey] = Change.childChangedChange(\n          childKey,\n          change.snapshotNode,\n          oldChange.snapshotNode\n        );\n      } else if (\n        type == Change.CHILD_REMOVED &&\n        oldType == Change.CHILD_ADDED\n      ) {\n        delete this.changeMap_[childKey];\n      } else if (\n        type == Change.CHILD_REMOVED &&\n        oldType == Change.CHILD_CHANGED\n      ) {\n        this.changeMap_[childKey] = Change.childRemovedChange(\n          childKey,\n          oldChange.oldSnap\n        );\n      } else if (\n        type == Change.CHILD_CHANGED &&\n        oldType == Change.CHILD_ADDED\n      ) {\n        this.changeMap_[childKey] = Change.childAddedChange(\n          childKey,\n          change.snapshotNode\n        );\n      } else if (\n        type == Change.CHILD_CHANGED &&\n        oldType == Change.CHILD_CHANGED\n      ) {\n        this.changeMap_[childKey] = Change.childChangedChange(\n          childKey,\n          change.snapshotNode,\n          oldChange.oldSnap\n        );\n      } else {\n        throw assertionError(\n          'Illegal combination of changes: ' +\n            change +\n            ' occurred after ' +\n            oldChange\n        );\n      }\n    } else {\n      this.changeMap_[childKey] = change;\n    }\n  }\n\n  /**\n   * @return {!Array.<!Change>}\n   */\n  getChanges(): Change[] {\n    return getValues(this.changeMap_);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CacheNode } from './CacheNode';\nimport { NamedNode, Node } from '../snap/Node';\nimport { Index } from '../snap/indexes/Index';\nimport { WriteTreeRef } from '../WriteTree';\nimport { ViewCache } from './ViewCache';\n\n/**\n * Since updates to filtered nodes might require nodes to be pulled in from \"outside\" the node, this interface\n * can help to get complete children that can be pulled in.\n * A class implementing this interface takes potentially multiple sources (e.g. user writes, server data from\n * other views etc.) to try it's best to get a complete child that might be useful in pulling into the view.\n *\n * @interface\n */\nexport interface CompleteChildSource {\n  /**\n   * @param {!string} childKey\n   * @return {?Node}\n   */\n  getCompleteChild(childKey: string): Node | null;\n\n  /**\n   * @param {!Index} index\n   * @param {!NamedNode} child\n   * @param {boolean} reverse\n   * @return {?NamedNode}\n   */\n  getChildAfterChild(\n    index: Index,\n    child: NamedNode,\n    reverse: boolean\n  ): NamedNode | null;\n}\n\n/**\n * An implementation of CompleteChildSource that never returns any additional children\n *\n * @private\n * @constructor\n * @implements CompleteChildSource\n */\nexport class NoCompleteChildSource_ implements CompleteChildSource {\n  /**\n   * @inheritDoc\n   */\n  getCompleteChild(childKey?: string): Node | null {\n    return null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getChildAfterChild(\n    index?: Index,\n    child?: NamedNode,\n    reverse?: boolean\n  ): NamedNode | null {\n    return null;\n  }\n}\n\n/**\n * Singleton instance.\n * @const\n * @type {!CompleteChildSource}\n */\nexport const NO_COMPLETE_CHILD_SOURCE = new NoCompleteChildSource_();\n\n/**\n * An implementation of CompleteChildSource that uses a WriteTree in addition to any other server data or\n * old event caches available to calculate complete children.\n *\n *\n * @implements CompleteChildSource\n */\nexport class WriteTreeCompleteChildSource implements CompleteChildSource {\n  /**\n   * @param {!WriteTreeRef} writes_\n   * @param {!ViewCache} viewCache_\n   * @param {?Node} optCompleteServerCache_\n   */\n  constructor(\n    private writes_: WriteTreeRef,\n    private viewCache_: ViewCache,\n    private optCompleteServerCache_: Node | null = null\n  ) {}\n\n  /**\n   * @inheritDoc\n   */\n  getCompleteChild(childKey: string): Node | null {\n    const node = this.viewCache_.getEventCache();\n    if (node.isCompleteForChild(childKey)) {\n      return node.getNode().getImmediateChild(childKey);\n    } else {\n      const serverNode =\n        this.optCompleteServerCache_ != null\n          ? new CacheNode(this.optCompleteServerCache_, true, false)\n          : this.viewCache_.getServerCache();\n      return this.writes_.calcCompleteChild(childKey, serverNode);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getChildAfterChild(\n    index: Index,\n    child: NamedNode,\n    reverse: boolean\n  ): NamedNode | null {\n    const completeServerData =\n      this.optCompleteServerCache_ != null\n        ? this.optCompleteServerCache_\n        : this.viewCache_.getCompleteServerSnap();\n    const nodes = this.writes_.calcIndexedSlice(\n      completeServerData,\n      child,\n      1,\n      reverse,\n      index\n    );\n    if (nodes.length === 0) {\n      return null;\n    } else {\n      return nodes[0];\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Operation, OperationType } from '../operation/Operation';\nimport { assert, assertionError } from '@firebase/util';\nimport { ChildChangeAccumulator } from './ChildChangeAccumulator';\nimport { Change } from './Change';\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { KEY_INDEX } from '../snap/indexes/KeyIndex';\nimport { ImmutableTree } from '../util/ImmutableTree';\nimport { Path } from '../util/Path';\nimport {\n  WriteTreeCompleteChildSource,\n  NO_COMPLETE_CHILD_SOURCE,\n  CompleteChildSource\n} from './CompleteChildSource';\nimport { ViewCache } from './ViewCache';\nimport { NodeFilter } from './filter/NodeFilter';\nimport { WriteTreeRef } from '../WriteTree';\nimport { Overwrite } from '../operation/Overwrite';\nimport { Merge } from '../operation/Merge';\nimport { AckUserWrite } from '../operation/AckUserWrite';\nimport { Node } from '../snap/Node';\n\n/**\n * @constructor\n * @struct\n */\nexport class ProcessorResult {\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Array.<!Change>} changes\n   */\n  constructor(\n    public readonly viewCache: ViewCache,\n    public readonly changes: Change[]\n  ) {}\n}\n\n/**\n * @constructor\n */\nexport class ViewProcessor {\n  /**\n   * @param {!NodeFilter} filter_\n   */\n  constructor(private readonly filter_: NodeFilter) {}\n\n  /**\n   * @param {!ViewCache} viewCache\n   */\n  assertIndexed(viewCache: ViewCache) {\n    assert(\n      viewCache\n        .getEventCache()\n        .getNode()\n        .isIndexed(this.filter_.getIndex()),\n      'Event snap not indexed'\n    );\n    assert(\n      viewCache\n        .getServerCache()\n        .getNode()\n        .isIndexed(this.filter_.getIndex()),\n      'Server snap not indexed'\n    );\n  }\n\n  /**\n   * @param {!ViewCache} oldViewCache\n   * @param {!Operation} operation\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeCache\n   * @return {!ProcessorResult}\n   */\n  applyOperation(\n    oldViewCache: ViewCache,\n    operation: Operation,\n    writesCache: WriteTreeRef,\n    completeCache: Node | null\n  ): ProcessorResult {\n    const accumulator = new ChildChangeAccumulator();\n    let newViewCache, filterServerNode;\n    if (operation.type === OperationType.OVERWRITE) {\n      const overwrite = operation as Overwrite;\n      if (overwrite.source.fromUser) {\n        newViewCache = this.applyUserOverwrite_(\n          oldViewCache,\n          overwrite.path,\n          overwrite.snap,\n          writesCache,\n          completeCache,\n          accumulator\n        );\n      } else {\n        assert(overwrite.source.fromServer, 'Unknown source.');\n        // We filter the node if it's a tagged update or the node has been previously filtered  and the\n        // update is not at the root in which case it is ok (and necessary) to mark the node unfiltered\n        // again\n        filterServerNode =\n          overwrite.source.tagged ||\n          (oldViewCache.getServerCache().isFiltered() &&\n            !overwrite.path.isEmpty());\n        newViewCache = this.applyServerOverwrite_(\n          oldViewCache,\n          overwrite.path,\n          overwrite.snap,\n          writesCache,\n          completeCache,\n          filterServerNode,\n          accumulator\n        );\n      }\n    } else if (operation.type === OperationType.MERGE) {\n      const merge = operation as Merge;\n      if (merge.source.fromUser) {\n        newViewCache = this.applyUserMerge_(\n          oldViewCache,\n          merge.path,\n          merge.children,\n          writesCache,\n          completeCache,\n          accumulator\n        );\n      } else {\n        assert(merge.source.fromServer, 'Unknown source.');\n        // We filter the node if it's a tagged update or the node has been previously filtered\n        filterServerNode =\n          merge.source.tagged || oldViewCache.getServerCache().isFiltered();\n        newViewCache = this.applyServerMerge_(\n          oldViewCache,\n          merge.path,\n          merge.children,\n          writesCache,\n          completeCache,\n          filterServerNode,\n          accumulator\n        );\n      }\n    } else if (operation.type === OperationType.ACK_USER_WRITE) {\n      const ackUserWrite = operation as AckUserWrite;\n      if (!ackUserWrite.revert) {\n        newViewCache = this.ackUserWrite_(\n          oldViewCache,\n          ackUserWrite.path,\n          ackUserWrite.affectedTree,\n          writesCache,\n          completeCache,\n          accumulator\n        );\n      } else {\n        newViewCache = this.revertUserWrite_(\n          oldViewCache,\n          ackUserWrite.path,\n          writesCache,\n          completeCache,\n          accumulator\n        );\n      }\n    } else if (operation.type === OperationType.LISTEN_COMPLETE) {\n      newViewCache = this.listenComplete_(\n        oldViewCache,\n        operation.path,\n        writesCache,\n        accumulator\n      );\n    } else {\n      throw assertionError('Unknown operation type: ' + operation.type);\n    }\n    const changes = accumulator.getChanges();\n    ViewProcessor.maybeAddValueEvent_(oldViewCache, newViewCache, changes);\n    return new ProcessorResult(newViewCache, changes);\n  }\n\n  /**\n   * @param {!ViewCache} oldViewCache\n   * @param {!ViewCache} newViewCache\n   * @param {!Array.<!Change>} accumulator\n   * @private\n   */\n  private static maybeAddValueEvent_(\n    oldViewCache: ViewCache,\n    newViewCache: ViewCache,\n    accumulator: Change[]\n  ) {\n    const eventSnap = newViewCache.getEventCache();\n    if (eventSnap.isFullyInitialized()) {\n      const isLeafOrEmpty =\n        eventSnap.getNode().isLeafNode() || eventSnap.getNode().isEmpty();\n      const oldCompleteSnap = oldViewCache.getCompleteEventSnap();\n      if (\n        accumulator.length > 0 ||\n        !oldViewCache.getEventCache().isFullyInitialized() ||\n        (isLeafOrEmpty &&\n          !eventSnap\n            .getNode()\n            .equals(/** @type {!Node} */ (oldCompleteSnap))) ||\n        !eventSnap\n          .getNode()\n          .getPriority()\n          .equals(oldCompleteSnap.getPriority())\n      ) {\n        accumulator.push(\n          Change.valueChange(\n            /** @type {!Node} */ newViewCache.getCompleteEventSnap()\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} changePath\n   * @param {!WriteTreeRef} writesCache\n   * @param {!CompleteChildSource} source\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private generateEventCacheAfterServerEvent_(\n    viewCache: ViewCache,\n    changePath: Path,\n    writesCache: WriteTreeRef,\n    source: CompleteChildSource,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    const oldEventSnap = viewCache.getEventCache();\n    if (writesCache.shadowingWrite(changePath) != null) {\n      // we have a shadowing write, ignore changes\n      return viewCache;\n    } else {\n      let newEventCache, serverNode;\n      if (changePath.isEmpty()) {\n        // TODO: figure out how this plays with \"sliding ack windows\"\n        assert(\n          viewCache.getServerCache().isFullyInitialized(),\n          'If change path is empty, we must have complete server data'\n        );\n        if (viewCache.getServerCache().isFiltered()) {\n          // We need to special case this, because we need to only apply writes to complete children, or\n          // we might end up raising events for incomplete children. If the server data is filtered deep\n          // writes cannot be guaranteed to be complete\n          const serverCache = viewCache.getCompleteServerSnap();\n          const completeChildren =\n            serverCache instanceof ChildrenNode\n              ? serverCache\n              : ChildrenNode.EMPTY_NODE;\n          const completeEventChildren = writesCache.calcCompleteEventChildren(\n            completeChildren\n          );\n          newEventCache = this.filter_.updateFullNode(\n            viewCache.getEventCache().getNode(),\n            completeEventChildren,\n            accumulator\n          );\n        } else {\n          const completeNode = writesCache.calcCompleteEventCache(\n            viewCache.getCompleteServerSnap()\n          );\n          newEventCache = this.filter_.updateFullNode(\n            viewCache.getEventCache().getNode(),\n            completeNode,\n            accumulator\n          );\n        }\n      } else {\n        const childKey = changePath.getFront();\n        if (childKey == '.priority') {\n          assert(\n            changePath.getLength() == 1,\n            \"Can't have a priority with additional path components\"\n          );\n          const oldEventNode = oldEventSnap.getNode();\n          serverNode = viewCache.getServerCache().getNode();\n          // we might have overwrites for this priority\n          const updatedPriority = writesCache.calcEventCacheAfterServerOverwrite(\n            changePath,\n            oldEventNode,\n            serverNode\n          );\n          if (updatedPriority != null) {\n            newEventCache = this.filter_.updatePriority(\n              oldEventNode,\n              updatedPriority\n            );\n          } else {\n            // priority didn't change, keep old node\n            newEventCache = oldEventSnap.getNode();\n          }\n        } else {\n          const childChangePath = changePath.popFront();\n          // update child\n          let newEventChild;\n          if (oldEventSnap.isCompleteForChild(childKey)) {\n            serverNode = viewCache.getServerCache().getNode();\n            const eventChildUpdate = writesCache.calcEventCacheAfterServerOverwrite(\n              changePath,\n              oldEventSnap.getNode(),\n              serverNode\n            );\n            if (eventChildUpdate != null) {\n              newEventChild = oldEventSnap\n                .getNode()\n                .getImmediateChild(childKey)\n                .updateChild(childChangePath, eventChildUpdate);\n            } else {\n              // Nothing changed, just keep the old child\n              newEventChild = oldEventSnap\n                .getNode()\n                .getImmediateChild(childKey);\n            }\n          } else {\n            newEventChild = writesCache.calcCompleteChild(\n              childKey,\n              viewCache.getServerCache()\n            );\n          }\n          if (newEventChild != null) {\n            newEventCache = this.filter_.updateChild(\n              oldEventSnap.getNode(),\n              childKey,\n              newEventChild,\n              childChangePath,\n              source,\n              accumulator\n            );\n          } else {\n            // no complete child available or no change\n            newEventCache = oldEventSnap.getNode();\n          }\n        }\n      }\n      return viewCache.updateEventSnap(\n        newEventCache,\n        oldEventSnap.isFullyInitialized() || changePath.isEmpty(),\n        this.filter_.filtersNodes()\n      );\n    }\n  }\n\n  /**\n   * @param {!ViewCache} oldViewCache\n   * @param {!Path} changePath\n   * @param {!Node} changedSnap\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeCache\n   * @param {boolean} filterServerNode\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  applyServerOverwrite_(\n    oldViewCache: ViewCache,\n    changePath: Path,\n    changedSnap: Node,\n    writesCache: WriteTreeRef,\n    completeCache: Node | null,\n    filterServerNode: boolean,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    const oldServerSnap = oldViewCache.getServerCache();\n    let newServerCache;\n    const serverFilter = filterServerNode\n      ? this.filter_\n      : this.filter_.getIndexedFilter();\n    if (changePath.isEmpty()) {\n      newServerCache = serverFilter.updateFullNode(\n        oldServerSnap.getNode(),\n        changedSnap,\n        null\n      );\n    } else if (serverFilter.filtersNodes() && !oldServerSnap.isFiltered()) {\n      // we want to filter the server node, but we didn't filter the server node yet, so simulate a full update\n      const newServerNode = oldServerSnap\n        .getNode()\n        .updateChild(changePath, changedSnap);\n      newServerCache = serverFilter.updateFullNode(\n        oldServerSnap.getNode(),\n        newServerNode,\n        null\n      );\n    } else {\n      const childKey = changePath.getFront();\n      if (\n        !oldServerSnap.isCompleteForPath(changePath) &&\n        changePath.getLength() > 1\n      ) {\n        // We don't update incomplete nodes with updates intended for other listeners\n        return oldViewCache;\n      }\n      const childChangePath = changePath.popFront();\n      const childNode = oldServerSnap.getNode().getImmediateChild(childKey);\n      const newChildNode = childNode.updateChild(childChangePath, changedSnap);\n      if (childKey == '.priority') {\n        newServerCache = serverFilter.updatePriority(\n          oldServerSnap.getNode(),\n          newChildNode\n        );\n      } else {\n        newServerCache = serverFilter.updateChild(\n          oldServerSnap.getNode(),\n          childKey,\n          newChildNode,\n          childChangePath,\n          NO_COMPLETE_CHILD_SOURCE,\n          null\n        );\n      }\n    }\n    const newViewCache = oldViewCache.updateServerSnap(\n      newServerCache,\n      oldServerSnap.isFullyInitialized() || changePath.isEmpty(),\n      serverFilter.filtersNodes()\n    );\n    const source = new WriteTreeCompleteChildSource(\n      writesCache,\n      newViewCache,\n      completeCache\n    );\n    return this.generateEventCacheAfterServerEvent_(\n      newViewCache,\n      changePath,\n      writesCache,\n      source,\n      accumulator\n    );\n  }\n\n  /**\n   * @param {!ViewCache} oldViewCache\n   * @param {!Path} changePath\n   * @param {!Node} changedSnap\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  applyUserOverwrite_(\n    oldViewCache: ViewCache,\n    changePath: Path,\n    changedSnap: Node,\n    writesCache: WriteTreeRef,\n    completeCache: Node | null,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    const oldEventSnap = oldViewCache.getEventCache();\n    let newViewCache, newEventCache;\n    const source = new WriteTreeCompleteChildSource(\n      writesCache,\n      oldViewCache,\n      completeCache\n    );\n    if (changePath.isEmpty()) {\n      newEventCache = this.filter_.updateFullNode(\n        oldViewCache.getEventCache().getNode(),\n        changedSnap,\n        accumulator\n      );\n      newViewCache = oldViewCache.updateEventSnap(\n        newEventCache,\n        true,\n        this.filter_.filtersNodes()\n      );\n    } else {\n      const childKey = changePath.getFront();\n      if (childKey === '.priority') {\n        newEventCache = this.filter_.updatePriority(\n          oldViewCache.getEventCache().getNode(),\n          changedSnap\n        );\n        newViewCache = oldViewCache.updateEventSnap(\n          newEventCache,\n          oldEventSnap.isFullyInitialized(),\n          oldEventSnap.isFiltered()\n        );\n      } else {\n        const childChangePath = changePath.popFront();\n        const oldChild = oldEventSnap.getNode().getImmediateChild(childKey);\n        let newChild;\n        if (childChangePath.isEmpty()) {\n          // Child overwrite, we can replace the child\n          newChild = changedSnap;\n        } else {\n          const childNode = source.getCompleteChild(childKey);\n          if (childNode != null) {\n            if (\n              childChangePath.getBack() === '.priority' &&\n              childNode.getChild(childChangePath.parent()).isEmpty()\n            ) {\n              // This is a priority update on an empty node. If this node exists on the server, the\n              // server will send down the priority in the update, so ignore for now\n              newChild = childNode;\n            } else {\n              newChild = childNode.updateChild(childChangePath, changedSnap);\n            }\n          } else {\n            // There is no complete child node available\n            newChild = ChildrenNode.EMPTY_NODE;\n          }\n        }\n        if (!oldChild.equals(newChild)) {\n          const newEventSnap = this.filter_.updateChild(\n            oldEventSnap.getNode(),\n            childKey,\n            newChild,\n            childChangePath,\n            source,\n            accumulator\n          );\n          newViewCache = oldViewCache.updateEventSnap(\n            newEventSnap,\n            oldEventSnap.isFullyInitialized(),\n            this.filter_.filtersNodes()\n          );\n        } else {\n          newViewCache = oldViewCache;\n        }\n      }\n    }\n    return newViewCache;\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {string} childKey\n   * @return {boolean}\n   * @private\n   */\n  private static cacheHasChild_(\n    viewCache: ViewCache,\n    childKey: string\n  ): boolean {\n    return viewCache.getEventCache().isCompleteForChild(childKey);\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} path\n   * @param {ImmutableTree.<!Node>} changedChildren\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} serverCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private applyUserMerge_(\n    viewCache: ViewCache,\n    path: Path,\n    changedChildren: ImmutableTree<Node>,\n    writesCache: WriteTreeRef,\n    serverCache: Node | null,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    // HACK: In the case of a limit query, there may be some changes that bump things out of the\n    // window leaving room for new items.  It's important we process these changes first, so we\n    // iterate the changes twice, first processing any that affect items currently in view.\n    // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\n    // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\n    // not the other.\n    let curViewCache = viewCache;\n    changedChildren.foreach((relativePath, childNode) => {\n      const writePath = path.child(relativePath);\n      if (ViewProcessor.cacheHasChild_(viewCache, writePath.getFront())) {\n        curViewCache = this.applyUserOverwrite_(\n          curViewCache,\n          writePath,\n          childNode,\n          writesCache,\n          serverCache,\n          accumulator\n        );\n      }\n    });\n\n    changedChildren.foreach((relativePath, childNode) => {\n      const writePath = path.child(relativePath);\n      if (!ViewProcessor.cacheHasChild_(viewCache, writePath.getFront())) {\n        curViewCache = this.applyUserOverwrite_(\n          curViewCache,\n          writePath,\n          childNode,\n          writesCache,\n          serverCache,\n          accumulator\n        );\n      }\n    });\n\n    return curViewCache;\n  }\n\n  /**\n   * @param {!Node} node\n   * @param {ImmutableTree.<!Node>} merge\n   * @return {!Node}\n   * @private\n   */\n  private applyMerge_(node: Node, merge: ImmutableTree<Node>): Node {\n    merge.foreach(function(relativePath, childNode) {\n      node = node.updateChild(relativePath, childNode);\n    });\n    return node;\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} path\n   * @param {!ImmutableTree.<!Node>} changedChildren\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} serverCache\n   * @param {boolean} filterServerNode\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private applyServerMerge_(\n    viewCache: ViewCache,\n    path: Path,\n    changedChildren: ImmutableTree<Node>,\n    writesCache: WriteTreeRef,\n    serverCache: Node | null,\n    filterServerNode: boolean,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    // If we don't have a cache yet, this merge was intended for a previously listen in the same location. Ignore it and\n    // wait for the complete data update coming soon.\n    if (\n      viewCache\n        .getServerCache()\n        .getNode()\n        .isEmpty() &&\n      !viewCache.getServerCache().isFullyInitialized()\n    ) {\n      return viewCache;\n    }\n\n    // HACK: In the case of a limit query, there may be some changes that bump things out of the\n    // window leaving room for new items.  It's important we process these changes first, so we\n    // iterate the changes twice, first processing any that affect items currently in view.\n    // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\n    // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\n    // not the other.\n    let curViewCache = viewCache;\n    let viewMergeTree;\n    if (path.isEmpty()) {\n      viewMergeTree = changedChildren;\n    } else {\n      viewMergeTree = ImmutableTree.Empty.setTree(path, changedChildren);\n    }\n    const serverNode = viewCache.getServerCache().getNode();\n    viewMergeTree.children.inorderTraversal((childKey, childTree) => {\n      if (serverNode.hasChild(childKey)) {\n        const serverChild = viewCache\n          .getServerCache()\n          .getNode()\n          .getImmediateChild(childKey);\n        const newChild = this.applyMerge_(serverChild, childTree);\n        curViewCache = this.applyServerOverwrite_(\n          curViewCache,\n          new Path(childKey),\n          newChild,\n          writesCache,\n          serverCache,\n          filterServerNode,\n          accumulator\n        );\n      }\n    });\n    viewMergeTree.children.inorderTraversal((childKey, childMergeTree) => {\n      const isUnknownDeepMerge =\n        !viewCache.getServerCache().isCompleteForChild(childKey) &&\n        childMergeTree.value == null;\n      if (!serverNode.hasChild(childKey) && !isUnknownDeepMerge) {\n        const serverChild = viewCache\n          .getServerCache()\n          .getNode()\n          .getImmediateChild(childKey);\n        const newChild = this.applyMerge_(serverChild, childMergeTree);\n        curViewCache = this.applyServerOverwrite_(\n          curViewCache,\n          new Path(childKey),\n          newChild,\n          writesCache,\n          serverCache,\n          filterServerNode,\n          accumulator\n        );\n      }\n    });\n\n    return curViewCache;\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} ackPath\n   * @param {!ImmutableTree<!boolean>} affectedTree\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private ackUserWrite_(\n    viewCache: ViewCache,\n    ackPath: Path,\n    affectedTree: ImmutableTree<boolean>,\n    writesCache: WriteTreeRef,\n    completeCache: Node | null,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    if (writesCache.shadowingWrite(ackPath) != null) {\n      return viewCache;\n    }\n\n    // Only filter server node if it is currently filtered\n    const filterServerNode = viewCache.getServerCache().isFiltered();\n\n    // Essentially we'll just get our existing server cache for the affected paths and re-apply it as a server update\n    // now that it won't be shadowed.\n    const serverCache = viewCache.getServerCache();\n    if (affectedTree.value != null) {\n      // This is an overwrite.\n      if (\n        (ackPath.isEmpty() && serverCache.isFullyInitialized()) ||\n        serverCache.isCompleteForPath(ackPath)\n      ) {\n        return this.applyServerOverwrite_(\n          viewCache,\n          ackPath,\n          serverCache.getNode().getChild(ackPath),\n          writesCache,\n          completeCache,\n          filterServerNode,\n          accumulator\n        );\n      } else if (ackPath.isEmpty()) {\n        // This is a goofy edge case where we are acking data at this location but don't have full data.  We\n        // should just re-apply whatever we have in our cache as a merge.\n        let changedChildren = ImmutableTree.Empty;\n        serverCache.getNode().forEachChild(KEY_INDEX, function(name, node) {\n          changedChildren = changedChildren.set(new Path(name), node);\n        });\n        return this.applyServerMerge_(\n          viewCache,\n          ackPath,\n          changedChildren,\n          writesCache,\n          completeCache,\n          filterServerNode,\n          accumulator\n        );\n      } else {\n        return viewCache;\n      }\n    } else {\n      // This is a merge.\n      let changedChildren = ImmutableTree.Empty;\n      affectedTree.foreach(function(mergePath, value) {\n        const serverCachePath = ackPath.child(mergePath);\n        if (serverCache.isCompleteForPath(serverCachePath)) {\n          changedChildren = changedChildren.set(\n            mergePath,\n            serverCache.getNode().getChild(serverCachePath)\n          );\n        }\n      });\n      return this.applyServerMerge_(\n        viewCache,\n        ackPath,\n        changedChildren,\n        writesCache,\n        completeCache,\n        filterServerNode,\n        accumulator\n      );\n    }\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} path\n   * @param {!WriteTreeRef} writesCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private listenComplete_(\n    viewCache: ViewCache,\n    path: Path,\n    writesCache: WriteTreeRef,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    const oldServerNode = viewCache.getServerCache();\n    const newViewCache = viewCache.updateServerSnap(\n      oldServerNode.getNode(),\n      oldServerNode.isFullyInitialized() || path.isEmpty(),\n      oldServerNode.isFiltered()\n    );\n    return this.generateEventCacheAfterServerEvent_(\n      newViewCache,\n      path,\n      writesCache,\n      NO_COMPLETE_CHILD_SOURCE,\n      accumulator\n    );\n  }\n\n  /**\n   * @param {!ViewCache} viewCache\n   * @param {!Path} path\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeServerCache\n   * @param {!ChildChangeAccumulator} accumulator\n   * @return {!ViewCache}\n   * @private\n   */\n  private revertUserWrite_(\n    viewCache: ViewCache,\n    path: Path,\n    writesCache: WriteTreeRef,\n    completeServerCache: Node | null,\n    accumulator: ChildChangeAccumulator\n  ): ViewCache {\n    let complete;\n    if (writesCache.shadowingWrite(path) != null) {\n      return viewCache;\n    } else {\n      const source = new WriteTreeCompleteChildSource(\n        writesCache,\n        viewCache,\n        completeServerCache\n      );\n      const oldEventCache = viewCache.getEventCache().getNode();\n      let newEventCache;\n      if (path.isEmpty() || path.getFront() === '.priority') {\n        let newNode;\n        if (viewCache.getServerCache().isFullyInitialized()) {\n          newNode = writesCache.calcCompleteEventCache(\n            viewCache.getCompleteServerSnap()\n          );\n        } else {\n          const serverChildren = viewCache.getServerCache().getNode();\n          assert(\n            serverChildren instanceof ChildrenNode,\n            'serverChildren would be complete if leaf node'\n          );\n          newNode = writesCache.calcCompleteEventChildren(\n            serverChildren as ChildrenNode\n          );\n        }\n        newNode = newNode as Node;\n        newEventCache = this.filter_.updateFullNode(\n          oldEventCache,\n          newNode,\n          accumulator\n        );\n      } else {\n        const childKey = path.getFront();\n        let newChild = writesCache.calcCompleteChild(\n          childKey,\n          viewCache.getServerCache()\n        );\n        if (\n          newChild == null &&\n          viewCache.getServerCache().isCompleteForChild(childKey)\n        ) {\n          newChild = oldEventCache.getImmediateChild(childKey);\n        }\n        if (newChild != null) {\n          newEventCache = this.filter_.updateChild(\n            oldEventCache,\n            childKey,\n            newChild,\n            path.popFront(),\n            source,\n            accumulator\n          );\n        } else if (\n          viewCache\n            .getEventCache()\n            .getNode()\n            .hasChild(childKey)\n        ) {\n          // No complete child available, delete the existing one, if any\n          newEventCache = this.filter_.updateChild(\n            oldEventCache,\n            childKey,\n            ChildrenNode.EMPTY_NODE,\n            path.popFront(),\n            source,\n            accumulator\n          );\n        } else {\n          newEventCache = oldEventCache;\n        }\n        if (\n          newEventCache.isEmpty() &&\n          viewCache.getServerCache().isFullyInitialized()\n        ) {\n          // We might have reverted all child writes. Maybe the old event was a leaf node\n          complete = writesCache.calcCompleteEventCache(\n            viewCache.getCompleteServerSnap()\n          );\n          if (complete.isLeafNode()) {\n            newEventCache = this.filter_.updateFullNode(\n              newEventCache,\n              complete,\n              accumulator\n            );\n          }\n        }\n      }\n      complete =\n        viewCache.getServerCache().isFullyInitialized() ||\n        writesCache.shadowingWrite(Path.Empty) != null;\n      return viewCache.updateEventSnap(\n        newEventCache,\n        complete,\n        this.filter_.filtersNodes()\n      );\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { NamedNode, Node } from '../snap/Node';\nimport { Change } from './Change';\nimport { assertionError } from '@firebase/util';\nimport { Query } from '../../api/Query';\nimport { Index } from '../snap/indexes/Index';\nimport { EventRegistration } from './EventRegistration';\nimport { Event } from './Event';\n\n/**\n * An EventGenerator is used to convert \"raw\" changes (Change) as computed by the\n * CacheDiffer into actual events (Event) that can be raised.  See generateEventsForChanges()\n * for details.\n *\n * @constructor\n */\nexport class EventGenerator {\n  private index_: Index;\n\n  /**\n   *\n   * @param {!Query} query_\n   */\n  constructor(private query_: Query) {\n    /**\n     * @private\n     * @type {!Index}\n     */\n    this.index_ = this.query_.getQueryParams().getIndex();\n  }\n\n  /**\n   * Given a set of raw changes (no moved events and prevName not specified yet), and a set of\n   * EventRegistrations that should be notified of these changes, generate the actual events to be raised.\n   *\n   * Notes:\n   *  - child_moved events will be synthesized at this time for any child_changed events that affect\n   *    our index.\n   *  - prevName will be calculated based on the index ordering.\n   *\n   * @param {!Array.<!Change>} changes\n   * @param {!Node} eventCache\n   * @param {!Array.<!EventRegistration>} eventRegistrations\n   * @return {!Array.<!Event>}\n   */\n  generateEventsForChanges(\n    changes: Change[],\n    eventCache: Node,\n    eventRegistrations: EventRegistration[]\n  ): Event[] {\n    const events: Event[] = [];\n    const moves: Change[] = [];\n\n    changes.forEach(change => {\n      if (\n        change.type === Change.CHILD_CHANGED &&\n        this.index_.indexedValueChanged(\n          change.oldSnap as Node,\n          change.snapshotNode\n        )\n      ) {\n        moves.push(\n          Change.childMovedChange(\n            change.childName as string,\n            change.snapshotNode\n          )\n        );\n      }\n    });\n\n    this.generateEventsForType_(\n      events,\n      Change.CHILD_REMOVED,\n      changes,\n      eventRegistrations,\n      eventCache\n    );\n    this.generateEventsForType_(\n      events,\n      Change.CHILD_ADDED,\n      changes,\n      eventRegistrations,\n      eventCache\n    );\n    this.generateEventsForType_(\n      events,\n      Change.CHILD_MOVED,\n      moves,\n      eventRegistrations,\n      eventCache\n    );\n    this.generateEventsForType_(\n      events,\n      Change.CHILD_CHANGED,\n      changes,\n      eventRegistrations,\n      eventCache\n    );\n    this.generateEventsForType_(\n      events,\n      Change.VALUE,\n      changes,\n      eventRegistrations,\n      eventCache\n    );\n\n    return events;\n  }\n\n  /**\n   * Given changes of a single change type, generate the corresponding events.\n   *\n   * @param {!Array.<!Event>} events\n   * @param {!string} eventType\n   * @param {!Array.<!Change>} changes\n   * @param {!Array.<!EventRegistration>} registrations\n   * @param {!Node} eventCache\n   * @private\n   */\n  private generateEventsForType_(\n    events: Event[],\n    eventType: string,\n    changes: Change[],\n    registrations: EventRegistration[],\n    eventCache: Node\n  ) {\n    const filteredChanges = changes.filter(change => change.type === eventType);\n\n    filteredChanges.sort(this.compareChanges_.bind(this));\n    filteredChanges.forEach(change => {\n      const materializedChange = this.materializeSingleChange_(\n        change,\n        eventCache\n      );\n      registrations.forEach(registration => {\n        if (registration.respondsTo(change.type)) {\n          events.push(\n            registration.createEvent(materializedChange, this.query_)\n          );\n        }\n      });\n    });\n  }\n\n  /**\n   * @param {!Change} change\n   * @param {!Node} eventCache\n   * @return {!Change}\n   * @private\n   */\n  private materializeSingleChange_(change: Change, eventCache: Node): Change {\n    if (change.type === 'value' || change.type === 'child_removed') {\n      return change;\n    } else {\n      change.prevName = eventCache.getPredecessorChildName(\n        /** @type {!string} */\n        change.childName,\n        change.snapshotNode,\n        this.index_\n      );\n      return change;\n    }\n  }\n\n  /**\n   * @param {!Change} a\n   * @param {!Change} b\n   * @return {number}\n   * @private\n   */\n  private compareChanges_(a: Change, b: Change) {\n    if (a.childName == null || b.childName == null) {\n      throw assertionError('Should only compare child_ events.');\n    }\n    const aWrapped = new NamedNode(a.childName, a.snapshotNode);\n    const bWrapped = new NamedNode(b.childName, b.snapshotNode);\n    return this.index_.compare(aWrapped, bWrapped);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IndexedFilter } from './filter/IndexedFilter';\nimport { ViewProcessor } from './ViewProcessor';\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { CacheNode } from './CacheNode';\nimport { ViewCache } from './ViewCache';\nimport { EventGenerator } from './EventGenerator';\nimport { assert } from '@firebase/util';\nimport { Operation, OperationType } from '../operation/Operation';\nimport { Change } from './Change';\nimport { PRIORITY_INDEX } from '../snap/indexes/PriorityIndex';\nimport { Query } from '../../api/Query';\nimport { EventRegistration } from './EventRegistration';\nimport { Node } from '../snap/Node';\nimport { Path } from '../util/Path';\nimport { WriteTreeRef } from '../WriteTree';\nimport { CancelEvent, Event } from './Event';\n\n/**\n * A view represents a specific location and query that has 1 or more event registrations.\n *\n * It does several things:\n *  - Maintains the list of event registrations for this location/query.\n *  - Maintains a cache of the data visible for this location/query.\n *  - Applies new operations (via applyOperation), updates the cache, and based on the event\n *    registrations returns the set of events to be raised.\n * @constructor\n */\nexport class View {\n  private processor_: ViewProcessor;\n  private viewCache_: ViewCache;\n  private eventRegistrations_: EventRegistration[] = [];\n  private eventGenerator_: EventGenerator;\n\n  /**\n   *\n   * @param {!Query} query_\n   * @param {!ViewCache} initialViewCache\n   */\n  constructor(private query_: Query, initialViewCache: ViewCache) {\n    const params = this.query_.getQueryParams();\n\n    const indexFilter = new IndexedFilter(params.getIndex());\n    const filter = params.getNodeFilter();\n\n    /**\n     * @type {ViewProcessor}\n     * @private\n     */\n    this.processor_ = new ViewProcessor(filter);\n\n    const initialServerCache = initialViewCache.getServerCache();\n    const initialEventCache = initialViewCache.getEventCache();\n\n    // Don't filter server node with other filter than index, wait for tagged listen\n    const serverSnap = indexFilter.updateFullNode(\n      ChildrenNode.EMPTY_NODE,\n      initialServerCache.getNode(),\n      null\n    );\n    const eventSnap = filter.updateFullNode(\n      ChildrenNode.EMPTY_NODE,\n      initialEventCache.getNode(),\n      null\n    );\n    const newServerCache = new CacheNode(\n      serverSnap,\n      initialServerCache.isFullyInitialized(),\n      indexFilter.filtersNodes()\n    );\n    const newEventCache = new CacheNode(\n      eventSnap,\n      initialEventCache.isFullyInitialized(),\n      filter.filtersNodes()\n    );\n\n    /**\n     * @type {!ViewCache}\n     * @private\n     */\n    this.viewCache_ = new ViewCache(newEventCache, newServerCache);\n\n    /**\n     * @type {!EventGenerator}\n     * @private\n     */\n    this.eventGenerator_ = new EventGenerator(this.query_);\n  }\n\n  /**\n   * @return {!Query}\n   */\n  getQuery(): Query {\n    return this.query_;\n  }\n\n  /**\n   * @return {?Node}\n   */\n  getServerCache(): Node | null {\n    return this.viewCache_.getServerCache().getNode();\n  }\n\n  /**\n   * @param {!Path} path\n   * @return {?Node}\n   */\n  getCompleteServerCache(path: Path): Node | null {\n    const cache = this.viewCache_.getCompleteServerSnap();\n    if (cache) {\n      // If this isn't a \"loadsAllData\" view, then cache isn't actually a complete cache and\n      // we need to see if it contains the child we're interested in.\n      if (\n        this.query_.getQueryParams().loadsAllData() ||\n        (!path.isEmpty() && !cache.getImmediateChild(path.getFront()).isEmpty())\n      ) {\n        return cache.getChild(path);\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isEmpty(): boolean {\n    return this.eventRegistrations_.length === 0;\n  }\n\n  /**\n   * @param {!EventRegistration} eventRegistration\n   */\n  addEventRegistration(eventRegistration: EventRegistration) {\n    this.eventRegistrations_.push(eventRegistration);\n  }\n\n  /**\n   * @param {?EventRegistration} eventRegistration If null, remove all callbacks.\n   * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.\n   * @return {!Array.<!Event>} Cancel events, if cancelError was provided.\n   */\n  removeEventRegistration(\n    eventRegistration: EventRegistration | null,\n    cancelError?: Error\n  ): Event[] {\n    const cancelEvents: CancelEvent[] = [];\n    if (cancelError) {\n      assert(\n        eventRegistration == null,\n        'A cancel should cancel all event registrations.'\n      );\n      const path = this.query_.path;\n      this.eventRegistrations_.forEach(function(registration) {\n        cancelError /** @type {!Error} */ = cancelError;\n        const maybeEvent = registration.createCancelEvent(cancelError, path);\n        if (maybeEvent) {\n          cancelEvents.push(maybeEvent);\n        }\n      });\n    }\n\n    if (eventRegistration) {\n      let remaining = [];\n      for (let i = 0; i < this.eventRegistrations_.length; ++i) {\n        const existing = this.eventRegistrations_[i];\n        if (!existing.matches(eventRegistration)) {\n          remaining.push(existing);\n        } else if (eventRegistration.hasAnyCallback()) {\n          // We're removing just this one\n          remaining = remaining.concat(this.eventRegistrations_.slice(i + 1));\n          break;\n        }\n      }\n      this.eventRegistrations_ = remaining;\n    } else {\n      this.eventRegistrations_ = [];\n    }\n    return cancelEvents;\n  }\n\n  /**\n   * Applies the given Operation, updates our cache, and returns the appropriate events.\n   *\n   * @param {!Operation} operation\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} completeServerCache\n   * @return {!Array.<!Event>}\n   */\n  applyOperation(\n    operation: Operation,\n    writesCache: WriteTreeRef,\n    completeServerCache: Node | null\n  ): Event[] {\n    if (\n      operation.type === OperationType.MERGE &&\n      operation.source.queryId !== null\n    ) {\n      assert(\n        this.viewCache_.getCompleteServerSnap(),\n        'We should always have a full cache before handling merges'\n      );\n      assert(\n        this.viewCache_.getCompleteEventSnap(),\n        'Missing event cache, even though we have a server cache'\n      );\n    }\n\n    const oldViewCache = this.viewCache_;\n    const result = this.processor_.applyOperation(\n      oldViewCache,\n      operation,\n      writesCache,\n      completeServerCache\n    );\n    this.processor_.assertIndexed(result.viewCache);\n\n    assert(\n      result.viewCache.getServerCache().isFullyInitialized() ||\n        !oldViewCache.getServerCache().isFullyInitialized(),\n      'Once a server snap is complete, it should never go back'\n    );\n\n    this.viewCache_ = result.viewCache;\n\n    return this.generateEventsForChanges_(\n      result.changes,\n      result.viewCache.getEventCache().getNode(),\n      null\n    );\n  }\n\n  /**\n   * @param {!EventRegistration} registration\n   * @return {!Array.<!Event>}\n   */\n  getInitialEvents(registration: EventRegistration): Event[] {\n    const eventSnap = this.viewCache_.getEventCache();\n    const initialChanges: Change[] = [];\n    if (!eventSnap.getNode().isLeafNode()) {\n      const eventNode = eventSnap.getNode() as ChildrenNode;\n      eventNode.forEachChild(PRIORITY_INDEX, function(key, childNode) {\n        initialChanges.push(Change.childAddedChange(key, childNode));\n      });\n    }\n    if (eventSnap.isFullyInitialized()) {\n      initialChanges.push(Change.valueChange(eventSnap.getNode()));\n    }\n    return this.generateEventsForChanges_(\n      initialChanges,\n      eventSnap.getNode(),\n      registration\n    );\n  }\n\n  /**\n   * @private\n   * @param {!Array.<!Change>} changes\n   * @param {!Node} eventCache\n   * @param {EventRegistration=} eventRegistration\n   * @return {!Array.<!Event>}\n   */\n  generateEventsForChanges_(\n    changes: Change[],\n    eventCache: Node,\n    eventRegistration?: EventRegistration\n  ): Event[] {\n    const registrations = eventRegistration\n      ? [eventRegistration]\n      : this.eventRegistrations_;\n    return this.eventGenerator_.generateEventsForChanges(\n      changes,\n      eventCache,\n      registrations\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CacheNode } from './view/CacheNode';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { assert } from '@firebase/util';\nimport { isEmpty, forEach, findValue, safeGet } from '@firebase/util';\nimport { ViewCache } from './view/ViewCache';\nimport { View } from './view/View';\nimport { Operation } from './operation/Operation';\nimport { WriteTreeRef } from './WriteTree';\nimport { Query } from '../api/Query';\nimport { EventRegistration } from './view/EventRegistration';\nimport { Node } from './snap/Node';\nimport { Path } from './util/Path';\nimport { Event } from './view/Event';\nimport { Reference, ReferenceConstructor } from '../api/Reference';\n\nlet __referenceConstructor: ReferenceConstructor;\n\n/**\n * SyncPoint represents a single location in a SyncTree with 1 or more event registrations, meaning we need to\n * maintain 1 or more Views at this location to cache server data and raise appropriate events for server changes\n * and user writes (set, transaction, update).\n *\n * It's responsible for:\n *  - Maintaining the set of 1 or more views necessary at this location (a SyncPoint with 0 views should be removed).\n *  - Proxying user / server operations to the views as appropriate (i.e. applyServerOverwrite,\n *    applyUserOverwrite, etc.)\n */\nexport class SyncPoint {\n  static set __referenceConstructor(val: ReferenceConstructor) {\n    assert(\n      !__referenceConstructor,\n      '__referenceConstructor has already been defined'\n    );\n    __referenceConstructor = val;\n  }\n\n  static get __referenceConstructor() {\n    assert(__referenceConstructor, 'Reference.ts has not been loaded');\n    return __referenceConstructor;\n  }\n\n  /**\n   * The Views being tracked at this location in the tree, stored as a map where the key is a\n   * queryId and the value is the View for that query.\n   *\n   * NOTE: This list will be quite small (usually 1, but perhaps 2 or 3; any more is an odd use case).\n   *\n   * @type {!Object.<!string, !View>}\n   * @private\n   */\n  private views_: { [k: string]: View } = {};\n\n  /**\n   * @return {boolean}\n   */\n  isEmpty(): boolean {\n    return isEmpty(this.views_);\n  }\n\n  /**\n   *\n   * @param {!Operation} operation\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} optCompleteServerCache\n   * @return {!Array.<!Event>}\n   */\n  applyOperation(\n    operation: Operation,\n    writesCache: WriteTreeRef,\n    optCompleteServerCache: Node | null\n  ): Event[] {\n    const queryId = operation.source.queryId;\n    if (queryId !== null) {\n      const view = safeGet(this.views_, queryId);\n      assert(view != null, 'SyncTree gave us an op for an invalid query.');\n      return view.applyOperation(\n        operation,\n        writesCache,\n        optCompleteServerCache\n      );\n    } else {\n      let events: Event[] = [];\n\n      forEach(this.views_, function(key: string, view: View) {\n        events = events.concat(\n          view.applyOperation(operation, writesCache, optCompleteServerCache)\n        );\n      });\n\n      return events;\n    }\n  }\n\n  /**\n   * Add an event callback for the specified query.\n   *\n   * @param {!Query} query\n   * @param {!EventRegistration} eventRegistration\n   * @param {!WriteTreeRef} writesCache\n   * @param {?Node} serverCache Complete server cache, if we have it.\n   * @param {boolean} serverCacheComplete\n   * @return {!Array.<!Event>} Events to raise.\n   */\n  addEventRegistration(\n    query: Query,\n    eventRegistration: EventRegistration,\n    writesCache: WriteTreeRef,\n    serverCache: Node | null,\n    serverCacheComplete: boolean\n  ): Event[] {\n    const queryId = query.queryIdentifier();\n    let view = safeGet(this.views_, queryId);\n    if (!view) {\n      // TODO: make writesCache take flag for complete server node\n      let eventCache = writesCache.calcCompleteEventCache(\n        serverCacheComplete ? serverCache : null\n      );\n      let eventCacheComplete = false;\n      if (eventCache) {\n        eventCacheComplete = true;\n      } else if (serverCache instanceof ChildrenNode) {\n        eventCache = writesCache.calcCompleteEventChildren(serverCache);\n        eventCacheComplete = false;\n      } else {\n        eventCache = ChildrenNode.EMPTY_NODE;\n        eventCacheComplete = false;\n      }\n      const viewCache = new ViewCache(\n        new CacheNode(\n          /** @type {!Node} */ (eventCache),\n          eventCacheComplete,\n          false\n        ),\n        new CacheNode(\n          /** @type {!Node} */ (serverCache),\n          serverCacheComplete,\n          false\n        )\n      );\n      view = new View(query, viewCache);\n      this.views_[queryId] = view;\n    }\n\n    // This is guaranteed to exist now, we just created anything that was missing\n    view.addEventRegistration(eventRegistration);\n    return view.getInitialEvents(eventRegistration);\n  }\n\n  /**\n   * Remove event callback(s).  Return cancelEvents if a cancelError is specified.\n   *\n   * If query is the default query, we'll check all views for the specified eventRegistration.\n   * If eventRegistration is null, we'll remove all callbacks for the specified view(s).\n   *\n   * @param {!Query} query\n   * @param {?EventRegistration} eventRegistration If null, remove all callbacks.\n   * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.\n   * @return {{removed:!Array.<!Query>, events:!Array.<!Event>}} removed queries and any cancel events\n   */\n  removeEventRegistration(\n    query: Query,\n    eventRegistration: EventRegistration | null,\n    cancelError?: Error\n  ): { removed: Query[]; events: Event[] } {\n    const queryId = query.queryIdentifier();\n    const removed: Query[] = [];\n    let cancelEvents: Event[] = [];\n    const hadCompleteView = this.hasCompleteView();\n    if (queryId === 'default') {\n      // When you do ref.off(...), we search all views for the registration to remove.\n      const self = this;\n      forEach(this.views_, function(viewQueryId: string, view: View) {\n        cancelEvents = cancelEvents.concat(\n          view.removeEventRegistration(eventRegistration, cancelError)\n        );\n        if (view.isEmpty()) {\n          delete self.views_[viewQueryId];\n\n          // We'll deal with complete views later.\n          if (\n            !view\n              .getQuery()\n              .getQueryParams()\n              .loadsAllData()\n          ) {\n            removed.push(view.getQuery());\n          }\n        }\n      });\n    } else {\n      // remove the callback from the specific view.\n      const view = safeGet(this.views_, queryId);\n      if (view) {\n        cancelEvents = cancelEvents.concat(\n          view.removeEventRegistration(eventRegistration, cancelError)\n        );\n        if (view.isEmpty()) {\n          delete this.views_[queryId];\n\n          // We'll deal with complete views later.\n          if (\n            !view\n              .getQuery()\n              .getQueryParams()\n              .loadsAllData()\n          ) {\n            removed.push(view.getQuery());\n          }\n        }\n      }\n    }\n\n    if (hadCompleteView && !this.hasCompleteView()) {\n      // We removed our last complete view.\n      removed.push(\n        new SyncPoint.__referenceConstructor(query.repo, query.path)\n      );\n    }\n\n    return { removed: removed, events: cancelEvents };\n  }\n\n  /**\n   * @return {!Array.<!View>}\n   */\n  getQueryViews(): View[] {\n    const values = Object.keys(this.views_).map(key => this.views_[key]);\n    return values.filter(function(view) {\n      return !view\n        .getQuery()\n        .getQueryParams()\n        .loadsAllData();\n    });\n  }\n\n  /**\n   *\n   * @param {!Path} path The path to the desired complete snapshot\n   * @return {?Node} A complete cache, if it exists\n   */\n  getCompleteServerCache(path: Path): Node | null {\n    let serverCache: Node | null = null;\n    forEach(this.views_, (key: string, view: View) => {\n      serverCache = serverCache || view.getCompleteServerCache(path);\n    });\n    return serverCache;\n  }\n\n  /**\n   * @param {!Query} query\n   * @return {?View}\n   */\n  viewForQuery(query: Query): View | null {\n    const params = query.getQueryParams();\n    if (params.loadsAllData()) {\n      return this.getCompleteView();\n    } else {\n      const queryId = query.queryIdentifier();\n      return safeGet(this.views_, queryId);\n    }\n  }\n\n  /**\n   * @param {!Query} query\n   * @return {boolean}\n   */\n  viewExistsForQuery(query: Query): boolean {\n    return this.viewForQuery(query) != null;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasCompleteView(): boolean {\n    return this.getCompleteView() != null;\n  }\n\n  /**\n   * @return {?View}\n   */\n  getCompleteView(): View | null {\n    const completeView = findValue(this.views_, (view: View) =>\n      view\n        .getQuery()\n        .getQueryParams()\n        .loadsAllData()\n    );\n    return completeView || null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ImmutableTree } from './util/ImmutableTree';\nimport { Path } from './util/Path';\nimport { forEach } from '@firebase/util';\nimport { Node, NamedNode } from './snap/Node';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { assert } from '@firebase/util';\nimport { ChildrenNode } from './snap/ChildrenNode';\n\n/**\n * This class holds a collection of writes that can be applied to nodes in unison. It abstracts away the logic with\n * dealing with priority writes and multiple nested writes. At any given path there is only allowed to be one write\n * modifying that path. Any write to an existing path or shadowing an existing path will modify that existing write\n * to reflect the write added.\n *\n * @constructor\n * @param {!ImmutableTree.<!Node>} writeTree\n */\nexport class CompoundWrite {\n  constructor(private writeTree_: ImmutableTree<Node>) {}\n  /**\n   * @type {!CompoundWrite}\n   */\n  static Empty = new CompoundWrite(new ImmutableTree(null));\n\n  /**\n   * @param {!Path} path\n   * @param {!Node} node\n   * @return {!CompoundWrite}\n   */\n  addWrite(path: Path, node: Node): CompoundWrite {\n    if (path.isEmpty()) {\n      return new CompoundWrite(new ImmutableTree(node));\n    } else {\n      const rootmost = this.writeTree_.findRootMostValueAndPath(path);\n      if (rootmost != null) {\n        const rootMostPath = rootmost.path;\n        let value = rootmost.value;\n        const relativePath = Path.relativePath(rootMostPath, path);\n        value = value.updateChild(relativePath, node);\n        return new CompoundWrite(this.writeTree_.set(rootMostPath, value));\n      } else {\n        const subtree = new ImmutableTree(node);\n        const newWriteTree = this.writeTree_.setTree(path, subtree);\n        return new CompoundWrite(newWriteTree);\n      }\n    }\n  }\n\n  /**\n   * @param {!Path} path\n   * @param {!Object.<string, !Node>} updates\n   * @return {!CompoundWrite}\n   */\n  addWrites(path: Path, updates: { [name: string]: Node }): CompoundWrite {\n    let newWrite = this as CompoundWrite;\n    forEach(updates, function(childKey: string, node: Node) {\n      newWrite = newWrite.addWrite(path.child(childKey), node);\n    });\n    return newWrite;\n  }\n\n  /**\n   * Will remove a write at the given path and deeper paths. This will <em>not</em> modify a write at a higher\n   * location, which must be removed by calling this method with that path.\n   *\n   * @param {!Path} path The path at which a write and all deeper writes should be removed\n   * @return {!CompoundWrite} The new CompoundWrite with the removed path\n   */\n  removeWrite(path: Path): CompoundWrite {\n    if (path.isEmpty()) {\n      return CompoundWrite.Empty;\n    } else {\n      const newWriteTree = this.writeTree_.setTree(path, ImmutableTree.Empty);\n      return new CompoundWrite(newWriteTree);\n    }\n  }\n\n  /**\n   * Returns whether this CompoundWrite will fully overwrite a node at a given location and can therefore be\n   * considered \"complete\".\n   *\n   * @param {!Path} path The path to check for\n   * @return {boolean} Whether there is a complete write at that path\n   */\n  hasCompleteWrite(path: Path): boolean {\n    return this.getCompleteNode(path) != null;\n  }\n\n  /**\n   * Returns a node for a path if and only if the node is a \"complete\" overwrite at that path. This will not aggregate\n   * writes from deeper paths, but will return child nodes from a more shallow path.\n   *\n   * @param {!Path} path The path to get a complete write\n   * @return {?Node} The node if complete at that path, or null otherwise.\n   */\n  getCompleteNode(path: Path): Node | null {\n    const rootmost = this.writeTree_.findRootMostValueAndPath(path);\n    if (rootmost != null) {\n      return this.writeTree_\n        .get(rootmost.path)\n        .getChild(Path.relativePath(rootmost.path, path));\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Returns all children that are guaranteed to be a complete overwrite.\n   *\n   * @return {!Array.<NamedNode>} A list of all complete children.\n   */\n  getCompleteChildren(): Array<NamedNode> {\n    const children: NamedNode[] = [];\n    let node = this.writeTree_.value;\n    if (node != null) {\n      // If it's a leaf node, it has no children; so nothing to do.\n      if (!node.isLeafNode()) {\n        (node as ChildrenNode).forEachChild(PRIORITY_INDEX, function(\n          childName,\n          childNode\n        ) {\n          children.push(new NamedNode(childName, childNode));\n        });\n      }\n    } else {\n      this.writeTree_.children.inorderTraversal(function(childName, childTree) {\n        if (childTree.value != null) {\n          children.push(new NamedNode(childName, childTree.value));\n        }\n      });\n    }\n    return children;\n  }\n\n  /**\n   * @param {!Path} path\n   * @return {!CompoundWrite}\n   */\n  childCompoundWrite(path: Path): CompoundWrite {\n    if (path.isEmpty()) {\n      return this;\n    } else {\n      const shadowingNode = this.getCompleteNode(path);\n      if (shadowingNode != null) {\n        return new CompoundWrite(new ImmutableTree(shadowingNode));\n      } else {\n        return new CompoundWrite(this.writeTree_.subtree(path));\n      }\n    }\n  }\n\n  /**\n   * Returns true if this CompoundWrite is empty and therefore does not modify any nodes.\n   * @return {boolean} Whether this CompoundWrite is empty\n   */\n  isEmpty(): boolean {\n    return this.writeTree_.isEmpty();\n  }\n\n  /**\n   * Applies this CompoundWrite to a node. The node is returned with all writes from this CompoundWrite applied to the\n   * node\n   * @param {!Node} node The node to apply this CompoundWrite to\n   * @return {!Node} The node with all writes applied\n   */\n  apply(node: Node): Node {\n    return CompoundWrite.applySubtreeWrite_(Path.Empty, this.writeTree_, node);\n  }\n\n  /**\n   * @param {!Path} relativePath\n   * @param {!ImmutableTree.<!Node>} writeTree\n   * @param {!Node} node\n   * @return {!Node}\n   * @private\n   */\n  private static applySubtreeWrite_ = function(\n    relativePath: Path,\n    writeTree: ImmutableTree<Node>,\n    node: Node\n  ): Node {\n    if (writeTree.value != null) {\n      // Since there a write is always a leaf, we're done here\n      return node.updateChild(relativePath, writeTree.value);\n    } else {\n      let priorityWrite = null;\n      writeTree.children.inorderTraversal(function(childKey, childTree) {\n        if (childKey === '.priority') {\n          // Apply priorities at the end so we don't update priorities for either empty nodes or forget\n          // to apply priorities to empty nodes that are later filled\n          assert(\n            childTree.value !== null,\n            'Priority writes must always be leaf nodes'\n          );\n          priorityWrite = childTree.value;\n        } else {\n          node = CompoundWrite.applySubtreeWrite_(\n            relativePath.child(childKey),\n            childTree,\n            node\n          );\n        }\n      });\n      // If there was a priority write, we only apply it if the node is not empty\n      if (!node.getChild(relativePath).isEmpty() && priorityWrite !== null) {\n        node = node.updateChild(relativePath.child('.priority'), priorityWrite);\n      }\n      return node;\n    }\n  };\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { findKey, forEach, safeGet } from '@firebase/util';\nimport { assert, assertionError } from '@firebase/util';\nimport { Path } from './util/Path';\nimport { CompoundWrite } from './CompoundWrite';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { NamedNode, Node } from './snap/Node';\nimport { CacheNode } from './view/CacheNode';\nimport { Index } from './snap/indexes/Index';\n\n/**\n * Defines a single user-initiated write operation. May be the result of a set(), transaction(), or update() call. In\n * the case of a set() or transaction, snap wil be non-null.  In the case of an update(), children will be non-null.\n */\nexport interface WriteRecord {\n  writeId: number;\n  path: Path;\n  snap?: Node | null;\n  children?: { [k: string]: Node } | null;\n  visible: boolean;\n}\n\n/**\n * WriteTree tracks all pending user-initiated writes and has methods to calculate the result of merging them\n * with underlying server data (to create \"event cache\" data).  Pending writes are added with addOverwrite()\n * and addMerge(), and removed with removeWrite().\n *\n * @constructor\n */\nexport class WriteTree {\n  /**\n   * A tree tracking the result of applying all visible writes.  This does not include transactions with\n   * applyLocally=false or writes that are completely shadowed by other writes.\n   *\n   * @type {!CompoundWrite}\n   * @private\n   */\n  private visibleWrites_: CompoundWrite = CompoundWrite.Empty;\n\n  /**\n   * A list of all pending writes, regardless of visibility and shadowed-ness.  Used to calculate arbitrary\n   * sets of the changed data, such as hidden writes (from transactions) or changes with certain writes excluded (also\n   * used by transactions).\n   *\n   * @type {!Array.<!WriteRecord>}\n   * @private\n   */\n  private allWrites_: WriteRecord[] = [];\n\n  private lastWriteId_ = -1;\n\n  /**\n   * Create a new WriteTreeRef for the given path. For use with a new sync point at the given path.\n   *\n   * @param {!Path} path\n   * @return {!WriteTreeRef}\n   */\n  childWrites(path: Path): WriteTreeRef {\n    return new WriteTreeRef(path, this);\n  }\n\n  /**\n   * Record a new overwrite from user code.\n   *\n   * @param {!Path} path\n   * @param {!Node} snap\n   * @param {!number} writeId\n   * @param {boolean=} visible This is set to false by some transactions. It should be excluded from event caches\n   */\n  addOverwrite(path: Path, snap: Node, writeId: number, visible?: boolean) {\n    assert(\n      writeId > this.lastWriteId_,\n      'Stacking an older write on top of newer ones'\n    );\n    if (visible === undefined) {\n      visible = true;\n    }\n    this.allWrites_.push({\n      path: path,\n      snap: snap,\n      writeId: writeId,\n      visible: visible\n    });\n\n    if (visible) {\n      this.visibleWrites_ = this.visibleWrites_.addWrite(path, snap);\n    }\n    this.lastWriteId_ = writeId;\n  }\n\n  /**\n   * Record a new merge from user code.\n   *\n   * @param {!Path} path\n   * @param {!Object.<string, !Node>} changedChildren\n   * @param {!number} writeId\n   */\n  addMerge(\n    path: Path,\n    changedChildren: { [k: string]: Node },\n    writeId: number\n  ) {\n    assert(\n      writeId > this.lastWriteId_,\n      'Stacking an older merge on top of newer ones'\n    );\n    this.allWrites_.push({\n      path: path,\n      children: changedChildren,\n      writeId: writeId,\n      visible: true\n    });\n\n    this.visibleWrites_ = this.visibleWrites_.addWrites(path, changedChildren);\n    this.lastWriteId_ = writeId;\n  }\n\n  /**\n   * @param {!number} writeId\n   * @return {?WriteRecord}\n   */\n  getWrite(writeId: number): WriteRecord | null {\n    for (let i = 0; i < this.allWrites_.length; i++) {\n      const record = this.allWrites_[i];\n      if (record.writeId === writeId) {\n        return record;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Remove a write (either an overwrite or merge) that has been successfully acknowledge by the server. Recalculates\n   * the tree if necessary.  We return true if it may have been visible, meaning views need to reevaluate.\n   *\n   * @param {!number} writeId\n   * @return {boolean} true if the write may have been visible (meaning we'll need to reevaluate / raise\n   * events as a result).\n   */\n  removeWrite(writeId: number): boolean {\n    // Note: disabling this check. It could be a transaction that preempted another transaction, and thus was applied\n    // out of order.\n    //const validClear = revert || this.allWrites_.length === 0 || writeId <= this.allWrites_[0].writeId;\n    //assert(validClear, \"Either we don't have this write, or it's the first one in the queue\");\n\n    const idx = this.allWrites_.findIndex(function(s) {\n      return s.writeId === writeId;\n    });\n    assert(idx >= 0, 'removeWrite called with nonexistent writeId.');\n    const writeToRemove = this.allWrites_[idx];\n    this.allWrites_.splice(idx, 1);\n\n    let removedWriteWasVisible = writeToRemove.visible;\n    let removedWriteOverlapsWithOtherWrites = false;\n\n    let i = this.allWrites_.length - 1;\n\n    while (removedWriteWasVisible && i >= 0) {\n      const currentWrite = this.allWrites_[i];\n      if (currentWrite.visible) {\n        if (\n          i >= idx &&\n          this.recordContainsPath_(currentWrite, writeToRemove.path)\n        ) {\n          // The removed write was completely shadowed by a subsequent write.\n          removedWriteWasVisible = false;\n        } else if (writeToRemove.path.contains(currentWrite.path)) {\n          // Either we're covering some writes or they're covering part of us (depending on which came first).\n          removedWriteOverlapsWithOtherWrites = true;\n        }\n      }\n      i--;\n    }\n\n    if (!removedWriteWasVisible) {\n      return false;\n    } else if (removedWriteOverlapsWithOtherWrites) {\n      // There's some shadowing going on. Just rebuild the visible writes from scratch.\n      this.resetTree_();\n      return true;\n    } else {\n      // There's no shadowing.  We can safely just remove the write(s) from visibleWrites.\n      if (writeToRemove.snap) {\n        this.visibleWrites_ = this.visibleWrites_.removeWrite(\n          writeToRemove.path\n        );\n      } else {\n        const children = writeToRemove.children;\n        forEach(children, (childName: string) => {\n          this.visibleWrites_ = this.visibleWrites_.removeWrite(\n            writeToRemove.path.child(childName)\n          );\n        });\n      }\n      return true;\n    }\n  }\n\n  /**\n   * Return a complete snapshot for the given path if there's visible write data at that path, else null.\n   * No server data is considered.\n   *\n   * @param {!Path} path\n   * @return {?Node}\n   */\n  getCompleteWriteData(path: Path): Node | null {\n    return this.visibleWrites_.getCompleteNode(path);\n  }\n\n  /**\n   * Given optional, underlying server data, and an optional set of constraints (exclude some sets, include hidden\n   * writes), attempt to calculate a complete snapshot for the given path\n   *\n   * @param {!Path} treePath\n   * @param {?Node} completeServerCache\n   * @param {Array.<number>=} writeIdsToExclude An optional set to be excluded\n   * @param {boolean=} includeHiddenWrites Defaults to false, whether or not to layer on writes with visible set to false\n   * @return {?Node}\n   */\n  calcCompleteEventCache(\n    treePath: Path,\n    completeServerCache: Node | null,\n    writeIdsToExclude?: number[],\n    includeHiddenWrites?: boolean\n  ): Node | null {\n    if (!writeIdsToExclude && !includeHiddenWrites) {\n      const shadowingNode = this.visibleWrites_.getCompleteNode(treePath);\n      if (shadowingNode != null) {\n        return shadowingNode;\n      } else {\n        const subMerge = this.visibleWrites_.childCompoundWrite(treePath);\n        if (subMerge.isEmpty()) {\n          return completeServerCache;\n        } else if (\n          completeServerCache == null &&\n          !subMerge.hasCompleteWrite(Path.Empty)\n        ) {\n          // We wouldn't have a complete snapshot, since there's no underlying data and no complete shadow\n          return null;\n        } else {\n          const layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\n          return subMerge.apply(layeredCache);\n        }\n      }\n    } else {\n      const merge = this.visibleWrites_.childCompoundWrite(treePath);\n      if (!includeHiddenWrites && merge.isEmpty()) {\n        return completeServerCache;\n      } else {\n        // If the server cache is null, and we don't have a complete cache, we need to return null\n        if (\n          !includeHiddenWrites &&\n          completeServerCache == null &&\n          !merge.hasCompleteWrite(Path.Empty)\n        ) {\n          return null;\n        } else {\n          const filter = function(write: WriteRecord) {\n            return (\n              (write.visible || includeHiddenWrites) &&\n              (!writeIdsToExclude ||\n                !~writeIdsToExclude.indexOf(write.writeId)) &&\n              (write.path.contains(treePath) || treePath.contains(write.path))\n            );\n          };\n          const mergeAtPath = WriteTree.layerTree_(\n            this.allWrites_,\n            filter,\n            treePath\n          );\n          const layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\n          return mergeAtPath.apply(layeredCache);\n        }\n      }\n    }\n  }\n\n  /**\n   * With optional, underlying server data, attempt to return a children node of children that we have complete data for.\n   * Used when creating new views, to pre-fill their complete event children snapshot.\n   *\n   * @param {!Path} treePath\n   * @param {?ChildrenNode} completeServerChildren\n   * @return {!ChildrenNode}\n   */\n  calcCompleteEventChildren(\n    treePath: Path,\n    completeServerChildren: ChildrenNode | null\n  ) {\n    let completeChildren = ChildrenNode.EMPTY_NODE as Node;\n    const topLevelSet = this.visibleWrites_.getCompleteNode(treePath);\n    if (topLevelSet) {\n      if (!topLevelSet.isLeafNode()) {\n        // we're shadowing everything. Return the children.\n        topLevelSet.forEachChild(PRIORITY_INDEX, function(\n          childName,\n          childSnap\n        ) {\n          completeChildren = completeChildren.updateImmediateChild(\n            childName,\n            childSnap\n          );\n        });\n      }\n      return completeChildren;\n    } else if (completeServerChildren) {\n      // Layer any children we have on top of this\n      // We know we don't have a top-level set, so just enumerate existing children\n      const merge = this.visibleWrites_.childCompoundWrite(treePath);\n      completeServerChildren.forEachChild(PRIORITY_INDEX, function(\n        childName,\n        childNode\n      ) {\n        const node = merge\n          .childCompoundWrite(new Path(childName))\n          .apply(childNode);\n        completeChildren = completeChildren.updateImmediateChild(\n          childName,\n          node\n        );\n      });\n      // Add any complete children we have from the set\n      merge.getCompleteChildren().forEach(function(namedNode) {\n        completeChildren = completeChildren.updateImmediateChild(\n          namedNode.name,\n          namedNode.node\n        );\n      });\n      return completeChildren;\n    } else {\n      // We don't have anything to layer on top of. Layer on any children we have\n      // Note that we can return an empty snap if we have a defined delete\n      const merge = this.visibleWrites_.childCompoundWrite(treePath);\n      merge.getCompleteChildren().forEach(function(namedNode) {\n        completeChildren = completeChildren.updateImmediateChild(\n          namedNode.name,\n          namedNode.node\n        );\n      });\n      return completeChildren;\n    }\n  }\n\n  /**\n   * Given that the underlying server data has updated, determine what, if anything, needs to be\n   * applied to the event cache.\n   *\n   * Possibilities:\n   *\n   * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\n   *\n   * 2. Some write is completely shadowing. No events to be raised\n   *\n   * 3. Is partially shadowed. Events\n   *\n   * Either existingEventSnap or existingServerSnap must exist\n   *\n   * @param {!Path} treePath\n   * @param {!Path} childPath\n   * @param {?Node} existingEventSnap\n   * @param {?Node} existingServerSnap\n   * @return {?Node}\n   */\n  calcEventCacheAfterServerOverwrite(\n    treePath: Path,\n    childPath: Path,\n    existingEventSnap: Node | null,\n    existingServerSnap: Node | null\n  ): Node | null {\n    assert(\n      existingEventSnap || existingServerSnap,\n      'Either existingEventSnap or existingServerSnap must exist'\n    );\n    const path = treePath.child(childPath);\n    if (this.visibleWrites_.hasCompleteWrite(path)) {\n      // At this point we can probably guarantee that we're in case 2, meaning no events\n      // May need to check visibility while doing the findRootMostValueAndPath call\n      return null;\n    } else {\n      // No complete shadowing. We're either partially shadowing or not shadowing at all.\n      const childMerge = this.visibleWrites_.childCompoundWrite(path);\n      if (childMerge.isEmpty()) {\n        // We're not shadowing at all. Case 1\n        return existingServerSnap.getChild(childPath);\n      } else {\n        // This could be more efficient if the serverNode + updates doesn't change the eventSnap\n        // However this is tricky to find out, since user updates don't necessary change the server\n        // snap, e.g. priority updates on empty nodes, or deep deletes. Another special case is if the server\n        // adds nodes, but doesn't change any existing writes. It is therefore not enough to\n        // only check if the updates change the serverNode.\n        // Maybe check if the merge tree contains these special cases and only do a full overwrite in that case?\n        return childMerge.apply(existingServerSnap.getChild(childPath));\n      }\n    }\n  }\n\n  /**\n   * Returns a complete child for a given server snap after applying all user writes or null if there is no\n   * complete child for this ChildKey.\n   *\n   * @param {!Path} treePath\n   * @param {!string} childKey\n   * @param {!CacheNode} existingServerSnap\n   * @return {?Node}\n   */\n  calcCompleteChild(\n    treePath: Path,\n    childKey: string,\n    existingServerSnap: CacheNode\n  ): Node | null {\n    const path = treePath.child(childKey);\n    const shadowingNode = this.visibleWrites_.getCompleteNode(path);\n    if (shadowingNode != null) {\n      return shadowingNode;\n    } else {\n      if (existingServerSnap.isCompleteForChild(childKey)) {\n        const childMerge = this.visibleWrites_.childCompoundWrite(path);\n        return childMerge.apply(\n          existingServerSnap.getNode().getImmediateChild(childKey)\n        );\n      } else {\n        return null;\n      }\n    }\n  }\n\n  /**\n   * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\n   * a higher path, this will return the child of that write relative to the write and this path.\n   * Returns null if there is no write at this path.\n   *\n   * @param {!Path} path\n   * @return {?Node}\n   */\n  shadowingWrite(path: Path): Node | null {\n    return this.visibleWrites_.getCompleteNode(path);\n  }\n\n  /**\n   * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\n   * the window, but may now be in the window.\n   *\n   * @param {!Path} treePath\n   * @param {?Node} completeServerData\n   * @param {!NamedNode} startPost\n   * @param {!number} count\n   * @param {boolean} reverse\n   * @param {!Index} index\n   * @return {!Array.<!NamedNode>}\n   */\n  calcIndexedSlice(\n    treePath: Path,\n    completeServerData: Node | null,\n    startPost: NamedNode,\n    count: number,\n    reverse: boolean,\n    index: Index\n  ): NamedNode[] {\n    let toIterate: Node;\n    const merge = this.visibleWrites_.childCompoundWrite(treePath);\n    const shadowingNode = merge.getCompleteNode(Path.Empty);\n    if (shadowingNode != null) {\n      toIterate = shadowingNode;\n    } else if (completeServerData != null) {\n      toIterate = merge.apply(completeServerData);\n    } else {\n      // no children to iterate on\n      return [];\n    }\n    toIterate = toIterate.withIndex(index);\n    if (!toIterate.isEmpty() && !toIterate.isLeafNode()) {\n      const nodes = [];\n      const cmp = index.getCompare();\n      const iter = reverse\n        ? (toIterate as ChildrenNode).getReverseIteratorFrom(startPost, index)\n        : (toIterate as ChildrenNode).getIteratorFrom(startPost, index);\n      let next = iter.getNext();\n      while (next && nodes.length < count) {\n        if (cmp(next, startPost) !== 0) {\n          nodes.push(next);\n        }\n        next = iter.getNext();\n      }\n      return nodes;\n    } else {\n      return [];\n    }\n  }\n\n  /**\n   * @param {!WriteRecord} writeRecord\n   * @param {!Path} path\n   * @return {boolean}\n   * @private\n   */\n  private recordContainsPath_(writeRecord: WriteRecord, path: Path): boolean {\n    if (writeRecord.snap) {\n      return writeRecord.path.contains(path);\n    } else {\n      // findKey can return undefined, so use !! to coerce to boolean\n      return !!findKey(writeRecord.children, function(\n        childSnap: Node,\n        childName: string\n      ) {\n        return writeRecord.path.child(childName).contains(path);\n      });\n    }\n  }\n\n  /**\n   * Re-layer the writes and merges into a tree so we can efficiently calculate event snapshots\n   * @private\n   */\n  private resetTree_() {\n    this.visibleWrites_ = WriteTree.layerTree_(\n      this.allWrites_,\n      WriteTree.DefaultFilter_,\n      Path.Empty\n    );\n    if (this.allWrites_.length > 0) {\n      this.lastWriteId_ = this.allWrites_[this.allWrites_.length - 1].writeId;\n    } else {\n      this.lastWriteId_ = -1;\n    }\n  }\n\n  /**\n   * The default filter used when constructing the tree. Keep everything that's visible.\n   *\n   * @param {!WriteRecord} write\n   * @return {boolean}\n   * @private\n   */\n  private static DefaultFilter_(write: WriteRecord) {\n    return write.visible;\n  }\n\n  /**\n   * Static method. Given an array of WriteRecords, a filter for which ones to include, and a path, construct the tree of\n   * event data at that path.\n   *\n   * @param {!Array.<!WriteRecord>} writes\n   * @param {!function(!WriteRecord):boolean} filter\n   * @param {!Path} treeRoot\n   * @return {!CompoundWrite}\n   * @private\n   */\n  private static layerTree_(\n    writes: WriteRecord[],\n    filter: (w: WriteRecord) => boolean,\n    treeRoot: Path\n  ): CompoundWrite {\n    let compoundWrite = CompoundWrite.Empty;\n    for (let i = 0; i < writes.length; ++i) {\n      const write = writes[i];\n      // Theory, a later set will either:\n      // a) abort a relevant transaction, so no need to worry about excluding it from calculating that transaction\n      // b) not be relevant to a transaction (separate branch), so again will not affect the data for that transaction\n      if (filter(write)) {\n        const writePath = write.path;\n        let relativePath;\n        if (write.snap) {\n          if (treeRoot.contains(writePath)) {\n            relativePath = Path.relativePath(treeRoot, writePath);\n            compoundWrite = compoundWrite.addWrite(relativePath, write.snap);\n          } else if (writePath.contains(treeRoot)) {\n            relativePath = Path.relativePath(writePath, treeRoot);\n            compoundWrite = compoundWrite.addWrite(\n              Path.Empty,\n              write.snap.getChild(relativePath)\n            );\n          } else {\n            // There is no overlap between root path and write path, ignore write\n          }\n        } else if (write.children) {\n          if (treeRoot.contains(writePath)) {\n            relativePath = Path.relativePath(treeRoot, writePath);\n            compoundWrite = compoundWrite.addWrites(\n              relativePath,\n              write.children\n            );\n          } else if (writePath.contains(treeRoot)) {\n            relativePath = Path.relativePath(writePath, treeRoot);\n            if (relativePath.isEmpty()) {\n              compoundWrite = compoundWrite.addWrites(\n                Path.Empty,\n                write.children\n              );\n            } else {\n              const child = safeGet(write.children, relativePath.getFront());\n              if (child) {\n                // There exists a child in this node that matches the root path\n                const deepNode = child.getChild(relativePath.popFront());\n                compoundWrite = compoundWrite.addWrite(Path.Empty, deepNode);\n              }\n            }\n          } else {\n            // There is no overlap between root path and write path, ignore write\n          }\n        } else {\n          throw assertionError('WriteRecord should have .snap or .children');\n        }\n      }\n    }\n    return compoundWrite;\n  }\n}\n\n/**\n * A WriteTreeRef wraps a WriteTree and a path, for convenient access to a particular subtree.  All of the methods\n * just proxy to the underlying WriteTree.\n *\n * @constructor\n */\nexport class WriteTreeRef {\n  /**\n   * The path to this particular write tree ref. Used for calling methods on writeTree_ while exposing a simpler\n   * interface to callers.\n   *\n   * @type {!Path}\n   * @private\n   * @const\n   */\n  private readonly treePath_: Path;\n\n  /**\n   * * A reference to the actual tree of write data. All methods are pass-through to the tree, but with the appropriate\n   * path prefixed.\n   *\n   * This lets us make cheap references to points in the tree for sync points without having to copy and maintain all of\n   * the data.\n   *\n   * @type {!WriteTree}\n   * @private\n   * @const\n   */\n  private readonly writeTree_: WriteTree;\n\n  /**\n   * @param {!Path} path\n   * @param {!WriteTree} writeTree\n   */\n  constructor(path: Path, writeTree: WriteTree) {\n    this.treePath_ = path;\n    this.writeTree_ = writeTree;\n  }\n\n  /**\n   * If possible, returns a complete event cache, using the underlying server data if possible. In addition, can be used\n   * to get a cache that includes hidden writes, and excludes arbitrary writes. Note that customizing the returned node\n   * can lead to a more expensive calculation.\n   *\n   * @param {?Node} completeServerCache\n   * @param {Array.<number>=} writeIdsToExclude Optional writes to exclude.\n   * @param {boolean=} includeHiddenWrites Defaults to false, whether or not to layer on writes with visible set to false\n   * @return {?Node}\n   */\n  calcCompleteEventCache(\n    completeServerCache: Node | null,\n    writeIdsToExclude?: number[],\n    includeHiddenWrites?: boolean\n  ): Node | null {\n    return this.writeTree_.calcCompleteEventCache(\n      this.treePath_,\n      completeServerCache,\n      writeIdsToExclude,\n      includeHiddenWrites\n    );\n  }\n\n  /**\n   * If possible, returns a children node containing all of the complete children we have data for. The returned data is a\n   * mix of the given server data and write data.\n   *\n   * @param {?ChildrenNode} completeServerChildren\n   * @return {!ChildrenNode}\n   */\n  calcCompleteEventChildren(\n    completeServerChildren: ChildrenNode | null\n  ): ChildrenNode {\n    return this.writeTree_.calcCompleteEventChildren(\n      this.treePath_,\n      completeServerChildren\n    ) as ChildrenNode;\n  }\n\n  /**\n   * Given that either the underlying server data has updated or the outstanding writes have updated, determine what,\n   * if anything, needs to be applied to the event cache.\n   *\n   * Possibilities:\n   *\n   * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\n   *\n   * 2. Some write is completely shadowing. No events to be raised\n   *\n   * 3. Is partially shadowed. Events should be raised\n   *\n   * Either existingEventSnap or existingServerSnap must exist, this is validated via an assert\n   *\n   * @param {!Path} path\n   * @param {?Node} existingEventSnap\n   * @param {?Node} existingServerSnap\n   * @return {?Node}\n   */\n  calcEventCacheAfterServerOverwrite(\n    path: Path,\n    existingEventSnap: Node | null,\n    existingServerSnap: Node | null\n  ): Node | null {\n    return this.writeTree_.calcEventCacheAfterServerOverwrite(\n      this.treePath_,\n      path,\n      existingEventSnap,\n      existingServerSnap\n    );\n  }\n\n  /**\n   * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\n   * a higher path, this will return the child of that write relative to the write and this path.\n   * Returns null if there is no write at this path.\n   *\n   * @param {!Path} path\n   * @return {?Node}\n   */\n  shadowingWrite(path: Path): Node | null {\n    return this.writeTree_.shadowingWrite(this.treePath_.child(path));\n  }\n\n  /**\n   * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\n   * the window, but may now be in the window\n   *\n   * @param {?Node} completeServerData\n   * @param {!NamedNode} startPost\n   * @param {!number} count\n   * @param {boolean} reverse\n   * @param {!Index} index\n   * @return {!Array.<!NamedNode>}\n   */\n  calcIndexedSlice(\n    completeServerData: Node | null,\n    startPost: NamedNode,\n    count: number,\n    reverse: boolean,\n    index: Index\n  ): NamedNode[] {\n    return this.writeTree_.calcIndexedSlice(\n      this.treePath_,\n      completeServerData,\n      startPost,\n      count,\n      reverse,\n      index\n    );\n  }\n\n  /**\n   * Returns a complete child for a given server snap after applying all user writes or null if there is no\n   * complete child for this ChildKey.\n   *\n   * @param {!string} childKey\n   * @param {!CacheNode} existingServerCache\n   * @return {?Node}\n   */\n  calcCompleteChild(\n    childKey: string,\n    existingServerCache: CacheNode\n  ): Node | null {\n    return this.writeTree_.calcCompleteChild(\n      this.treePath_,\n      childKey,\n      existingServerCache\n    );\n  }\n\n  /**\n   * Return a WriteTreeRef for a child.\n   *\n   * @param {string} childName\n   * @return {!WriteTreeRef}\n   */\n  child(childName: string): WriteTreeRef {\n    return new WriteTreeRef(this.treePath_.child(childName), this.writeTree_);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { errorForServerCode } from './util/util';\nimport { AckUserWrite } from './operation/AckUserWrite';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { forEach, safeGet } from '@firebase/util';\nimport { ImmutableTree } from './util/ImmutableTree';\nimport { ListenComplete } from './operation/ListenComplete';\nimport { Merge } from './operation/Merge';\nimport { Operation, OperationSource } from './operation/Operation';\nimport { Overwrite } from './operation/Overwrite';\nimport { Path } from './util/Path';\nimport { SyncPoint } from './SyncPoint';\nimport { WriteTree, WriteTreeRef } from './WriteTree';\nimport { Query } from '../api/Query';\nimport { Node } from './snap/Node';\nimport { Event } from './view/Event';\nimport { EventRegistration } from './view/EventRegistration';\nimport { View } from './view/View';\n\n/**\n * @typedef {{\n *   startListening: function(\n *     !Query,\n *     ?number,\n *     function():string,\n *     function(!string, *):!Array.<!Event>\n *   ):!Array.<!Event>,\n *\n *   stopListening: function(!Query, ?number)\n * }}\n */\nexport interface ListenProvider {\n  startListening(\n    query: Query,\n    tag: number | null,\n    hashFn: () => string,\n    onComplete: (a: string, b?: any) => Event[]\n  ): Event[];\n\n  stopListening(a: Query, b: number | null): void;\n}\n\n/**\n * SyncTree is the central class for managing event callback registration, data caching, views\n * (query processing), and event generation.  There are typically two SyncTree instances for\n * each Repo, one for the normal Firebase data, and one for the .info data.\n *\n * It has a number of responsibilities, including:\n *  - Tracking all user event callbacks (registered via addEventRegistration() and removeEventRegistration()).\n *  - Applying and caching data changes for user set(), transaction(), and update() calls\n *    (applyUserOverwrite(), applyUserMerge()).\n *  - Applying and caching data changes for server data changes (applyServerOverwrite(),\n *    applyServerMerge()).\n *  - Generating user-facing events for server and user changes (all of the apply* methods\n *    return the set of events that need to be raised as a result).\n *  - Maintaining the appropriate set of server listens to ensure we are always subscribed\n *    to the correct set of paths and queries to satisfy the current set of user event\n *    callbacks (listens are started/stopped using the provided listenProvider).\n *\n * NOTE: Although SyncTree tracks event callbacks and calculates events to raise, the actual\n * events are returned to the caller rather than raised synchronously.\n *\n * @constructor\n */\nexport class SyncTree {\n  /**\n   * Tree of SyncPoints.  There's a SyncPoint at any location that has 1 or more views.\n   * @type {!ImmutableTree.<!SyncPoint>}\n   * @private\n   */\n  private syncPointTree_: ImmutableTree<SyncPoint> = ImmutableTree.Empty;\n\n  /**\n   * A tree of all pending user writes (user-initiated set()'s, transaction()'s, update()'s, etc.).\n   * @type {!WriteTree}\n   * @private\n   */\n  private pendingWriteTree_ = new WriteTree();\n\n  private tagToQueryMap_: { [k: string]: string } = {};\n  private queryToTagMap_: { [k: string]: number } = {};\n\n  /**\n   * @param {!ListenProvider} listenProvider_ Used by SyncTree to start / stop listening\n   *   to server data.\n   */\n  constructor(private listenProvider_: ListenProvider) {}\n\n  /**\n   * Apply the data changes for a user-generated set() or transaction() call.\n   *\n   * @param {!Path} path\n   * @param {!Node} newData\n   * @param {number} writeId\n   * @param {boolean=} visible\n   * @return {!Array.<!Event>} Events to raise.\n   */\n  applyUserOverwrite(\n    path: Path,\n    newData: Node,\n    writeId: number,\n    visible?: boolean\n  ): Event[] {\n    // Record pending write.\n    this.pendingWriteTree_.addOverwrite(path, newData, writeId, visible);\n\n    if (!visible) {\n      return [];\n    } else {\n      return this.applyOperationToSyncPoints_(\n        new Overwrite(OperationSource.User, path, newData)\n      );\n    }\n  }\n\n  /**\n   * Apply the data from a user-generated update() call\n   *\n   * @param {!Path} path\n   * @param {!Object.<string, !Node>} changedChildren\n   * @param {!number} writeId\n   * @return {!Array.<!Event>} Events to raise.\n   */\n  applyUserMerge(\n    path: Path,\n    changedChildren: { [k: string]: Node },\n    writeId: number\n  ): Event[] {\n    // Record pending merge.\n    this.pendingWriteTree_.addMerge(path, changedChildren, writeId);\n\n    const changeTree = ImmutableTree.fromObject(changedChildren);\n\n    return this.applyOperationToSyncPoints_(\n      new Merge(OperationSource.User, path, changeTree)\n    );\n  }\n\n  /**\n   * Acknowledge a pending user write that was previously registered with applyUserOverwrite() or applyUserMerge().\n   *\n   * @param {!number} writeId\n   * @param {boolean=} revert True if the given write failed and needs to be reverted\n   * @return {!Array.<!Event>} Events to raise.\n   */\n  ackUserWrite(writeId: number, revert: boolean = false) {\n    const write = this.pendingWriteTree_.getWrite(writeId);\n    const needToReevaluate = this.pendingWriteTree_.removeWrite(writeId);\n    if (!needToReevaluate) {\n      return [];\n    } else {\n      let affectedTree = ImmutableTree.Empty;\n      if (write.snap != null) {\n        // overwrite\n        affectedTree = affectedTree.set(Path.Empty, true);\n      } else {\n        forEach(write.children, function(pathString: string, node: Node) {\n          affectedTree = affectedTree.set(new Path(pathString), node);\n        });\n      }\n      return this.applyOperationToSyncPoints_(\n        new AckUserWrite(write.path, affectedTree, revert)\n      );\n    }\n  }\n\n  /**\n   * Apply new server data for the specified path..\n   *\n   * @param {!Path} path\n   * @param {!Node} newData\n   * @return {!Array.<!Event>} Events to raise.\n   */\n  applyServerOverwrite(path: Path, newData: Node): Event[] {\n    return this.applyOperationToSyncPoints_(\n      new Overwrite(OperationSource.Server, path, newData)\n    );\n  }\n\n  /**\n   * Apply new server data to be merged in at the specified path.\n   *\n   * @param {!Path} path\n   * @param {!Object.<string, !Node>} changedChildren\n   * @return {!Array.<!Event>} Events to raise.\n   */\n  applyServerMerge(\n    path: Path,\n    changedChildren: { [k: string]: Node }\n  ): Event[] {\n    const changeTree = ImmutableTree.fromObject(changedChildren);\n\n    return this.applyOperationToSyncPoints_(\n      new Merge(OperationSource.Server, path, changeTree)\n    );\n  }\n\n  /**\n   * Apply a listen complete for a query\n   *\n   * @param {!Path} path\n   * @return {!Array.<!Event>} Events to raise.\n   */\n  applyListenComplete(path: Path): Event[] {\n    return this.applyOperationToSyncPoints_(\n      new ListenComplete(OperationSource.Server, path)\n    );\n  }\n\n  /**\n   * Apply new server data for the specified tagged query.\n   *\n   * @param {!Path} path\n   * @param {!Node} snap\n   * @param {!number} tag\n   * @return {!Array.<!Event>} Events to raise.\n   */\n  applyTaggedQueryOverwrite(path: Path, snap: Node, tag: number): Event[] {\n    const queryKey = this.queryKeyForTag_(tag);\n    if (queryKey != null) {\n      const r = SyncTree.parseQueryKey_(queryKey);\n      const queryPath = r.path,\n        queryId = r.queryId;\n      const relativePath = Path.relativePath(queryPath, path);\n      const op = new Overwrite(\n        OperationSource.forServerTaggedQuery(queryId),\n        relativePath,\n        snap\n      );\n      return this.applyTaggedOperation_(queryPath, op);\n    } else {\n      // Query must have been removed already\n      return [];\n    }\n  }\n\n  /**\n   * Apply server data to be merged in for the specified tagged query.\n   *\n   * @param {!Path} path\n   * @param {!Object.<string, !Node>} changedChildren\n   * @param {!number} tag\n   * @return {!Array.<!Event>} Events to raise.\n   */\n  applyTaggedQueryMerge(\n    path: Path,\n    changedChildren: { [k: string]: Node },\n    tag: number\n  ): Event[] {\n    const queryKey = this.queryKeyForTag_(tag);\n    if (queryKey) {\n      const r = SyncTree.parseQueryKey_(queryKey);\n      const queryPath = r.path,\n        queryId = r.queryId;\n      const relativePath = Path.relativePath(queryPath, path);\n      const changeTree = ImmutableTree.fromObject(changedChildren);\n      const op = new Merge(\n        OperationSource.forServerTaggedQuery(queryId),\n        relativePath,\n        changeTree\n      );\n      return this.applyTaggedOperation_(queryPath, op);\n    } else {\n      // We've already removed the query. No big deal, ignore the update\n      return [];\n    }\n  }\n\n  /**\n   * Apply a listen complete for a tagged query\n   *\n   * @param {!Path} path\n   * @param {!number} tag\n   * @return {!Array.<!Event>} Events to raise.\n   */\n  applyTaggedListenComplete(path: Path, tag: number): Event[] {\n    const queryKey = this.queryKeyForTag_(tag);\n    if (queryKey) {\n      const r = SyncTree.parseQueryKey_(queryKey);\n      const queryPath = r.path,\n        queryId = r.queryId;\n      const relativePath = Path.relativePath(queryPath, path);\n      const op = new ListenComplete(\n        OperationSource.forServerTaggedQuery(queryId),\n        relativePath\n      );\n      return this.applyTaggedOperation_(queryPath, op);\n    } else {\n      // We've already removed the query. No big deal, ignore the update\n      return [];\n    }\n  }\n\n  /**\n   * Add an event callback for the specified query.\n   *\n   * @param {!Query} query\n   * @param {!EventRegistration} eventRegistration\n   * @return {!Array.<!Event>} Events to raise.\n   */\n  addEventRegistration(\n    query: Query,\n    eventRegistration: EventRegistration\n  ): Event[] {\n    const path = query.path;\n\n    let serverCache: Node | null = null;\n    let foundAncestorDefaultView = false;\n    // Any covering writes will necessarily be at the root, so really all we need to find is the server cache.\n    // Consider optimizing this once there's a better understanding of what actual behavior will be.\n    this.syncPointTree_.foreachOnPath(path, function(pathToSyncPoint, sp) {\n      const relativePath = Path.relativePath(pathToSyncPoint, path);\n      serverCache = serverCache || sp.getCompleteServerCache(relativePath);\n      foundAncestorDefaultView =\n        foundAncestorDefaultView || sp.hasCompleteView();\n    });\n    let syncPoint = this.syncPointTree_.get(path);\n    if (!syncPoint) {\n      syncPoint = new SyncPoint();\n      this.syncPointTree_ = this.syncPointTree_.set(path, syncPoint);\n    } else {\n      foundAncestorDefaultView =\n        foundAncestorDefaultView || syncPoint.hasCompleteView();\n      serverCache = serverCache || syncPoint.getCompleteServerCache(Path.Empty);\n    }\n\n    let serverCacheComplete;\n    if (serverCache != null) {\n      serverCacheComplete = true;\n    } else {\n      serverCacheComplete = false;\n      serverCache = ChildrenNode.EMPTY_NODE;\n      const subtree = this.syncPointTree_.subtree(path);\n      subtree.foreachChild(function(childName, childSyncPoint) {\n        const completeCache = childSyncPoint.getCompleteServerCache(Path.Empty);\n        if (completeCache) {\n          serverCache = serverCache.updateImmediateChild(\n            childName,\n            completeCache\n          );\n        }\n      });\n    }\n\n    const viewAlreadyExists = syncPoint.viewExistsForQuery(query);\n    if (!viewAlreadyExists && !query.getQueryParams().loadsAllData()) {\n      // We need to track a tag for this query\n      const queryKey = SyncTree.makeQueryKey_(query);\n      assert(\n        !(queryKey in this.queryToTagMap_),\n        'View does not exist, but we have a tag'\n      );\n      const tag = SyncTree.getNextQueryTag_();\n      this.queryToTagMap_[queryKey] = tag;\n      // Coerce to string to avoid sparse arrays.\n      this.tagToQueryMap_['_' + tag] = queryKey;\n    }\n    const writesCache = this.pendingWriteTree_.childWrites(path);\n    let events = syncPoint.addEventRegistration(\n      query,\n      eventRegistration,\n      writesCache,\n      serverCache,\n      serverCacheComplete\n    );\n    if (!viewAlreadyExists && !foundAncestorDefaultView) {\n      const view /** @type !View */ = syncPoint.viewForQuery(query);\n      events = events.concat(this.setupListener_(query, view));\n    }\n    return events;\n  }\n\n  /**\n   * Remove event callback(s).\n   *\n   * If query is the default query, we'll check all queries for the specified eventRegistration.\n   * If eventRegistration is null, we'll remove all callbacks for the specified query/queries.\n   *\n   * @param {!Query} query\n   * @param {?EventRegistration} eventRegistration If null, all callbacks are removed.\n   * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.\n   * @return {!Array.<!Event>} Cancel events, if cancelError was provided.\n   */\n  removeEventRegistration(\n    query: Query,\n    eventRegistration: EventRegistration | null,\n    cancelError?: Error\n  ): Event[] {\n    // Find the syncPoint first. Then deal with whether or not it has matching listeners\n    const path = query.path;\n    const maybeSyncPoint = this.syncPointTree_.get(path);\n    let cancelEvents: Event[] = [];\n    // A removal on a default query affects all queries at that location. A removal on an indexed query, even one without\n    // other query constraints, does *not* affect all queries at that location. So this check must be for 'default', and\n    // not loadsAllData().\n    if (\n      maybeSyncPoint &&\n      (query.queryIdentifier() === 'default' ||\n        maybeSyncPoint.viewExistsForQuery(query))\n    ) {\n      /**\n       * @type {{removed: !Array.<!Query>, events: !Array.<!Event>}}\n       */\n      const removedAndEvents = maybeSyncPoint.removeEventRegistration(\n        query,\n        eventRegistration,\n        cancelError\n      );\n      if (maybeSyncPoint.isEmpty()) {\n        this.syncPointTree_ = this.syncPointTree_.remove(path);\n      }\n      const removed = removedAndEvents.removed;\n      cancelEvents = removedAndEvents.events;\n      // We may have just removed one of many listeners and can short-circuit this whole process\n      // We may also not have removed a default listener, in which case all of the descendant listeners should already be\n      // properly set up.\n      //\n      // Since indexed queries can shadow if they don't have other query constraints, check for loadsAllData(), instead of\n      // queryId === 'default'\n      const removingDefault =\n        -1 !==\n        removed.findIndex(function(query) {\n          return query.getQueryParams().loadsAllData();\n        });\n      const covered = this.syncPointTree_.findOnPath(path, function(\n        relativePath,\n        parentSyncPoint\n      ) {\n        return parentSyncPoint.hasCompleteView();\n      });\n\n      if (removingDefault && !covered) {\n        const subtree = this.syncPointTree_.subtree(path);\n        // There are potentially child listeners. Determine what if any listens we need to send before executing the\n        // removal\n        if (!subtree.isEmpty()) {\n          // We need to fold over our subtree and collect the listeners to send\n          const newViews = this.collectDistinctViewsForSubTree_(subtree);\n\n          // Ok, we've collected all the listens we need. Set them up.\n          for (let i = 0; i < newViews.length; ++i) {\n            const view = newViews[i],\n              newQuery = view.getQuery();\n            const listener = this.createListenerForView_(view);\n            this.listenProvider_.startListening(\n              SyncTree.queryForListening_(newQuery),\n              this.tagForQuery_(newQuery),\n              listener.hashFn,\n              listener.onComplete\n            );\n          }\n        } else {\n          // There's nothing below us, so nothing we need to start listening on\n        }\n      }\n      // If we removed anything and we're not covered by a higher up listen, we need to stop listening on this query\n      // The above block has us covered in terms of making sure we're set up on listens lower in the tree.\n      // Also, note that if we have a cancelError, it's already been removed at the provider level.\n      if (!covered && removed.length > 0 && !cancelError) {\n        // If we removed a default, then we weren't listening on any of the other queries here. Just cancel the one\n        // default. Otherwise, we need to iterate through and cancel each individual query\n        if (removingDefault) {\n          // We don't tag default listeners\n          const defaultTag: number | null = null;\n          this.listenProvider_.stopListening(\n            SyncTree.queryForListening_(query),\n            defaultTag\n          );\n        } else {\n          removed.forEach((queryToRemove: Query) => {\n            const tagToRemove = this.queryToTagMap_[\n              SyncTree.makeQueryKey_(queryToRemove)\n            ];\n            this.listenProvider_.stopListening(\n              SyncTree.queryForListening_(queryToRemove),\n              tagToRemove\n            );\n          });\n        }\n      }\n      // Now, clear all of the tags we're tracking for the removed listens\n      this.removeTags_(removed);\n    } else {\n      // No-op, this listener must've been already removed\n    }\n    return cancelEvents;\n  }\n\n  /**\n   * Returns a complete cache, if we have one, of the data at a particular path. The location must have a listener above\n   * it, but as this is only used by transaction code, that should always be the case anyways.\n   *\n   * Note: this method will *include* hidden writes from transaction with applyLocally set to false.\n   * @param {!Path} path The path to the data we want\n   * @param {Array.<number>=} writeIdsToExclude A specific set to be excluded\n   * @return {?Node}\n   */\n  calcCompleteEventCache(\n    path: Path,\n    writeIdsToExclude?: number[]\n  ): Node | null {\n    const includeHiddenSets = true;\n    const writeTree = this.pendingWriteTree_;\n    const serverCache = this.syncPointTree_.findOnPath(path, function(\n      pathSoFar,\n      syncPoint\n    ) {\n      const relativePath = Path.relativePath(pathSoFar, path);\n      const serverCache = syncPoint.getCompleteServerCache(relativePath);\n      if (serverCache) {\n        return serverCache;\n      }\n    });\n    return writeTree.calcCompleteEventCache(\n      path,\n      serverCache,\n      writeIdsToExclude,\n      includeHiddenSets\n    );\n  }\n\n  /**\n   * This collapses multiple unfiltered views into a single view, since we only need a single\n   * listener for them.\n   *\n   * @param {!ImmutableTree.<!SyncPoint>} subtree\n   * @return {!Array.<!View>}\n   * @private\n   */\n  private collectDistinctViewsForSubTree_(\n    subtree: ImmutableTree<SyncPoint>\n  ): View[] {\n    return subtree.fold<View[]>(\n      (relativePath, maybeChildSyncPoint, childMap) => {\n        if (maybeChildSyncPoint && maybeChildSyncPoint.hasCompleteView()) {\n          const completeView = maybeChildSyncPoint.getCompleteView();\n          return [completeView];\n        } else {\n          // No complete view here, flatten any deeper listens into an array\n          let views: View[] = [];\n          if (maybeChildSyncPoint) {\n            views = maybeChildSyncPoint.getQueryViews();\n          }\n          forEach(childMap, function(key: string, childViews: View[]) {\n            views = views.concat(childViews);\n          });\n          return views;\n        }\n      }\n    );\n  }\n\n  /**\n   * @param {!Array.<!Query>} queries\n   * @private\n   */\n  private removeTags_(queries: Query[]) {\n    for (let j = 0; j < queries.length; ++j) {\n      const removedQuery = queries[j];\n      if (!removedQuery.getQueryParams().loadsAllData()) {\n        // We should have a tag for this\n        const removedQueryKey = SyncTree.makeQueryKey_(removedQuery);\n        const removedQueryTag = this.queryToTagMap_[removedQueryKey];\n        delete this.queryToTagMap_[removedQueryKey];\n        delete this.tagToQueryMap_['_' + removedQueryTag];\n      }\n    }\n  }\n\n  /**\n   * Normalizes a query to a query we send the server for listening\n   * @param {!Query} query\n   * @return {!Query} The normalized query\n   * @private\n   */\n  private static queryForListening_(query: Query): Query {\n    if (\n      query.getQueryParams().loadsAllData() &&\n      !query.getQueryParams().isDefault()\n    ) {\n      // We treat queries that load all data as default queries\n      // Cast is necessary because ref() technically returns Firebase which is actually fb.api.Firebase which inherits\n      // from Query\n      return /** @type {!Query} */ query.getRef();\n    } else {\n      return query;\n    }\n  }\n\n  /**\n   * For a given new listen, manage the de-duplication of outstanding subscriptions.\n   *\n   * @param {!Query} query\n   * @param {!View} view\n   * @return {!Array.<!Event>} This method can return events to support synchronous data sources\n   * @private\n   */\n  private setupListener_(query: Query, view: View): Event[] {\n    const path = query.path;\n    const tag = this.tagForQuery_(query);\n    const listener = this.createListenerForView_(view);\n\n    const events = this.listenProvider_.startListening(\n      SyncTree.queryForListening_(query),\n      tag,\n      listener.hashFn,\n      listener.onComplete\n    );\n\n    const subtree = this.syncPointTree_.subtree(path);\n    // The root of this subtree has our query. We're here because we definitely need to send a listen for that, but we\n    // may need to shadow other listens as well.\n    if (tag) {\n      assert(\n        !subtree.value.hasCompleteView(),\n        \"If we're adding a query, it shouldn't be shadowed\"\n      );\n    } else {\n      // Shadow everything at or below this location, this is a default listener.\n      const queriesToStop = subtree.fold<Query[]>(function(\n        relativePath,\n        maybeChildSyncPoint,\n        childMap\n      ) {\n        if (\n          !relativePath.isEmpty() &&\n          maybeChildSyncPoint &&\n          maybeChildSyncPoint.hasCompleteView()\n        ) {\n          return [maybeChildSyncPoint.getCompleteView().getQuery()];\n        } else {\n          // No default listener here, flatten any deeper queries into an array\n          let queries: Query[] = [];\n          if (maybeChildSyncPoint) {\n            queries = queries.concat(\n              maybeChildSyncPoint.getQueryViews().map(view => view.getQuery())\n            );\n          }\n          forEach(childMap, function(key: string, childQueries: Query[]) {\n            queries = queries.concat(childQueries);\n          });\n          return queries;\n        }\n      });\n      for (let i = 0; i < queriesToStop.length; ++i) {\n        const queryToStop = queriesToStop[i];\n        this.listenProvider_.stopListening(\n          SyncTree.queryForListening_(queryToStop),\n          this.tagForQuery_(queryToStop)\n        );\n      }\n    }\n    return events;\n  }\n\n  /**\n   *\n   * @param {!View} view\n   * @return {{hashFn: function(), onComplete: function(!string, *)}}\n   * @private\n   */\n  private createListenerForView_(\n    view: View\n  ): { hashFn(): string; onComplete(a: string, b?: any): Event[] } {\n    const query = view.getQuery();\n    const tag = this.tagForQuery_(query);\n\n    return {\n      hashFn: () => {\n        const cache = view.getServerCache() || ChildrenNode.EMPTY_NODE;\n        return cache.hash();\n      },\n      onComplete: (status: string): Event[] => {\n        if (status === 'ok') {\n          if (tag) {\n            return this.applyTaggedListenComplete(query.path, tag);\n          } else {\n            return this.applyListenComplete(query.path);\n          }\n        } else {\n          // If a listen failed, kill all of the listeners here, not just the one that triggered the error.\n          // Note that this may need to be scoped to just this listener if we change permissions on filtered children\n          const error = errorForServerCode(status, query);\n          return this.removeEventRegistration(\n            query,\n            /*eventRegistration*/ null,\n            error\n          );\n        }\n      }\n    };\n  }\n\n  /**\n   * Given a query, computes a \"queryKey\" suitable for use in our queryToTagMap_.\n   * @private\n   * @param {!Query} query\n   * @return {string}\n   */\n  private static makeQueryKey_(query: Query): string {\n    return query.path.toString() + '$' + query.queryIdentifier();\n  }\n\n  /**\n   * Given a queryKey (created by makeQueryKey), parse it back into a path and queryId.\n   * @private\n   * @param {!string} queryKey\n   * @return {{queryId: !string, path: !Path}}\n   */\n  private static parseQueryKey_(\n    queryKey: string\n  ): { queryId: string; path: Path } {\n    const splitIndex = queryKey.indexOf('$');\n    assert(\n      splitIndex !== -1 && splitIndex < queryKey.length - 1,\n      'Bad queryKey.'\n    );\n    return {\n      queryId: queryKey.substr(splitIndex + 1),\n      path: new Path(queryKey.substr(0, splitIndex))\n    };\n  }\n\n  /**\n   * Return the query associated with the given tag, if we have one\n   * @param {!number} tag\n   * @return {?string}\n   * @private\n   */\n  private queryKeyForTag_(tag: number): string | null {\n    return this.tagToQueryMap_['_' + tag];\n  }\n\n  /**\n   * Return the tag associated with the given query.\n   * @param {!Query} query\n   * @return {?number}\n   * @private\n   */\n  private tagForQuery_(query: Query): number | null {\n    const queryKey = SyncTree.makeQueryKey_(query);\n    return safeGet(this.queryToTagMap_, queryKey);\n  }\n\n  /**\n   * Static tracker for next query tag.\n   * @type {number}\n   * @private\n   */\n  private static nextQueryTag_ = 1;\n\n  /**\n   * Static accessor for query tags.\n   * @return {number}\n   * @private\n   */\n  private static getNextQueryTag_(): number {\n    return SyncTree.nextQueryTag_++;\n  }\n\n  /**\n   * A helper method to apply tagged operations\n   *\n   * @param {!Path} queryPath\n   * @param {!Operation} operation\n   * @return {!Array.<!Event>}\n   * @private\n   */\n  private applyTaggedOperation_(\n    queryPath: Path,\n    operation: Operation\n  ): Event[] {\n    const syncPoint = this.syncPointTree_.get(queryPath);\n    assert(syncPoint, \"Missing sync point for query tag that we're tracking\");\n    const writesCache = this.pendingWriteTree_.childWrites(queryPath);\n    return syncPoint.applyOperation(\n      operation,\n      writesCache,\n      /*serverCache=*/ null\n    );\n  }\n\n  /**\n   * A helper method that visits all descendant and ancestor SyncPoints, applying the operation.\n   *\n   * NOTES:\n   * - Descendant SyncPoints will be visited first (since we raise events depth-first).\n\n   * - We call applyOperation() on each SyncPoint passing three things:\n   *   1. A version of the Operation that has been made relative to the SyncPoint location.\n   *   2. A WriteTreeRef of any writes we have cached at the SyncPoint location.\n   *   3. A snapshot Node with cached server data, if we have it.\n\n   * - We concatenate all of the events returned by each SyncPoint and return the result.\n   *\n   * @param {!Operation} operation\n   * @return {!Array.<!Event>}\n   * @private\n   */\n  private applyOperationToSyncPoints_(operation: Operation): Event[] {\n    return this.applyOperationHelper_(\n      operation,\n      this.syncPointTree_,\n      /*serverCache=*/ null,\n      this.pendingWriteTree_.childWrites(Path.Empty)\n    );\n  }\n\n  /**\n   * Recursive helper for applyOperationToSyncPoints_\n   *\n   * @private\n   * @param {!Operation} operation\n   * @param {ImmutableTree.<!SyncPoint>} syncPointTree\n   * @param {?Node} serverCache\n   * @param {!WriteTreeRef} writesCache\n   * @return {!Array.<!Event>}\n   */\n  private applyOperationHelper_(\n    operation: Operation,\n    syncPointTree: ImmutableTree<SyncPoint>,\n    serverCache: Node | null,\n    writesCache: WriteTreeRef\n  ): Event[] {\n    if (operation.path.isEmpty()) {\n      return this.applyOperationDescendantsHelper_(\n        operation,\n        syncPointTree,\n        serverCache,\n        writesCache\n      );\n    } else {\n      const syncPoint = syncPointTree.get(Path.Empty);\n\n      // If we don't have cached server data, see if we can get it from this SyncPoint.\n      if (serverCache == null && syncPoint != null) {\n        serverCache = syncPoint.getCompleteServerCache(Path.Empty);\n      }\n\n      let events: Event[] = [];\n      const childName = operation.path.getFront();\n      const childOperation = operation.operationForChild(childName);\n      const childTree = syncPointTree.children.get(childName);\n      if (childTree && childOperation) {\n        const childServerCache = serverCache\n          ? serverCache.getImmediateChild(childName)\n          : null;\n        const childWritesCache = writesCache.child(childName);\n        events = events.concat(\n          this.applyOperationHelper_(\n            childOperation,\n            childTree,\n            childServerCache,\n            childWritesCache\n          )\n        );\n      }\n\n      if (syncPoint) {\n        events = events.concat(\n          syncPoint.applyOperation(operation, writesCache, serverCache)\n        );\n      }\n\n      return events;\n    }\n  }\n\n  /**\n   * Recursive helper for applyOperationToSyncPoints_\n   *\n   * @private\n   * @param {!Operation} operation\n   * @param {ImmutableTree.<!SyncPoint>} syncPointTree\n   * @param {?Node} serverCache\n   * @param {!WriteTreeRef} writesCache\n   * @return {!Array.<!Event>}\n   */\n  private applyOperationDescendantsHelper_(\n    operation: Operation,\n    syncPointTree: ImmutableTree<SyncPoint>,\n    serverCache: Node | null,\n    writesCache: WriteTreeRef\n  ): Event[] {\n    const syncPoint = syncPointTree.get(Path.Empty);\n\n    // If we don't have cached server data, see if we can get it from this SyncPoint.\n    if (serverCache == null && syncPoint != null) {\n      serverCache = syncPoint.getCompleteServerCache(Path.Empty);\n    }\n\n    let events: Event[] = [];\n    syncPointTree.children.inorderTraversal((childName, childTree) => {\n      const childServerCache = serverCache\n        ? serverCache.getImmediateChild(childName)\n        : null;\n      const childWritesCache = writesCache.child(childName);\n      const childOperation = operation.operationForChild(childName);\n      if (childOperation) {\n        events = events.concat(\n          this.applyOperationDescendantsHelper_(\n            childOperation,\n            childTree,\n            childServerCache,\n            childWritesCache\n          )\n        );\n      }\n    });\n\n    if (syncPoint) {\n      events = events.concat(\n        syncPoint.applyOperation(operation, writesCache, serverCache)\n      );\n    }\n\n    return events;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { Path } from './util/Path';\nimport { Node } from './snap/Node';\n\n/**\n * Mutable object which basically just stores a reference to the \"latest\" immutable snapshot.\n *\n * @constructor\n */\nexport class SnapshotHolder {\n  private rootNode_: Node = ChildrenNode.EMPTY_NODE;\n\n  getNode(path: Path): Node {\n    return this.rootNode_.getChild(path);\n  }\n\n  updateSnapshot(path: Path, newSnapshotNode: Node) {\n    this.rootNode_ = this.rootNode_.updateChild(path, newSnapshotNode);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp } from '@firebase/app-types';\nimport { FirebaseAuthTokenData } from '@firebase/app-types/private';\nimport { log, warn } from './util/util';\n\n/**\n * Abstraction around FirebaseApp's token fetching capabilities.\n */\nexport class AuthTokenProvider {\n  /**\n   * @param {!FirebaseApp} app_\n   */\n  constructor(private app_: FirebaseApp) {}\n\n  /**\n   * @param {boolean} forceRefresh\n   * @return {!Promise<FirebaseAuthTokenData>}\n   */\n  getToken(forceRefresh: boolean): Promise<FirebaseAuthTokenData> {\n    return this.app_['INTERNAL']['getToken'](forceRefresh).then(\n      null,\n      // .catch\n      function(error) {\n        // TODO: Need to figure out all the cases this is raised and whether\n        // this makes sense.\n        if (error && error.code === 'auth/token-not-initialized') {\n          log('Got auth/token-not-initialized error.  Treating as null token.');\n          return null;\n        } else {\n          return Promise.reject(error);\n        }\n      }\n    );\n  }\n\n  addTokenChangeListener(listener: (token: string | null) => void) {\n    // TODO: We might want to wrap the listener and call it with no args to\n    // avoid a leaky abstraction, but that makes removing the listener harder.\n    this.app_['INTERNAL']['addAuthTokenListener'](listener);\n  }\n\n  removeTokenChangeListener(listener: (token: string | null) => void) {\n    this.app_['INTERNAL']['removeAuthTokenListener'](listener);\n  }\n\n  notifyForInvalidToken() {\n    let errorMessage =\n      'Provided authentication credentials for the app named \"' +\n      this.app_.name +\n      '\" are invalid. This usually indicates your app was not ' +\n      'initialized correctly. ';\n    if ('credential' in this.app_.options) {\n      errorMessage +=\n        'Make sure the \"credential\" property provided to initializeApp() ' +\n        'is authorized to access the specified \"databaseURL\" and is from the correct ' +\n        'project.';\n    } else if ('serviceAccount' in this.app_.options) {\n      errorMessage +=\n        'Make sure the \"serviceAccount\" property provided to initializeApp() ' +\n        'is authorized to access the specified \"databaseURL\" and is from the correct ' +\n        'project.';\n    } else {\n      errorMessage +=\n        'Make sure the \"apiKey\" and \"databaseURL\" properties provided to ' +\n        'initializeApp() match the values provided for your app at ' +\n        'https://console.firebase.google.com/.';\n    }\n    warn(errorMessage);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { deepCopy } from '@firebase/util';\nimport { contains } from '@firebase/util';\n\n/**\n * Tracks a collection of stats.\n *\n * @constructor\n */\nexport class StatsCollection {\n  private counters_: { [k: string]: number } = {};\n\n  incrementCounter(name: string, amount: number = 1) {\n    if (!contains(this.counters_, name)) this.counters_[name] = 0;\n\n    this.counters_[name] += amount;\n  }\n\n  get() {\n    return deepCopy(this.counters_);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { StatsCollection } from './StatsCollection';\nimport { RepoInfo } from '../RepoInfo';\n\nexport class StatsManager {\n  private static collections_: { [k: string]: StatsCollection } = {};\n  private static reporters_: { [k: string]: any } = {};\n\n  static getCollection(repoInfo: RepoInfo): StatsCollection {\n    const hashString = repoInfo.toString();\n\n    if (!this.collections_[hashString]) {\n      this.collections_[hashString] = new StatsCollection();\n    }\n\n    return this.collections_[hashString];\n  }\n\n  static getOrCreateReporter<T>(\n    repoInfo: RepoInfo,\n    creatorFunction: () => T\n  ): T {\n    const hashString = repoInfo.toString();\n\n    if (!this.reporters_[hashString]) {\n      this.reporters_[hashString] = creatorFunction();\n    }\n\n    return this.reporters_[hashString];\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { clone, forEach } from '@firebase/util';\nimport { StatsCollection } from './StatsCollection';\n\n/**\n * Returns the delta from the previous call to get stats.\n *\n * @param collection_ The collection to \"listen\" to.\n * @constructor\n */\nexport class StatsListener {\n  private last_: { [k: string]: number } | null = null;\n\n  constructor(private collection_: StatsCollection) {}\n\n  get(): { [k: string]: number } {\n    const newStats = this.collection_.get();\n\n    const delta: typeof newStats = clone(newStats);\n    if (this.last_) {\n      forEach(this.last_, (stat: string, value: number) => {\n        delta[stat] = delta[stat] - value;\n      });\n    }\n    this.last_ = newStats;\n\n    return delta;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { contains, forEach } from '@firebase/util';\nimport { setTimeoutNonBlocking } from '../util/util';\nimport { StatsListener } from './StatsListener';\nimport { StatsCollection } from './StatsCollection';\nimport { ServerActions } from '../ServerActions';\n\n// Assuming some apps may have a short amount of time on page, and a bulk of firebase operations probably\n// happen on page load, we try to report our first set of stats pretty quickly, but we wait at least 10\n// seconds to try to ensure the Firebase connection is established / settled.\nconst FIRST_STATS_MIN_TIME = 10 * 1000;\nconst FIRST_STATS_MAX_TIME = 30 * 1000;\n\n// We'll continue to report stats on average every 5 minutes.\nconst REPORT_STATS_INTERVAL = 5 * 60 * 1000;\n\n/**\n * @constructor\n */\nexport class StatsReporter {\n  private statsListener_: StatsListener;\n  private statsToReport_: { [k: string]: boolean } = {};\n\n  /**\n   * @param collection\n   * @param server_\n   */\n  constructor(collection: StatsCollection, private server_: ServerActions) {\n    this.statsListener_ = new StatsListener(collection);\n\n    const timeout =\n      FIRST_STATS_MIN_TIME +\n      (FIRST_STATS_MAX_TIME - FIRST_STATS_MIN_TIME) * Math.random();\n    setTimeoutNonBlocking(this.reportStats_.bind(this), Math.floor(timeout));\n  }\n\n  includeStat(stat: string) {\n    this.statsToReport_[stat] = true;\n  }\n\n  private reportStats_() {\n    const stats = this.statsListener_.get();\n    const reportedStats: typeof stats = {};\n    let haveStatsToReport = false;\n\n    forEach(stats, (stat: string, value: number) => {\n      if (value > 0 && contains(this.statsToReport_, stat)) {\n        reportedStats[stat] = value;\n        haveStatsToReport = true;\n      }\n    });\n\n    if (haveStatsToReport) {\n      this.server_.reportStats(reportedStats);\n    }\n\n    // queue our next run.\n    setTimeoutNonBlocking(\n      this.reportStats_.bind(this),\n      Math.floor(Math.random() * 2 * REPORT_STATS_INTERVAL)\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../util/Path';\nimport { log, logger, exceptionGuard } from '../util/util';\nimport { Event } from './Event';\n\n/**\n * The event queue serves a few purposes:\n * 1. It ensures we maintain event order in the face of event callbacks doing operations that result in more\n *    events being queued.\n * 2. raiseQueuedEvents() handles being called reentrantly nicely.  That is, if in the course of raising events,\n *    raiseQueuedEvents() is called again, the \"inner\" call will pick up raising events where the \"outer\" call\n *    left off, ensuring that the events are still raised synchronously and in order.\n * 3. You can use raiseEventsAtPath and raiseEventsForChangedPath to ensure only relevant previously-queued\n *    events are raised synchronously.\n *\n * NOTE: This can all go away if/when we move to async events.\n *\n * @constructor\n */\nexport class EventQueue {\n  /**\n   * @private\n   * @type {!Array.<EventList>}\n   */\n  private eventLists_: EventList[] = [];\n\n  /**\n   * Tracks recursion depth of raiseQueuedEvents_, for debugging purposes.\n   * @private\n   * @type {!number}\n   */\n  private recursionDepth_ = 0;\n\n  /**\n   * @param {!Array.<Event>} eventDataList The new events to queue.\n   */\n  queueEvents(eventDataList: Event[]) {\n    // We group events by path, storing them in a single EventList, to make it easier to skip over them quickly.\n    let currList = null;\n    for (let i = 0; i < eventDataList.length; i++) {\n      const eventData = eventDataList[i];\n      const eventPath = eventData.getPath();\n      if (currList !== null && !eventPath.equals(currList.getPath())) {\n        this.eventLists_.push(currList);\n        currList = null;\n      }\n\n      if (currList === null) {\n        currList = new EventList(eventPath);\n      }\n\n      currList.add(eventData);\n    }\n    if (currList) {\n      this.eventLists_.push(currList);\n    }\n  }\n\n  /**\n   * Queues the specified events and synchronously raises all events (including previously queued ones)\n   * for the specified path.\n   *\n   * It is assumed that the new events are all for the specified path.\n   *\n   * @param {!Path} path The path to raise events for.\n   * @param {!Array.<Event>} eventDataList The new events to raise.\n   */\n  raiseEventsAtPath(path: Path, eventDataList: Event[]) {\n    this.queueEvents(eventDataList);\n    this.raiseQueuedEventsMatchingPredicate_((eventPath: Path) =>\n      eventPath.equals(path)\n    );\n  }\n\n  /**\n   * Queues the specified events and synchronously raises all events (including previously queued ones) for\n   * locations related to the specified change path (i.e. all ancestors and descendants).\n   *\n   * It is assumed that the new events are all related (ancestor or descendant) to the specified path.\n   *\n   * @param {!Path} changedPath The path to raise events for.\n   * @param {!Array.<!Event>} eventDataList The events to raise\n   */\n  raiseEventsForChangedPath(changedPath: Path, eventDataList: Event[]) {\n    this.queueEvents(eventDataList);\n\n    this.raiseQueuedEventsMatchingPredicate_((eventPath: Path) => {\n      return eventPath.contains(changedPath) || changedPath.contains(eventPath);\n    });\n  }\n\n  /**\n   * @param {!function(!Path):boolean} predicate\n   * @private\n   */\n  private raiseQueuedEventsMatchingPredicate_(\n    predicate: (path: Path) => boolean\n  ) {\n    this.recursionDepth_++;\n\n    let sentAll = true;\n    for (let i = 0; i < this.eventLists_.length; i++) {\n      const eventList = this.eventLists_[i];\n      if (eventList) {\n        const eventPath = eventList.getPath();\n        if (predicate(eventPath)) {\n          this.eventLists_[i].raise();\n          this.eventLists_[i] = null;\n        } else {\n          sentAll = false;\n        }\n      }\n    }\n\n    if (sentAll) {\n      this.eventLists_ = [];\n    }\n\n    this.recursionDepth_--;\n  }\n}\n\n/**\n * @param {!Path} path\n * @constructor\n */\nexport class EventList {\n  /**\n   * @type {!Array.<Event>}\n   * @private\n   */\n  private events_: Event[] = [];\n\n  constructor(private readonly path_: Path) {}\n\n  /**\n   * @param {!Event} eventData\n   */\n  add(eventData: Event) {\n    this.events_.push(eventData);\n  }\n\n  /**\n   * Iterates through the list and raises each event\n   */\n  raise() {\n    for (let i = 0; i < this.events_.length; i++) {\n      const eventData = this.events_[i];\n      if (eventData !== null) {\n        this.events_[i] = null;\n        const eventFn = eventData.getEventRunner();\n        if (logger) {\n          log('event: ' + eventData.toString());\n        }\n        exceptionGuard(eventFn);\n      }\n    }\n  }\n\n  /**\n   * @return {!Path}\n   */\n  getPath(): Path {\n    return this.path_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\n/**\n * Base class to be used if you want to emit events. Call the constructor with\n * the set of allowed event names.\n */\nexport abstract class EventEmitter {\n  private listeners_: {\n    [eventType: string]: Array<{\n      callback(...args: any[]): void;\n      context: any;\n    }>;\n  } = {};\n\n  /**\n   * @param {!Array.<string>} allowedEvents_\n   */\n  constructor(private allowedEvents_: Array<string>) {\n    assert(\n      Array.isArray(allowedEvents_) && allowedEvents_.length > 0,\n      'Requires a non-empty array'\n    );\n  }\n\n  /**\n   * To be overridden by derived classes in order to fire an initial event when\n   * somebody subscribes for data.\n   *\n   * @param {!string} eventType\n   * @return {Array.<*>} Array of parameters to trigger initial event with.\n   */\n  abstract getInitialEvent(eventType: string): any[];\n\n  /**\n   * To be called by derived classes to trigger events.\n   * @param {!string} eventType\n   * @param {...*} var_args\n   */\n  protected trigger(eventType: string, ...var_args: any[]) {\n    if (Array.isArray(this.listeners_[eventType])) {\n      // Clone the list, since callbacks could add/remove listeners.\n      const listeners = [...this.listeners_[eventType]];\n\n      for (let i = 0; i < listeners.length; i++) {\n        listeners[i].callback.apply(listeners[i].context, var_args);\n      }\n    }\n  }\n\n  on(eventType: string, callback: (a: any) => void, context: any) {\n    this.validateEventType_(eventType);\n    this.listeners_[eventType] = this.listeners_[eventType] || [];\n    this.listeners_[eventType].push({ callback, context });\n\n    const eventData = this.getInitialEvent(eventType);\n    if (eventData) {\n      callback.apply(context, eventData);\n    }\n  }\n\n  off(eventType: string, callback: (a: any) => void, context: any) {\n    this.validateEventType_(eventType);\n    const listeners = this.listeners_[eventType] || [];\n    for (let i = 0; i < listeners.length; i++) {\n      if (\n        listeners[i].callback === callback &&\n        (!context || context === listeners[i].context)\n      ) {\n        listeners.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  private validateEventType_(eventType: string) {\n    assert(\n      this.allowedEvents_.find(function(et) {\n        return et === eventType;\n      }),\n      'Unknown event: ' + eventType\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EventEmitter } from './EventEmitter';\nimport { assert } from '@firebase/util';\n\ndeclare const document: any;\n\n/**\n * @extends {EventEmitter}\n */\nexport class VisibilityMonitor extends EventEmitter {\n  private visible_: boolean;\n\n  static getInstance() {\n    return new VisibilityMonitor();\n  }\n\n  constructor() {\n    super(['visible']);\n    let hidden: string;\n    let visibilityChange: string;\n    if (\n      typeof document !== 'undefined' &&\n      typeof document.addEventListener !== 'undefined'\n    ) {\n      if (typeof document['hidden'] !== 'undefined') {\n        // Opera 12.10 and Firefox 18 and later support\n        visibilityChange = 'visibilitychange';\n        hidden = 'hidden';\n      } else if (typeof document['mozHidden'] !== 'undefined') {\n        visibilityChange = 'mozvisibilitychange';\n        hidden = 'mozHidden';\n      } else if (typeof document['msHidden'] !== 'undefined') {\n        visibilityChange = 'msvisibilitychange';\n        hidden = 'msHidden';\n      } else if (typeof document['webkitHidden'] !== 'undefined') {\n        visibilityChange = 'webkitvisibilitychange';\n        hidden = 'webkitHidden';\n      }\n    }\n\n    // Initially, we always assume we are visible. This ensures that in browsers\n    // without page visibility support or in cases where we are never visible\n    // (e.g. chrome extension), we act as if we are visible, i.e. don't delay\n    // reconnects\n    this.visible_ = true;\n\n    if (visibilityChange) {\n      document.addEventListener(\n        visibilityChange,\n        () => {\n          const visible = !document[hidden];\n          if (visible !== this.visible_) {\n            this.visible_ = visible;\n            this.trigger('visible', visible);\n          }\n        },\n        false\n      );\n    }\n  }\n\n  /**\n   * @param {!string} eventType\n   * @return {Array.<boolean>}\n   */\n  getInitialEvent(eventType: string): boolean[] {\n    assert(eventType === 'visible', 'Unknown event type: ' + eventType);\n    return [this.visible_];\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { EventEmitter } from './EventEmitter';\nimport { isMobileCordova } from '@firebase/util';\n\n/**\n * Monitors online state (as reported by window.online/offline events).\n *\n * The expectation is that this could have many false positives (thinks we are online\n * when we're not), but no false negatives.  So we can safely use it to determine when\n * we definitely cannot reach the internet.\n *\n * @extends {EventEmitter}\n */\nexport class OnlineMonitor extends EventEmitter {\n  private online_ = true;\n\n  static getInstance() {\n    return new OnlineMonitor();\n  }\n\n  constructor() {\n    super(['online']);\n\n    // We've had repeated complaints that Cordova apps can get stuck \"offline\", e.g.\n    // https://forum.ionicframework.com/t/firebase-connection-is-lost-and-never-come-back/43810\n    // It would seem that the 'online' event does not always fire consistently. So we disable it\n    // for Cordova.\n    if (\n      typeof window !== 'undefined' &&\n      typeof window.addEventListener !== 'undefined' &&\n      !isMobileCordova()\n    ) {\n      window.addEventListener(\n        'online',\n        () => {\n          if (!this.online_) {\n            this.online_ = true;\n            this.trigger('online', true);\n          }\n        },\n        false\n      );\n\n      window.addEventListener(\n        'offline',\n        () => {\n          if (this.online_) {\n            this.online_ = false;\n            this.trigger('online', false);\n          }\n        },\n        false\n      );\n    }\n  }\n\n  /**\n   * @param {!string} eventType\n   * @return {Array.<boolean>}\n   */\n  getInitialEvent(eventType: string): boolean[] {\n    assert(eventType === 'online', 'Unknown event type: ' + eventType);\n    return [this.online_];\n  }\n\n  /**\n   * @return {boolean}\n   */\n  currentlyOnline(): boolean {\n    return this.online_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { exceptionGuard } from '../../core/util/util';\n\n/**\n * This class ensures the packets from the server arrive in order\n * This class takes data from the server and ensures it gets passed into the callbacks in order.\n * @constructor\n */\nexport class PacketReceiver {\n  pendingResponses: any[] = [];\n  currentResponseNum = 0;\n  closeAfterResponse = -1;\n  onClose: (() => void) | null = null;\n\n  /**\n   * @param onMessage_\n   */\n  constructor(private onMessage_: (a: Object) => void) {}\n\n  closeAfter(responseNum: number, callback: () => void) {\n    this.closeAfterResponse = responseNum;\n    this.onClose = callback;\n    if (this.closeAfterResponse < this.currentResponseNum) {\n      this.onClose();\n      this.onClose = null;\n    }\n  }\n\n  /**\n   * Each message from the server comes with a response number, and an array of data. The responseNumber\n   * allows us to ensure that we process them in the right order, since we can't be guaranteed that all\n   * browsers will respond in the same order as the requests we sent\n   * @param {number} requestNum\n   * @param {Array} data\n   */\n  handleResponse(requestNum: number, data: any[]) {\n    this.pendingResponses[requestNum] = data;\n    while (this.pendingResponses[this.currentResponseNum]) {\n      const toProcess = this.pendingResponses[this.currentResponseNum];\n      delete this.pendingResponses[this.currentResponseNum];\n      for (let i = 0; i < toProcess.length; ++i) {\n        if (toProcess[i]) {\n          exceptionGuard(() => {\n            this.onMessage_(toProcess[i]);\n          });\n        }\n      }\n      if (this.currentResponseNum === this.closeAfterResponse) {\n        if (this.onClose) {\n          this.onClose();\n          this.onClose = null;\n        }\n        break;\n      }\n      this.currentResponseNum++;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  executeWhenDOMReady,\n  isChromeExtensionContentScript,\n  isWindowsStoreApp,\n  log,\n  logWrapper,\n  LUIDGenerator,\n  splitStringBySize\n} from '../core/util/util';\nimport { CountedSet } from '../core/util/CountedSet';\nimport { StatsManager } from '../core/stats/StatsManager';\nimport { PacketReceiver } from './polling/PacketReceiver';\nimport {\n  FORGE_DOMAIN,\n  FORGE_REF,\n  LAST_SESSION_PARAM,\n  LONG_POLLING,\n  PROTOCOL_VERSION,\n  REFERER_PARAM,\n  TRANSPORT_SESSION_PARAM,\n  VERSION_PARAM\n} from './Constants';\nimport { base64Encode, stringify } from '@firebase/util';\nimport { isNodeSdk } from '@firebase/util';\nimport { Transport } from './Transport';\nimport { RepoInfo } from '../core/RepoInfo';\nimport { StatsCollection } from '../core/stats/StatsCollection';\n\n// URL query parameters associated with longpolling\nexport const FIREBASE_LONGPOLL_START_PARAM = 'start';\nexport const FIREBASE_LONGPOLL_CLOSE_COMMAND = 'close';\nexport const FIREBASE_LONGPOLL_COMMAND_CB_NAME = 'pLPCommand';\nexport const FIREBASE_LONGPOLL_DATA_CB_NAME = 'pRTLPCB';\nexport const FIREBASE_LONGPOLL_ID_PARAM = 'id';\nexport const FIREBASE_LONGPOLL_PW_PARAM = 'pw';\nexport const FIREBASE_LONGPOLL_SERIAL_PARAM = 'ser';\nexport const FIREBASE_LONGPOLL_CALLBACK_ID_PARAM = 'cb';\nexport const FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM = 'seg';\nexport const FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET = 'ts';\nexport const FIREBASE_LONGPOLL_DATA_PARAM = 'd';\nexport const FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM = 'disconn';\nexport const FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM = 'dframe';\n\n//Data size constants.\n//TODO: Perf: the maximum length actually differs from browser to browser.\n// We should check what browser we're on and set accordingly.\nconst MAX_URL_DATA_SIZE = 1870;\nconst SEG_HEADER_SIZE = 30; //ie: &seg=8299234&ts=982389123&d=\nconst MAX_PAYLOAD_SIZE = MAX_URL_DATA_SIZE - SEG_HEADER_SIZE;\n\n/**\n * Keepalive period\n * send a fresh request at minimum every 25 seconds. Opera has a maximum request\n * length of 30 seconds that we can't exceed.\n * @const\n * @type {number}\n */\nconst KEEPALIVE_REQUEST_INTERVAL = 25000;\n\n/**\n * How long to wait before aborting a long-polling connection attempt.\n * @const\n * @type {number}\n */\nconst LP_CONNECT_TIMEOUT = 30000;\n\n/**\n * This class manages a single long-polling connection.\n *\n * @constructor\n * @implements {Transport}\n */\nexport class BrowserPollConnection implements Transport {\n  bytesSent = 0;\n  bytesReceived = 0;\n  urlFn: (params: object) => string;\n  scriptTagHolder: FirebaseIFrameScriptHolder;\n  myDisconnFrame: HTMLIFrameElement;\n  curSegmentNum: number;\n  myPacketOrderer: PacketReceiver;\n  id: string;\n  password: string;\n  private log_: (...a: any[]) => void;\n  private stats_: StatsCollection;\n  private everConnected_ = false;\n  private isClosed_: boolean;\n  private connectTimeoutTimer_: number | null;\n  private onDisconnect_: ((a?: boolean) => void) | null;\n\n  /**\n   * @param {string} connId An identifier for this connection, used for logging\n   * @param {RepoInfo} repoInfo The info for the endpoint to send data to.\n   * @param {string=} transportSessionId Optional transportSessionid if we are reconnecting for an existing\n   *                                         transport session\n   * @param {string=}  lastSessionId Optional lastSessionId if the PersistentConnection has already created a\n   *                                     connection previously\n   */\n  constructor(\n    public connId: string,\n    public repoInfo: RepoInfo,\n    public transportSessionId?: string,\n    public lastSessionId?: string\n  ) {\n    this.log_ = logWrapper(connId);\n    this.stats_ = StatsManager.getCollection(repoInfo);\n    this.urlFn = (params: { [k: string]: string }) =>\n      repoInfo.connectionURL(LONG_POLLING, params);\n  }\n\n  /**\n   *\n   * @param {function(Object)} onMessage Callback when messages arrive\n   * @param {function()} onDisconnect Callback with connection lost.\n   */\n  open(onMessage: (msg: Object) => void, onDisconnect: (a?: boolean) => void) {\n    this.curSegmentNum = 0;\n    this.onDisconnect_ = onDisconnect;\n    this.myPacketOrderer = new PacketReceiver(onMessage);\n    this.isClosed_ = false;\n\n    this.connectTimeoutTimer_ = setTimeout(() => {\n      this.log_('Timed out trying to connect.');\n      // Make sure we clear the host cache\n      this.onClosed_();\n      this.connectTimeoutTimer_ = null;\n    }, Math.floor(LP_CONNECT_TIMEOUT)) as any;\n\n    // Ensure we delay the creation of the iframe until the DOM is loaded.\n    executeWhenDOMReady(() => {\n      if (this.isClosed_) return;\n\n      //Set up a callback that gets triggered once a connection is set up.\n      this.scriptTagHolder = new FirebaseIFrameScriptHolder(\n        (...args) => {\n          const [command, arg1, arg2, arg3, arg4] = args;\n          this.incrementIncomingBytes_(args);\n          if (!this.scriptTagHolder) return; // we closed the connection.\n\n          if (this.connectTimeoutTimer_) {\n            clearTimeout(this.connectTimeoutTimer_);\n            this.connectTimeoutTimer_ = null;\n          }\n          this.everConnected_ = true;\n          if (command == FIREBASE_LONGPOLL_START_PARAM) {\n            this.id = arg1;\n            this.password = arg2;\n          } else if (command === FIREBASE_LONGPOLL_CLOSE_COMMAND) {\n            // Don't clear the host cache. We got a response from the server, so we know it's reachable\n            if (arg1) {\n              // We aren't expecting any more data (other than what the server's already in the process of sending us\n              // through our already open polls), so don't send any more.\n              this.scriptTagHolder.sendNewPolls = false;\n\n              // arg1 in this case is the last response number sent by the server. We should try to receive\n              // all of the responses up to this one before closing\n              this.myPacketOrderer.closeAfter(arg1, () => {\n                this.onClosed_();\n              });\n            } else {\n              this.onClosed_();\n            }\n          } else {\n            throw new Error('Unrecognized command received: ' + command);\n          }\n        },\n        (...args) => {\n          const [pN, data] = args;\n          this.incrementIncomingBytes_(args);\n          this.myPacketOrderer.handleResponse(pN, data);\n        },\n        () => {\n          this.onClosed_();\n        },\n        this.urlFn\n      );\n\n      //Send the initial request to connect. The serial number is simply to keep the browser from pulling previous results\n      //from cache.\n      const urlParams: { [k: string]: string | number } = {};\n      urlParams[FIREBASE_LONGPOLL_START_PARAM] = 't';\n      urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = Math.floor(\n        Math.random() * 100000000\n      );\n      if (this.scriptTagHolder.uniqueCallbackIdentifier)\n        urlParams[\n          FIREBASE_LONGPOLL_CALLBACK_ID_PARAM\n        ] = this.scriptTagHolder.uniqueCallbackIdentifier;\n      urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\n      if (this.transportSessionId) {\n        urlParams[TRANSPORT_SESSION_PARAM] = this.transportSessionId;\n      }\n      if (this.lastSessionId) {\n        urlParams[LAST_SESSION_PARAM] = this.lastSessionId;\n      }\n      if (\n        !isNodeSdk() &&\n        typeof location !== 'undefined' &&\n        location.href &&\n        location.href.indexOf(FORGE_DOMAIN) !== -1\n      ) {\n        urlParams[REFERER_PARAM] = FORGE_REF;\n      }\n      const connectURL = this.urlFn(urlParams);\n      this.log_('Connecting via long-poll to ' + connectURL);\n      this.scriptTagHolder.addTag(connectURL, () => {\n        /* do nothing */\n      });\n    });\n  }\n\n  /**\n   * Call this when a handshake has completed successfully and we want to consider the connection established\n   */\n  start() {\n    this.scriptTagHolder.startLongPoll(this.id, this.password);\n    this.addDisconnectPingFrame(this.id, this.password);\n  }\n\n  private static forceAllow_: boolean;\n\n  /**\n   * Forces long polling to be considered as a potential transport\n   */\n  static forceAllow() {\n    BrowserPollConnection.forceAllow_ = true;\n  }\n\n  private static forceDisallow_: boolean;\n\n  /**\n   * Forces longpolling to not be considered as a potential transport\n   */\n  static forceDisallow() {\n    BrowserPollConnection.forceDisallow_ = true;\n  }\n\n  // Static method, use string literal so it can be accessed in a generic way\n  static isAvailable() {\n    // NOTE: In React-Native there's normally no 'document', but if you debug a React-Native app in\n    // the Chrome debugger, 'document' is defined, but document.createElement is null (2015/06/08).\n    return (\n      BrowserPollConnection.forceAllow_ ||\n      (!BrowserPollConnection.forceDisallow_ &&\n        typeof document !== 'undefined' &&\n        document.createElement != null &&\n        !isChromeExtensionContentScript() &&\n        !isWindowsStoreApp() &&\n        !isNodeSdk())\n    );\n  }\n\n  /**\n   * No-op for polling\n   */\n  markConnectionHealthy() {}\n\n  /**\n   * Stops polling and cleans up the iframe\n   * @private\n   */\n  private shutdown_() {\n    this.isClosed_ = true;\n\n    if (this.scriptTagHolder) {\n      this.scriptTagHolder.close();\n      this.scriptTagHolder = null;\n    }\n\n    //remove the disconnect frame, which will trigger an XHR call to the server to tell it we're leaving.\n    if (this.myDisconnFrame) {\n      document.body.removeChild(this.myDisconnFrame);\n      this.myDisconnFrame = null;\n    }\n\n    if (this.connectTimeoutTimer_) {\n      clearTimeout(this.connectTimeoutTimer_);\n      this.connectTimeoutTimer_ = null;\n    }\n  }\n\n  /**\n   * Triggered when this transport is closed\n   * @private\n   */\n  private onClosed_() {\n    if (!this.isClosed_) {\n      this.log_('Longpoll is closing itself');\n      this.shutdown_();\n\n      if (this.onDisconnect_) {\n        this.onDisconnect_(this.everConnected_);\n        this.onDisconnect_ = null;\n      }\n    }\n  }\n\n  /**\n   * External-facing close handler. RealTime has requested we shut down. Kill our connection and tell the server\n   * that we've left.\n   */\n  close() {\n    if (!this.isClosed_) {\n      this.log_('Longpoll is being closed.');\n      this.shutdown_();\n    }\n  }\n\n  /**\n   * Send the JSON object down to the server. It will need to be stringified, base64 encoded, and then\n   * broken into chunks (since URLs have a small maximum length).\n   * @param {!Object} data The JSON data to transmit.\n   */\n  send(data: Object) {\n    const dataStr = stringify(data);\n    this.bytesSent += dataStr.length;\n    this.stats_.incrementCounter('bytes_sent', dataStr.length);\n\n    //first, lets get the base64-encoded data\n    const base64data = base64Encode(dataStr);\n\n    //We can only fit a certain amount in each URL, so we need to split this request\n    //up into multiple pieces if it doesn't fit in one request.\n    const dataSegs = splitStringBySize(base64data, MAX_PAYLOAD_SIZE);\n\n    //Enqueue each segment for transmission. We assign each chunk a sequential ID and a total number\n    //of segments so that we can reassemble the packet on the server.\n    for (let i = 0; i < dataSegs.length; i++) {\n      this.scriptTagHolder.enqueueSegment(\n        this.curSegmentNum,\n        dataSegs.length,\n        dataSegs[i]\n      );\n      this.curSegmentNum++;\n    }\n  }\n\n  /**\n   * This is how we notify the server that we're leaving.\n   * We aren't able to send requests with DHTML on a window close event, but we can\n   * trigger XHR requests in some browsers (everything but Opera basically).\n   * @param {!string} id\n   * @param {!string} pw\n   */\n  addDisconnectPingFrame(id: string, pw: string) {\n    if (isNodeSdk()) return;\n    this.myDisconnFrame = document.createElement('iframe');\n    const urlParams: { [k: string]: string } = {};\n    urlParams[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM] = 't';\n    urlParams[FIREBASE_LONGPOLL_ID_PARAM] = id;\n    urlParams[FIREBASE_LONGPOLL_PW_PARAM] = pw;\n    this.myDisconnFrame.src = this.urlFn(urlParams);\n    this.myDisconnFrame.style.display = 'none';\n\n    document.body.appendChild(this.myDisconnFrame);\n  }\n\n  /**\n   * Used to track the bytes received by this client\n   * @param {*} args\n   * @private\n   */\n  private incrementIncomingBytes_(args: any) {\n    // TODO: This is an annoying perf hit just to track the number of incoming bytes.  Maybe it should be opt-in.\n    const bytesReceived = stringify(args).length;\n    this.bytesReceived += bytesReceived;\n    this.stats_.incrementCounter('bytes_received', bytesReceived);\n  }\n}\n\nexport interface IFrameElement extends HTMLIFrameElement {\n  doc: Document;\n}\n\n/*********************************************************************************************\n * A wrapper around an iframe that is used as a long-polling script holder.\n * @constructor\n *********************************************************************************************/\nexport class FirebaseIFrameScriptHolder {\n  //We maintain a count of all of the outstanding requests, because if we have too many active at once it can cause\n  //problems in some browsers.\n  /**\n   * @type {CountedSet.<number, number>}\n   */\n  outstandingRequests = new CountedSet<number, number>();\n\n  //A queue of the pending segments waiting for transmission to the server.\n  pendingSegs: { seg: number; ts: number; d: any }[] = [];\n\n  //A serial number. We use this for two things:\n  // 1) A way to ensure the browser doesn't cache responses to polls\n  // 2) A way to make the server aware when long-polls arrive in a different order than we started them. The\n  //    server needs to release both polls in this case or it will cause problems in Opera since Opera can only execute\n  //    JSONP code in the order it was added to the iframe.\n  currentSerial = Math.floor(Math.random() * 100000000);\n\n  // This gets set to false when we're \"closing down\" the connection (e.g. we're switching transports but there's still\n  // incoming data from the server that we're waiting for).\n  sendNewPolls = true;\n\n  uniqueCallbackIdentifier: number;\n  myIFrame: IFrameElement;\n  alive: boolean;\n  myID: string;\n  myPW: string;\n  commandCB: (command: string, ...args: any[]) => void;\n  onMessageCB: (...args: any[]) => void;\n\n  /**\n   * @param commandCB - The callback to be called when control commands are recevied from the server.\n   * @param onMessageCB - The callback to be triggered when responses arrive from the server.\n   * @param onDisconnect - The callback to be triggered when this tag holder is closed\n   * @param urlFn - A function that provides the URL of the endpoint to send data to.\n   */\n  constructor(\n    commandCB: (command: string, ...args: any[]) => void,\n    onMessageCB: (...args: any[]) => void,\n    public onDisconnect: () => void,\n    public urlFn: (a: object) => string\n  ) {\n    if (!isNodeSdk()) {\n      //Each script holder registers a couple of uniquely named callbacks with the window. These are called from the\n      //iframes where we put the long-polling script tags. We have two callbacks:\n      //   1) Command Callback - Triggered for control issues, like starting a connection.\n      //   2) Message Callback - Triggered when new data arrives.\n      this.uniqueCallbackIdentifier = LUIDGenerator();\n      (window as any)[\n        FIREBASE_LONGPOLL_COMMAND_CB_NAME + this.uniqueCallbackIdentifier\n      ] = commandCB;\n      (window as any)[\n        FIREBASE_LONGPOLL_DATA_CB_NAME + this.uniqueCallbackIdentifier\n      ] = onMessageCB;\n\n      //Create an iframe for us to add script tags to.\n      this.myIFrame = FirebaseIFrameScriptHolder.createIFrame_();\n\n      // Set the iframe's contents.\n      let script = '';\n      // if we set a javascript url, it's IE and we need to set the document domain. The javascript url is sufficient\n      // for ie9, but ie8 needs to do it again in the document itself.\n      if (\n        this.myIFrame.src &&\n        this.myIFrame.src.substr(0, 'javascript:'.length) === 'javascript:'\n      ) {\n        const currentDomain = document.domain;\n        script = '<script>document.domain=\"' + currentDomain + '\";</script>';\n      }\n      const iframeContents = '<html><body>' + script + '</body></html>';\n      try {\n        this.myIFrame.doc.open();\n        this.myIFrame.doc.write(iframeContents);\n        this.myIFrame.doc.close();\n      } catch (e) {\n        log('frame writing exception');\n        if (e.stack) {\n          log(e.stack);\n        }\n        log(e);\n      }\n    } else {\n      this.commandCB = commandCB;\n      this.onMessageCB = onMessageCB;\n    }\n  }\n\n  /**\n   * Each browser has its own funny way to handle iframes. Here we mush them all together into one object that I can\n   * actually use.\n   * @private\n   * @return {Element}\n   */\n  private static createIFrame_(): IFrameElement {\n    const iframe = document.createElement('iframe') as IFrameElement;\n    iframe.style.display = 'none';\n\n    // This is necessary in order to initialize the document inside the iframe\n    if (document.body) {\n      document.body.appendChild(iframe);\n      try {\n        // If document.domain has been modified in IE, this will throw an error, and we need to set the\n        // domain of the iframe's document manually. We can do this via a javascript: url as the src attribute\n        // Also note that we must do this *after* the iframe has been appended to the page. Otherwise it doesn't work.\n        const a = iframe.contentWindow.document;\n        if (!a) {\n          // Apologies for the log-spam, I need to do something to keep closure from optimizing out the assignment above.\n          log('No IE domain setting required');\n        }\n      } catch (e) {\n        const domain = document.domain;\n        iframe.src =\n          \"javascript:void((function(){document.open();document.domain='\" +\n          domain +\n          \"';document.close();})())\";\n      }\n    } else {\n      // LongPollConnection attempts to delay initialization until the document is ready, so hopefully this\n      // never gets hit.\n      throw 'Document body has not initialized. Wait to initialize Firebase until after the document is ready.';\n    }\n\n    // Get the document of the iframe in a browser-specific way.\n    if (iframe.contentDocument) {\n      (iframe as any).doc = iframe.contentDocument; // Firefox, Opera, Safari\n    } else if (iframe.contentWindow) {\n      (iframe as any).doc = iframe.contentWindow.document; // Internet Explorer\n    } else if ((iframe as any).document) {\n      (iframe as any).doc = (iframe as any).document; //others?\n    }\n\n    return iframe;\n  }\n\n  /**\n   * Cancel all outstanding queries and remove the frame.\n   */\n  close() {\n    //Mark this iframe as dead, so no new requests are sent.\n    this.alive = false;\n\n    if (this.myIFrame) {\n      //We have to actually remove all of the html inside this iframe before removing it from the\n      //window, or IE will continue loading and executing the script tags we've already added, which\n      //can lead to some errors being thrown. Setting innerHTML seems to be the easiest way to do this.\n      this.myIFrame.doc.body.innerHTML = '';\n      setTimeout(() => {\n        if (this.myIFrame !== null) {\n          document.body.removeChild(this.myIFrame);\n          this.myIFrame = null;\n        }\n      }, Math.floor(0));\n    }\n\n    if (isNodeSdk() && this.myID) {\n      const urlParams: { [k: string]: string } = {};\n      urlParams[FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM] = 't';\n      urlParams[FIREBASE_LONGPOLL_ID_PARAM] = this.myID;\n      urlParams[FIREBASE_LONGPOLL_PW_PARAM] = this.myPW;\n      const theURL = this.urlFn(urlParams);\n      (FirebaseIFrameScriptHolder as any).nodeRestRequest(theURL);\n    }\n\n    // Protect from being called recursively.\n    const onDisconnect = this.onDisconnect;\n    if (onDisconnect) {\n      this.onDisconnect = null;\n      onDisconnect();\n    }\n  }\n\n  /**\n   * Actually start the long-polling session by adding the first script tag(s) to the iframe.\n   * @param {!string} id - The ID of this connection\n   * @param {!string} pw - The password for this connection\n   */\n  startLongPoll(id: string, pw: string) {\n    this.myID = id;\n    this.myPW = pw;\n    this.alive = true;\n\n    //send the initial request. If there are requests queued, make sure that we transmit as many as we are currently able to.\n    while (this.newRequest_()) {}\n  }\n\n  /**\n   * This is called any time someone might want a script tag to be added. It adds a script tag when there aren't\n   * too many outstanding requests and we are still alive.\n   *\n   * If there are outstanding packet segments to send, it sends one. If there aren't, it sends a long-poll anyways if\n   * needed.\n   */\n  private newRequest_() {\n    // We keep one outstanding request open all the time to receive data, but if we need to send data\n    // (pendingSegs.length > 0) then we create a new request to send the data.  The server will automatically\n    // close the old request.\n    if (\n      this.alive &&\n      this.sendNewPolls &&\n      this.outstandingRequests.count() < (this.pendingSegs.length > 0 ? 2 : 1)\n    ) {\n      //construct our url\n      this.currentSerial++;\n      const urlParams: { [k: string]: string | number } = {};\n      urlParams[FIREBASE_LONGPOLL_ID_PARAM] = this.myID;\n      urlParams[FIREBASE_LONGPOLL_PW_PARAM] = this.myPW;\n      urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = this.currentSerial;\n      let theURL = this.urlFn(urlParams);\n      //Now add as much data as we can.\n      let curDataString = '';\n      let i = 0;\n\n      while (this.pendingSegs.length > 0) {\n        //first, lets see if the next segment will fit.\n        const nextSeg = this.pendingSegs[0];\n        if (\n          nextSeg.d.length + SEG_HEADER_SIZE + curDataString.length <=\n          MAX_URL_DATA_SIZE\n        ) {\n          //great, the segment will fit. Lets append it.\n          const theSeg = this.pendingSegs.shift();\n          curDataString =\n            curDataString +\n            '&' +\n            FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM +\n            i +\n            '=' +\n            theSeg.seg +\n            '&' +\n            FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET +\n            i +\n            '=' +\n            theSeg.ts +\n            '&' +\n            FIREBASE_LONGPOLL_DATA_PARAM +\n            i +\n            '=' +\n            theSeg.d;\n          i++;\n        } else {\n          break;\n        }\n      }\n\n      theURL = theURL + curDataString;\n      this.addLongPollTag_(theURL, this.currentSerial);\n\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Queue a packet for transmission to the server.\n   * @param segnum - A sequential id for this packet segment used for reassembly\n   * @param totalsegs - The total number of segments in this packet\n   * @param data - The data for this segment.\n   */\n  enqueueSegment(segnum: number, totalsegs: number, data: any) {\n    //add this to the queue of segments to send.\n    this.pendingSegs.push({ seg: segnum, ts: totalsegs, d: data });\n\n    //send the data immediately if there isn't already data being transmitted, unless\n    //startLongPoll hasn't been called yet.\n    if (this.alive) {\n      this.newRequest_();\n    }\n  }\n\n  /**\n   * Add a script tag for a regular long-poll request.\n   * @param {!string} url - The URL of the script tag.\n   * @param {!number} serial - The serial number of the request.\n   * @private\n   */\n  private addLongPollTag_(url: string, serial: number) {\n    //remember that we sent this request.\n    this.outstandingRequests.add(serial, 1);\n\n    const doNewRequest = () => {\n      this.outstandingRequests.remove(serial);\n      this.newRequest_();\n    };\n\n    // If this request doesn't return on its own accord (by the server sending us some data), we'll\n    // create a new one after the KEEPALIVE interval to make sure we always keep a fresh request open.\n    const keepaliveTimeout = setTimeout(\n      doNewRequest,\n      Math.floor(KEEPALIVE_REQUEST_INTERVAL)\n    );\n\n    const readyStateCB = () => {\n      // Request completed.  Cancel the keepalive.\n      clearTimeout(keepaliveTimeout);\n\n      // Trigger a new request so we can continue receiving data.\n      doNewRequest();\n    };\n\n    this.addTag(url, readyStateCB);\n  }\n\n  /**\n   * Add an arbitrary script tag to the iframe.\n   * @param {!string} url - The URL for the script tag source.\n   * @param {!function()} loadCB - A callback to be triggered once the script has loaded.\n   */\n  addTag(url: string, loadCB: () => void) {\n    if (isNodeSdk()) {\n      (this as any).doNodeLongPoll(url, loadCB);\n    } else {\n      setTimeout(() => {\n        try {\n          // if we're already closed, don't add this poll\n          if (!this.sendNewPolls) return;\n          const newScript = this.myIFrame.doc.createElement('script');\n          newScript.type = 'text/javascript';\n          newScript.async = true;\n          newScript.src = url;\n          newScript.onload = (newScript as any).onreadystatechange = function() {\n            const rstate = (newScript as any).readyState;\n            if (!rstate || rstate === 'loaded' || rstate === 'complete') {\n              newScript.onload = (newScript as any).onreadystatechange = null;\n              if (newScript.parentNode) {\n                newScript.parentNode.removeChild(newScript);\n              }\n              loadCB();\n            }\n          };\n          newScript.onerror = () => {\n            log('Long-poll script failed to load: ' + url);\n            this.sendNewPolls = false;\n            this.close();\n          };\n          this.myIFrame.doc.body.appendChild(newScript);\n        } catch (e) {\n          // TODO: we should make this error visible somehow\n        }\n      }, Math.floor(1));\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RepoInfo } from '../core/RepoInfo';\n\ndeclare const MozWebSocket: any;\n\nimport firebase from '@firebase/app';\nimport { assert } from '@firebase/util';\nimport { logWrapper, splitStringBySize } from '../core/util/util';\nimport { StatsManager } from '../core/stats/StatsManager';\nimport {\n  FORGE_DOMAIN,\n  FORGE_REF,\n  LAST_SESSION_PARAM,\n  PROTOCOL_VERSION,\n  REFERER_PARAM,\n  TRANSPORT_SESSION_PARAM,\n  VERSION_PARAM,\n  WEBSOCKET\n} from './Constants';\nimport { CONSTANTS as ENV_CONSTANTS } from '@firebase/util';\nimport { PersistentStorage } from '../core/storage/storage';\nimport { jsonEval, stringify } from '@firebase/util';\nimport { isNodeSdk } from '@firebase/util';\nimport { Transport } from './Transport';\nimport { StatsCollection } from '../core/stats/StatsCollection';\n\nconst WEBSOCKET_MAX_FRAME_SIZE = 16384;\nconst WEBSOCKET_KEEPALIVE_INTERVAL = 45000;\n\nlet WebSocketImpl = null;\nif (typeof MozWebSocket !== 'undefined') {\n  WebSocketImpl = MozWebSocket;\n} else if (typeof WebSocket !== 'undefined') {\n  WebSocketImpl = WebSocket;\n}\n\nexport function setWebSocketImpl(impl) {\n  WebSocketImpl = impl;\n}\n\n/**\n * Create a new websocket connection with the given callbacks.\n * @constructor\n * @implements {Transport}\n */\nexport class WebSocketConnection implements Transport {\n  keepaliveTimer: number | null = null;\n  frames: string[] | null = null;\n  totalFrames = 0;\n  bytesSent = 0;\n  bytesReceived = 0;\n  connURL: string;\n  onDisconnect: (a?: boolean) => void;\n  onMessage: (msg: Object) => void;\n  mySock: any | null;\n  private log_: (...a: any[]) => void;\n  private stats_: StatsCollection;\n  private everConnected_: boolean;\n  private isClosed_: boolean;\n\n  /**\n   * @param {string} connId identifier for this transport\n   * @param {RepoInfo} repoInfo The info for the websocket endpoint.\n   * @param {string=} transportSessionId Optional transportSessionId if this is connecting to an existing transport\n   *                                         session\n   * @param {string=} lastSessionId Optional lastSessionId if there was a previous connection\n   */\n  constructor(\n    public connId: string,\n    repoInfo: RepoInfo,\n    transportSessionId?: string,\n    lastSessionId?: string\n  ) {\n    this.log_ = logWrapper(this.connId);\n    this.stats_ = StatsManager.getCollection(repoInfo);\n    this.connURL = WebSocketConnection.connectionURL_(\n      repoInfo,\n      transportSessionId,\n      lastSessionId\n    );\n  }\n\n  /**\n   * @param {RepoInfo} repoInfo The info for the websocket endpoint.\n   * @param {string=} transportSessionId Optional transportSessionId if this is connecting to an existing transport\n   *                                         session\n   * @param {string=} lastSessionId Optional lastSessionId if there was a previous connection\n   * @return {string} connection url\n   * @private\n   */\n  private static connectionURL_(\n    repoInfo: RepoInfo,\n    transportSessionId?: string,\n    lastSessionId?: string\n  ): string {\n    const urlParams: { [k: string]: string } = {};\n    urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\n\n    if (\n      !isNodeSdk() &&\n      typeof location !== 'undefined' &&\n      location.href &&\n      location.href.indexOf(FORGE_DOMAIN) !== -1\n    ) {\n      urlParams[REFERER_PARAM] = FORGE_REF;\n    }\n    if (transportSessionId) {\n      urlParams[TRANSPORT_SESSION_PARAM] = transportSessionId;\n    }\n    if (lastSessionId) {\n      urlParams[LAST_SESSION_PARAM] = lastSessionId;\n    }\n    return repoInfo.connectionURL(WEBSOCKET, urlParams);\n  }\n\n  /**\n   *\n   * @param onMessage Callback when messages arrive\n   * @param onDisconnect Callback with connection lost.\n   */\n  open(onMessage: (msg: Object) => void, onDisconnect: (a?: boolean) => void) {\n    this.onDisconnect = onDisconnect;\n    this.onMessage = onMessage;\n\n    this.log_('Websocket connecting to ' + this.connURL);\n\n    this.everConnected_ = false;\n    // Assume failure until proven otherwise.\n    PersistentStorage.set('previous_websocket_failure', true);\n\n    try {\n      if (isNodeSdk()) {\n        const device = ENV_CONSTANTS.NODE_ADMIN ? 'AdminNode' : 'Node';\n        // UA Format: Firebase/<wire_protocol>/<sdk_version>/<platform>/<device>\n        const options: { [k: string]: object } = {\n          headers: {\n            'User-Agent': `Firebase/${PROTOCOL_VERSION}/${\n              firebase.SDK_VERSION\n            }/${process.platform}/${device}`\n          }\n        };\n\n        // Plumb appropriate http_proxy environment variable into faye-websocket if it exists.\n        const env = process['env'];\n        const proxy =\n          this.connURL.indexOf('wss://') == 0\n            ? env['HTTPS_PROXY'] || env['https_proxy']\n            : env['HTTP_PROXY'] || env['http_proxy'];\n\n        if (proxy) {\n          options['proxy'] = { origin: proxy };\n        }\n\n        this.mySock = new WebSocketImpl(this.connURL, [], options);\n      } else {\n        this.mySock = new WebSocketImpl(this.connURL);\n      }\n    } catch (e) {\n      this.log_('Error instantiating WebSocket.');\n      const error = e.message || e.data;\n      if (error) {\n        this.log_(error);\n      }\n      this.onClosed_();\n      return;\n    }\n\n    this.mySock.onopen = () => {\n      this.log_('Websocket connected.');\n      this.everConnected_ = true;\n    };\n\n    this.mySock.onclose = () => {\n      this.log_('Websocket connection was disconnected.');\n      this.mySock = null;\n      this.onClosed_();\n    };\n\n    this.mySock.onmessage = (m: object) => {\n      this.handleIncomingFrame(m);\n    };\n\n    this.mySock.onerror = (e: any) => {\n      this.log_('WebSocket error.  Closing connection.');\n      const error = e.message || e.data;\n      if (error) {\n        this.log_(error);\n      }\n      this.onClosed_();\n    };\n  }\n\n  /**\n   * No-op for websockets, we don't need to do anything once the connection is confirmed as open\n   */\n  start() {}\n\n  static forceDisallow_: Boolean;\n\n  static forceDisallow() {\n    WebSocketConnection.forceDisallow_ = true;\n  }\n\n  static isAvailable(): boolean {\n    let isOldAndroid = false;\n    if (typeof navigator !== 'undefined' && navigator.userAgent) {\n      const oldAndroidRegex = /Android ([0-9]{0,}\\.[0-9]{0,})/;\n      const oldAndroidMatch = navigator.userAgent.match(oldAndroidRegex);\n      if (oldAndroidMatch && oldAndroidMatch.length > 1) {\n        if (parseFloat(oldAndroidMatch[1]) < 4.4) {\n          isOldAndroid = true;\n        }\n      }\n    }\n\n    return (\n      !isOldAndroid &&\n      WebSocketImpl !== null &&\n      !WebSocketConnection.forceDisallow_\n    );\n  }\n\n  /**\n   * Number of response before we consider the connection \"healthy.\"\n   * @type {number}\n   */\n  static responsesRequiredToBeHealthy = 2;\n\n  /**\n   * Time to wait for the connection te become healthy before giving up.\n   * @type {number}\n   */\n  static healthyTimeout = 30000;\n\n  /**\n   * Returns true if we previously failed to connect with this transport.\n   * @return {boolean}\n   */\n  static previouslyFailed(): boolean {\n    // If our persistent storage is actually only in-memory storage,\n    // we default to assuming that it previously failed to be safe.\n    return (\n      PersistentStorage.isInMemoryStorage ||\n      PersistentStorage.get('previous_websocket_failure') === true\n    );\n  }\n\n  markConnectionHealthy() {\n    PersistentStorage.remove('previous_websocket_failure');\n  }\n\n  private appendFrame_(data: string) {\n    this.frames.push(data);\n    if (this.frames.length == this.totalFrames) {\n      const fullMess = this.frames.join('');\n      this.frames = null;\n      const jsonMess = jsonEval(fullMess) as object;\n\n      //handle the message\n      this.onMessage(jsonMess);\n    }\n  }\n\n  /**\n   * @param {number} frameCount The number of frames we are expecting from the server\n   * @private\n   */\n  private handleNewFrameCount_(frameCount: number) {\n    this.totalFrames = frameCount;\n    this.frames = [];\n  }\n\n  /**\n   * Attempts to parse a frame count out of some text. If it can't, assumes a value of 1\n   * @param {!String} data\n   * @return {?String} Any remaining data to be process, or null if there is none\n   * @private\n   */\n  private extractFrameCount_(data: string): string | null {\n    assert(this.frames === null, 'We already have a frame buffer');\n    // TODO: The server is only supposed to send up to 9999 frames (i.e. length <= 4), but that isn't being enforced\n    // currently.  So allowing larger frame counts (length <= 6).  See https://app.asana.com/0/search/8688598998380/8237608042508\n    if (data.length <= 6) {\n      const frameCount = Number(data);\n      if (!isNaN(frameCount)) {\n        this.handleNewFrameCount_(frameCount);\n        return null;\n      }\n    }\n    this.handleNewFrameCount_(1);\n    return data;\n  }\n\n  /**\n   * Process a websocket frame that has arrived from the server.\n   * @param mess The frame data\n   */\n  handleIncomingFrame(mess: { [k: string]: any }) {\n    if (this.mySock === null) return; // Chrome apparently delivers incoming packets even after we .close() the connection sometimes.\n    const data = mess['data'] as string;\n    this.bytesReceived += data.length;\n    this.stats_.incrementCounter('bytes_received', data.length);\n\n    this.resetKeepAlive();\n\n    if (this.frames !== null) {\n      // we're buffering\n      this.appendFrame_(data);\n    } else {\n      // try to parse out a frame count, otherwise, assume 1 and process it\n      const remainingData = this.extractFrameCount_(data);\n      if (remainingData !== null) {\n        this.appendFrame_(remainingData);\n      }\n    }\n  }\n\n  /**\n   * Send a message to the server\n   * @param {Object} data The JSON object to transmit\n   */\n  send(data: Object) {\n    this.resetKeepAlive();\n\n    const dataStr = stringify(data);\n    this.bytesSent += dataStr.length;\n    this.stats_.incrementCounter('bytes_sent', dataStr.length);\n\n    //We can only fit a certain amount in each websocket frame, so we need to split this request\n    //up into multiple pieces if it doesn't fit in one request.\n\n    const dataSegs = splitStringBySize(dataStr, WEBSOCKET_MAX_FRAME_SIZE);\n\n    //Send the length header\n    if (dataSegs.length > 1) {\n      this.sendString_(String(dataSegs.length));\n    }\n\n    //Send the actual data in segments.\n    for (let i = 0; i < dataSegs.length; i++) {\n      this.sendString_(dataSegs[i]);\n    }\n  }\n\n  private shutdown_() {\n    this.isClosed_ = true;\n    if (this.keepaliveTimer) {\n      clearInterval(this.keepaliveTimer);\n      this.keepaliveTimer = null;\n    }\n\n    if (this.mySock) {\n      this.mySock.close();\n      this.mySock = null;\n    }\n  }\n\n  private onClosed_() {\n    if (!this.isClosed_) {\n      this.log_('WebSocket is closing itself');\n      this.shutdown_();\n\n      // since this is an internal close, trigger the close listener\n      if (this.onDisconnect) {\n        this.onDisconnect(this.everConnected_);\n        this.onDisconnect = null;\n      }\n    }\n  }\n\n  /**\n   * External-facing close handler.\n   * Close the websocket and kill the connection.\n   */\n  close() {\n    if (!this.isClosed_) {\n      this.log_('WebSocket is being closed');\n      this.shutdown_();\n    }\n  }\n\n  /**\n   * Kill the current keepalive timer and start a new one, to ensure that it always fires N seconds after\n   * the last activity.\n   */\n  resetKeepAlive() {\n    clearInterval(this.keepaliveTimer);\n    this.keepaliveTimer = setInterval(() => {\n      //If there has been no websocket activity for a while, send a no-op\n      if (this.mySock) {\n        this.sendString_('0');\n      }\n      this.resetKeepAlive();\n    }, Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL)) as any;\n  }\n\n  /**\n   * Send a string over the websocket.\n   *\n   * @param {string} str String to send.\n   * @private\n   */\n  private sendString_(str: string) {\n    // Firefox seems to sometimes throw exceptions (NS_ERROR_UNEXPECTED) from websocket .send()\n    // calls for some unknown reason.  We treat these as an error and disconnect.\n    // See https://app.asana.com/0/58926111402292/68021340250410\n    try {\n      this.mySock.send(str);\n    } catch (e) {\n      this.log_(\n        'Exception thrown from WebSocket.send():',\n        e.message || e.data,\n        'Closing connection.'\n      );\n      setTimeout(this.onClosed_.bind(this), 0);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BrowserPollConnection } from './BrowserPollConnection';\nimport { WebSocketConnection } from './WebSocketConnection';\nimport { warn, each } from '../core/util/util';\nimport { TransportConstructor } from './Transport';\nimport { RepoInfo } from '../core/RepoInfo';\n\n/**\n * Currently simplistic, this class manages what transport a Connection should use at various stages of its\n * lifecycle.\n *\n * It starts with longpolling in a browser, and httppolling on node. It then upgrades to websockets if\n * they are available.\n * @constructor\n */\nexport class TransportManager {\n  private transports_: TransportConstructor[];\n\n  /**\n   * @const\n   * @type {!Array.<function(new:Transport, string, RepoInfo, string=)>}\n   */\n  static get ALL_TRANSPORTS() {\n    return [BrowserPollConnection, WebSocketConnection];\n  }\n\n  /**\n   * @param {!RepoInfo} repoInfo Metadata around the namespace we're connecting to\n   */\n  constructor(repoInfo: RepoInfo) {\n    this.initTransports_(repoInfo);\n  }\n\n  /**\n   * @param {!RepoInfo} repoInfo\n   * @private\n   */\n  private initTransports_(repoInfo: RepoInfo) {\n    const isWebSocketsAvailable: boolean =\n      WebSocketConnection && WebSocketConnection['isAvailable']();\n    let isSkipPollConnection =\n      isWebSocketsAvailable && !WebSocketConnection.previouslyFailed();\n\n    if (repoInfo.webSocketOnly) {\n      if (!isWebSocketsAvailable)\n        warn(\n          \"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\"\n        );\n\n      isSkipPollConnection = true;\n    }\n\n    if (isSkipPollConnection) {\n      this.transports_ = [WebSocketConnection];\n    } else {\n      const transports = (this.transports_ = [] as TransportConstructor[]);\n      each(\n        TransportManager.ALL_TRANSPORTS,\n        (i: number, transport: TransportConstructor) => {\n          if (transport && transport['isAvailable']()) {\n            transports.push(transport);\n          }\n        }\n      );\n    }\n  }\n\n  /**\n   * @return {function(new:Transport, !string, !RepoInfo, string=, string=)} The constructor for the\n   * initial transport to use\n   */\n  initialTransport(): TransportConstructor {\n    if (this.transports_.length > 0) {\n      return this.transports_[0];\n    } else {\n      throw new Error('No transports available');\n    }\n  }\n\n  /**\n   * @return {?function(new:Transport, function(),function(), string=)} The constructor for the next\n   * transport, or null\n   */\n  upgradeTransport(): TransportConstructor | null {\n    if (this.transports_.length > 1) {\n      return this.transports_[1];\n    } else {\n      return null;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  error,\n  logWrapper,\n  requireKey,\n  setTimeoutNonBlocking,\n  warn\n} from '../core/util/util';\nimport { PersistentStorage } from '../core/storage/storage';\nimport { PROTOCOL_VERSION } from './Constants';\nimport { TransportManager } from './TransportManager';\nimport { RepoInfo } from '../core/RepoInfo';\nimport { Transport, TransportConstructor } from './Transport';\n\n// Abort upgrade attempt if it takes longer than 60s.\nconst UPGRADE_TIMEOUT = 60000;\n\n// For some transports (WebSockets), we need to \"validate\" the transport by exchanging a few requests and responses.\n// If we haven't sent enough requests within 5s, we'll start sending noop ping requests.\nconst DELAY_BEFORE_SENDING_EXTRA_REQUESTS = 5000;\n\n// If the initial data sent triggers a lot of bandwidth (i.e. it's a large put or a listen for a large amount of data)\n// then we may not be able to exchange our ping/pong requests within the healthy timeout.  So if we reach the timeout\n// but we've sent/received enough bytes, we don't cancel the connection.\nconst BYTES_SENT_HEALTHY_OVERRIDE = 10 * 1024;\nconst BYTES_RECEIVED_HEALTHY_OVERRIDE = 100 * 1024;\n\nconst enum RealtimeState {\n  CONNECTING,\n  CONNECTED,\n  DISCONNECTED\n}\n\nconst MESSAGE_TYPE = 't';\nconst MESSAGE_DATA = 'd';\nconst CONTROL_SHUTDOWN = 's';\nconst CONTROL_RESET = 'r';\nconst CONTROL_ERROR = 'e';\nconst CONTROL_PONG = 'o';\nconst SWITCH_ACK = 'a';\nconst END_TRANSMISSION = 'n';\nconst PING = 'p';\n\nconst SERVER_HELLO = 'h';\n\n/**\n * Creates a new real-time connection to the server using whichever method works\n * best in the current browser.\n *\n * @constructor\n */\nexport class Connection {\n  connectionCount = 0;\n  pendingDataMessages: any[] = [];\n  sessionId: string;\n\n  private conn_: Transport;\n  private healthyTimeout_: number;\n  private isHealthy_: boolean;\n  private log_: (...args: any[]) => void;\n  private primaryResponsesRequired_: number;\n  private rx_: Transport;\n  private secondaryConn_: Transport;\n  private secondaryResponsesRequired_: number;\n  private state_ = RealtimeState.CONNECTING;\n  private transportManager_: TransportManager;\n  private tx_: Transport;\n\n  /**\n   * @param {!string} id - an id for this connection\n   * @param {!RepoInfo} repoInfo_ - the info for the endpoint to connect to\n   * @param {function(Object)} onMessage_ - the callback to be triggered when a server-push message arrives\n   * @param {function(number, string)} onReady_ - the callback to be triggered when this connection is ready to send messages.\n   * @param {function()} onDisconnect_ - the callback to be triggered when a connection was lost\n   * @param {function(string)} onKill_ - the callback to be triggered when this connection has permanently shut down.\n   * @param {string=} lastSessionId - last session id in persistent connection. is used to clean up old session in real-time server\n   */\n  constructor(\n    public id: string,\n    private repoInfo_: RepoInfo,\n    private onMessage_: (a: Object) => void,\n    private onReady_: (a: number, b: string) => void,\n    private onDisconnect_: () => void,\n    private onKill_: (a: string) => void,\n    public lastSessionId?: string\n  ) {\n    this.log_ = logWrapper('c:' + this.id + ':');\n    this.transportManager_ = new TransportManager(repoInfo_);\n    this.log_('Connection created');\n    this.start_();\n  }\n\n  /**\n   * Starts a connection attempt\n   * @private\n   */\n  private start_() {\n    const conn = this.transportManager_.initialTransport();\n    this.conn_ = new conn(\n      this.nextTransportId_(),\n      this.repoInfo_,\n      undefined,\n      this.lastSessionId\n    );\n\n    // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\n    // can consider the transport healthy.\n    this.primaryResponsesRequired_ = conn['responsesRequiredToBeHealthy'] || 0;\n\n    const onMessageReceived = this.connReceiver_(this.conn_);\n    const onConnectionLost = this.disconnReceiver_(this.conn_);\n    this.tx_ = this.conn_;\n    this.rx_ = this.conn_;\n    this.secondaryConn_ = null;\n    this.isHealthy_ = false;\n\n    /*\n     * Firefox doesn't like when code from one iframe tries to create another iframe by way of the parent frame.\n     * This can occur in the case of a redirect, i.e. we guessed wrong on what server to connect to and received a reset.\n     * Somehow, setTimeout seems to make this ok. That doesn't make sense from a security perspective, since you should\n     * still have the context of your originating frame.\n     */\n    setTimeout(() => {\n      // this.conn_ gets set to null in some of the tests. Check to make sure it still exists before using it\n      this.conn_ && this.conn_.open(onMessageReceived, onConnectionLost);\n    }, Math.floor(0));\n\n    const healthyTimeout_ms = conn['healthyTimeout'] || 0;\n    if (healthyTimeout_ms > 0) {\n      this.healthyTimeout_ = setTimeoutNonBlocking(() => {\n        this.healthyTimeout_ = null;\n        if (!this.isHealthy_) {\n          if (\n            this.conn_ &&\n            this.conn_.bytesReceived > BYTES_RECEIVED_HEALTHY_OVERRIDE\n          ) {\n            this.log_(\n              'Connection exceeded healthy timeout but has received ' +\n                this.conn_.bytesReceived +\n                ' bytes.  Marking connection healthy.'\n            );\n            this.isHealthy_ = true;\n            this.conn_.markConnectionHealthy();\n          } else if (\n            this.conn_ &&\n            this.conn_.bytesSent > BYTES_SENT_HEALTHY_OVERRIDE\n          ) {\n            this.log_(\n              'Connection exceeded healthy timeout but has sent ' +\n                this.conn_.bytesSent +\n                ' bytes.  Leaving connection alive.'\n            );\n            // NOTE: We don't want to mark it healthy, since we have no guarantee that the bytes have made it to\n            // the server.\n          } else {\n            this.log_('Closing unhealthy connection after timeout.');\n            this.close();\n          }\n        }\n      }, Math.floor(healthyTimeout_ms)) as any;\n    }\n  }\n\n  /**\n   * @return {!string}\n   * @private\n   */\n  private nextTransportId_(): string {\n    return 'c:' + this.id + ':' + this.connectionCount++;\n  }\n\n  private disconnReceiver_(conn) {\n    return everConnected => {\n      if (conn === this.conn_) {\n        this.onConnectionLost_(everConnected);\n      } else if (conn === this.secondaryConn_) {\n        this.log_('Secondary connection lost.');\n        this.onSecondaryConnectionLost_();\n      } else {\n        this.log_('closing an old connection');\n      }\n    };\n  }\n\n  private connReceiver_(conn: Transport) {\n    return (message: object) => {\n      if (this.state_ != RealtimeState.DISCONNECTED) {\n        if (conn === this.rx_) {\n          this.onPrimaryMessageReceived_(message);\n        } else if (conn === this.secondaryConn_) {\n          this.onSecondaryMessageReceived_(message);\n        } else {\n          this.log_('message on old connection');\n        }\n      }\n    };\n  }\n\n  /**\n   *\n   * @param {Object} dataMsg An arbitrary data message to be sent to the server\n   */\n  sendRequest(dataMsg: object) {\n    // wrap in a data message envelope and send it on\n    const msg = { t: 'd', d: dataMsg };\n    this.sendData_(msg);\n  }\n\n  tryCleanupConnection() {\n    if (this.tx_ === this.secondaryConn_ && this.rx_ === this.secondaryConn_) {\n      this.log_(\n        'cleaning up and promoting a connection: ' + this.secondaryConn_.connId\n      );\n      this.conn_ = this.secondaryConn_;\n      this.secondaryConn_ = null;\n      // the server will shutdown the old connection\n    }\n  }\n\n  private onSecondaryControl_(controlData: { [k: string]: any }) {\n    if (MESSAGE_TYPE in controlData) {\n      const cmd = controlData[MESSAGE_TYPE] as string;\n      if (cmd === SWITCH_ACK) {\n        this.upgradeIfSecondaryHealthy_();\n      } else if (cmd === CONTROL_RESET) {\n        // Most likely the session wasn't valid. Abandon the switch attempt\n        this.log_('Got a reset on secondary, closing it');\n        this.secondaryConn_.close();\n        // If we were already using this connection for something, than we need to fully close\n        if (\n          this.tx_ === this.secondaryConn_ ||\n          this.rx_ === this.secondaryConn_\n        ) {\n          this.close();\n        }\n      } else if (cmd === CONTROL_PONG) {\n        this.log_('got pong on secondary.');\n        this.secondaryResponsesRequired_--;\n        this.upgradeIfSecondaryHealthy_();\n      }\n    }\n  }\n\n  private onSecondaryMessageReceived_(parsedData: object) {\n    const layer: string = requireKey('t', parsedData);\n    const data: any = requireKey('d', parsedData);\n    if (layer == 'c') {\n      this.onSecondaryControl_(data);\n    } else if (layer == 'd') {\n      // got a data message, but we're still second connection. Need to buffer it up\n      this.pendingDataMessages.push(data);\n    } else {\n      throw new Error('Unknown protocol layer: ' + layer);\n    }\n  }\n\n  private upgradeIfSecondaryHealthy_() {\n    if (this.secondaryResponsesRequired_ <= 0) {\n      this.log_('Secondary connection is healthy.');\n      this.isHealthy_ = true;\n      this.secondaryConn_.markConnectionHealthy();\n      this.proceedWithUpgrade_();\n    } else {\n      // Send a ping to make sure the connection is healthy.\n      this.log_('sending ping on secondary.');\n      this.secondaryConn_.send({ t: 'c', d: { t: PING, d: {} } });\n    }\n  }\n\n  private proceedWithUpgrade_() {\n    // tell this connection to consider itself open\n    this.secondaryConn_.start();\n    // send ack\n    this.log_('sending client ack on secondary');\n    this.secondaryConn_.send({ t: 'c', d: { t: SWITCH_ACK, d: {} } });\n\n    // send end packet on primary transport, switch to sending on this one\n    // can receive on this one, buffer responses until end received on primary transport\n    this.log_('Ending transmission on primary');\n    this.conn_.send({ t: 'c', d: { t: END_TRANSMISSION, d: {} } });\n    this.tx_ = this.secondaryConn_;\n\n    this.tryCleanupConnection();\n  }\n\n  private onPrimaryMessageReceived_(parsedData: { [k: string]: any }) {\n    // Must refer to parsedData properties in quotes, so closure doesn't touch them.\n    const layer: string = requireKey('t', parsedData);\n    const data: any = requireKey('d', parsedData);\n    if (layer == 'c') {\n      this.onControl_(data);\n    } else if (layer == 'd') {\n      this.onDataMessage_(data);\n    }\n  }\n\n  private onDataMessage_(message: any) {\n    this.onPrimaryResponse_();\n\n    // We don't do anything with data messages, just kick them up a level\n    this.onMessage_(message);\n  }\n\n  private onPrimaryResponse_() {\n    if (!this.isHealthy_) {\n      this.primaryResponsesRequired_--;\n      if (this.primaryResponsesRequired_ <= 0) {\n        this.log_('Primary connection is healthy.');\n        this.isHealthy_ = true;\n        this.conn_.markConnectionHealthy();\n      }\n    }\n  }\n\n  private onControl_(controlData: { [k: string]: any }) {\n    const cmd: string = requireKey(MESSAGE_TYPE, controlData);\n    if (MESSAGE_DATA in controlData) {\n      const payload = controlData[MESSAGE_DATA];\n      if (cmd === SERVER_HELLO) {\n        this.onHandshake_(payload);\n      } else if (cmd === END_TRANSMISSION) {\n        this.log_('recvd end transmission on primary');\n        this.rx_ = this.secondaryConn_;\n        for (let i = 0; i < this.pendingDataMessages.length; ++i) {\n          this.onDataMessage_(this.pendingDataMessages[i]);\n        }\n        this.pendingDataMessages = [];\n        this.tryCleanupConnection();\n      } else if (cmd === CONTROL_SHUTDOWN) {\n        // This was previously the 'onKill' callback passed to the lower-level connection\n        // payload in this case is the reason for the shutdown. Generally a human-readable error\n        this.onConnectionShutdown_(payload);\n      } else if (cmd === CONTROL_RESET) {\n        // payload in this case is the host we should contact\n        this.onReset_(payload);\n      } else if (cmd === CONTROL_ERROR) {\n        error('Server Error: ' + payload);\n      } else if (cmd === CONTROL_PONG) {\n        this.log_('got pong on primary.');\n        this.onPrimaryResponse_();\n        this.sendPingOnPrimaryIfNecessary_();\n      } else {\n        error('Unknown control packet command: ' + cmd);\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {Object} handshake The handshake data returned from the server\n   * @private\n   */\n  private onHandshake_(handshake: {\n    ts: number;\n    v: string;\n    h: string;\n    s: string;\n  }) {\n    const timestamp = handshake.ts;\n    const version = handshake.v;\n    const host = handshake.h;\n    this.sessionId = handshake.s;\n    this.repoInfo_.updateHost(host);\n    // if we've already closed the connection, then don't bother trying to progress further\n    if (this.state_ == RealtimeState.CONNECTING) {\n      this.conn_.start();\n      this.onConnectionEstablished_(this.conn_, timestamp);\n      if (PROTOCOL_VERSION !== version) {\n        warn('Protocol version mismatch detected');\n      }\n      // TODO: do we want to upgrade? when? maybe a delay?\n      this.tryStartUpgrade_();\n    }\n  }\n\n  private tryStartUpgrade_() {\n    const conn = this.transportManager_.upgradeTransport();\n    if (conn) {\n      this.startUpgrade_(conn);\n    }\n  }\n\n  private startUpgrade_(conn: TransportConstructor) {\n    this.secondaryConn_ = new conn(\n      this.nextTransportId_(),\n      this.repoInfo_,\n      this.sessionId\n    );\n    // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\n    // can consider the transport healthy.\n    this.secondaryResponsesRequired_ =\n      conn['responsesRequiredToBeHealthy'] || 0;\n\n    const onMessage = this.connReceiver_(this.secondaryConn_);\n    const onDisconnect = this.disconnReceiver_(this.secondaryConn_);\n    this.secondaryConn_.open(onMessage, onDisconnect);\n\n    // If we haven't successfully upgraded after UPGRADE_TIMEOUT, give up and kill the secondary.\n    setTimeoutNonBlocking(() => {\n      if (this.secondaryConn_) {\n        this.log_('Timed out trying to upgrade.');\n        this.secondaryConn_.close();\n      }\n    }, Math.floor(UPGRADE_TIMEOUT));\n  }\n\n  private onReset_(host: string) {\n    this.log_('Reset packet received.  New host: ' + host);\n    this.repoInfo_.updateHost(host);\n    // TODO: if we're already \"connected\", we need to trigger a disconnect at the next layer up.\n    // We don't currently support resets after the connection has already been established\n    if (this.state_ === RealtimeState.CONNECTED) {\n      this.close();\n    } else {\n      // Close whatever connections we have open and start again.\n      this.closeConnections_();\n      this.start_();\n    }\n  }\n\n  private onConnectionEstablished_(conn: Transport, timestamp: number) {\n    this.log_('Realtime connection established.');\n    this.conn_ = conn;\n    this.state_ = RealtimeState.CONNECTED;\n\n    if (this.onReady_) {\n      this.onReady_(timestamp, this.sessionId);\n      this.onReady_ = null;\n    }\n\n    // If after 5 seconds we haven't sent enough requests to the server to get the connection healthy,\n    // send some pings.\n    if (this.primaryResponsesRequired_ === 0) {\n      this.log_('Primary connection is healthy.');\n      this.isHealthy_ = true;\n    } else {\n      setTimeoutNonBlocking(() => {\n        this.sendPingOnPrimaryIfNecessary_();\n      }, Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS));\n    }\n  }\n\n  private sendPingOnPrimaryIfNecessary_() {\n    // If the connection isn't considered healthy yet, we'll send a noop ping packet request.\n    if (!this.isHealthy_ && this.state_ === RealtimeState.CONNECTED) {\n      this.log_('sending ping on primary.');\n      this.sendData_({ t: 'c', d: { t: PING, d: {} } });\n    }\n  }\n\n  private onSecondaryConnectionLost_() {\n    const conn = this.secondaryConn_;\n    this.secondaryConn_ = null;\n    if (this.tx_ === conn || this.rx_ === conn) {\n      // we are relying on this connection already in some capacity. Therefore, a failure is real\n      this.close();\n    }\n  }\n\n  /**\n   *\n   * @param {boolean} everConnected Whether or not the connection ever reached a server. Used to determine if\n   * we should flush the host cache\n   * @private\n   */\n  private onConnectionLost_(everConnected: boolean) {\n    this.conn_ = null;\n\n    // NOTE: IF you're seeing a Firefox error for this line, I think it might be because it's getting\n    // called on window close and RealtimeState.CONNECTING is no longer defined.  Just a guess.\n    if (!everConnected && this.state_ === RealtimeState.CONNECTING) {\n      this.log_('Realtime connection failed.');\n      // Since we failed to connect at all, clear any cached entry for this namespace in case the machine went away\n      if (this.repoInfo_.isCacheableHost()) {\n        PersistentStorage.remove('host:' + this.repoInfo_.host);\n        // reset the internal host to what we would show the user, i.e. <ns>.firebaseio.com\n        this.repoInfo_.internalHost = this.repoInfo_.host;\n      }\n    } else if (this.state_ === RealtimeState.CONNECTED) {\n      this.log_('Realtime connection lost.');\n    }\n\n    this.close();\n  }\n\n  /**\n   *\n   * @param {string} reason\n   * @private\n   */\n  private onConnectionShutdown_(reason: string) {\n    this.log_('Connection shutdown command received. Shutting down...');\n\n    if (this.onKill_) {\n      this.onKill_(reason);\n      this.onKill_ = null;\n    }\n\n    // We intentionally don't want to fire onDisconnect (kill is a different case),\n    // so clear the callback.\n    this.onDisconnect_ = null;\n\n    this.close();\n  }\n\n  private sendData_(data: object) {\n    if (this.state_ !== RealtimeState.CONNECTED) {\n      throw 'Connection is not connected';\n    } else {\n      this.tx_.send(data);\n    }\n  }\n\n  /**\n   * Cleans up this connection, calling the appropriate callbacks\n   */\n  close() {\n    if (this.state_ !== RealtimeState.DISCONNECTED) {\n      this.log_('Closing realtime connection.');\n      this.state_ = RealtimeState.DISCONNECTED;\n\n      this.closeConnections_();\n\n      if (this.onDisconnect_) {\n        this.onDisconnect_();\n        this.onDisconnect_ = null;\n      }\n    }\n  }\n\n  /**\n   *\n   * @private\n   */\n  private closeConnections_() {\n    this.log_('Shutting down all connections');\n    if (this.conn_) {\n      this.conn_.close();\n      this.conn_ = null;\n    }\n\n    if (this.secondaryConn_) {\n      this.secondaryConn_.close();\n      this.secondaryConn_ = null;\n    }\n\n    if (this.healthyTimeout_) {\n      clearTimeout(this.healthyTimeout_);\n      this.healthyTimeout_ = null;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Query } from '../api/Query';\n\n/**\n * Interface defining the set of actions that can be performed against the Firebase server\n * (basically corresponds to our wire protocol).\n *\n * @interface\n */\nexport abstract class ServerActions {\n  /**\n   * @param {!Query} query\n   * @param {function():string} currentHashFn\n   * @param {?number} tag\n   * @param {function(string, *)} onComplete\n   */\n  abstract listen(\n    query: Query,\n    currentHashFn: () => string,\n    tag: number | null,\n    onComplete: (a: string, b: any) => void\n  ): void;\n\n  /**\n   * Remove a listen.\n   *\n   * @param {!Query} query\n   * @param {?number} tag\n   */\n  abstract unlisten(query: Query, tag: number | null): void;\n\n  /**\n   * @param {string} pathString\n   * @param {*} data\n   * @param {function(string, string)=} onComplete\n   * @param {string=} hash\n   */\n  put(\n    pathString: string,\n    data: any,\n    onComplete?: (a: string, b: string) => void,\n    hash?: string\n  ) {}\n\n  /**\n   * @param {string} pathString\n   * @param {*} data\n   * @param {function(string, ?string)} onComplete\n   * @param {string=} hash\n   */\n  merge(\n    pathString: string,\n    data: any,\n    onComplete: (a: string, b: string | null) => void,\n    hash?: string\n  ) {}\n\n  /**\n   * Refreshes the auth token for the current connection.\n   * @param {string} token The authentication token\n   */\n  refreshAuthToken(token: string) {}\n\n  /**\n   * @param {string} pathString\n   * @param {*} data\n   * @param {function(string, string)=} onComplete\n   */\n  onDisconnectPut(\n    pathString: string,\n    data: any,\n    onComplete?: (a: string, b: string) => void\n  ) {}\n\n  /**\n   * @param {string} pathString\n   * @param {*} data\n   * @param {function(string, string)=} onComplete\n   */\n  onDisconnectMerge(\n    pathString: string,\n    data: any,\n    onComplete?: (a: string, b: string) => void\n  ) {}\n\n  /**\n   * @param {string} pathString\n   * @param {function(string, string)=} onComplete\n   */\n  onDisconnectCancel(\n    pathString: string,\n    onComplete?: (a: string, b: string) => void\n  ) {}\n\n  /**\n   * @param {Object.<string, *>} stats\n   */\n  reportStats(stats: { [k: string]: any }) {}\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport firebase from '@firebase/app';\nimport { forEach, contains, isEmpty, getCount, safeGet } from '@firebase/util';\nimport { stringify } from '@firebase/util';\nimport { assert } from '@firebase/util';\nimport { error, log, logWrapper, warn, ObjectToUniqueKey } from './util/util';\nimport { Path } from './util/Path';\nimport { VisibilityMonitor } from './util/VisibilityMonitor';\nimport { OnlineMonitor } from './util/OnlineMonitor';\nimport { isAdmin, isValidFormat } from '@firebase/util';\nimport { Connection } from '../realtime/Connection';\nimport { CONSTANTS } from '@firebase/util';\nimport { isMobileCordova, isReactNative, isNodeSdk } from '@firebase/util';\nimport { ServerActions } from './ServerActions';\nimport { AuthTokenProvider } from './AuthTokenProvider';\nimport { RepoInfo } from './RepoInfo';\nimport { Query } from '../api/Query';\n\nconst RECONNECT_MIN_DELAY = 1000;\nconst RECONNECT_MAX_DELAY_DEFAULT = 60 * 5 * 1000; // 5 minutes in milliseconds (Case: 1858)\nconst RECONNECT_MAX_DELAY_FOR_ADMINS = 30 * 1000; // 30 seconds for admin clients (likely to be a backend server)\nconst RECONNECT_DELAY_MULTIPLIER = 1.3;\nconst RECONNECT_DELAY_RESET_TIMEOUT = 30000; // Reset delay back to MIN_DELAY after being connected for 30sec.\nconst SERVER_KILL_INTERRUPT_REASON = 'server_kill';\n\n// If auth fails repeatedly, we'll assume something is wrong and log a warning / back off.\nconst INVALID_AUTH_TOKEN_THRESHOLD = 3;\n\ninterface ListenSpec {\n  onComplete(s: string, p?: any): void;\n\n  hashFn(): string;\n\n  query: Query;\n  tag: number | null;\n}\n\ninterface OnDisconnectRequest {\n  pathString: string;\n  action: string;\n  data: any;\n  onComplete?: (a: string, b: string) => void;\n}\n\ninterface OutstandingPut {\n  action: string;\n  request: Object;\n  queued?: boolean;\n  onComplete: (a: string, b?: string) => void;\n}\n\n/**\n * Firebase connection.  Abstracts wire protocol and handles reconnecting.\n *\n * NOTE: All JSON objects sent to the realtime connection must have property names enclosed\n * in quotes to make sure the closure compiler does not minify them.\n */\nexport class PersistentConnection extends ServerActions {\n  // Used for diagnostic logging.\n  id = PersistentConnection.nextPersistentConnectionId_++;\n  private log_ = logWrapper('p:' + this.id + ':');\n\n  /** @private {Object} */\n  private interruptReasons_: { [reason: string]: boolean } = {};\n  private listens_: { [path: string]: { [queryId: string]: ListenSpec } } = {};\n  private outstandingPuts_: OutstandingPut[] = [];\n  private outstandingPutCount_ = 0;\n  private onDisconnectRequestQueue_: OnDisconnectRequest[] = [];\n  private connected_ = false;\n  private reconnectDelay_ = RECONNECT_MIN_DELAY;\n  private maxReconnectDelay_ = RECONNECT_MAX_DELAY_DEFAULT;\n  private securityDebugCallback_: ((a: Object) => void) | null = null;\n  lastSessionId: string | null = null;\n\n  /** @private {number|null} */\n  private establishConnectionTimer_: number | null = null;\n\n  /** @private {boolean} */\n  private visible_: boolean = false;\n\n  // Before we get connected, we keep a queue of pending messages to send.\n  private requestCBHash_: { [k: number]: (a: any) => void } = {};\n  private requestNumber_ = 0;\n\n  /** @private {?{\n   *   sendRequest(Object),\n   *   close()\n   * }} */\n  private realtime_: {\n    sendRequest(a: Object): void;\n    close(): void;\n  } | null = null;\n\n  /** @private {string|null} */\n  private authToken_: string | null = null;\n  private forceTokenRefresh_ = false;\n  private invalidAuthTokenCount_ = 0;\n\n  private firstConnection_ = true;\n  private lastConnectionAttemptTime_: number | null = null;\n  private lastConnectionEstablishedTime_: number | null = null;\n\n  /**\n   * @private\n   */\n  private static nextPersistentConnectionId_ = 0;\n\n  /**\n   * Counter for number of connections created. Mainly used for tagging in the logs\n   * @type {number}\n   * @private\n   */\n  private static nextConnectionId_ = 0;\n\n  /**\n   * @implements {ServerActions}\n   * @param {!RepoInfo} repoInfo_ Data about the namespace we are connecting to\n   * @param {function(string, *, boolean, ?number)} onDataUpdate_ A callback for new data from the server\n   * @param onConnectStatus_\n   * @param onServerInfoUpdate_\n   * @param authTokenProvider_\n   * @param authOverride_\n   */\n  constructor(\n    private repoInfo_: RepoInfo,\n    private onDataUpdate_: (\n      a: string,\n      b: any,\n      c: boolean,\n      d: number | null\n    ) => void,\n    private onConnectStatus_: (a: boolean) => void,\n    private onServerInfoUpdate_: (a: any) => void,\n    private authTokenProvider_: AuthTokenProvider,\n    private authOverride_?: Object | null\n  ) {\n    super();\n\n    if (authOverride_ && !isNodeSdk()) {\n      throw new Error(\n        'Auth override specified in options, but not supported on non Node.js platforms'\n      );\n    }\n    this.scheduleConnect_(0);\n\n    VisibilityMonitor.getInstance().on('visible', this.onVisible_, this);\n\n    if (repoInfo_.host.indexOf('fblocal') === -1) {\n      OnlineMonitor.getInstance().on('online', this.onOnline_, this);\n    }\n  }\n\n  /**\n   * @param {!string} action\n   * @param {*} body\n   * @param {function(*)=} onResponse\n   * @protected\n   */\n  protected sendRequest(\n    action: string,\n    body: any,\n    onResponse?: (a: any) => void\n  ) {\n    const curReqNum = ++this.requestNumber_;\n\n    const msg = { r: curReqNum, a: action, b: body };\n    this.log_(stringify(msg));\n    assert(\n      this.connected_,\n      \"sendRequest call when we're not connected not allowed.\"\n    );\n    this.realtime_.sendRequest(msg);\n    if (onResponse) {\n      this.requestCBHash_[curReqNum] = onResponse;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  listen(\n    query: Query,\n    currentHashFn: () => string,\n    tag: number | null,\n    onComplete: (a: string, b: any) => void\n  ) {\n    const queryId = query.queryIdentifier();\n    const pathString = query.path.toString();\n    this.log_('Listen called for ' + pathString + ' ' + queryId);\n    this.listens_[pathString] = this.listens_[pathString] || {};\n    assert(\n      query.getQueryParams().isDefault() ||\n        !query.getQueryParams().loadsAllData(),\n      'listen() called for non-default but complete query'\n    );\n    assert(\n      !this.listens_[pathString][queryId],\n      'listen() called twice for same path/queryId.'\n    );\n    const listenSpec: ListenSpec = {\n      onComplete: onComplete,\n      hashFn: currentHashFn,\n      query: query,\n      tag: tag\n    };\n    this.listens_[pathString][queryId] = listenSpec;\n\n    if (this.connected_) {\n      this.sendListen_(listenSpec);\n    }\n  }\n\n  /**\n   * @param {!{onComplete(),\n   *           hashFn():!string,\n   *           query: !Query,\n   *           tag: ?number}} listenSpec\n   * @private\n   */\n  private sendListen_(listenSpec: ListenSpec) {\n    const query = listenSpec.query;\n    const pathString = query.path.toString();\n    const queryId = query.queryIdentifier();\n    this.log_('Listen on ' + pathString + ' for ' + queryId);\n    const req: { [k: string]: any } = { /*path*/ p: pathString };\n\n    const action = 'q';\n\n    // Only bother to send query if it's non-default.\n    if (listenSpec.tag) {\n      req['q'] = query.queryObject();\n      req['t'] = listenSpec.tag;\n    }\n\n    req[/*hash*/ 'h'] = listenSpec.hashFn();\n\n    this.sendRequest(action, req, (message: { [k: string]: any }) => {\n      const payload: any = message[/*data*/ 'd'];\n      const status: string = message[/*status*/ 's'];\n\n      // print warnings in any case...\n      PersistentConnection.warnOnListenWarnings_(payload, query);\n\n      const currentListenSpec =\n        this.listens_[pathString] && this.listens_[pathString][queryId];\n      // only trigger actions if the listen hasn't been removed and readded\n      if (currentListenSpec === listenSpec) {\n        this.log_('listen response', message);\n\n        if (status !== 'ok') {\n          this.removeListen_(pathString, queryId);\n        }\n\n        if (listenSpec.onComplete) {\n          listenSpec.onComplete(status, payload);\n        }\n      }\n    });\n  }\n\n  /**\n   * @param {*} payload\n   * @param {!Query} query\n   * @private\n   */\n  private static warnOnListenWarnings_(payload: any, query: Query) {\n    if (payload && typeof payload === 'object' && contains(payload, 'w')) {\n      const warnings = safeGet(payload, 'w');\n      if (Array.isArray(warnings) && ~warnings.indexOf('no_index')) {\n        const indexSpec =\n          '\".indexOn\": \"' +\n          query\n            .getQueryParams()\n            .getIndex()\n            .toString() +\n          '\"';\n        const indexPath = query.path.toString();\n        warn(\n          `Using an unspecified index. Your data will be downloaded and ` +\n            `filtered on the client. Consider adding ${indexSpec} at ` +\n            `${indexPath} to your security rules for better performance.`\n        );\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  refreshAuthToken(token: string) {\n    this.authToken_ = token;\n    this.log_('Auth token refreshed');\n    if (this.authToken_) {\n      this.tryAuth();\n    } else {\n      //If we're connected we want to let the server know to unauthenticate us. If we're not connected, simply delete\n      //the credential so we dont become authenticated next time we connect.\n      if (this.connected_) {\n        this.sendRequest('unauth', {}, () => {});\n      }\n    }\n\n    this.reduceReconnectDelayIfAdminCredential_(token);\n  }\n\n  /**\n   * @param {!string} credential\n   * @private\n   */\n  private reduceReconnectDelayIfAdminCredential_(credential: string) {\n    // NOTE: This isn't intended to be bulletproof (a malicious developer can always just modify the client).\n    // Additionally, we don't bother resetting the max delay back to the default if auth fails / expires.\n    const isFirebaseSecret = credential && credential.length === 40;\n    if (isFirebaseSecret || isAdmin(credential)) {\n      this.log_(\n        'Admin auth credential detected.  Reducing max reconnect time.'\n      );\n      this.maxReconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\n    }\n  }\n\n  /**\n   * Attempts to authenticate with the given credentials. If the authentication attempt fails, it's triggered like\n   * a auth revoked (the connection is closed).\n   */\n  tryAuth() {\n    if (this.connected_ && this.authToken_) {\n      const token = this.authToken_;\n      const authMethod = isValidFormat(token) ? 'auth' : 'gauth';\n      const requestData: { [k: string]: any } = { cred: token };\n      if (this.authOverride_ === null) {\n        requestData['noauth'] = true;\n      } else if (typeof this.authOverride_ === 'object') {\n        requestData['authvar'] = this.authOverride_;\n      }\n      this.sendRequest(authMethod, requestData, (res: { [k: string]: any }) => {\n        const status: string = res[/*status*/ 's'];\n        const data: string = res[/*data*/ 'd'] || 'error';\n\n        if (this.authToken_ === token) {\n          if (status === 'ok') {\n            this.invalidAuthTokenCount_ = 0;\n          } else {\n            // Triggers reconnect and force refresh for auth token\n            this.onAuthRevoked_(status, data);\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  unlisten(query: Query, tag: number | null) {\n    const pathString = query.path.toString();\n    const queryId = query.queryIdentifier();\n\n    this.log_('Unlisten called for ' + pathString + ' ' + queryId);\n\n    assert(\n      query.getQueryParams().isDefault() ||\n        !query.getQueryParams().loadsAllData(),\n      'unlisten() called for non-default but complete query'\n    );\n    const listen = this.removeListen_(pathString, queryId);\n    if (listen && this.connected_) {\n      this.sendUnlisten_(pathString, queryId, query.queryObject(), tag);\n    }\n  }\n\n  private sendUnlisten_(\n    pathString: string,\n    queryId: string,\n    queryObj: Object,\n    tag: number | null\n  ) {\n    this.log_('Unlisten on ' + pathString + ' for ' + queryId);\n\n    const req: { [k: string]: any } = { /*path*/ p: pathString };\n    const action = 'n';\n    // Only bother sending queryId if it's non-default.\n    if (tag) {\n      req['q'] = queryObj;\n      req['t'] = tag;\n    }\n\n    this.sendRequest(action, req);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  onDisconnectPut(\n    pathString: string,\n    data: any,\n    onComplete?: (a: string, b: string) => void\n  ) {\n    if (this.connected_) {\n      this.sendOnDisconnect_('o', pathString, data, onComplete);\n    } else {\n      this.onDisconnectRequestQueue_.push({\n        pathString,\n        action: 'o',\n        data,\n        onComplete\n      });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  onDisconnectMerge(\n    pathString: string,\n    data: any,\n    onComplete?: (a: string, b: string) => void\n  ) {\n    if (this.connected_) {\n      this.sendOnDisconnect_('om', pathString, data, onComplete);\n    } else {\n      this.onDisconnectRequestQueue_.push({\n        pathString,\n        action: 'om',\n        data,\n        onComplete\n      });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  onDisconnectCancel(\n    pathString: string,\n    onComplete?: (a: string, b: string) => void\n  ) {\n    if (this.connected_) {\n      this.sendOnDisconnect_('oc', pathString, null, onComplete);\n    } else {\n      this.onDisconnectRequestQueue_.push({\n        pathString,\n        action: 'oc',\n        data: null,\n        onComplete\n      });\n    }\n  }\n\n  private sendOnDisconnect_(\n    action: string,\n    pathString: string,\n    data: any,\n    onComplete: (a: string, b: string) => void\n  ) {\n    const request = { /*path*/ p: pathString, /*data*/ d: data };\n    this.log_('onDisconnect ' + action, request);\n    this.sendRequest(action, request, (response: { [k: string]: any }) => {\n      if (onComplete) {\n        setTimeout(function() {\n          onComplete(response[/*status*/ 's'], response[/* data */ 'd']);\n        }, Math.floor(0));\n      }\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  put(\n    pathString: string,\n    data: any,\n    onComplete?: (a: string, b: string) => void,\n    hash?: string\n  ) {\n    this.putInternal('p', pathString, data, onComplete, hash);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  merge(\n    pathString: string,\n    data: any,\n    onComplete: (a: string, b: string | null) => void,\n    hash?: string\n  ) {\n    this.putInternal('m', pathString, data, onComplete, hash);\n  }\n\n  putInternal(\n    action: string,\n    pathString: string,\n    data: any,\n    onComplete: (a: string, b: string | null) => void,\n    hash?: string\n  ) {\n    const request: { [k: string]: any } = {\n      /*path*/ p: pathString,\n      /*data*/ d: data\n    };\n\n    if (hash !== undefined) request[/*hash*/ 'h'] = hash;\n\n    // TODO: Only keep track of the most recent put for a given path?\n    this.outstandingPuts_.push({\n      action,\n      request,\n      onComplete\n    });\n\n    this.outstandingPutCount_++;\n    const index = this.outstandingPuts_.length - 1;\n\n    if (this.connected_) {\n      this.sendPut_(index);\n    } else {\n      this.log_('Buffering put: ' + pathString);\n    }\n  }\n\n  private sendPut_(index: number) {\n    const action = this.outstandingPuts_[index].action;\n    const request = this.outstandingPuts_[index].request;\n    const onComplete = this.outstandingPuts_[index].onComplete;\n    this.outstandingPuts_[index].queued = this.connected_;\n\n    this.sendRequest(action, request, (message: { [k: string]: any }) => {\n      this.log_(action + ' response', message);\n\n      delete this.outstandingPuts_[index];\n      this.outstandingPutCount_--;\n\n      // Clean up array occasionally.\n      if (this.outstandingPutCount_ === 0) {\n        this.outstandingPuts_ = [];\n      }\n\n      if (onComplete)\n        onComplete(message[/*status*/ 's'], message[/* data */ 'd']);\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  reportStats(stats: { [k: string]: any }) {\n    // If we're not connected, we just drop the stats.\n    if (this.connected_) {\n      const request = { /*counters*/ c: stats };\n      this.log_('reportStats', request);\n\n      this.sendRequest(/*stats*/ 's', request, result => {\n        const status = result[/*status*/ 's'];\n        if (status !== 'ok') {\n          const errorReason = result[/* data */ 'd'];\n          this.log_('reportStats', 'Error sending stats: ' + errorReason);\n        }\n      });\n    }\n  }\n\n  /**\n   * @param {*} message\n   * @private\n   */\n  private onDataMessage_(message: { [k: string]: any }) {\n    if ('r' in message) {\n      // this is a response\n      this.log_('from server: ' + stringify(message));\n      const reqNum = message['r'];\n      const onResponse = this.requestCBHash_[reqNum];\n      if (onResponse) {\n        delete this.requestCBHash_[reqNum];\n        onResponse(message[/*body*/ 'b']);\n      }\n    } else if ('error' in message) {\n      throw 'A server-side error has occurred: ' + message['error'];\n    } else if ('a' in message) {\n      // a and b are action and body, respectively\n      this.onDataPush_(message['a'], message['b']);\n    }\n  }\n\n  private onDataPush_(action: string, body: { [k: string]: any }) {\n    this.log_('handleServerMessage', action, body);\n    if (action === 'd')\n      this.onDataUpdate_(\n        body[/*path*/ 'p'],\n        body[/*data*/ 'd'],\n        /*isMerge*/ false,\n        body['t']\n      );\n    else if (action === 'm')\n      this.onDataUpdate_(\n        body[/*path*/ 'p'],\n        body[/*data*/ 'd'],\n        /*isMerge=*/ true,\n        body['t']\n      );\n    else if (action === 'c')\n      this.onListenRevoked_(body[/*path*/ 'p'], body[/*query*/ 'q']);\n    else if (action === 'ac')\n      this.onAuthRevoked_(\n        body[/*status code*/ 's'],\n        body[/* explanation */ 'd']\n      );\n    else if (action === 'sd') this.onSecurityDebugPacket_(body);\n    else\n      error(\n        'Unrecognized action received from server: ' +\n          stringify(action) +\n          '\\nAre you using the latest client?'\n      );\n  }\n\n  private onReady_(timestamp: number, sessionId: string) {\n    this.log_('connection ready');\n    this.connected_ = true;\n    this.lastConnectionEstablishedTime_ = new Date().getTime();\n    this.handleTimestamp_(timestamp);\n    this.lastSessionId = sessionId;\n    if (this.firstConnection_) {\n      this.sendConnectStats_();\n    }\n    this.restoreState_();\n    this.firstConnection_ = false;\n    this.onConnectStatus_(true);\n  }\n\n  private scheduleConnect_(timeout: number) {\n    assert(\n      !this.realtime_,\n      \"Scheduling a connect when we're already connected/ing?\"\n    );\n\n    if (this.establishConnectionTimer_) {\n      clearTimeout(this.establishConnectionTimer_);\n    }\n\n    // NOTE: Even when timeout is 0, it's important to do a setTimeout to work around an infuriating \"Security Error\" in\n    // Firefox when trying to write to our long-polling iframe in some scenarios (e.g. Forge or our unit tests).\n\n    this.establishConnectionTimer_ = setTimeout(() => {\n      this.establishConnectionTimer_ = null;\n      this.establishConnection_();\n    }, Math.floor(timeout)) as any;\n  }\n\n  /**\n   * @param {boolean} visible\n   * @private\n   */\n  private onVisible_(visible: boolean) {\n    // NOTE: Tabbing away and back to a window will defeat our reconnect backoff, but I think that's fine.\n    if (\n      visible &&\n      !this.visible_ &&\n      this.reconnectDelay_ === this.maxReconnectDelay_\n    ) {\n      this.log_('Window became visible.  Reducing delay.');\n      this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n\n      if (!this.realtime_) {\n        this.scheduleConnect_(0);\n      }\n    }\n    this.visible_ = visible;\n  }\n\n  private onOnline_(online: boolean) {\n    if (online) {\n      this.log_('Browser went online.');\n      this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n      if (!this.realtime_) {\n        this.scheduleConnect_(0);\n      }\n    } else {\n      this.log_('Browser went offline.  Killing connection.');\n      if (this.realtime_) {\n        this.realtime_.close();\n      }\n    }\n  }\n\n  private onRealtimeDisconnect_() {\n    this.log_('data client disconnected');\n    this.connected_ = false;\n    this.realtime_ = null;\n\n    // Since we don't know if our sent transactions succeeded or not, we need to cancel them.\n    this.cancelSentTransactions_();\n\n    // Clear out the pending requests.\n    this.requestCBHash_ = {};\n\n    if (this.shouldReconnect_()) {\n      if (!this.visible_) {\n        this.log_(\"Window isn't visible.  Delaying reconnect.\");\n        this.reconnectDelay_ = this.maxReconnectDelay_;\n        this.lastConnectionAttemptTime_ = new Date().getTime();\n      } else if (this.lastConnectionEstablishedTime_) {\n        // If we've been connected long enough, reset reconnect delay to minimum.\n        const timeSinceLastConnectSucceeded =\n          new Date().getTime() - this.lastConnectionEstablishedTime_;\n        if (timeSinceLastConnectSucceeded > RECONNECT_DELAY_RESET_TIMEOUT)\n          this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n        this.lastConnectionEstablishedTime_ = null;\n      }\n\n      const timeSinceLastConnectAttempt =\n        new Date().getTime() - this.lastConnectionAttemptTime_;\n      let reconnectDelay = Math.max(\n        0,\n        this.reconnectDelay_ - timeSinceLastConnectAttempt\n      );\n      reconnectDelay = Math.random() * reconnectDelay;\n\n      this.log_('Trying to reconnect in ' + reconnectDelay + 'ms');\n      this.scheduleConnect_(reconnectDelay);\n\n      // Adjust reconnect delay for next time.\n      this.reconnectDelay_ = Math.min(\n        this.maxReconnectDelay_,\n        this.reconnectDelay_ * RECONNECT_DELAY_MULTIPLIER\n      );\n    }\n    this.onConnectStatus_(false);\n  }\n\n  private establishConnection_() {\n    if (this.shouldReconnect_()) {\n      this.log_('Making a connection attempt');\n      this.lastConnectionAttemptTime_ = new Date().getTime();\n      this.lastConnectionEstablishedTime_ = null;\n      const onDataMessage = this.onDataMessage_.bind(this);\n      const onReady = this.onReady_.bind(this);\n      const onDisconnect = this.onRealtimeDisconnect_.bind(this);\n      const connId = this.id + ':' + PersistentConnection.nextConnectionId_++;\n      const self = this;\n      const lastSessionId = this.lastSessionId;\n      let canceled = false;\n      let connection: Connection | null = null;\n      const closeFn = function() {\n        if (connection) {\n          connection.close();\n        } else {\n          canceled = true;\n          onDisconnect();\n        }\n      };\n      const sendRequestFn = function(msg: Object) {\n        assert(\n          connection,\n          \"sendRequest call when we're not connected not allowed.\"\n        );\n        connection.sendRequest(msg);\n      };\n\n      this.realtime_ = {\n        close: closeFn,\n        sendRequest: sendRequestFn\n      };\n\n      const forceRefresh = this.forceTokenRefresh_;\n      this.forceTokenRefresh_ = false;\n\n      // First fetch auth token, and establish connection after fetching the token was successful\n      this.authTokenProvider_\n        .getToken(forceRefresh)\n        .then(function(result) {\n          if (!canceled) {\n            log('getToken() completed. Creating connection.');\n            self.authToken_ = result && result.accessToken;\n            connection = new Connection(\n              connId,\n              self.repoInfo_,\n              onDataMessage,\n              onReady,\n              onDisconnect,\n              /* onKill= */ function(reason) {\n                warn(reason + ' (' + self.repoInfo_.toString() + ')');\n                self.interrupt(SERVER_KILL_INTERRUPT_REASON);\n              },\n              lastSessionId\n            );\n          } else {\n            log('getToken() completed but was canceled');\n          }\n        })\n        .then(null, function(error) {\n          self.log_('Failed to get token: ' + error);\n          if (!canceled) {\n            if (CONSTANTS.NODE_ADMIN) {\n              // This may be a critical error for the Admin Node.js SDK, so log a warning.\n              // But getToken() may also just have temporarily failed, so we still want to\n              // continue retrying.\n              warn(error);\n            }\n            closeFn();\n          }\n        });\n    }\n  }\n\n  /**\n   * @param {string} reason\n   */\n  interrupt(reason: string) {\n    log('Interrupting connection for reason: ' + reason);\n    this.interruptReasons_[reason] = true;\n    if (this.realtime_) {\n      this.realtime_.close();\n    } else {\n      if (this.establishConnectionTimer_) {\n        clearTimeout(this.establishConnectionTimer_);\n        this.establishConnectionTimer_ = null;\n      }\n      if (this.connected_) {\n        this.onRealtimeDisconnect_();\n      }\n    }\n  }\n\n  /**\n   * @param {string} reason\n   */\n  resume(reason: string) {\n    log('Resuming connection for reason: ' + reason);\n    delete this.interruptReasons_[reason];\n    if (isEmpty(this.interruptReasons_)) {\n      this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n      if (!this.realtime_) {\n        this.scheduleConnect_(0);\n      }\n    }\n  }\n\n  private handleTimestamp_(timestamp: number) {\n    const delta = timestamp - new Date().getTime();\n    this.onServerInfoUpdate_({ serverTimeOffset: delta });\n  }\n\n  private cancelSentTransactions_() {\n    for (let i = 0; i < this.outstandingPuts_.length; i++) {\n      const put = this.outstandingPuts_[i];\n      if (put && /*hash*/ 'h' in put.request && put.queued) {\n        if (put.onComplete) put.onComplete('disconnect');\n\n        delete this.outstandingPuts_[i];\n        this.outstandingPutCount_--;\n      }\n    }\n\n    // Clean up array occasionally.\n    if (this.outstandingPutCount_ === 0) this.outstandingPuts_ = [];\n  }\n\n  /**\n   * @param {!string} pathString\n   * @param {Array.<*>=} query\n   * @private\n   */\n  private onListenRevoked_(pathString: string, query?: any[]) {\n    // Remove the listen and manufacture a \"permission_denied\" error for the failed listen.\n    let queryId;\n    if (!query) {\n      queryId = 'default';\n    } else {\n      queryId = query.map(q => ObjectToUniqueKey(q)).join('$');\n    }\n    const listen = this.removeListen_(pathString, queryId);\n    if (listen && listen.onComplete) listen.onComplete('permission_denied');\n  }\n\n  /**\n   * @param {!string} pathString\n   * @param {!string} queryId\n   * @return {{queries:Array.<Query>, onComplete:function(string)}}\n   * @private\n   */\n  private removeListen_(pathString: string, queryId: string): ListenSpec {\n    const normalizedPathString = new Path(pathString).toString(); // normalize path.\n    let listen;\n    if (this.listens_[normalizedPathString] !== undefined) {\n      listen = this.listens_[normalizedPathString][queryId];\n      delete this.listens_[normalizedPathString][queryId];\n      if (getCount(this.listens_[normalizedPathString]) === 0) {\n        delete this.listens_[normalizedPathString];\n      }\n    } else {\n      // all listens for this path has already been removed\n      listen = undefined;\n    }\n    return listen;\n  }\n\n  private onAuthRevoked_(statusCode: string, explanation: string) {\n    log('Auth token revoked: ' + statusCode + '/' + explanation);\n    this.authToken_ = null;\n    this.forceTokenRefresh_ = true;\n    this.realtime_.close();\n    if (statusCode === 'invalid_token' || statusCode === 'permission_denied') {\n      // We'll wait a couple times before logging the warning / increasing the\n      // retry period since oauth tokens will report as \"invalid\" if they're\n      // just expired. Plus there may be transient issues that resolve themselves.\n      this.invalidAuthTokenCount_++;\n      if (this.invalidAuthTokenCount_ >= INVALID_AUTH_TOKEN_THRESHOLD) {\n        // Set a long reconnect delay because recovery is unlikely\n        this.reconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\n\n        // Notify the auth token provider that the token is invalid, which will log\n        // a warning\n        this.authTokenProvider_.notifyForInvalidToken();\n      }\n    }\n  }\n\n  private onSecurityDebugPacket_(body: { [k: string]: any }) {\n    if (this.securityDebugCallback_) {\n      this.securityDebugCallback_(body);\n    } else {\n      if ('msg' in body) {\n        console.log('FIREBASE: ' + body['msg'].replace('\\n', '\\nFIREBASE: '));\n      }\n    }\n  }\n\n  private restoreState_() {\n    //Re-authenticate ourselves if we have a credential stored.\n    this.tryAuth();\n\n    // Puts depend on having received the corresponding data update from the server before they complete, so we must\n    // make sure to send listens before puts.\n    forEach(\n      this.listens_,\n      (pathString: string, queries: { [key: string]: ListenSpec }) => {\n        forEach(queries, (key: string, listenSpec: ListenSpec) => {\n          this.sendListen_(listenSpec);\n        });\n      }\n    );\n\n    for (let i = 0; i < this.outstandingPuts_.length; i++) {\n      if (this.outstandingPuts_[i]) this.sendPut_(i);\n    }\n\n    while (this.onDisconnectRequestQueue_.length) {\n      const request = this.onDisconnectRequestQueue_.shift();\n      this.sendOnDisconnect_(\n        request.action,\n        request.pathString,\n        request.data,\n        request.onComplete\n      );\n    }\n  }\n\n  /**\n   * Sends client stats for first connection\n   * @private\n   */\n  private sendConnectStats_() {\n    const stats: { [k: string]: number } = {};\n\n    let clientName = 'js';\n    if (CONSTANTS.NODE_ADMIN) {\n      clientName = 'admin_node';\n    } else if (CONSTANTS.NODE_CLIENT) {\n      clientName = 'node';\n    }\n\n    stats[\n      'sdk.' + clientName + '.' + firebase.SDK_VERSION.replace(/\\./g, '-')\n    ] = 1;\n\n    if (isMobileCordova()) {\n      stats['framework.cordova'] = 1;\n    } else if (isReactNative()) {\n      stats['framework.reactnative'] = 1;\n    }\n    this.reportStats(stats);\n  }\n\n  /**\n   * @return {boolean}\n   * @private\n   */\n  private shouldReconnect_(): boolean {\n    const online = OnlineMonitor.getInstance().currentlyOnline();\n    return isEmpty(this.interruptReasons_) && online;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { logWrapper, warn } from './util/util';\nimport { jsonEval } from '@firebase/util';\nimport { safeGet } from '@firebase/util';\nimport { querystring } from '@firebase/util';\nimport { ServerActions } from './ServerActions';\nimport { RepoInfo } from './RepoInfo';\nimport { AuthTokenProvider } from './AuthTokenProvider';\nimport { Query } from '../api/Query';\n\n/**\n * An implementation of ServerActions that communicates with the server via REST requests.\n * This is mostly useful for compatibility with crawlers, where we don't want to spin up a full\n * persistent connection (using WebSockets or long-polling)\n */\nexport class ReadonlyRestClient extends ServerActions {\n  reportStats(stats: { [k: string]: any }): void {\n    throw new Error('Method not implemented.');\n  }\n\n  /** @private {function(...[*])} */\n  private log_: (...args: any[]) => void = logWrapper('p:rest:');\n\n  /**\n   * We don't actually need to track listens, except to prevent us calling an onComplete for a listen\n   * that's been removed. :-/\n   *\n   * @private {!Object.<string, !Object>}\n   */\n  private listens_: { [k: string]: Object } = {};\n\n  /**\n   * @param {!Query} query\n   * @param {?number=} tag\n   * @return {string}\n   * @private\n   */\n  static getListenId_(query: Query, tag?: number | null): string {\n    if (tag !== undefined) {\n      return 'tag$' + tag;\n    } else {\n      assert(\n        query.getQueryParams().isDefault(),\n        \"should have a tag if it's not a default query.\"\n      );\n      return query.path.toString();\n    }\n  }\n\n  /**\n   * @param {!RepoInfo} repoInfo_ Data about the namespace we are connecting to\n   * @param {function(string, *, boolean, ?number)} onDataUpdate_ A callback for new data from the server\n   * @param {AuthTokenProvider} authTokenProvider_\n   * @implements {ServerActions}\n   */\n  constructor(\n    private repoInfo_: RepoInfo,\n    private onDataUpdate_: (\n      a: string,\n      b: any,\n      c: boolean,\n      d: number | null\n    ) => void,\n    private authTokenProvider_: AuthTokenProvider\n  ) {\n    super();\n  }\n\n  /** @inheritDoc */\n  listen(\n    query: Query,\n    currentHashFn: () => string,\n    tag: number | null,\n    onComplete: (a: string, b: any) => void\n  ) {\n    const pathString = query.path.toString();\n    this.log_(\n      'Listen called for ' + pathString + ' ' + query.queryIdentifier()\n    );\n\n    // Mark this listener so we can tell if it's removed.\n    const listenId = ReadonlyRestClient.getListenId_(query, tag);\n    const thisListen = {};\n    this.listens_[listenId] = thisListen;\n\n    const queryStringParameters = query\n      .getQueryParams()\n      .toRestQueryStringParameters();\n\n    this.restRequest_(\n      pathString + '.json',\n      queryStringParameters,\n      (error, result) => {\n        let data = result;\n\n        if (error === 404) {\n          data = null;\n          error = null;\n        }\n\n        if (error === null) {\n          this.onDataUpdate_(pathString, data, /*isMerge=*/ false, tag);\n        }\n\n        if (safeGet(this.listens_, listenId) === thisListen) {\n          let status;\n          if (!error) {\n            status = 'ok';\n          } else if (error == 401) {\n            status = 'permission_denied';\n          } else {\n            status = 'rest_error:' + error;\n          }\n\n          onComplete(status, null);\n        }\n      }\n    );\n  }\n\n  /** @inheritDoc */\n  unlisten(query: Query, tag: number | null) {\n    const listenId = ReadonlyRestClient.getListenId_(query, tag);\n    delete this.listens_[listenId];\n  }\n\n  /** @inheritDoc */\n  refreshAuthToken(token: string) {\n    // no-op since we just always call getToken.\n  }\n\n  /**\n   * Performs a REST request to the given path, with the provided query string parameters,\n   * and any auth credentials we have.\n   *\n   * @param {!string} pathString\n   * @param {!Object.<string, *>} queryStringParameters\n   * @param {?function(?number, *=)} callback\n   * @private\n   */\n  private restRequest_(\n    pathString: string,\n    queryStringParameters: { [k: string]: any } = {},\n    callback: ((a: number | null, b?: any) => void) | null\n  ) {\n    queryStringParameters['format'] = 'export';\n\n    this.authTokenProvider_\n      .getToken(/*forceRefresh=*/ false)\n      .then(authTokenData => {\n        const authToken = authTokenData && authTokenData.accessToken;\n        if (authToken) {\n          queryStringParameters['auth'] = authToken;\n        }\n\n        const url =\n          (this.repoInfo_.secure ? 'https://' : 'http://') +\n          this.repoInfo_.host +\n          pathString +\n          '?' +\n          'ns=' +\n          this.repoInfo_.namespace +\n          querystring(queryStringParameters);\n\n        this.log_('Sending REST request for ' + url);\n        const xhr = new XMLHttpRequest();\n        xhr.onreadystatechange = () => {\n          if (callback && xhr.readyState === 4) {\n            this.log_(\n              'REST Response for ' + url + ' received. status:',\n              xhr.status,\n              'response:',\n              xhr.responseText\n            );\n            let res = null;\n            if (xhr.status >= 200 && xhr.status < 300) {\n              try {\n                res = jsonEval(xhr.responseText);\n              } catch (e) {\n                warn(\n                  'Failed to parse JSON response for ' +\n                    url +\n                    ': ' +\n                    xhr.responseText\n                );\n              }\n              callback(null, res);\n            } else {\n              // 401 and 404 are expected.\n              if (xhr.status !== 401 && xhr.status !== 404) {\n                warn(\n                  'Got unsuccessful REST response for ' +\n                    url +\n                    ' Status: ' +\n                    xhr.status\n                );\n              }\n              callback(xhr.status);\n            }\n            callback = null;\n          }\n        };\n\n        xhr.open('GET', url, /*asynchronous=*/ true);\n        xhr.send();\n      });\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  generateWithValues,\n  resolveDeferredValueSnapshot,\n  resolveDeferredValueTree\n} from './util/ServerValues';\nimport { nodeFromJSON } from './snap/nodeFromJSON';\nimport { Path } from './util/Path';\nimport { SparseSnapshotTree } from './SparseSnapshotTree';\nimport { SyncTree } from './SyncTree';\nimport { SnapshotHolder } from './SnapshotHolder';\nimport { stringify } from '@firebase/util';\nimport { beingCrawled, each, exceptionGuard, warn, log } from './util/util';\nimport { map, forEach, isEmpty } from '@firebase/util';\nimport { AuthTokenProvider } from './AuthTokenProvider';\nimport { StatsManager } from './stats/StatsManager';\nimport { StatsReporter } from './stats/StatsReporter';\nimport { StatsListener } from './stats/StatsListener';\nimport { EventQueue } from './view/EventQueue';\nimport { PersistentConnection } from './PersistentConnection';\nimport { ReadonlyRestClient } from './ReadonlyRestClient';\nimport { FirebaseApp } from '@firebase/app-types';\nimport { RepoInfo } from './RepoInfo';\nimport { Database } from '../api/Database';\nimport { ServerActions } from './ServerActions';\nimport { Query } from '../api/Query';\nimport { EventRegistration } from './view/EventRegistration';\nimport { StatsCollection } from './stats/StatsCollection';\nimport { Event } from './view/Event';\nimport { Node } from './snap/Node';\n\nconst INTERRUPT_REASON = 'repo_interrupt';\n\n/**\n * A connection to a single data repository.\n */\nexport class Repo {\n  dataUpdateCount = 0;\n  private infoSyncTree_: SyncTree;\n  private serverSyncTree_: SyncTree;\n\n  private stats_: StatsCollection;\n  private statsListener_: StatsListener | null = null;\n  private eventQueue_ = new EventQueue();\n  private nextWriteId_ = 1;\n  private server_: ServerActions;\n  private statsReporter_: StatsReporter;\n  private transactions_init_: () => void;\n  private infoData_: SnapshotHolder;\n  private abortTransactions_: (path: Path) => Path;\n  private rerunTransactions_: (changedPath: Path) => Path;\n  private interceptServerDataCallback_:\n    | ((a: string, b: any) => void)\n    | null = null;\n  private __database: Database;\n\n  // A list of data pieces and paths to be set when this client disconnects.\n  private onDisconnect_ = new SparseSnapshotTree();\n\n  /**\n   * TODO: This should be @private but it's used by test_access.js and internal.js\n   * @type {?PersistentConnection}\n   */\n  persistentConnection_: PersistentConnection | null = null;\n\n  /**\n   * @param {!RepoInfo} repoInfo_\n   * @param {boolean} forceRestClient\n   * @param {!FirebaseApp} app\n   */\n  constructor(\n    public repoInfo_: RepoInfo,\n    forceRestClient: boolean,\n    public app: FirebaseApp\n  ) {\n    /** @type {!AuthTokenProvider} */\n    const authTokenProvider = new AuthTokenProvider(app);\n\n    this.stats_ = StatsManager.getCollection(repoInfo_);\n\n    if (forceRestClient || beingCrawled()) {\n      this.server_ = new ReadonlyRestClient(\n        this.repoInfo_,\n        this.onDataUpdate_.bind(this),\n        authTokenProvider\n      );\n\n      // Minor hack: Fire onConnect immediately, since there's no actual connection.\n      setTimeout(this.onConnectStatus_.bind(this, true), 0);\n    } else {\n      const authOverride = app.options['databaseAuthVariableOverride'];\n      // Validate authOverride\n      if (typeof authOverride !== 'undefined' && authOverride !== null) {\n        if (typeof authOverride !== 'object') {\n          throw new Error(\n            'Only objects are supported for option databaseAuthVariableOverride'\n          );\n        }\n        try {\n          stringify(authOverride);\n        } catch (e) {\n          throw new Error('Invalid authOverride provided: ' + e);\n        }\n      }\n\n      this.persistentConnection_ = new PersistentConnection(\n        this.repoInfo_,\n        this.onDataUpdate_.bind(this),\n        this.onConnectStatus_.bind(this),\n        this.onServerInfoUpdate_.bind(this),\n        authTokenProvider,\n        authOverride\n      );\n\n      this.server_ = this.persistentConnection_;\n    }\n\n    authTokenProvider.addTokenChangeListener(token => {\n      this.server_.refreshAuthToken(token);\n    });\n\n    // In the case of multiple Repos for the same repoInfo (i.e. there are multiple Firebase.Contexts being used),\n    // we only want to create one StatsReporter.  As such, we'll report stats over the first Repo created.\n    this.statsReporter_ = StatsManager.getOrCreateReporter(\n      repoInfo_,\n      () => new StatsReporter(this.stats_, this.server_)\n    );\n\n    this.transactions_init_();\n\n    // Used for .info.\n    this.infoData_ = new SnapshotHolder();\n    this.infoSyncTree_ = new SyncTree({\n      startListening: (query, tag, currentHashFn, onComplete) => {\n        let infoEvents: Event[] = [];\n        const node = this.infoData_.getNode(query.path);\n        // This is possibly a hack, but we have different semantics for .info endpoints. We don't raise null events\n        // on initial data...\n        if (!node.isEmpty()) {\n          infoEvents = this.infoSyncTree_.applyServerOverwrite(\n            query.path,\n            node\n          );\n          setTimeout(() => {\n            onComplete('ok');\n          }, 0);\n        }\n        return infoEvents;\n      },\n      stopListening: () => {}\n    });\n    this.updateInfo_('connected', false);\n\n    this.serverSyncTree_ = new SyncTree({\n      startListening: (query, tag, currentHashFn, onComplete) => {\n        this.server_.listen(query, currentHashFn, tag, (status, data) => {\n          const events = onComplete(status, data);\n          this.eventQueue_.raiseEventsForChangedPath(query.path, events);\n        });\n        // No synchronous events for network-backed sync trees\n        return [];\n      },\n      stopListening: (query, tag) => {\n        this.server_.unlisten(query, tag);\n      }\n    });\n  }\n\n  /**\n   * @return {string}  The URL corresponding to the root of this Firebase.\n   */\n  toString(): string {\n    return (\n      (this.repoInfo_.secure ? 'https://' : 'http://') + this.repoInfo_.host\n    );\n  }\n\n  /**\n   * @return {!string} The namespace represented by the repo.\n   */\n  name(): string {\n    return this.repoInfo_.namespace;\n  }\n\n  /**\n   * @return {!number} The time in milliseconds, taking the server offset into account if we have one.\n   */\n  serverTime(): number {\n    const offsetNode = this.infoData_.getNode(\n      new Path('.info/serverTimeOffset')\n    );\n    const offset = (offsetNode.val() as number) || 0;\n    return new Date().getTime() + offset;\n  }\n\n  /**\n   * Generate ServerValues using some variables from the repo object.\n   * @return {!Object}\n   */\n  generateServerValues(): Object {\n    return generateWithValues({\n      timestamp: this.serverTime()\n    });\n  }\n\n  /**\n   * Called by realtime when we get new messages from the server.\n   *\n   * @private\n   * @param {string} pathString\n   * @param {*} data\n   * @param {boolean} isMerge\n   * @param {?number} tag\n   */\n  private onDataUpdate_(\n    pathString: string,\n    data: any,\n    isMerge: boolean,\n    tag: number | null\n  ) {\n    // For testing.\n    this.dataUpdateCount++;\n    const path = new Path(pathString);\n    data = this.interceptServerDataCallback_\n      ? this.interceptServerDataCallback_(pathString, data)\n      : data;\n    let events = [];\n    if (tag) {\n      if (isMerge) {\n        const taggedChildren = map(data as { [k: string]: any }, (raw: any) =>\n          nodeFromJSON(raw)\n        );\n        events = this.serverSyncTree_.applyTaggedQueryMerge(\n          path,\n          taggedChildren,\n          tag\n        );\n      } else {\n        const taggedSnap = nodeFromJSON(data);\n        events = this.serverSyncTree_.applyTaggedQueryOverwrite(\n          path,\n          taggedSnap,\n          tag\n        );\n      }\n    } else if (isMerge) {\n      const changedChildren = map(data as { [k: string]: any }, (raw: any) =>\n        nodeFromJSON(raw)\n      );\n      events = this.serverSyncTree_.applyServerMerge(path, changedChildren);\n    } else {\n      const snap = nodeFromJSON(data);\n      events = this.serverSyncTree_.applyServerOverwrite(path, snap);\n    }\n    let affectedPath = path;\n    if (events.length > 0) {\n      // Since we have a listener outstanding for each transaction, receiving any events\n      // is a proxy for some change having occurred.\n      affectedPath = this.rerunTransactions_(path);\n    }\n    this.eventQueue_.raiseEventsForChangedPath(affectedPath, events);\n  }\n\n  /**\n   * TODO: This should be @private but it's used by test_access.js and internal.js\n   * @param {?function(!string, *):*} callback\n   * @private\n   */\n  interceptServerData_(callback: ((a: string, b: any) => any) | null) {\n    this.interceptServerDataCallback_ = callback;\n  }\n\n  /**\n   * @param {!boolean} connectStatus\n   * @private\n   */\n  private onConnectStatus_(connectStatus: boolean) {\n    this.updateInfo_('connected', connectStatus);\n    if (connectStatus === false) {\n      this.runOnDisconnectEvents_();\n    }\n  }\n\n  /**\n   * @param {!Object} updates\n   * @private\n   */\n  private onServerInfoUpdate_(updates: Object) {\n    each(updates, (value: any, key: string) => {\n      this.updateInfo_(key, value);\n    });\n  }\n\n  /**\n   *\n   * @param {!string} pathString\n   * @param {*} value\n   * @private\n   */\n  private updateInfo_(pathString: string, value: any) {\n    const path = new Path('/.info/' + pathString);\n    const newNode = nodeFromJSON(value);\n    this.infoData_.updateSnapshot(path, newNode);\n    const events = this.infoSyncTree_.applyServerOverwrite(path, newNode);\n    this.eventQueue_.raiseEventsForChangedPath(path, events);\n  }\n\n  /**\n   * @return {!number}\n   * @private\n   */\n  private getNextWriteId_(): number {\n    return this.nextWriteId_++;\n  }\n\n  /**\n   * @param {!Path} path\n   * @param {*} newVal\n   * @param {number|string|null} newPriority\n   * @param {?function(?Error, *=)} onComplete\n   */\n  setWithPriority(\n    path: Path,\n    newVal: any,\n    newPriority: number | string | null,\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    this.log_('set', {\n      path: path.toString(),\n      value: newVal,\n      priority: newPriority\n    });\n\n    // TODO: Optimize this behavior to either (a) store flag to skip resolving where possible and / or\n    // (b) store unresolved paths on JSON parse\n    const serverValues = this.generateServerValues();\n    const newNodeUnresolved = nodeFromJSON(newVal, newPriority);\n    const newNode = resolveDeferredValueSnapshot(\n      newNodeUnresolved,\n      serverValues\n    );\n\n    const writeId = this.getNextWriteId_();\n    const events = this.serverSyncTree_.applyUserOverwrite(\n      path,\n      newNode,\n      writeId,\n      true\n    );\n    this.eventQueue_.queueEvents(events);\n    this.server_.put(\n      path.toString(),\n      newNodeUnresolved.val(/*export=*/ true),\n      (status, errorReason) => {\n        const success = status === 'ok';\n        if (!success) {\n          warn('set at ' + path + ' failed: ' + status);\n        }\n\n        const clearEvents = this.serverSyncTree_.ackUserWrite(\n          writeId,\n          !success\n        );\n        this.eventQueue_.raiseEventsForChangedPath(path, clearEvents);\n        this.callOnCompleteCallback(onComplete, status, errorReason);\n      }\n    );\n    const affectedPath = this.abortTransactions_(path);\n    this.rerunTransactions_(affectedPath);\n    // We queued the events above, so just flush the queue here\n    this.eventQueue_.raiseEventsForChangedPath(affectedPath, []);\n  }\n\n  /**\n   * @param {!Path} path\n   * @param {!Object} childrenToMerge\n   * @param {?function(?Error, *=)} onComplete\n   */\n  update(\n    path: Path,\n    childrenToMerge: { [k: string]: any },\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    this.log_('update', { path: path.toString(), value: childrenToMerge });\n\n    // Start with our existing data and merge each child into it.\n    let empty = true;\n    const serverValues = this.generateServerValues();\n    const changedChildren: { [k: string]: Node } = {};\n    forEach(childrenToMerge, (changedKey: string, changedValue: any) => {\n      empty = false;\n      const newNodeUnresolved = nodeFromJSON(changedValue);\n      changedChildren[changedKey] = resolveDeferredValueSnapshot(\n        newNodeUnresolved,\n        serverValues\n      );\n    });\n\n    if (!empty) {\n      const writeId = this.getNextWriteId_();\n      const events = this.serverSyncTree_.applyUserMerge(\n        path,\n        changedChildren,\n        writeId\n      );\n      this.eventQueue_.queueEvents(events);\n      this.server_.merge(\n        path.toString(),\n        childrenToMerge,\n        (status, errorReason) => {\n          const success = status === 'ok';\n          if (!success) {\n            warn('update at ' + path + ' failed: ' + status);\n          }\n\n          const clearEvents = this.serverSyncTree_.ackUserWrite(\n            writeId,\n            !success\n          );\n          const affectedPath =\n            clearEvents.length > 0 ? this.rerunTransactions_(path) : path;\n          this.eventQueue_.raiseEventsForChangedPath(affectedPath, clearEvents);\n          this.callOnCompleteCallback(onComplete, status, errorReason);\n        }\n      );\n\n      forEach(childrenToMerge, (changedPath: string) => {\n        const affectedPath = this.abortTransactions_(path.child(changedPath));\n        this.rerunTransactions_(affectedPath);\n      });\n\n      // We queued the events above, so just flush the queue here\n      this.eventQueue_.raiseEventsForChangedPath(path, []);\n    } else {\n      log(\"update() called with empty data.  Don't do anything.\");\n      this.callOnCompleteCallback(onComplete, 'ok');\n    }\n  }\n\n  /**\n   * Applies all of the changes stored up in the onDisconnect_ tree.\n   * @private\n   */\n  private runOnDisconnectEvents_() {\n    this.log_('onDisconnectEvents');\n\n    const serverValues = this.generateServerValues();\n    const resolvedOnDisconnectTree = resolveDeferredValueTree(\n      this.onDisconnect_,\n      serverValues\n    );\n    let events: Event[] = [];\n\n    resolvedOnDisconnectTree.forEachTree(Path.Empty, (path, snap) => {\n      events = events.concat(\n        this.serverSyncTree_.applyServerOverwrite(path, snap)\n      );\n      const affectedPath = this.abortTransactions_(path);\n      this.rerunTransactions_(affectedPath);\n    });\n\n    this.onDisconnect_ = new SparseSnapshotTree();\n    this.eventQueue_.raiseEventsForChangedPath(Path.Empty, events);\n  }\n\n  /**\n   * @param {!Path} path\n   * @param {?function(?Error, *=)} onComplete\n   */\n  onDisconnectCancel(\n    path: Path,\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    this.server_.onDisconnectCancel(path.toString(), (status, errorReason) => {\n      if (status === 'ok') {\n        this.onDisconnect_.forget(path);\n      }\n      this.callOnCompleteCallback(onComplete, status, errorReason);\n    });\n  }\n\n  /**\n   * @param {!Path} path\n   * @param {*} value\n   * @param {?function(?Error, *=)} onComplete\n   */\n  onDisconnectSet(\n    path: Path,\n    value: any,\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    const newNode = nodeFromJSON(value);\n    this.server_.onDisconnectPut(\n      path.toString(),\n      newNode.val(/*export=*/ true),\n      (status, errorReason) => {\n        if (status === 'ok') {\n          this.onDisconnect_.remember(path, newNode);\n        }\n        this.callOnCompleteCallback(onComplete, status, errorReason);\n      }\n    );\n  }\n\n  /**\n   * @param {!Path} path\n   * @param {*} value\n   * @param {*} priority\n   * @param {?function(?Error, *=)} onComplete\n   */\n  onDisconnectSetWithPriority(\n    path: Path,\n    value: any,\n    priority: any,\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    const newNode = nodeFromJSON(value, priority);\n    this.server_.onDisconnectPut(\n      path.toString(),\n      newNode.val(/*export=*/ true),\n      (status, errorReason) => {\n        if (status === 'ok') {\n          this.onDisconnect_.remember(path, newNode);\n        }\n        this.callOnCompleteCallback(onComplete, status, errorReason);\n      }\n    );\n  }\n\n  /**\n   * @param {!Path} path\n   * @param {*} childrenToMerge\n   * @param {?function(?Error, *=)} onComplete\n   */\n  onDisconnectUpdate(\n    path: Path,\n    childrenToMerge: { [k: string]: any },\n    onComplete: ((status: Error | null, errorReason?: string) => void) | null\n  ) {\n    if (isEmpty(childrenToMerge)) {\n      log(\n        \"onDisconnect().update() called with empty data.  Don't do anything.\"\n      );\n      this.callOnCompleteCallback(onComplete, 'ok');\n      return;\n    }\n\n    this.server_.onDisconnectMerge(\n      path.toString(),\n      childrenToMerge,\n      (status, errorReason) => {\n        if (status === 'ok') {\n          forEach(childrenToMerge, (childName: string, childNode: any) => {\n            const newChildNode = nodeFromJSON(childNode);\n            this.onDisconnect_.remember(path.child(childName), newChildNode);\n          });\n        }\n        this.callOnCompleteCallback(onComplete, status, errorReason);\n      }\n    );\n  }\n\n  /**\n   * @param {!Query} query\n   * @param {!EventRegistration} eventRegistration\n   */\n  addEventCallbackForQuery(query: Query, eventRegistration: EventRegistration) {\n    let events;\n    if (query.path.getFront() === '.info') {\n      events = this.infoSyncTree_.addEventRegistration(\n        query,\n        eventRegistration\n      );\n    } else {\n      events = this.serverSyncTree_.addEventRegistration(\n        query,\n        eventRegistration\n      );\n    }\n    this.eventQueue_.raiseEventsAtPath(query.path, events);\n  }\n\n  /**\n   * @param {!Query} query\n   * @param {?EventRegistration} eventRegistration\n   */\n  removeEventCallbackForQuery(\n    query: Query,\n    eventRegistration: EventRegistration\n  ) {\n    // These are guaranteed not to raise events, since we're not passing in a cancelError. However, we can future-proof\n    // a little bit by handling the return values anyways.\n    let events;\n    if (query.path.getFront() === '.info') {\n      events = this.infoSyncTree_.removeEventRegistration(\n        query,\n        eventRegistration\n      );\n    } else {\n      events = this.serverSyncTree_.removeEventRegistration(\n        query,\n        eventRegistration\n      );\n    }\n    this.eventQueue_.raiseEventsAtPath(query.path, events);\n  }\n\n  interrupt() {\n    if (this.persistentConnection_) {\n      this.persistentConnection_.interrupt(INTERRUPT_REASON);\n    }\n  }\n\n  resume() {\n    if (this.persistentConnection_) {\n      this.persistentConnection_.resume(INTERRUPT_REASON);\n    }\n  }\n\n  stats(showDelta: boolean = false) {\n    if (typeof console === 'undefined') return;\n\n    let stats: { [k: string]: any };\n    if (showDelta) {\n      if (!this.statsListener_)\n        this.statsListener_ = new StatsListener(this.stats_);\n      stats = this.statsListener_.get();\n    } else {\n      stats = this.stats_.get();\n    }\n\n    const longestName = Object.keys(stats).reduce(\n      (previousValue, currentValue) =>\n        Math.max(currentValue.length, previousValue),\n      0\n    );\n\n    forEach(stats, (stat: string, value: any) => {\n      // pad stat names to be the same length (plus 2 extra spaces).\n      for (let i = stat.length; i < longestName + 2; i++) stat += ' ';\n      console.log(stat + value);\n    });\n  }\n\n  statsIncrementCounter(metric: string) {\n    this.stats_.incrementCounter(metric);\n    this.statsReporter_.includeStat(metric);\n  }\n\n  /**\n   * @param {...*} var_args\n   * @private\n   */\n  private log_(...var_args: any[]) {\n    let prefix = '';\n    if (this.persistentConnection_) {\n      prefix = this.persistentConnection_.id + ':';\n    }\n    log(prefix, ...var_args);\n  }\n\n  /**\n   * @param {?function(?Error, *=)} callback\n   * @param {!string} status\n   * @param {?string=} errorReason\n   */\n  callOnCompleteCallback(\n    callback: ((status: Error | null, errorReason?: string) => void) | null,\n    status: string,\n    errorReason?: string | null\n  ) {\n    if (callback) {\n      exceptionGuard(function() {\n        if (status == 'ok') {\n          callback(null);\n        } else {\n          const code = (status || 'error').toUpperCase();\n          let message = code;\n          if (errorReason) message += ': ' + errorReason;\n\n          const error = new Error(message);\n          (error as any).code = code;\n          callback(error);\n        }\n      });\n    }\n  }\n\n  get database(): Database {\n    return this.__database || (this.__database = new Database(this));\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IndexedFilter } from './IndexedFilter';\nimport { PRIORITY_INDEX } from '../../snap/indexes/PriorityIndex';\nimport { NamedNode, Node } from '../../../core/snap/Node';\nimport { ChildrenNode } from '../../snap/ChildrenNode';\nimport { NodeFilter } from './NodeFilter';\nimport { QueryParams } from '../QueryParams';\nimport { Index } from '../../snap/indexes/Index';\nimport { Path } from '../../util/Path';\nimport { CompleteChildSource } from '../CompleteChildSource';\nimport { ChildChangeAccumulator } from '../ChildChangeAccumulator';\n\n/**\n * Filters nodes by range and uses an IndexFilter to track any changes after filtering the node\n *\n * @constructor\n * @implements {NodeFilter}\n */\nexport class RangedFilter implements NodeFilter {\n  /**\n   * @type {!IndexedFilter}\n   * @const\n   * @private\n   */\n  private indexedFilter_: IndexedFilter;\n\n  /**\n   * @const\n   * @type {!Index}\n   * @private\n   */\n  private index_: Index;\n\n  /**\n   * @const\n   * @type {!NamedNode}\n   * @private\n   */\n  private startPost_: NamedNode;\n\n  /**\n   * @const\n   * @type {!NamedNode}\n   * @private\n   */\n  private endPost_: NamedNode;\n\n  /**\n   * @param {!QueryParams} params\n   */\n  constructor(params: QueryParams) {\n    this.indexedFilter_ = new IndexedFilter(params.getIndex());\n    this.index_ = params.getIndex();\n    this.startPost_ = RangedFilter.getStartPost_(params);\n    this.endPost_ = RangedFilter.getEndPost_(params);\n  }\n\n  /**\n   * @return {!NamedNode}\n   */\n  getStartPost(): NamedNode {\n    return this.startPost_;\n  }\n\n  /**\n   * @return {!NamedNode}\n   */\n  getEndPost(): NamedNode {\n    return this.endPost_;\n  }\n\n  /**\n   * @param {!NamedNode} node\n   * @return {boolean}\n   */\n  matches(node: NamedNode): boolean {\n    return (\n      this.index_.compare(this.getStartPost(), node) <= 0 &&\n      this.index_.compare(node, this.getEndPost()) <= 0\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateChild(\n    snap: Node,\n    key: string,\n    newChild: Node,\n    affectedPath: Path,\n    source: CompleteChildSource,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (!this.matches(new NamedNode(key, newChild))) {\n      newChild = ChildrenNode.EMPTY_NODE;\n    }\n    return this.indexedFilter_.updateChild(\n      snap,\n      key,\n      newChild,\n      affectedPath,\n      source,\n      optChangeAccumulator\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateFullNode(\n    oldSnap: Node,\n    newSnap: Node,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (newSnap.isLeafNode()) {\n      // Make sure we have a children node with the correct index, not a leaf node;\n      newSnap = ChildrenNode.EMPTY_NODE;\n    }\n    let filtered = newSnap.withIndex(this.index_);\n    // Don't support priorities on queries\n    filtered = filtered.updatePriority(ChildrenNode.EMPTY_NODE);\n    const self = this;\n    newSnap.forEachChild(PRIORITY_INDEX, function(key, childNode) {\n      if (!self.matches(new NamedNode(key, childNode))) {\n        filtered = filtered.updateImmediateChild(key, ChildrenNode.EMPTY_NODE);\n      }\n    });\n    return this.indexedFilter_.updateFullNode(\n      oldSnap,\n      filtered,\n      optChangeAccumulator\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updatePriority(oldSnap: Node, newPriority: Node): Node {\n    // Don't support priorities on queries\n    return oldSnap;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  filtersNodes(): boolean {\n    return true;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndexedFilter(): IndexedFilter {\n    return this.indexedFilter_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndex(): Index {\n    return this.index_;\n  }\n\n  /**\n   * @param {!QueryParams} params\n   * @return {!NamedNode}\n   * @private\n   */\n  private static getStartPost_(params: QueryParams): NamedNode {\n    if (params.hasStart()) {\n      const startName = params.getIndexStartName();\n      return params.getIndex().makePost(params.getIndexStartValue(), startName);\n    } else {\n      return params.getIndex().minPost();\n    }\n  }\n\n  /**\n   * @param {!QueryParams} params\n   * @return {!NamedNode}\n   * @private\n   */\n  private static getEndPost_(params: QueryParams): NamedNode {\n    if (params.hasEnd()) {\n      const endName = params.getIndexEndName();\n      return params.getIndex().makePost(params.getIndexEndValue(), endName);\n    } else {\n      return params.getIndex().maxPost();\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RangedFilter } from './RangedFilter';\nimport { ChildrenNode } from '../../snap/ChildrenNode';\nimport { Node, NamedNode } from '../../snap/Node';\nimport { assert } from '@firebase/util';\nimport { Change } from '../Change';\nimport { NodeFilter } from './NodeFilter';\nimport { Index } from '../../snap/indexes/Index';\nimport { IndexedFilter } from './IndexedFilter';\nimport { QueryParams } from '../QueryParams';\nimport { Path } from '../../util/Path';\nimport { CompleteChildSource } from '../CompleteChildSource';\nimport { ChildChangeAccumulator } from '../ChildChangeAccumulator';\n\n/**\n * Applies a limit and a range to a node and uses RangedFilter to do the heavy lifting where possible\n *\n * @constructor\n * @implements {NodeFilter}\n */\nexport class LimitedFilter implements NodeFilter {\n  /**\n   * @const\n   * @type {RangedFilter}\n   * @private\n   */\n  private readonly rangedFilter_: RangedFilter;\n\n  /**\n   * @const\n   * @type {!Index}\n   * @private\n   */\n  private readonly index_: Index;\n\n  /**\n   * @const\n   * @type {number}\n   * @private\n   */\n  private readonly limit_: number;\n\n  /**\n   * @const\n   * @type {boolean}\n   * @private\n   */\n  private readonly reverse_: boolean;\n\n  /**\n   * @param {!QueryParams} params\n   */\n  constructor(params: QueryParams) {\n    this.rangedFilter_ = new RangedFilter(params);\n    this.index_ = params.getIndex();\n    this.limit_ = params.getLimit();\n    this.reverse_ = !params.isViewFromLeft();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateChild(\n    snap: Node,\n    key: string,\n    newChild: Node,\n    affectedPath: Path,\n    source: CompleteChildSource,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (!this.rangedFilter_.matches(new NamedNode(key, newChild))) {\n      newChild = ChildrenNode.EMPTY_NODE;\n    }\n    if (snap.getImmediateChild(key).equals(newChild)) {\n      // No change\n      return snap;\n    } else if (snap.numChildren() < this.limit_) {\n      return this.rangedFilter_\n        .getIndexedFilter()\n        .updateChild(\n          snap,\n          key,\n          newChild,\n          affectedPath,\n          source,\n          optChangeAccumulator\n        );\n    } else {\n      return this.fullLimitUpdateChild_(\n        snap,\n        key,\n        newChild,\n        source,\n        optChangeAccumulator\n      );\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updateFullNode(\n    oldSnap: Node,\n    newSnap: Node,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    let filtered;\n    if (newSnap.isLeafNode() || newSnap.isEmpty()) {\n      // Make sure we have a children node with the correct index, not a leaf node;\n      filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\n    } else {\n      if (\n        this.limit_ * 2 < newSnap.numChildren() &&\n        newSnap.isIndexed(this.index_)\n      ) {\n        // Easier to build up a snapshot, since what we're given has more than twice the elements we want\n        filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\n        // anchor to the startPost, endPost, or last element as appropriate\n        let iterator;\n        if (this.reverse_) {\n          iterator = (newSnap as ChildrenNode).getReverseIteratorFrom(\n            this.rangedFilter_.getEndPost(),\n            this.index_\n          );\n        } else {\n          iterator = (newSnap as ChildrenNode).getIteratorFrom(\n            this.rangedFilter_.getStartPost(),\n            this.index_\n          );\n        }\n        let count = 0;\n        while (iterator.hasNext() && count < this.limit_) {\n          const next = iterator.getNext();\n          let inRange;\n          if (this.reverse_) {\n            inRange =\n              this.index_.compare(this.rangedFilter_.getStartPost(), next) <= 0;\n          } else {\n            inRange =\n              this.index_.compare(next, this.rangedFilter_.getEndPost()) <= 0;\n          }\n          if (inRange) {\n            filtered = filtered.updateImmediateChild(next.name, next.node);\n            count++;\n          } else {\n            // if we have reached the end post, we cannot keep adding elemments\n            break;\n          }\n        }\n      } else {\n        // The snap contains less than twice the limit. Faster to delete from the snap than build up a new one\n        filtered = newSnap.withIndex(this.index_);\n        // Don't support priorities on queries\n        filtered = filtered.updatePriority(\n          ChildrenNode.EMPTY_NODE\n        ) as ChildrenNode;\n        let startPost;\n        let endPost;\n        let cmp;\n        let iterator;\n        if (this.reverse_) {\n          iterator = filtered.getReverseIterator(this.index_);\n          startPost = this.rangedFilter_.getEndPost();\n          endPost = this.rangedFilter_.getStartPost();\n          const indexCompare = this.index_.getCompare();\n          cmp = (a: NamedNode, b: NamedNode) => indexCompare(b, a);\n        } else {\n          iterator = filtered.getIterator(this.index_);\n          startPost = this.rangedFilter_.getStartPost();\n          endPost = this.rangedFilter_.getEndPost();\n          cmp = this.index_.getCompare();\n        }\n\n        let count = 0;\n        let foundStartPost = false;\n        while (iterator.hasNext()) {\n          let next = iterator.getNext();\n          if (!foundStartPost && cmp(startPost, next) <= 0) {\n            // start adding\n            foundStartPost = true;\n          }\n          let inRange =\n            foundStartPost && count < this.limit_ && cmp(next, endPost) <= 0;\n          if (inRange) {\n            count++;\n          } else {\n            filtered = filtered.updateImmediateChild(\n              next.name,\n              ChildrenNode.EMPTY_NODE\n            );\n          }\n        }\n      }\n    }\n    return this.rangedFilter_\n      .getIndexedFilter()\n      .updateFullNode(oldSnap, filtered, optChangeAccumulator);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  updatePriority(oldSnap: Node, newPriority: Node): Node {\n    // Don't support priorities on queries\n    return oldSnap;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  filtersNodes(): boolean {\n    return true;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndexedFilter(): IndexedFilter {\n    return this.rangedFilter_.getIndexedFilter();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getIndex(): Index {\n    return this.index_;\n  }\n\n  /**\n   * @param {!Node} snap\n   * @param {string} childKey\n   * @param {!Node} childSnap\n   * @param {!CompleteChildSource} source\n   * @param {?ChildChangeAccumulator} changeAccumulator\n   * @return {!Node}\n   * @private\n   */\n  private fullLimitUpdateChild_(\n    snap: Node,\n    childKey: string,\n    childSnap: Node,\n    source: CompleteChildSource,\n    changeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    // TODO: rename all cache stuff etc to general snap terminology\n    let cmp;\n    if (this.reverse_) {\n      const indexCmp = this.index_.getCompare();\n      cmp = (a: NamedNode, b: NamedNode) => indexCmp(b, a);\n    } else {\n      cmp = this.index_.getCompare();\n    }\n    const oldEventCache = snap as ChildrenNode;\n    assert(oldEventCache.numChildren() == this.limit_, '');\n    const newChildNamedNode = new NamedNode(childKey, childSnap);\n    const windowBoundary = this.reverse_\n      ? oldEventCache.getFirstChild(this.index_)\n      : (oldEventCache.getLastChild(this.index_) as NamedNode);\n    const inRange = this.rangedFilter_.matches(newChildNamedNode);\n    if (oldEventCache.hasChild(childKey)) {\n      const oldChildSnap = oldEventCache.getImmediateChild(childKey);\n      let nextChild = source.getChildAfterChild(\n        this.index_,\n        windowBoundary,\n        this.reverse_\n      );\n      while (\n        nextChild != null &&\n        (nextChild.name == childKey || oldEventCache.hasChild(nextChild.name))\n      ) {\n        // There is a weird edge case where a node is updated as part of a merge in the write tree, but hasn't\n        // been applied to the limited filter yet. Ignore this next child which will be updated later in\n        // the limited filter...\n        nextChild = source.getChildAfterChild(\n          this.index_,\n          nextChild,\n          this.reverse_\n        );\n      }\n      const compareNext =\n        nextChild == null ? 1 : cmp(nextChild, newChildNamedNode);\n      const remainsInWindow =\n        inRange && !childSnap.isEmpty() && compareNext >= 0;\n      if (remainsInWindow) {\n        if (changeAccumulator != null) {\n          changeAccumulator.trackChildChange(\n            Change.childChangedChange(childKey, childSnap, oldChildSnap)\n          );\n        }\n        return oldEventCache.updateImmediateChild(childKey, childSnap);\n      } else {\n        if (changeAccumulator != null) {\n          changeAccumulator.trackChildChange(\n            Change.childRemovedChange(childKey, oldChildSnap)\n          );\n        }\n        const newEventCache = oldEventCache.updateImmediateChild(\n          childKey,\n          ChildrenNode.EMPTY_NODE\n        );\n        const nextChildInRange =\n          nextChild != null && this.rangedFilter_.matches(nextChild);\n        if (nextChildInRange) {\n          if (changeAccumulator != null) {\n            changeAccumulator.trackChildChange(\n              Change.childAddedChange(nextChild.name, nextChild.node)\n            );\n          }\n          return newEventCache.updateImmediateChild(\n            nextChild.name,\n            nextChild.node\n          );\n        } else {\n          return newEventCache;\n        }\n      }\n    } else if (childSnap.isEmpty()) {\n      // we're deleting a node, but it was not in the window, so ignore it\n      return snap;\n    } else if (inRange) {\n      if (cmp(windowBoundary, newChildNamedNode) >= 0) {\n        if (changeAccumulator != null) {\n          changeAccumulator.trackChildChange(\n            Change.childRemovedChange(windowBoundary.name, windowBoundary.node)\n          );\n          changeAccumulator.trackChildChange(\n            Change.childAddedChange(childKey, childSnap)\n          );\n        }\n        return oldEventCache\n          .updateImmediateChild(childKey, childSnap)\n          .updateImmediateChild(windowBoundary.name, ChildrenNode.EMPTY_NODE);\n      } else {\n        return snap;\n      }\n    } else {\n      return snap;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { MIN_NAME, MAX_NAME } from '../util/util';\nimport { KEY_INDEX } from '../snap/indexes/KeyIndex';\nimport { PRIORITY_INDEX } from '../snap/indexes/PriorityIndex';\nimport { VALUE_INDEX } from '../snap/indexes/ValueIndex';\nimport { PathIndex } from '../snap/indexes/PathIndex';\nimport { IndexedFilter } from './filter/IndexedFilter';\nimport { LimitedFilter } from './filter/LimitedFilter';\nimport { RangedFilter } from './filter/RangedFilter';\nimport { stringify } from '@firebase/util';\nimport { NodeFilter } from './filter/NodeFilter';\nimport { Index } from '../snap/indexes/Index';\n\n/**\n * This class is an immutable-from-the-public-api struct containing a set of query parameters defining a\n * range to be returned for a particular location. It is assumed that validation of parameters is done at the\n * user-facing API level, so it is not done here.\n * @constructor\n */\nexport class QueryParams {\n  private limitSet_ = false;\n  private startSet_ = false;\n  private startNameSet_ = false;\n  private endSet_ = false;\n  private endNameSet_ = false;\n\n  private limit_ = 0;\n  private viewFrom_ = '';\n  private indexStartValue_: any | null = null;\n  private indexStartName_ = '';\n  private indexEndValue_: any | null = null;\n  private indexEndName_ = '';\n\n  private index_ = PRIORITY_INDEX;\n\n  /**\n   * Wire Protocol Constants\n   * @const\n   * @enum {string}\n   * @private\n   */\n  private static readonly WIRE_PROTOCOL_CONSTANTS_ = {\n    INDEX_START_VALUE: 'sp',\n    INDEX_START_NAME: 'sn',\n    INDEX_END_VALUE: 'ep',\n    INDEX_END_NAME: 'en',\n    LIMIT: 'l',\n    VIEW_FROM: 'vf',\n    VIEW_FROM_LEFT: 'l',\n    VIEW_FROM_RIGHT: 'r',\n    INDEX: 'i'\n  };\n\n  /**\n   * REST Query Constants\n   * @const\n   * @enum {string}\n   * @private\n   */\n  private static readonly REST_QUERY_CONSTANTS_ = {\n    ORDER_BY: 'orderBy',\n    PRIORITY_INDEX: '$priority',\n    VALUE_INDEX: '$value',\n    KEY_INDEX: '$key',\n    START_AT: 'startAt',\n    END_AT: 'endAt',\n    LIMIT_TO_FIRST: 'limitToFirst',\n    LIMIT_TO_LAST: 'limitToLast'\n  };\n\n  /**\n   * Default, empty query parameters\n   * @type {!QueryParams}\n   * @const\n   */\n  static readonly DEFAULT = new QueryParams();\n\n  /**\n   * @return {boolean}\n   */\n  hasStart(): boolean {\n    return this.startSet_;\n  }\n\n  /**\n   * @return {boolean} True if it would return from left.\n   */\n  isViewFromLeft(): boolean {\n    if (this.viewFrom_ === '') {\n      // limit(), rather than limitToFirst or limitToLast was called.\n      // This means that only one of startSet_ and endSet_ is true. Use them\n      // to calculate which side of the view to anchor to. If neither is set,\n      // anchor to the end.\n      return this.startSet_;\n    } else {\n      return (\n        this.viewFrom_ === QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT\n      );\n    }\n  }\n\n  /**\n   * Only valid to call if hasStart() returns true\n   * @return {*}\n   */\n  getIndexStartValue(): any {\n    assert(this.startSet_, 'Only valid if start has been set');\n    return this.indexStartValue_;\n  }\n\n  /**\n   * Only valid to call if hasStart() returns true.\n   * Returns the starting key name for the range defined by these query parameters\n   * @return {!string}\n   */\n  getIndexStartName(): string {\n    assert(this.startSet_, 'Only valid if start has been set');\n    if (this.startNameSet_) {\n      return this.indexStartName_;\n    } else {\n      return MIN_NAME;\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasEnd(): boolean {\n    return this.endSet_;\n  }\n\n  /**\n   * Only valid to call if hasEnd() returns true.\n   * @return {*}\n   */\n  getIndexEndValue(): any {\n    assert(this.endSet_, 'Only valid if end has been set');\n    return this.indexEndValue_;\n  }\n\n  /**\n   * Only valid to call if hasEnd() returns true.\n   * Returns the end key name for the range defined by these query parameters\n   * @return {!string}\n   */\n  getIndexEndName(): string {\n    assert(this.endSet_, 'Only valid if end has been set');\n    if (this.endNameSet_) {\n      return this.indexEndName_;\n    } else {\n      return MAX_NAME;\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasLimit(): boolean {\n    return this.limitSet_;\n  }\n\n  /**\n   * @return {boolean} True if a limit has been set and it has been explicitly anchored\n   */\n  hasAnchoredLimit(): boolean {\n    return this.limitSet_ && this.viewFrom_ !== '';\n  }\n\n  /**\n   * Only valid to call if hasLimit() returns true\n   * @return {!number}\n   */\n  getLimit(): number {\n    assert(this.limitSet_, 'Only valid if limit has been set');\n    return this.limit_;\n  }\n\n  /**\n   * @return {!Index}\n   */\n  getIndex(): Index {\n    return this.index_;\n  }\n\n  /**\n   * @return {!QueryParams}\n   * @private\n   */\n  private copy_(): QueryParams {\n    const copy = new QueryParams();\n    copy.limitSet_ = this.limitSet_;\n    copy.limit_ = this.limit_;\n    copy.startSet_ = this.startSet_;\n    copy.indexStartValue_ = this.indexStartValue_;\n    copy.startNameSet_ = this.startNameSet_;\n    copy.indexStartName_ = this.indexStartName_;\n    copy.endSet_ = this.endSet_;\n    copy.indexEndValue_ = this.indexEndValue_;\n    copy.endNameSet_ = this.endNameSet_;\n    copy.indexEndName_ = this.indexEndName_;\n    copy.index_ = this.index_;\n    copy.viewFrom_ = this.viewFrom_;\n    return copy;\n  }\n\n  /**\n   * @param {!number} newLimit\n   * @return {!QueryParams}\n   */\n  limit(newLimit: number): QueryParams {\n    const newParams = this.copy_();\n    newParams.limitSet_ = true;\n    newParams.limit_ = newLimit;\n    newParams.viewFrom_ = '';\n    return newParams;\n  }\n\n  /**\n   * @param {!number} newLimit\n   * @return {!QueryParams}\n   */\n  limitToFirst(newLimit: number): QueryParams {\n    const newParams = this.copy_();\n    newParams.limitSet_ = true;\n    newParams.limit_ = newLimit;\n    newParams.viewFrom_ = QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT;\n    return newParams;\n  }\n\n  /**\n   * @param {!number} newLimit\n   * @return {!QueryParams}\n   */\n  limitToLast(newLimit: number): QueryParams {\n    const newParams = this.copy_();\n    newParams.limitSet_ = true;\n    newParams.limit_ = newLimit;\n    newParams.viewFrom_ = QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT;\n    return newParams;\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {?string=} key\n   * @return {!QueryParams}\n   */\n  startAt(indexValue: any, key?: string | null): QueryParams {\n    const newParams = this.copy_();\n    newParams.startSet_ = true;\n    if (indexValue === undefined) {\n      indexValue = null;\n    }\n    newParams.indexStartValue_ = indexValue;\n    if (key != null) {\n      newParams.startNameSet_ = true;\n      newParams.indexStartName_ = key;\n    } else {\n      newParams.startNameSet_ = false;\n      newParams.indexStartName_ = '';\n    }\n    return newParams;\n  }\n\n  /**\n   * @param {*} indexValue\n   * @param {?string=} key\n   * @return {!QueryParams}\n   */\n  endAt(indexValue: any, key?: string | null): QueryParams {\n    const newParams = this.copy_();\n    newParams.endSet_ = true;\n    if (indexValue === undefined) {\n      indexValue = null;\n    }\n    newParams.indexEndValue_ = indexValue;\n    if (key !== undefined) {\n      newParams.endNameSet_ = true;\n      newParams.indexEndName_ = key;\n    } else {\n      newParams.endNameSet_ = false;\n      newParams.indexEndName_ = '';\n    }\n    return newParams;\n  }\n\n  /**\n   * @param {!Index} index\n   * @return {!QueryParams}\n   */\n  orderBy(index: Index): QueryParams {\n    const newParams = this.copy_();\n    newParams.index_ = index;\n    return newParams;\n  }\n\n  /**\n   * @return {!Object}\n   */\n  getQueryObject(): Object {\n    const WIRE_PROTOCOL_CONSTANTS = QueryParams.WIRE_PROTOCOL_CONSTANTS_;\n    const obj: { [k: string]: any } = {};\n    if (this.startSet_) {\n      obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_VALUE] = this.indexStartValue_;\n      if (this.startNameSet_) {\n        obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_NAME] = this.indexStartName_;\n      }\n    }\n    if (this.endSet_) {\n      obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_VALUE] = this.indexEndValue_;\n      if (this.endNameSet_) {\n        obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_NAME] = this.indexEndName_;\n      }\n    }\n    if (this.limitSet_) {\n      obj[WIRE_PROTOCOL_CONSTANTS.LIMIT] = this.limit_;\n      let viewFrom = this.viewFrom_;\n      if (viewFrom === '') {\n        if (this.isViewFromLeft()) {\n          viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_LEFT;\n        } else {\n          viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_RIGHT;\n        }\n      }\n      obj[WIRE_PROTOCOL_CONSTANTS.VIEW_FROM] = viewFrom;\n    }\n    // For now, priority index is the default, so we only specify if it's some other index\n    if (this.index_ !== PRIORITY_INDEX) {\n      obj[WIRE_PROTOCOL_CONSTANTS.INDEX] = this.index_.toString();\n    }\n    return obj;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  loadsAllData(): boolean {\n    return !(this.startSet_ || this.endSet_ || this.limitSet_);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isDefault(): boolean {\n    return this.loadsAllData() && this.index_ == PRIORITY_INDEX;\n  }\n\n  /**\n   * @return {!NodeFilter}\n   */\n  getNodeFilter(): NodeFilter {\n    if (this.loadsAllData()) {\n      return new IndexedFilter(this.getIndex());\n    } else if (this.hasLimit()) {\n      return new LimitedFilter(this);\n    } else {\n      return new RangedFilter(this);\n    }\n  }\n\n  /**\n   * Returns a set of REST query string parameters representing this query.\n   *\n   * @return {!Object.<string,*>} query string parameters\n   */\n  toRestQueryStringParameters(): { [k: string]: any } {\n    const REST_CONSTANTS = QueryParams.REST_QUERY_CONSTANTS_;\n    const qs: { [k: string]: string | number } = {};\n\n    if (this.isDefault()) {\n      return qs;\n    }\n\n    let orderBy;\n    if (this.index_ === PRIORITY_INDEX) {\n      orderBy = REST_CONSTANTS.PRIORITY_INDEX;\n    } else if (this.index_ === VALUE_INDEX) {\n      orderBy = REST_CONSTANTS.VALUE_INDEX;\n    } else if (this.index_ === KEY_INDEX) {\n      orderBy = REST_CONSTANTS.KEY_INDEX;\n    } else {\n      assert(this.index_ instanceof PathIndex, 'Unrecognized index type!');\n      orderBy = this.index_.toString();\n    }\n    qs[REST_CONSTANTS.ORDER_BY] = stringify(orderBy);\n\n    if (this.startSet_) {\n      qs[REST_CONSTANTS.START_AT] = stringify(this.indexStartValue_);\n      if (this.startNameSet_) {\n        qs[REST_CONSTANTS.START_AT] += ',' + stringify(this.indexStartName_);\n      }\n    }\n\n    if (this.endSet_) {\n      qs[REST_CONSTANTS.END_AT] = stringify(this.indexEndValue_);\n      if (this.endNameSet_) {\n        qs[REST_CONSTANTS.END_AT] += ',' + stringify(this.indexEndName_);\n      }\n    }\n\n    if (this.limitSet_) {\n      if (this.isViewFromLeft()) {\n        qs[REST_CONSTANTS.LIMIT_TO_FIRST] = this.limit_;\n      } else {\n        qs[REST_CONSTANTS.LIMIT_TO_LAST] = this.limit_;\n      }\n    }\n\n    return qs;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { OnDisconnect } from './onDisconnect';\nimport { TransactionResult } from './TransactionResult';\nimport { warn } from '../core/util/util';\nimport { nextPushId } from '../core/util/NextPushId';\nimport { Query } from './Query';\nimport { Repo } from '../core/Repo';\nimport { Path } from '../core/util/Path';\nimport { QueryParams } from '../core/view/QueryParams';\nimport {\n  validateRootPathString,\n  validatePathString,\n  validateFirebaseMergeDataArg,\n  validateBoolean,\n  validatePriority,\n  validateFirebaseDataArg,\n  validateWritablePath\n} from '../core/util/validation';\nimport { validateArgCount, validateCallback } from '@firebase/util';\nimport { Deferred } from '@firebase/util';\nimport { SyncPoint } from '../core/SyncPoint';\nimport { Database } from './Database';\nimport { DataSnapshot } from './DataSnapshot';\n\nexport interface ReferenceConstructor {\n  new (repo: Repo, path: Path): Reference;\n}\n\nexport class Reference extends Query {\n  public then: (a?: any) => Promise<any>;\n  public catch: (a?: Error) => Promise<any>;\n\n  /**\n   * Call options:\n   *   new Reference(Repo, Path) or\n   *   new Reference(url: string, string|RepoManager)\n   *\n   * Externally - this is the firebase.database.Reference type.\n   *\n   * @param {!Repo} repo\n   * @param {(!Path)} path\n   * @extends {Query}\n   */\n  constructor(repo: Repo, path: Path) {\n    if (!(repo instanceof Repo)) {\n      throw new Error(\n        'new Reference() no longer supported - use app.database().'\n      );\n    }\n\n    // call Query's constructor, passing in the repo and path.\n    super(repo, path, QueryParams.DEFAULT, false);\n  }\n\n  /** @return {?string} */\n  getKey(): string | null {\n    validateArgCount('Reference.key', 0, 0, arguments.length);\n\n    if (this.path.isEmpty()) return null;\n    else return this.path.getBack();\n  }\n\n  /**\n   * @param {!(string|Path)} pathString\n   * @return {!Reference}\n   */\n  child(pathString: string | Path): Reference {\n    validateArgCount('Reference.child', 1, 1, arguments.length);\n    if (typeof pathString === 'number') {\n      pathString = String(pathString);\n    } else if (!(pathString instanceof Path)) {\n      if (this.path.getFront() === null)\n        validateRootPathString('Reference.child', 1, pathString, false);\n      else validatePathString('Reference.child', 1, pathString, false);\n    }\n\n    return new Reference(this.repo, this.path.child(pathString));\n  }\n\n  /** @return {?Reference} */\n  getParent(): Reference | null {\n    validateArgCount('Reference.parent', 0, 0, arguments.length);\n\n    const parentPath = this.path.parent();\n    return parentPath === null ? null : new Reference(this.repo, parentPath);\n  }\n\n  /** @return {!Reference} */\n  getRoot(): Reference {\n    validateArgCount('Reference.root', 0, 0, arguments.length);\n\n    let ref = this as any;\n    while (ref.getParent() !== null) {\n      ref = ref.getParent();\n    }\n    return ref;\n  }\n\n  /** @return {!Database} */\n  databaseProp(): Database {\n    return this.repo.database;\n  }\n\n  /**\n   * @param {*} newVal\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  set(newVal: any, onComplete?: (a: Error | null) => void): Promise<any> {\n    validateArgCount('Reference.set', 1, 2, arguments.length);\n    validateWritablePath('Reference.set', this.path);\n    validateFirebaseDataArg('Reference.set', 1, newVal, this.path, false);\n    validateCallback('Reference.set', 2, onComplete, true);\n\n    const deferred = new Deferred();\n    this.repo.setWithPriority(\n      this.path,\n      newVal,\n      /*priority=*/ null,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {!Object} objectToMerge\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  update(\n    objectToMerge: Object,\n    onComplete?: (a: Error | null) => void\n  ): Promise<any> {\n    validateArgCount('Reference.update', 1, 2, arguments.length);\n    validateWritablePath('Reference.update', this.path);\n\n    if (Array.isArray(objectToMerge)) {\n      const newObjectToMerge: { [k: string]: any } = {};\n      for (let i = 0; i < objectToMerge.length; ++i) {\n        newObjectToMerge['' + i] = objectToMerge[i];\n      }\n      objectToMerge = newObjectToMerge;\n      warn(\n        'Passing an Array to Firebase.update() is deprecated. ' +\n          'Use set() if you want to overwrite the existing data, or ' +\n          'an Object with integer keys if you really do want to ' +\n          'only update some of the children.'\n      );\n    }\n    validateFirebaseMergeDataArg(\n      'Reference.update',\n      1,\n      objectToMerge,\n      this.path,\n      false\n    );\n    validateCallback('Reference.update', 2, onComplete, true);\n    const deferred = new Deferred();\n    this.repo.update(\n      this.path,\n      objectToMerge,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {*} newVal\n   * @param {string|number|null} newPriority\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  setWithPriority(\n    newVal: any,\n    newPriority: string | number | null,\n    onComplete?: (a: Error | null) => void\n  ): Promise<any> {\n    validateArgCount('Reference.setWithPriority', 2, 3, arguments.length);\n    validateWritablePath('Reference.setWithPriority', this.path);\n    validateFirebaseDataArg(\n      'Reference.setWithPriority',\n      1,\n      newVal,\n      this.path,\n      false\n    );\n    validatePriority('Reference.setWithPriority', 2, newPriority, false);\n    validateCallback('Reference.setWithPriority', 3, onComplete, true);\n\n    if (this.getKey() === '.length' || this.getKey() === '.keys')\n      throw 'Reference.setWithPriority failed: ' +\n        this.getKey() +\n        ' is a read-only object.';\n\n    const deferred = new Deferred();\n    this.repo.setWithPriority(\n      this.path,\n      newVal,\n      newPriority,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  remove(onComplete?: (a: Error | null) => void): Promise<any> {\n    validateArgCount('Reference.remove', 0, 1, arguments.length);\n    validateWritablePath('Reference.remove', this.path);\n    validateCallback('Reference.remove', 1, onComplete, true);\n\n    return this.set(null, onComplete);\n  }\n\n  /**\n   * @param {function(*):*} transactionUpdate\n   * @param {(function(?Error, boolean, ?DataSnapshot))=} onComplete\n   * @param {boolean=} applyLocally\n   * @return {!Promise}\n   */\n  transaction(\n    transactionUpdate: (a: any) => any,\n    onComplete?: (a: Error | null, b: boolean, c: DataSnapshot | null) => void,\n    applyLocally?: boolean\n  ): Promise<TransactionResult> {\n    validateArgCount('Reference.transaction', 1, 3, arguments.length);\n    validateWritablePath('Reference.transaction', this.path);\n    validateCallback('Reference.transaction', 1, transactionUpdate, false);\n    validateCallback('Reference.transaction', 2, onComplete, true);\n    // NOTE: applyLocally is an internal-only option for now.  We need to decide if we want to keep it and how\n    // to expose it.\n    validateBoolean('Reference.transaction', 3, applyLocally, true);\n\n    if (this.getKey() === '.length' || this.getKey() === '.keys')\n      throw 'Reference.transaction failed: ' +\n        this.getKey() +\n        ' is a read-only object.';\n\n    if (applyLocally === undefined) applyLocally = true;\n\n    const deferred = new Deferred<TransactionResult>();\n    if (typeof onComplete === 'function') {\n      deferred.promise.catch(() => {});\n    }\n\n    const promiseComplete = function(\n      error: Error,\n      committed: boolean,\n      snapshot: DataSnapshot\n    ) {\n      if (error) {\n        deferred.reject(error);\n      } else {\n        deferred.resolve(new TransactionResult(committed, snapshot));\n      }\n      if (typeof onComplete === 'function') {\n        onComplete(error, committed, snapshot);\n      }\n    };\n    this.repo.startTransaction(\n      this.path,\n      transactionUpdate,\n      promiseComplete,\n      applyLocally\n    );\n\n    return deferred.promise;\n  }\n\n  /**\n   * @param {string|number|null} priority\n   * @param {function(?Error)=} onComplete\n   * @return {!Promise}\n   */\n  setPriority(\n    priority: string | number | null,\n    onComplete?: (a: Error | null) => void\n  ): Promise<any> {\n    validateArgCount('Reference.setPriority', 1, 2, arguments.length);\n    validateWritablePath('Reference.setPriority', this.path);\n    validatePriority('Reference.setPriority', 1, priority, false);\n    validateCallback('Reference.setPriority', 2, onComplete, true);\n\n    const deferred = new Deferred();\n    this.repo.setWithPriority(\n      this.path.child('.priority'),\n      priority,\n      null,\n      deferred.wrapCallback(onComplete)\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * @param {*=} value\n   * @param {function(?Error)=} onComplete\n   * @return {!Reference}\n   */\n  push(value?: any, onComplete?: (a: Error | null) => void): Reference {\n    validateArgCount('Reference.push', 0, 2, arguments.length);\n    validateWritablePath('Reference.push', this.path);\n    validateFirebaseDataArg('Reference.push', 1, value, this.path, true);\n    validateCallback('Reference.push', 2, onComplete, true);\n\n    const now = this.repo.serverTime();\n    const name = nextPushId(now);\n\n    // push() returns a ThennableReference whose promise is fulfilled with a regular Reference.\n    // We use child() to create handles to two different references. The first is turned into a\n    // ThennableReference below by adding then() and catch() methods and is used as the\n    // return value of push(). The second remains a regular Reference and is used as the fulfilled\n    // value of the first ThennableReference.\n    const thennablePushRef = this.child(name);\n    const pushRef = this.child(name);\n\n    let promise;\n    if (value != null) {\n      promise = thennablePushRef.set(value, onComplete).then(() => pushRef);\n    } else {\n      promise = Promise.resolve(pushRef);\n    }\n\n    thennablePushRef.then = promise.then.bind(promise);\n    thennablePushRef.catch = promise.then.bind(promise, undefined);\n\n    if (typeof onComplete === 'function') {\n      promise.catch(() => {});\n    }\n\n    return thennablePushRef;\n  }\n\n  /**\n   * @return {!OnDisconnect}\n   */\n  onDisconnect(): OnDisconnect {\n    validateWritablePath('Reference.onDisconnect', this.path);\n    return new OnDisconnect(this.repo, this.path);\n  }\n\n  get database(): Database {\n    return this.databaseProp();\n  }\n\n  get key(): string | null {\n    return this.getKey();\n  }\n\n  get parent(): Reference | null {\n    return this.getParent();\n  }\n\n  get root(): Reference {\n    return this.getRoot();\n  }\n}\n\n/**\n * Define reference constructor in various modules\n *\n * We are doing this here to avoid several circular\n * dependency issues\n */\nQuery.__referenceConstructor = Reference;\nSyncPoint.__referenceConstructor = Reference;\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Path } from './Path';\nimport { forEach, contains, safeGet } from '@firebase/util';\n\n/**\n * Node in a Tree.\n */\nexport class TreeNode<T> {\n  // TODO: Consider making accessors that create children and value lazily or\n  // separate Internal / Leaf 'types'.\n  children: { [name: string]: TreeNode<T> } = {};\n  childCount = 0;\n  value: T | null = null;\n}\n\n/**\n * A light-weight tree, traversable by path.  Nodes can have both values and children.\n * Nodes are not enumerated (by forEachChild) unless they have a value or non-empty\n * children.\n */\nexport class Tree<T> {\n  /**\n   * @template T\n   * @param {string=} name_ Optional name of the node.\n   * @param {Tree=} parent_ Optional parent node.\n   * @param {TreeNode=} node_ Optional node to wrap.\n   */\n  constructor(\n    private name_: string = '',\n    private parent_: Tree<T> | null = null,\n    private node_: TreeNode<T> = new TreeNode<T>()\n  ) {}\n\n  /**\n   * Returns a sub-Tree for the given path.\n   *\n   * @param {!(string|Path)} pathObj Path to look up.\n   * @return {!Tree.<T>} Tree for path.\n   */\n  subTree(pathObj: string | Path): Tree<T> {\n    // TODO: Require pathObj to be Path?\n    let path = pathObj instanceof Path ? pathObj : new Path(pathObj);\n    let child = this as Tree<T>,\n      next;\n    while ((next = path.getFront()) !== null) {\n      const childNode = safeGet(child.node_.children, next) || new TreeNode();\n      child = new Tree(next, child, childNode);\n      path = path.popFront();\n    }\n\n    return child;\n  }\n\n  /**\n   * Returns the data associated with this tree node.\n   *\n   * @return {?T} The data or null if no data exists.\n   */\n  getValue(): T | null {\n    return this.node_.value;\n  }\n\n  /**\n   * Sets data to this tree node.\n   *\n   * @param {!T} value Value to set.\n   */\n  setValue(value: T) {\n    assert(typeof value !== 'undefined', 'Cannot set value to undefined');\n    this.node_.value = value;\n    this.updateParents_();\n  }\n\n  /**\n   * Clears the contents of the tree node (its value and all children).\n   */\n  clear() {\n    this.node_.value = null;\n    this.node_.children = {};\n    this.node_.childCount = 0;\n    this.updateParents_();\n  }\n\n  /**\n   * @return {boolean} Whether the tree has any children.\n   */\n  hasChildren(): boolean {\n    return this.node_.childCount > 0;\n  }\n\n  /**\n   * @return {boolean} Whether the tree is empty (no value or children).\n   */\n  isEmpty(): boolean {\n    return this.getValue() === null && !this.hasChildren();\n  }\n\n  /**\n   * Calls action for each child of this tree node.\n   *\n   * @param {function(!Tree.<T>)} action Action to be called for each child.\n   */\n  forEachChild(action: (tree: Tree<T>) => void) {\n    forEach(this.node_.children, (child: string, childTree: TreeNode<T>) => {\n      action(new Tree<T>(child, this, childTree));\n    });\n  }\n\n  /**\n   * Does a depth-first traversal of this node's descendants, calling action for each one.\n   *\n   * @param {function(!Tree.<T>)} action Action to be called for each child.\n   * @param {boolean=} includeSelf Whether to call action on this node as well. Defaults to\n   *   false.\n   * @param {boolean=} childrenFirst Whether to call action on children before calling it on\n   *   parent.\n   */\n  forEachDescendant(\n    action: (tree: Tree<T>) => void,\n    includeSelf?: boolean,\n    childrenFirst?: boolean\n  ) {\n    if (includeSelf && !childrenFirst) action(this);\n\n    this.forEachChild(function(child) {\n      child.forEachDescendant(action, /*includeSelf=*/ true, childrenFirst);\n    });\n\n    if (includeSelf && childrenFirst) action(this);\n  }\n\n  /**\n   * Calls action on each ancestor node.\n   *\n   * @param {function(!Tree.<T>)} action Action to be called on each parent; return\n   *   true to abort.\n   * @param {boolean=} includeSelf Whether to call action on this node as well.\n   * @return {boolean} true if the action callback returned true.\n   */\n  forEachAncestor(\n    action: (tree: Tree<T>) => unknown,\n    includeSelf?: boolean\n  ): boolean {\n    let node = includeSelf ? this : this.parent();\n    while (node !== null) {\n      if (action(node)) {\n        return true;\n      }\n      node = node.parent();\n    }\n    return false;\n  }\n\n  /**\n   * Does a depth-first traversal of this node's descendants.  When a descendant with a value\n   * is found, action is called on it and traversal does not continue inside the node.\n   * Action is *not* called on this node.\n   *\n   * @param {function(!Tree.<T>)} action Action to be called for each child.\n   */\n  forEachImmediateDescendantWithValue(action: (tree: Tree<T>) => void) {\n    this.forEachChild(function(child) {\n      if (child.getValue() !== null) action(child);\n      else child.forEachImmediateDescendantWithValue(action);\n    });\n  }\n\n  /**\n   * @return {!Path} The path of this tree node, as a Path.\n   */\n  path(): Path {\n    return new Path(\n      this.parent_ === null\n        ? this.name_\n        : this.parent_.path() + '/' + this.name_\n    );\n  }\n\n  /**\n   * @return {string} The name of the tree node.\n   */\n  name(): string {\n    return this.name_;\n  }\n\n  /**\n   * @return {?Tree} The parent tree node, or null if this is the root of the tree.\n   */\n  parent(): Tree<T> | null {\n    return this.parent_;\n  }\n\n  /**\n   * Adds or removes this child from its parent based on whether it's empty or not.\n   *\n   * @private\n   */\n  private updateParents_() {\n    if (this.parent_ !== null) this.parent_.updateChild_(this.name_, this);\n  }\n\n  /**\n   * Adds or removes the passed child to this tree node, depending on whether it's empty.\n   *\n   * @param {string} childName The name of the child to update.\n   * @param {!Tree.<T>} child The child to update.\n   * @private\n   */\n  private updateChild_(childName: string, child: Tree<T>) {\n    const childEmpty = child.isEmpty();\n    const childExists = contains(this.node_.children, childName);\n    if (childEmpty && childExists) {\n      delete this.node_.children[childName];\n      this.node_.childCount--;\n      this.updateParents_();\n    } else if (!childEmpty && !childExists) {\n      this.node_.children[childName] = child.node_;\n      this.node_.childCount++;\n      this.updateParents_();\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\nimport { Reference } from '../api/Reference';\nimport { DataSnapshot } from '../api/DataSnapshot';\nimport { Path } from './util/Path';\nimport { Tree } from './util/Tree';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { Node } from './snap/Node';\nimport { LUIDGenerator, warn, exceptionGuard } from './util/util';\nimport { resolveDeferredValueSnapshot } from './util/ServerValues';\nimport { isValidPriority, validateFirebaseData } from './util/validation';\nimport { contains, safeGet } from '@firebase/util';\nimport { nodeFromJSON } from './snap/nodeFromJSON';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { Repo } from './Repo';\nimport { Event } from './view/Event';\n\n// TODO: This is pretty messy.  Ideally, a lot of this would move into FirebaseData, or a transaction-specific\n// component used by FirebaseData, but it has ties to user callbacks (transaction update and onComplete) as well\n// as the realtime connection (to send transactions to the server).  So that all needs to be decoupled first.\n// For now it's part of Repo, but in its own file.\n\n/**\n * @enum {number}\n */\nexport enum TransactionStatus {\n  // We've run the transaction and updated transactionResultData_ with the result, but it isn't currently sent to the\n  // server. A transaction will go from RUN -> SENT -> RUN if it comes back from the server as rejected due to\n  // mismatched hash.\n  RUN,\n\n  // We've run the transaction and sent it to the server and it's currently outstanding (hasn't come back as accepted\n  // or rejected yet).\n  SENT,\n\n  // Temporary state used to mark completed transactions (whether successful or aborted).  The transaction will be\n  // removed when we get a chance to prune completed ones.\n  COMPLETED,\n\n  // Used when an already-sent transaction needs to be aborted (e.g. due to a conflicting set() call that was made).\n  // If it comes back as unsuccessful, we'll abort it.\n  SENT_NEEDS_ABORT,\n\n  // Temporary state used to mark transactions that need to be aborted.\n  NEEDS_ABORT\n}\n\n/**\n * If a transaction does not succeed after 25 retries, we abort it.  Among other things this ensure that if there's\n * ever a bug causing a mismatch between client / server hashes for some data, we won't retry indefinitely.\n * @type {number}\n * @const\n * @private\n */\n(Repo as any).MAX_TRANSACTION_RETRIES_ = 25;\n\n/**\n * @typedef {{\n *   path: !Path,\n *   update: function(*):*,\n *   onComplete: ?function(?Error, boolean, ?DataSnapshot),\n *   status: ?TransactionStatus,\n *   order: !number,\n *   applyLocally: boolean,\n *   retryCount: !number,\n *   unwatcher: function(),\n *   abortReason: ?string,\n *   currentWriteId: !number,\n *   currentInputSnapshot: ?Node,\n *   currentOutputSnapshotRaw: ?Node,\n *   currentOutputSnapshotResolved: ?Node\n * }}\n */\ntype Transaction = {\n  path: Path;\n  update: (a: any) => any;\n  onComplete: (a: Error | null, b: boolean, c: DataSnapshot | null) => void;\n  status: TransactionStatus;\n  order: number;\n  applyLocally: boolean;\n  retryCount: number;\n  unwatcher: () => void;\n  abortReason: string | null;\n  currentWriteId: number;\n  currentInputSnapshot: Node | null;\n  currentOutputSnapshotRaw: Node | null;\n  currentOutputSnapshotResolved: Node | null;\n};\n\n/**\n * Setup the transaction data structures\n * @private\n */\n(Repo.prototype as any).transactions_init_ = function() {\n  /**\n   * Stores queues of outstanding transactions for Firebase locations.\n   *\n   * @type {!Tree.<Array.<!Transaction>>}\n   * @private\n   */\n  this.transactionQueueTree_ = new Tree<Transaction[]>();\n};\n\ndeclare module './Repo' {\n  interface Repo {\n    startTransaction(\n      path: Path,\n      transactionUpdate: (a: any) => void,\n      onComplete: ((a: Error, b: boolean, c: DataSnapshot) => void) | null,\n      applyLocally: boolean\n    ): void;\n  }\n}\n\n/**\n * Creates a new transaction, adds it to the transactions we're tracking, and sends it to the server if possible.\n *\n * @param {!Path} path Path at which to do transaction.\n * @param {function(*):*} transactionUpdate Update callback.\n * @param {?function(?Error, boolean, ?DataSnapshot)} onComplete Completion callback.\n * @param {boolean} applyLocally Whether or not to make intermediate results visible\n */\nRepo.prototype.startTransaction = function(\n  path: Path,\n  transactionUpdate: (a: any) => any,\n  onComplete: ((a: Error, b: boolean, c: DataSnapshot) => void) | null,\n  applyLocally: boolean\n) {\n  this.log_('transaction on ' + path);\n\n  // Add a watch to make sure we get server updates.\n  const valueCallback = function() {};\n  const watchRef = new Reference(this, path);\n  watchRef.on('value', valueCallback);\n  const unwatcher = function() {\n    watchRef.off('value', valueCallback);\n  };\n\n  // Initialize transaction.\n  const transaction: Transaction = {\n    path,\n    update: transactionUpdate,\n    onComplete,\n\n    // One of TransactionStatus enums.\n    status: null,\n\n    // Used when combining transactions at different locations to figure out which one goes first.\n    order: LUIDGenerator(),\n\n    // Whether to raise local events for this transaction.\n    applyLocally: applyLocally,\n\n    // Count of how many times we've retried the transaction.\n    retryCount: 0,\n\n    // Function to call to clean up our .on() listener.\n    unwatcher,\n\n    // Stores why a transaction was aborted.\n    abortReason: null,\n\n    currentWriteId: null,\n\n    currentInputSnapshot: null,\n\n    currentOutputSnapshotRaw: null,\n\n    currentOutputSnapshotResolved: null\n  };\n\n  // Run transaction initially.\n  const currentState = this.getLatestState_(path);\n  transaction.currentInputSnapshot = currentState;\n  const newVal = transaction.update(currentState.val());\n  if (newVal === undefined) {\n    // Abort transaction.\n    transaction.unwatcher();\n    transaction.currentOutputSnapshotRaw = null;\n    transaction.currentOutputSnapshotResolved = null;\n    if (transaction.onComplete) {\n      // We just set the input snapshot, so this cast should be safe\n      const snapshot = new DataSnapshot(\n        transaction.currentInputSnapshot,\n        new Reference(this, transaction.path),\n        PRIORITY_INDEX\n      );\n      transaction.onComplete(null, false, snapshot);\n    }\n  } else {\n    validateFirebaseData(\n      'transaction failed: Data returned ',\n      newVal,\n      transaction.path\n    );\n\n    // Mark as run and add to our queue.\n    transaction.status = TransactionStatus.RUN;\n    const queueNode = this.transactionQueueTree_.subTree(path);\n    const nodeQueue = queueNode.getValue() || [];\n    nodeQueue.push(transaction);\n\n    queueNode.setValue(nodeQueue);\n\n    // Update visibleData and raise events\n    // Note: We intentionally raise events after updating all of our transaction state, since the user could\n    // start new transactions from the event callbacks.\n    let priorityForNode;\n    if (\n      typeof newVal === 'object' &&\n      newVal !== null &&\n      contains(newVal, '.priority')\n    ) {\n      priorityForNode = safeGet(newVal, '.priority');\n      assert(\n        isValidPriority(priorityForNode),\n        'Invalid priority returned by transaction. ' +\n          'Priority must be a valid string, finite number, server value, or null.'\n      );\n    } else {\n      const currentNode =\n        this.serverSyncTree_.calcCompleteEventCache(path) ||\n        ChildrenNode.EMPTY_NODE;\n      priorityForNode = currentNode.getPriority().val();\n    }\n    priorityForNode /** @type {null|number|string} */ = priorityForNode;\n\n    const serverValues = this.generateServerValues();\n    const newNodeUnresolved = nodeFromJSON(newVal, priorityForNode);\n    const newNode = resolveDeferredValueSnapshot(\n      newNodeUnresolved,\n      serverValues\n    );\n    transaction.currentOutputSnapshotRaw = newNodeUnresolved;\n    transaction.currentOutputSnapshotResolved = newNode;\n    transaction.currentWriteId = this.getNextWriteId_();\n\n    const events = this.serverSyncTree_.applyUserOverwrite(\n      path,\n      newNode,\n      transaction.currentWriteId,\n      transaction.applyLocally\n    );\n    this.eventQueue_.raiseEventsForChangedPath(path, events);\n\n    this.sendReadyTransactions_();\n  }\n};\n\n/**\n * @param {!Path} path\n * @param {Array.<number>=} excludeSets A specific set to exclude\n * @return {Node}\n * @private\n */\n(Repo.prototype as any).getLatestState_ = function(\n  path: Path,\n  excludeSets?: number[]\n): Node {\n  return (\n    this.serverSyncTree_.calcCompleteEventCache(path, excludeSets) ||\n    ChildrenNode.EMPTY_NODE\n  );\n};\n\n/**\n * Sends any already-run transactions that aren't waiting for outstanding transactions to\n * complete.\n *\n * Externally it's called with no arguments, but it calls itself recursively with a particular\n * transactionQueueTree node to recurse through the tree.\n *\n * @param {Tree.<Array.<Transaction>>=} node  transactionQueueTree node to start at.\n * @private\n */\n(Repo.prototype as any).sendReadyTransactions_ = function(\n  node: Tree<Transaction[]> = this.transactionQueueTree_\n) {\n  // Before recursing, make sure any completed transactions are removed.\n  if (!node) {\n    this.pruneCompletedTransactionsBelowNode_(node);\n  }\n\n  if (node.getValue() !== null) {\n    const queue = this.buildTransactionQueue_(node);\n    assert(queue.length > 0, 'Sending zero length transaction queue');\n\n    const allRun = queue.every(\n      (transaction: Transaction) => transaction.status === TransactionStatus.RUN\n    );\n\n    // If they're all run (and not sent), we can send them.  Else, we must wait.\n    if (allRun) {\n      this.sendTransactionQueue_(node.path(), queue);\n    }\n  } else if (node.hasChildren()) {\n    node.forEachChild(childNode => {\n      this.sendReadyTransactions_(childNode);\n    });\n  }\n};\n\n/**\n * Given a list of run transactions, send them to the server and then handle the result (success or failure).\n *\n * @param {!Path} path The location of the queue.\n * @param {!Array.<Transaction>} queue Queue of transactions under the specified location.\n * @private\n */\n(Repo.prototype as any).sendTransactionQueue_ = function(\n  path: Path,\n  queue: Array<Transaction>\n) {\n  // Mark transactions as sent and increment retry count!\n  const setsToIgnore = queue.map(function(txn) {\n    return txn.currentWriteId;\n  });\n  const latestState = this.getLatestState_(path, setsToIgnore);\n  let snapToSend = latestState;\n  const latestHash = latestState.hash();\n  for (let i = 0; i < queue.length; i++) {\n    const txn = queue[i];\n    assert(\n      txn.status === TransactionStatus.RUN,\n      'tryToSendTransactionQueue_: items in queue should all be run.'\n    );\n    txn.status = TransactionStatus.SENT;\n    txn.retryCount++;\n    const relativePath = Path.relativePath(path, txn.path);\n    // If we've gotten to this point, the output snapshot must be defined.\n    snapToSend = snapToSend.updateChild(\n      relativePath /**@type {!Node} */,\n      txn.currentOutputSnapshotRaw\n    );\n  }\n\n  const dataToSend = snapToSend.val(true);\n  const pathToSend = path;\n\n  // Send the put.\n  this.server_.put(\n    pathToSend.toString(),\n    dataToSend,\n    (status: string) => {\n      this.log_('transaction put response', {\n        path: pathToSend.toString(),\n        status\n      });\n\n      let events: Event[] = [];\n      if (status === 'ok') {\n        // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\n        // the callback could trigger more transactions or sets.\n        const callbacks = [];\n        for (let i = 0; i < queue.length; i++) {\n          queue[i].status = TransactionStatus.COMPLETED;\n          events = events.concat(\n            this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId)\n          );\n          if (queue[i].onComplete) {\n            // We never unset the output snapshot, and given that this transaction is complete, it should be set\n            const node = queue[i].currentOutputSnapshotResolved as Node;\n            const ref = new Reference(this, queue[i].path);\n            const snapshot = new DataSnapshot(node, ref, PRIORITY_INDEX);\n            callbacks.push(\n              queue[i].onComplete.bind(null, null, true, snapshot)\n            );\n          }\n          queue[i].unwatcher();\n        }\n\n        // Now remove the completed transactions.\n        this.pruneCompletedTransactionsBelowNode_(\n          this.transactionQueueTree_.subTree(path)\n        );\n        // There may be pending transactions that we can now send.\n        this.sendReadyTransactions_();\n\n        this.eventQueue_.raiseEventsForChangedPath(path, events);\n\n        // Finally, trigger onComplete callbacks.\n        for (let i = 0; i < callbacks.length; i++) {\n          exceptionGuard(callbacks[i]);\n        }\n      } else {\n        // transactions are no longer sent.  Update their status appropriately.\n        if (status === 'datastale') {\n          for (let i = 0; i < queue.length; i++) {\n            if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT)\n              queue[i].status = TransactionStatus.NEEDS_ABORT;\n            else queue[i].status = TransactionStatus.RUN;\n          }\n        } else {\n          warn(\n            'transaction at ' + pathToSend.toString() + ' failed: ' + status\n          );\n          for (let i = 0; i < queue.length; i++) {\n            queue[i].status = TransactionStatus.NEEDS_ABORT;\n            queue[i].abortReason = status;\n          }\n        }\n\n        this.rerunTransactions_(path);\n      }\n    },\n    latestHash\n  );\n};\n\n/**\n * Finds all transactions dependent on the data at changedPath and reruns them.\n *\n * Should be called any time cached data changes.\n *\n * Return the highest path that was affected by rerunning transactions.  This is the path at which events need to\n * be raised for.\n *\n * @param {!Path} changedPath The path in mergedData that changed.\n * @return {!Path} The rootmost path that was affected by rerunning transactions.\n * @private\n */\n(Repo.prototype as any).rerunTransactions_ = function(changedPath: Path): Path {\n  const rootMostTransactionNode = this.getAncestorTransactionNode_(changedPath);\n  const path = rootMostTransactionNode.path();\n\n  const queue = this.buildTransactionQueue_(rootMostTransactionNode);\n  this.rerunTransactionQueue_(queue, path);\n\n  return path;\n};\n\n/**\n * Does all the work of rerunning transactions (as well as cleans up aborted transactions and whatnot).\n *\n * @param {Array.<Transaction>} queue The queue of transactions to run.\n * @param {!Path} path The path the queue is for.\n * @private\n */\n(Repo.prototype as any).rerunTransactionQueue_ = function(\n  queue: Array<Transaction>,\n  path: Path\n) {\n  if (queue.length === 0) {\n    return; // Nothing to do!\n  }\n\n  // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\n  // the callback could trigger more transactions or sets.\n  const callbacks = [];\n  let events: Event[] = [];\n  // Ignore all of the sets we're going to re-run.\n  const txnsToRerun = queue.filter(function(q) {\n    return q.status === TransactionStatus.RUN;\n  });\n  const setsToIgnore = txnsToRerun.map(function(q) {\n    return q.currentWriteId;\n  });\n  for (let i = 0; i < queue.length; i++) {\n    const transaction = queue[i];\n    const relativePath = Path.relativePath(path, transaction.path);\n    let abortTransaction = false,\n      abortReason;\n    assert(\n      relativePath !== null,\n      'rerunTransactionsUnderNode_: relativePath should not be null.'\n    );\n\n    if (transaction.status === TransactionStatus.NEEDS_ABORT) {\n      abortTransaction = true;\n      abortReason = transaction.abortReason;\n      events = events.concat(\n        this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true)\n      );\n    } else if (transaction.status === TransactionStatus.RUN) {\n      if (transaction.retryCount >= (Repo as any).MAX_TRANSACTION_RETRIES_) {\n        abortTransaction = true;\n        abortReason = 'maxretry';\n        events = events.concat(\n          this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true)\n        );\n      } else {\n        // This code reruns a transaction\n        const currentNode = this.getLatestState_(\n          transaction.path,\n          setsToIgnore\n        );\n        transaction.currentInputSnapshot = currentNode;\n        const newData = queue[i].update(currentNode.val());\n        if (newData !== undefined) {\n          validateFirebaseData(\n            'transaction failed: Data returned ',\n            newData,\n            transaction.path\n          );\n          let newDataNode = nodeFromJSON(newData);\n          const hasExplicitPriority =\n            typeof newData === 'object' &&\n            newData != null &&\n            contains(newData, '.priority');\n          if (!hasExplicitPriority) {\n            // Keep the old priority if there wasn't a priority explicitly specified.\n            newDataNode = newDataNode.updatePriority(currentNode.getPriority());\n          }\n\n          const oldWriteId = transaction.currentWriteId;\n          const serverValues = this.generateServerValues();\n          const newNodeResolved = resolveDeferredValueSnapshot(\n            newDataNode,\n            serverValues\n          );\n\n          transaction.currentOutputSnapshotRaw = newDataNode;\n          transaction.currentOutputSnapshotResolved = newNodeResolved;\n          transaction.currentWriteId = this.getNextWriteId_();\n          // Mutates setsToIgnore in place\n          setsToIgnore.splice(setsToIgnore.indexOf(oldWriteId), 1);\n          events = events.concat(\n            this.serverSyncTree_.applyUserOverwrite(\n              transaction.path,\n              newNodeResolved,\n              transaction.currentWriteId,\n              transaction.applyLocally\n            )\n          );\n          events = events.concat(\n            this.serverSyncTree_.ackUserWrite(oldWriteId, true)\n          );\n        } else {\n          abortTransaction = true;\n          abortReason = 'nodata';\n          events = events.concat(\n            this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true)\n          );\n        }\n      }\n    }\n    this.eventQueue_.raiseEventsForChangedPath(path, events);\n    events = [];\n    if (abortTransaction) {\n      // Abort.\n      queue[i].status = TransactionStatus.COMPLETED;\n\n      // Removing a listener can trigger pruning which can muck with mergedData/visibleData (as it prunes data).\n      // So defer the unwatcher until we're done.\n      (function(unwatcher) {\n        setTimeout(unwatcher, Math.floor(0));\n      })(queue[i].unwatcher);\n\n      if (queue[i].onComplete) {\n        if (abortReason === 'nodata') {\n          const ref = new Reference(this, queue[i].path);\n          // We set this field immediately, so it's safe to cast to an actual snapshot\n          const lastInput /** @type {!Node} */ = queue[i].currentInputSnapshot;\n          const snapshot = new DataSnapshot(lastInput, ref, PRIORITY_INDEX);\n          callbacks.push(queue[i].onComplete.bind(null, null, false, snapshot));\n        } else {\n          callbacks.push(\n            queue[i].onComplete.bind(null, new Error(abortReason), false, null)\n          );\n        }\n      }\n    }\n  }\n\n  // Clean up completed transactions.\n  this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);\n\n  // Now fire callbacks, now that we're in a good, known state.\n  for (let i = 0; i < callbacks.length; i++) {\n    exceptionGuard(callbacks[i]);\n  }\n\n  // Try to send the transaction result to the server.\n  this.sendReadyTransactions_();\n};\n\n/**\n * Returns the rootmost ancestor node of the specified path that has a pending transaction on it, or just returns\n * the node for the given path if there are no pending transactions on any ancestor.\n *\n * @param {!Path} path The location to start at.\n * @return {!Tree.<Array.<!Transaction>>} The rootmost node with a transaction.\n * @private\n */\n(Repo.prototype as any).getAncestorTransactionNode_ = function(\n  path: Path\n): Tree<Transaction[]> {\n  let front;\n\n  // Start at the root and walk deeper into the tree towards path until we find a node with pending transactions.\n  let transactionNode = this.transactionQueueTree_;\n  while (\n    (front = path.getFront()) !== null &&\n    transactionNode.getValue() === null\n  ) {\n    transactionNode = transactionNode.subTree(front);\n    path = path.popFront();\n  }\n\n  return transactionNode;\n};\n\n/**\n * Builds the queue of all transactions at or below the specified transactionNode.\n *\n * @param {!Tree.<Array.<Transaction>>} transactionNode\n * @return {Array.<Transaction>} The generated queue.\n * @private\n */\n(Repo.prototype as any).buildTransactionQueue_ = function(\n  transactionNode: Tree<Transaction[]>\n): Array<Transaction> {\n  // Walk any child transaction queues and aggregate them into a single queue.\n  const transactionQueue: Transaction[] = [];\n  this.aggregateTransactionQueuesForNode_(transactionNode, transactionQueue);\n\n  // Sort them by the order the transactions were created.\n  transactionQueue.sort(function(a, b) {\n    return a.order - b.order;\n  });\n\n  return transactionQueue;\n};\n\n/**\n * @param {!Tree.<Array.<Transaction>>} node\n * @param {Array.<Transaction>} queue\n * @private\n */\n(Repo.prototype as any).aggregateTransactionQueuesForNode_ = function(\n  node: Tree<Transaction[]>,\n  queue: Array<Transaction>\n) {\n  const nodeQueue = node.getValue();\n  if (nodeQueue !== null) {\n    for (let i = 0; i < nodeQueue.length; i++) {\n      queue.push(nodeQueue[i]);\n    }\n  }\n\n  node.forEachChild(child => {\n    this.aggregateTransactionQueuesForNode_(child, queue);\n  });\n};\n\n/**\n * Remove COMPLETED transactions at or below this node in the transactionQueueTree_.\n *\n * @param {!Tree.<Array.<!Transaction>>} node\n * @private\n */\n(Repo.prototype as any).pruneCompletedTransactionsBelowNode_ = function(\n  node: Tree<Transaction[]>\n) {\n  const queue = node.getValue();\n  if (queue) {\n    let to = 0;\n    for (let from = 0; from < queue.length; from++) {\n      if (queue[from].status !== TransactionStatus.COMPLETED) {\n        queue[to] = queue[from];\n        to++;\n      }\n    }\n    queue.length = to;\n    node.setValue(queue.length > 0 ? queue : null);\n  }\n\n  node.forEachChild(childNode => {\n    this.pruneCompletedTransactionsBelowNode_(childNode);\n  });\n};\n\n/**\n * Aborts all transactions on ancestors or descendants of the specified path.  Called when doing a set() or update()\n * since we consider them incompatible with transactions.\n *\n * @param {!Path} path Path for which we want to abort related transactions.\n * @return {!Path}\n * @private\n */\n(Repo.prototype as any).abortTransactions_ = function(path: Path): Path {\n  const affectedPath = this.getAncestorTransactionNode_(path).path();\n\n  const transactionNode = this.transactionQueueTree_.subTree(path);\n\n  transactionNode.forEachAncestor((node: Tree<Transaction[]>) => {\n    this.abortTransactionsOnNode_(node);\n  });\n\n  this.abortTransactionsOnNode_(transactionNode);\n\n  transactionNode.forEachDescendant((node: Tree<Transaction[]>) => {\n    this.abortTransactionsOnNode_(node);\n  });\n\n  return affectedPath;\n};\n\n/**\n * Abort transactions stored in this transaction queue node.\n *\n * @param {!Tree.<Array.<Transaction>>} node Node to abort transactions for.\n * @private\n */\n(Repo.prototype as any).abortTransactionsOnNode_ = function(\n  node: Tree<Transaction[]>\n) {\n  const queue = node.getValue();\n  if (queue !== null) {\n    // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\n    // the callback could trigger more transactions or sets.\n    const callbacks = [];\n\n    // Go through queue.  Any already-sent transactions must be marked for abort, while the unsent ones\n    // can be immediately aborted and removed.\n    let events: Event[] = [];\n    let lastSent = -1;\n    for (let i = 0; i < queue.length; i++) {\n      if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT) {\n        // Already marked.  No action needed.\n      } else if (queue[i].status === TransactionStatus.SENT) {\n        assert(\n          lastSent === i - 1,\n          'All SENT items should be at beginning of queue.'\n        );\n        lastSent = i;\n        // Mark transaction for abort when it comes back.\n        queue[i].status = TransactionStatus.SENT_NEEDS_ABORT;\n        queue[i].abortReason = 'set';\n      } else {\n        assert(\n          queue[i].status === TransactionStatus.RUN,\n          'Unexpected transaction status in abort'\n        );\n        // We can abort it immediately.\n        queue[i].unwatcher();\n        events = events.concat(\n          this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId, true)\n        );\n        if (queue[i].onComplete) {\n          const snapshot: DataSnapshot | null = null;\n          callbacks.push(\n            queue[i].onComplete.bind(null, new Error('set'), false, snapshot)\n          );\n        }\n      }\n    }\n    if (lastSent === -1) {\n      // We're not waiting for any sent transactions.  We can clear the queue.\n      node.setValue(null);\n    } else {\n      // Remove the transactions we aborted.\n      queue.length = lastSent + 1;\n    }\n\n    // Now fire the callbacks.\n    this.eventQueue_.raiseEventsForChangedPath(node.path(), events);\n    for (let i = 0; i < callbacks.length; i++) {\n      exceptionGuard(callbacks[i]);\n    }\n  }\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp } from '@firebase/app-types';\nimport { safeGet } from '@firebase/util';\nimport { Repo } from './Repo';\nimport { fatal } from './util/util';\nimport { parseRepoInfo } from './util/libs/parser';\nimport { validateUrl } from './util/validation';\nimport './Repo_transaction';\nimport { Database } from '../api/Database';\nimport { RepoInfo } from './RepoInfo';\n\n/** @const {string} */\nconst DATABASE_URL_OPTION = 'databaseURL';\n\nlet _staticInstance: RepoManager;\n\n/**\n * Creates and caches Repo instances.\n */\nexport class RepoManager {\n  /**\n   * @private {!Object.<string, Object<string, !fb.core.Repo>>}\n   */\n  private repos_: {\n    [appName: string]: {\n      [dbUrl: string]: Repo;\n    };\n  } = {};\n\n  /**\n   * If true, new Repos will be created to use ReadonlyRestClient (for testing purposes).\n   * @private {boolean}\n   */\n  private useRestClient_: boolean = false;\n\n  static getInstance(): RepoManager {\n    if (!_staticInstance) {\n      _staticInstance = new RepoManager();\n    }\n    return _staticInstance;\n  }\n\n  // TODO(koss): Remove these functions unless used in tests?\n  interrupt() {\n    for (const appName in this.repos_) {\n      for (const dbUrl in this.repos_[appName]) {\n        this.repos_[appName][dbUrl].interrupt();\n      }\n    }\n  }\n\n  resume() {\n    for (const appName in this.repos_) {\n      for (const dbUrl in this.repos_[appName]) {\n        this.repos_[appName][dbUrl].resume();\n      }\n    }\n  }\n\n  /**\n   * This function should only ever be called to CREATE a new database instance.\n   *\n   * @param {!FirebaseApp} app\n   * @return {!Database}\n   */\n  databaseFromApp(app: FirebaseApp, url?: string): Database {\n    const dbUrl: string = url || app.options[DATABASE_URL_OPTION];\n    if (dbUrl === undefined) {\n      fatal(\n        \"Can't determine Firebase Database URL.  Be sure to include \" +\n          DATABASE_URL_OPTION +\n          ' option when calling firebase.initializeApp().'\n      );\n    }\n\n    const parsedUrl = parseRepoInfo(dbUrl);\n    const repoInfo = parsedUrl.repoInfo;\n\n    validateUrl('Invalid Firebase Database URL', 1, parsedUrl);\n    if (!parsedUrl.path.isEmpty()) {\n      fatal(\n        'Database URL must point to the root of a Firebase Database ' +\n          '(not including a child path).'\n      );\n    }\n\n    const repo = this.createRepo(repoInfo, app);\n\n    return repo.database;\n  }\n\n  /**\n   * Remove the repo and make sure it is disconnected.\n   *\n   * @param {!Repo} repo\n   */\n  deleteRepo(repo: Repo) {\n    const appRepos = safeGet(this.repos_, repo.app.name);\n    // This should never happen...\n    if (!appRepos || safeGet(appRepos, repo.repoInfo_.toURLString()) !== repo) {\n      fatal(\n        `Database ${repo.app.name}(${repo.repoInfo_}) has already been deleted.`\n      );\n    }\n    repo.interrupt();\n    delete appRepos[repo.repoInfo_.toURLString()];\n  }\n\n  /**\n   * Ensures a repo doesn't already exist and then creates one using the\n   * provided app.\n   *\n   * @param {!RepoInfo} repoInfo The metadata about the Repo\n   * @param {!FirebaseApp} app\n   * @return {!Repo} The Repo object for the specified server / repoName.\n   */\n  createRepo(repoInfo: RepoInfo, app: FirebaseApp): Repo {\n    let appRepos = safeGet(this.repos_, app.name);\n\n    if (!appRepos) {\n      appRepos = {};\n      this.repos_[app.name] = appRepos;\n    }\n\n    let repo = safeGet(appRepos, repoInfo.toURLString());\n    if (repo) {\n      fatal(\n        'Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.'\n      );\n    }\n    repo = new Repo(repoInfo, this.useRestClient_, app);\n    appRepos[repoInfo.toURLString()] = repo;\n\n    return repo;\n  }\n\n  /**\n   * Forces us to use ReadonlyRestClient instead of PersistentConnection for new Repos.\n   * @param {boolean} forceRestClient\n   */\n  forceRestClient(forceRestClient: boolean) {\n    this.useRestClient_ = forceRestClient;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { fatal } from '../core/util/util';\nimport { parseRepoInfo } from '../core/util/libs/parser';\nimport { Path } from '../core/util/Path';\nimport { Reference } from './Reference';\nimport { Repo } from '../core/Repo';\nimport { RepoManager } from '../core/RepoManager';\nimport { validateArgCount } from '@firebase/util';\nimport { validateUrl } from '../core/util/validation';\nimport { FirebaseApp } from '@firebase/app-types';\nimport { FirebaseService } from '@firebase/app-types/private';\nimport { RepoInfo } from '../core/RepoInfo';\n\n/**\n * Class representing a firebase database.\n * @implements {FirebaseService}\n */\nexport class Database implements FirebaseService {\n  INTERNAL: DatabaseInternals;\n  private root_: Reference;\n\n  static readonly ServerValue = {\n    TIMESTAMP: {\n      '.sv': 'timestamp'\n    }\n  };\n\n  /**\n   * The constructor should not be called by users of our public API.\n   * @param {!Repo} repo_\n   */\n  constructor(private repo_: Repo) {\n    if (!(repo_ instanceof Repo)) {\n      fatal(\n        \"Don't call new Database() directly - please use firebase.database().\"\n      );\n    }\n\n    /** @type {Reference} */\n    this.root_ = new Reference(repo_, Path.Empty);\n\n    this.INTERNAL = new DatabaseInternals(this);\n  }\n\n  get app(): FirebaseApp {\n    return this.repo_.app;\n  }\n\n  /**\n   * Returns a reference to the root or to the path specified in the provided\n   * argument.\n\n   * @param {string|Reference=} path The relative string path or an existing\n   * Reference to a database location.\n   * @throws If a Reference is provided, throws if it does not belong to the\n   * same project.\n   * @return {!Reference} Firebase reference.\n   **/\n  ref(path?: string): Reference;\n  ref(path?: Reference): Reference;\n  ref(path?: string | Reference): Reference {\n    this.checkDeleted_('ref');\n    validateArgCount('database.ref', 0, 1, arguments.length);\n\n    if (path instanceof Reference) {\n      return this.refFromURL(path.toString());\n    }\n\n    return path !== undefined ? this.root_.child(path) : this.root_;\n  }\n\n  /**\n   * Returns a reference to the root or the path specified in url.\n   * We throw a exception if the url is not in the same domain as the\n   * current repo.\n   * @param {string} url\n   * @return {!Reference} Firebase reference.\n   */\n  refFromURL(url: string): Reference {\n    /** @const {string} */\n    const apiName = 'database.refFromURL';\n    this.checkDeleted_(apiName);\n    validateArgCount(apiName, 1, 1, arguments.length);\n    const parsedURL = parseRepoInfo(url);\n    validateUrl(apiName, 1, parsedURL);\n\n    const repoInfo = parsedURL.repoInfo;\n    if (repoInfo.host !== ((this.repo_ as any).repoInfo_ as RepoInfo).host) {\n      fatal(\n        apiName +\n          ': Host name does not match the current database: ' +\n          '(found ' +\n          repoInfo.host +\n          ' but expected ' +\n          ((this.repo_ as any).repoInfo_ as RepoInfo).host +\n          ')'\n      );\n    }\n\n    return this.ref(parsedURL.path.toString());\n  }\n\n  /**\n   * @param {string} apiName\n   */\n  private checkDeleted_(apiName: string) {\n    if (this.repo_ === null) {\n      fatal('Cannot call ' + apiName + ' on a deleted database.');\n    }\n  }\n\n  // Make individual repo go offline.\n  goOffline() {\n    validateArgCount('database.goOffline', 0, 0, arguments.length);\n    this.checkDeleted_('goOffline');\n    this.repo_.interrupt();\n  }\n\n  goOnline() {\n    validateArgCount('database.goOnline', 0, 0, arguments.length);\n    this.checkDeleted_('goOnline');\n    this.repo_.resume();\n  }\n}\n\nexport class DatabaseInternals {\n  /** @param {!Database} database */\n  constructor(public database: Database) {}\n\n  /** @return {Promise<void>} */\n  async delete(): Promise<void> {\n    (this.database as any).checkDeleted_('delete');\n    RepoManager.getInstance().deleteRepo((this.database as any).repo_ as Repo);\n\n    (this.database as any).repo_ = null;\n    (this.database as any).root_ = null;\n    this.database.INTERNAL = null;\n    this.database = null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { WebSocketConnection } from '../realtime/WebSocketConnection';\nimport { BrowserPollConnection } from '../realtime/BrowserPollConnection';\nimport { Reference } from './Reference';\n\n/**\n * INTERNAL methods for internal-use only (tests, etc.).\n *\n * Customers shouldn't use these or else should be aware that they could break at any time.\n *\n * @const\n */\n\nexport const forceLongPolling = function() {\n  WebSocketConnection.forceDisallow();\n  BrowserPollConnection.forceAllow();\n};\n\nexport const forceWebSockets = function() {\n  BrowserPollConnection.forceDisallow();\n};\n\n/* Used by App Manager */\nexport const isWebSocketsAvailable = function(): boolean {\n  return WebSocketConnection['isAvailable']();\n};\n\nexport const setSecurityDebugCallback = function(\n  ref: Reference,\n  callback: (a: Object) => void\n) {\n  (ref.repo.persistentConnection_ as any).securityDebugCallback_ = callback;\n};\n\nexport const stats = function(ref: Reference, showDelta?: boolean) {\n  ref.repo.stats(showDelta);\n};\n\nexport const statsIncrementCounter = function(ref: Reference, metric: string) {\n  ref.repo.statsIncrementCounter(metric);\n};\n\nexport const dataUpdateCount = function(ref: Reference): number {\n  return ref.repo.dataUpdateCount;\n};\n\nexport const interceptServerData = function(\n  ref: Reference,\n  callback: ((a: string, b: any) => void) | null\n) {\n  return ref.repo.interceptServerData_(callback);\n};\n","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RepoInfo } from '../core/RepoInfo';\nimport { PersistentConnection } from '../core/PersistentConnection';\nimport { RepoManager } from '../core/RepoManager';\nimport { Connection } from '../realtime/Connection';\nimport { Query } from './Query';\n\nexport const DataConnection = PersistentConnection;\n\n/**\n * @param {!string} pathString\n * @param {function(*)} onComplete\n */\n(PersistentConnection.prototype as any).simpleListen = function(\n  pathString: string,\n  onComplete: (a: any) => void\n) {\n  this.sendRequest('q', { p: pathString }, onComplete);\n};\n\n/**\n * @param {*} data\n * @param {function(*)} onEcho\n */\n(PersistentConnection.prototype as any).echo = function(\n  data: any,\n  onEcho: (a: any) => void\n) {\n  this.sendRequest('echo', { d: data }, onEcho);\n};\n\n// RealTimeConnection properties that we use in tests.\nexport const RealTimeConnection = Connection;\n\n/**\n * @param {function(): string} newHash\n * @return {function()}\n */\nexport const hijackHash = function(newHash: () => string) {\n  const oldPut = PersistentConnection.prototype.put;\n  PersistentConnection.prototype.put = function(\n    pathString,\n    data,\n    opt_onComplete,\n    opt_hash\n  ) {\n    if (opt_hash !== undefined) {\n      opt_hash = newHash();\n    }\n    oldPut.call(this, pathString, data, opt_onComplete, opt_hash);\n  };\n  return function() {\n    PersistentConnection.prototype.put = oldPut;\n  };\n};\n\n/**\n * @type {function(new:RepoInfo, !string, boolean, !string, boolean): undefined}\n */\nexport const ConnectionTarget = RepoInfo;\n\n/**\n * @param {!Query} query\n * @return {!string}\n */\nexport const queryIdentifier = function(query: Query) {\n  return query.queryIdentifier();\n};\n\n/**\n * @param {!Query} firebaseRef\n * @return {!Object}\n */\nexport const listens = function(firebaseRef: Query) {\n  return (firebaseRef.repo.persistentConnection_ as any).listens_;\n};\n\n/**\n * Forces the RepoManager to create Repos that use ReadonlyRestClient instead of PersistentConnection.\n *\n * @param {boolean} forceRestClient\n */\nexport const forceRestClient = function(forceRestClient: boolean) {\n  RepoManager.getInstance().forceRestClient(forceRestClient);\n};\n","import firebase from './firebase'\nimport 'firebase/database'\n\nexport default firebase.database()","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var Vue // late bind\nvar version\nvar map = Object.create(null)\nif (typeof window !== 'undefined') {\n  window.__VUE_HOT_MAP__ = map\n}\nvar installed = false\nvar isBrowserify = false\nvar initHookName = 'beforeCreate'\n\nexports.install = function (vue, browserify) {\n  if (installed) { return }\n  installed = true\n\n  Vue = vue.__esModule ? vue.default : vue\n  version = Vue.version.split('.').map(Number)\n  isBrowserify = browserify\n\n  // compat with < 2.0.0-alpha.7\n  if (Vue.config._lifecycleHooks.indexOf('init') > -1) {\n    initHookName = 'init'\n  }\n\n  exports.compatible = version[0] >= 2\n  if (!exports.compatible) {\n    console.warn(\n      '[HMR] You are using a version of vue-hot-reload-api that is ' +\n        'only compatible with Vue.js core ^2.0.0.'\n    )\n    return\n  }\n}\n\n/**\n * Create a record for a hot module, which keeps track of its constructor\n * and instances\n *\n * @param {String} id\n * @param {Object} options\n */\n\nexports.createRecord = function (id, options) {\n  if(map[id]) { return }\n\n  var Ctor = null\n  if (typeof options === 'function') {\n    Ctor = options\n    options = Ctor.options\n  }\n  makeOptionsHot(id, options)\n  map[id] = {\n    Ctor: Ctor,\n    options: options,\n    instances: []\n  }\n}\n\n/**\n * Check if module is recorded\n *\n * @param {String} id\n */\n\nexports.isRecorded = function (id) {\n  return typeof map[id] !== 'undefined'\n}\n\n/**\n * Make a Component options object hot.\n *\n * @param {String} id\n * @param {Object} options\n */\n\nfunction makeOptionsHot(id, options) {\n  if (options.functional) {\n    var render = options.render\n    options.render = function (h, ctx) {\n      var instances = map[id].instances\n      if (ctx && instances.indexOf(ctx.parent) < 0) {\n        instances.push(ctx.parent)\n      }\n      return render(h, ctx)\n    }\n  } else {\n    injectHook(options, initHookName, function() {\n      var record = map[id]\n      if (!record.Ctor) {\n        record.Ctor = this.constructor\n      }\n      record.instances.push(this)\n    })\n    injectHook(options, 'beforeDestroy', function() {\n      var instances = map[id].instances\n      instances.splice(instances.indexOf(this), 1)\n    })\n  }\n}\n\n/**\n * Inject a hook to a hot reloadable component so that\n * we can keep track of it.\n *\n * @param {Object} options\n * @param {String} name\n * @param {Function} hook\n */\n\nfunction injectHook(options, name, hook) {\n  var existing = options[name]\n  options[name] = existing\n    ? Array.isArray(existing) ? existing.concat(hook) : [existing, hook]\n    : [hook]\n}\n\nfunction tryWrap(fn) {\n  return function (id, arg) {\n    try {\n      fn(id, arg)\n    } catch (e) {\n      console.error(e)\n      console.warn(\n        'Something went wrong during Vue component hot-reload. Full reload required.'\n      )\n    }\n  }\n}\n\nfunction updateOptions (oldOptions, newOptions) {\n  for (var key in oldOptions) {\n    if (!(key in newOptions)) {\n      delete oldOptions[key]\n    }\n  }\n  for (var key$1 in newOptions) {\n    oldOptions[key$1] = newOptions[key$1]\n  }\n}\n\nexports.rerender = tryWrap(function (id, options) {\n  var record = map[id]\n  if (!options) {\n    record.instances.slice().forEach(function (instance) {\n      instance.$forceUpdate()\n    })\n    return\n  }\n  if (typeof options === 'function') {\n    options = options.options\n  }\n  if (record.Ctor) {\n    record.Ctor.options.render = options.render\n    record.Ctor.options.staticRenderFns = options.staticRenderFns\n    record.instances.slice().forEach(function (instance) {\n      instance.$options.render = options.render\n      instance.$options.staticRenderFns = options.staticRenderFns\n      // reset static trees\n      // pre 2.5, all static trees are cached together on the instance\n      if (instance._staticTrees) {\n        instance._staticTrees = []\n      }\n      // 2.5.0\n      if (Array.isArray(record.Ctor.options.cached)) {\n        record.Ctor.options.cached = []\n      }\n      // 2.5.3\n      if (Array.isArray(instance.$options.cached)) {\n        instance.$options.cached = []\n      }\n\n      // post 2.5.4: v-once trees are cached on instance._staticTrees.\n      // Pure static trees are cached on the staticRenderFns array\n      // (both already reset above)\n\n      // 2.6: temporarily mark rendered scoped slots as unstable so that\n      // child components can be forced to update\n      var restore = patchScopedSlots(instance)\n      instance.$forceUpdate()\n      instance.$nextTick(restore)\n    })\n  } else {\n    // functional or no instance created yet\n    record.options.render = options.render\n    record.options.staticRenderFns = options.staticRenderFns\n\n    // handle functional component re-render\n    if (record.options.functional) {\n      // rerender with full options\n      if (Object.keys(options).length > 2) {\n        updateOptions(record.options, options)\n      } else {\n        // template-only rerender.\n        // need to inject the style injection code for CSS modules\n        // to work properly.\n        var injectStyles = record.options._injectStyles\n        if (injectStyles) {\n          var render = options.render\n          record.options.render = function (h, ctx) {\n            injectStyles.call(ctx)\n            return render(h, ctx)\n          }\n        }\n      }\n      record.options._Ctor = null\n      // 2.5.3\n      if (Array.isArray(record.options.cached)) {\n        record.options.cached = []\n      }\n      record.instances.slice().forEach(function (instance) {\n        instance.$forceUpdate()\n      })\n    }\n  }\n})\n\nexports.reload = tryWrap(function (id, options) {\n  var record = map[id]\n  if (options) {\n    if (typeof options === 'function') {\n      options = options.options\n    }\n    makeOptionsHot(id, options)\n    if (record.Ctor) {\n      if (version[1] < 2) {\n        // preserve pre 2.2 behavior for global mixin handling\n        record.Ctor.extendOptions = options\n      }\n      var newCtor = record.Ctor.super.extend(options)\n      record.Ctor.options = newCtor.options\n      record.Ctor.cid = newCtor.cid\n      record.Ctor.prototype = newCtor.prototype\n      if (newCtor.release) {\n        // temporary global mixin strategy used in < 2.0.0-alpha.6\n        newCtor.release()\n      }\n    } else {\n      updateOptions(record.options, options)\n    }\n  }\n  record.instances.slice().forEach(function (instance) {\n    if (instance.$vnode && instance.$vnode.context) {\n      instance.$vnode.context.$forceUpdate()\n    } else {\n      console.warn(\n        'Root or manually mounted instance modified. Full reload required.'\n      )\n    }\n  })\n})\n\n// 2.6 optimizes template-compiled scoped slots and skips updates if child\n// only uses scoped slots. We need to patch the scoped slots resolving helper\n// to temporarily mark all scoped slots as unstable in order to force child\n// updates.\nfunction patchScopedSlots (instance) {\n  if (!instance._u) { return }\n  // https://github.com/vuejs/vue/blob/dev/src/core/instance/render-helpers/resolve-scoped-slots.js\n  var original = instance._u\n  instance._u = function (slots) {\n    try {\n      // 2.6.4 ~ 2.6.6\n      return original(slots, true)\n    } catch (e) {\n      // 2.5 / >= 2.6.7\n      return original(slots, null, true)\n    }\n  }\n  return function () {\n    instance._u = original\n  }\n}\n","<script>\n  export default {\n    name: 'Slider',\n    \n    props: {\n      config: Object,\n      precision: {\n        type: Number,\n        default: 10000\n      }\n    },\n\n    computed: {\n      value: {\n        get () {\n          return Math.round(this.config.value * this.precision)\n        },\n\n        set (value) {\n          this.config.value = Math.round(Number(value)) / this.precision\n        }\n      },\n\n      min: {\n        get () {\n          return this.config.min\n        },\n\n        set (value) {\n          this.config.min = Number(value)\n        }\n      },\n\n      max: {\n        get () {\n          return this.config.max\n        },\n\n        set (value) {\n          this.config.max = Number(value)\n        }\n      }\n    },\n\n    methods: {\n      output (event) {\n        var value = Number(event.target.value)\n        this.config.value = Math.round(value) / this.precision\n      }\n    }\n  }\n</script>\n\n<template>\n  <tr :class=\"$style.module\">\n    <td>\n      <label :class=\"$style.name\">{{ config.name }}</label>\n    </td>\n\n    <td>\n      <input :class=\"$style.text\" type=\"number\" v-model=\"min\"/>\n      <input :class=\"$style.slider\" type=\"range\" v-model=\"value\" min=\"0\" :max=\"precision\" />\n      <input :class=\"$style.text\" type=\"number\" v-model=\"max\"/>\n    </td>\n  </tr>\n</template>\n\n<style module>\n  .module {\n    color: inherit;\n    /* display: flex; */\n    /* align-items: center; */\n  }\n\n  .name {\n    padding-right: 1rem;\n  }\n\n  .text::-webkit-inner-spin-button,\n  .text::-webkit-inner-spin-button {\n    -webkit-appearance: none; \n    margin: 0;\n  }\n  \n  .text {\n    width: 6ch;\n    color: inherit;\n    text-align: center;\n    background: transparent;\n    border: 1px solid grey;\n    border-radius: 4px;\n    padding: 2px 0;\n  }\n\n  .slider {\n    margin: auto 10px;\n    max-width: 80px;\n    vertical-align: sub;\n  }\n</style>\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nmodule.exports = merge;\n","var env = (namespace = '') => {\n  namespace = namespace + ':'\n\n  return {\n    at (key) {\n      return env(namespace + key)\n    },\n\n    clear () {\n      return localStorage.clear()\n    },\n\n    delete (key) {\n      return localStorage.removeItem(namespace + key)\n    },\n\n    get (key, fallback) {\n      var value = localStorage.getItem(namespace + key)\n      return value === null ? fallback : JSON.parse(value)\n    },\n\n    has (key) {\n      return localStorage.getItem(namespace + key) !== null\n    },\n\n    set (key, value) {\n      localStorage.setItem(namespace + key, JSON.stringify(value))\n      return value\n    },\n  }\n}\n\nexport default env('v1')","<script>\n  import defaultsDeep from 'lodash/defaultsDeep'\n  import database from '../firebase/database.js'\n  import config from '../config.js'\n  import slider from './slider.vue'\n  import merge from 'lodash/merge'\n  import env from '../env.js'\n  import Vue from 'vue'\n\n  export default {\n    name: 'Editor',\n\n    components: {\n      slider\n    },\n\n    data () {\n      return {\n        name: null,\n        configs: {},\n        visible: env.get('visible'),\n        selection: null,\n      }\n    },\n    \n    computed: {\n      config () {\n        return (\n          this.selection && \n          this.configs[this.selection] &&\n          config.use(this.configs[this.selection].config)\n        )\n      }\n    },\n\n    created () {\n      this.model = database.ref('animation')\n      this.model.on('child_added', this.add)\n      this.model.on('child_removed', this.remove)\n    },\n\n    methods: {\n      toggle () {\n        this.visible = !this.visible\n        env.set('visible', this.visible)\n      },\n\n      add (snap) {\n        Vue.set(this.configs, snap.key, snap.val())\n        snap.ref.on('value', this.update)\n\n        if (!this.selection) {\n          this.selection = snap.key\n        }\n      },\n\n      remove (snap) {\n        Vue.delete(this.configs, snap.key)\n        snap.ref.off('value', this.update)\n\n        if (this.selection === snap.key) {\n          this.selection = Object.keys(this.configs)[0]\n        }\n      },\n\n      update (snap) {\n        this.configs[snap.key] = snap.val()\n      },\n\n      create () {\n        this.selection = this.model.push({\n          name: 'Untitled',\n          config: config.default()\n        }).key\n      },\n\n      copy () {\n        this.selection = this.model.push(\n          this.configs[this.selection]\n        ).key\n      },\n\n      save () {\n        this.model.child(this.selection).child('config').set(this.config)\n      },\n\n      rename () {\n        if (this.name) {\n          this.model.child(this.selection).child('name').set(this.name)\n          this.blur()\n        } else {\n          this.name = this.configs[this.selection].name\n        }\n      },\n\n      destroy () {\n        this.model.child(this.selection).set(null)\n      },\n\n      blur () {\n        this.name = null\n      }\n    }\n  }\n</script>\n\n<template>\n  <div :class=\"$style.module\">\n    <div >\n      <span v-if=\"visible\" :class=\"$style.button\" @click=\"toggle\">hide</span>\n      <span v-else :class=\"$style.button\" @click=\"toggle\">edit</span>\n    </div>\n\n    <table v-if=\"visible\">\n      <tr>\n        <td>Config</td>\n        <td>\n          <select v-if=\"name === null\" v-model=\"selection\">\n            <option disabled value=\"\">Please select one</option>\n            <option\n              v-for=\"(config, key) in configs\"\n              v-text=\"config.name\"\n              :value=\"key\"\n              :key=\"key\"\n            />\n          </select>\n          \n          <input v-else type=\"text\" v-model=\"name\" @keydown.enter=\"rename\" @blur=\"blur\">\n        </td>\n      </tr>\n\n      <tr>\n        <td></td>\n        <td>\n          <span :class=\"$style.button\" @click=\"create\">new</span>\n          <template v-if=\"config\">\n            <span :class=\"$style.button\" @click=\"copy\">copy</span>\n            <span :class=\"$style.button\" @click=\"rename\">rename</span>\n            <span :class=\"$style.button\" @click=\"save\">save</span>\n            <span :class=\"$style.button\" @click=\"destroy\">delete</span>\n          </template>\n        </td>\n      </tr>\n\n      <template v-if=\"config\">\n        <slider v-for=\"(value, key) in config\" v-bind:config=\"value\" :name=\"key\" :key=\"key\" />\n      </template>\n    </table>\n  </div>\n</template>\n\n<style module>\n  .module {\n    top: 0;\n    left: 0;\n    z-index: 10;\n    padding: 10px;\n    position: absolute;\n    background: rgba(50,50,50,0.7);\n    font-size: 12px;\n  }\n\n  .button {\n    cursor: pointer;\n    padding: 4px;\n  }\n</style>\n\n\n","import Vue from 'vue'\nimport editor from './views/editor'\n\nexport default new Vue({\n  el: document.body.appendChild(\n    document.createElement('div')\n  ),\n\n  render (h) {\n    return h(editor)\n  }\n})","import './animation/animation.js';\nimport './editor/editor.js';\n\n"]}