{"version":3,"file":"main.js","sources":["../../scripts/main.js"],"sourcesContent":["import '../styles/all.scss'\n// vertex shader\nimport fs from './shaders/ashima.fs'\nimport vs from './shaders/ashima.vs'\n\n// get mouse position for GL uniform\nfunction getRelativeMousePosition(event, target) {\n  target = target || event.target;\n  var rect = target.getBoundingClientRect();\n\n  return {\n    x: event.clientX - rect.left,\n    y: event.clientY - rect.top,\n  }\n}\n\n// assumes target or event.target is canvas\nfunction getNoPaddingNoBorderCanvasRelativeMousePosition(event, target) {\n  target = target || event.target;\n  var pos = getRelativeMousePosition(event, target);\n\n  pos.x = pos.x * target.width  / target.clientWidth;\n  pos.y = pos.y * target.height / target.clientHeight;\n\n  return pos;\n}\n\n// resize canvas\nfunction resize(canvas) {\n  // Lookup the size the browser is displaying the canvas.\n  var displayWidth  = canvas.clientWidth;\n  var displayHeight = canvas.clientHeight;\n\n  // Check if the canvas is not the same size.\n  if (canvas.width  !== displayWidth ||\n      canvas.height !== displayHeight) {\n\n    // Make the canvas the same size\n    canvas.width  = displayWidth;\n    canvas.height = displayHeight;\n  }\n}\n\n\n// init webgl\nlet mousePos = {x: 0, y: 0};\nconst gl = document.querySelector(\".shader\").getContext(\"webgl\");\nconst programInfo = twgl.createProgramInfo(gl, [vs, fs]);\n\nconst arrays = {\n  position: [-1, -1, 0, 1, -1, 0, -1, 1, 0, -1, 1, 0, 1, -1, 0, 1, 1, 0],\n};\n\nconst bufferInfo = twgl.createBufferInfoFromArrays(gl, arrays);\nconst textures = twgl.createTextures(gl, {\n  noise: { src: \"/images/noise.png\", mag: gl.NEAREST },\n  ashima1: { src: \"/images/ashima1.png\" },\n  ashima2: { src: \"/images/ashima2.png\" }\n});\n\nfunction render(time) {\n  twgl.resizeCanvasToDisplaySize(gl.canvas, 1); //use window.devicePixelRatio if you want retina, we might not though...\n  gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\n  const uniforms = {\n    u_time: time * 0.001,\n    u_resolution: [gl.canvas.width, gl.canvas.height],\n    u_mouse: [mousePos.x, mousePos.y],\n    u_texture: textures.noise,\n    u_ashima1: textures.ashima1,\n    u_ashima2: textures.ashima2\n  };\n\n  gl.useProgram(programInfo.program);\n  twgl.setBuffersAndAttributes(gl, programInfo, bufferInfo);\n  twgl.setUniforms(programInfo, uniforms);\n  twgl.drawBufferInfo(gl, bufferInfo);\n\n  requestAnimationFrame(render);\n}\n\nrequestAnimationFrame(render);\n\n\n// attach listener for updating mouse position uniform\nwindow.addEventListener('mousemove', e => {\n  const pos = getNoPaddingNoBorderCanvasRelativeMousePosition(e, gl.canvas);\n\n  // pos is in pixel coordinates for the canvas.\n  // so convert to WebGL clip space coordinates\n  const x = pos.x / gl.canvas.width  *  2 - 1;\n  const y = pos.y / gl.canvas.height * -2 + 1;\n\n  mousePos.x = x;\n  mousePos.y = y;\n});"],"names":["render","time","twgl","resizeCanvasToDisplaySize","gl","canvas","viewport","width","height","u_time","u_resolution","u_mouse","mousePos","x","y","u_texture","textures","noise","u_ashima1","ashima1","u_ashima2","ashima2","useProgram","programInfo","program","setBuffersAndAttributes","bufferInfo","setUniforms","uniforms","drawBufferInfo","requestAnimationFrame","position","src","mag","NEAREST","window","addEventListener","e","target","rect","getBoundingClientRect","clientX","left","clientY","top","clientWidth","clientHeight"],"mappings":"yBA4DAA,QAASA,EAAM,CAACC,CAAD,CAAO,CACpBC,IAAAC,0BAAA,CAA+BC,CAAAC,OAA/B,CAA0C,CAA1C,CACAD,EAAAE,SAAA,CAAY,CAAZ,CAAe,CAAf,CAAkBF,CAAAC,OAAAE,MAAlB,CAAmCH,CAAAC,OAAAG,OAAnC,KAGEC,OAAe,IAAfA,CAAQR,EACRS,aAAc,CAACN,CAAAC,OAAAE,MAAD,CAAkBH,CAAAC,OAAAG,OAAlB,EACdG,QAAS,CAACC,CAAAC,EAAD,CAAaD,CAAAE,EAAb,EACTC,UAAWC,CAAAC,OACXC,UAAWF,CAAAG,SACXC,UAAWJ,CAAAK,SAGbjB,EAAAkB,WAAA,CAAcC,CAAAC,QAAd,CACAtB,KAAAuB,wBAAA,CAA6BrB,CAA7B,CAAiCmB,CAAjC,CAA8CG,CAA9C,CACAxB,KAAAyB,YAAA,CAAiBJ,CAAjB,CAA8BK,CAA9B,CACA1B,KAAA2B,eAAA,CAAoBzB,CAApB,CAAwBsB,CAAxB,CAEAI,sBAAA,CAAsB9B,CAAtB,CAlBoB,CAftB,IAAIY,EAAW,CAACC,EAAG,CAAJ,CAAOC,EAAG,CAAV,CAAf,wDAAA,4BAE6C,wEAAA;m+EAAA,EAF7C;qCAKEiB,SAAU,CAAE,EAAF,CAAM,EAAN,CAAS,CAAT,CAAY,CAAZ,CAAgB,EAAhB,CAAmB,CAAnB,CAAuB,EAAvB,CAA0B,CAA1B,CAA6B,CAA7B,CAAiC,EAAjC,CAAoC,CAApC,CAAuC,CAAvC,CAA0C,CAA1C,CAA8C,EAA9C,CAAiD,CAAjD,CAAoD,CAApD,CAAuD,CAAvD,CAA0D,CAA1D,GALZ,yBASuC,CACrCd,MAAO,CAAEe,IAAK,mBAAP,CAA4BC,IAAK7B,CAAA8B,QAAjC,CAD8B,CAErCf,QAAS,CAAEa,IAAK,qBAAP,CAF4B,CAGrCX,QAAS,CAAEW,IAAK,qBAAP,CAH4B,EA2BvCF,sBAAA,CAAsB9B,CAAtB,CAIAmC,OAAAC,iBAAA,CAAwB,WAAxB,CAAqCC,CAAA,EAAK,CACqBhC,IAAAA,EAAAD,CAAAC,OA/E7D,KAAAiC,GAWAA,CAXAA,CAWSA,CAXTA,GAWmBA,OAXnBA,IAAmBA,OACnB,KAAIC,EAAOD,CAAAE,sBAAA,EAEX,EAAA,EACKC,QADL,CACqBF,CAAAG,KADrB,EAAA,EAEKC,QAFL,CAEqBJ,CAAAK,IASrB/B,EAAA,CAAQA,CAAR,CAAgByB,CAAA/B,MAAhB,CAAgC+B,CAAAO,YAChC/B,EAAA,CAAQA,CAAR,CAAgBwB,CAAA9B,OAAhB,CAAgC8B,CAAAQ,sCAuEhClC,EAAAC,EAAA;CAAA,eAAA,EAAA,EACAD,EAAAE,EAAA,CAAaA,CAT2B,CAA1C;"}